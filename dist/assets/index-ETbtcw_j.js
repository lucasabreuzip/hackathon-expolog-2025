var RB=Object.defineProperty;var DC=e=>{throw TypeError(e)};var zB=(e,t,r)=>t in e?RB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var le=(e,t,r)=>zB(e,typeof t!="symbol"?t+"":t,r),ux=(e,t,r)=>t.has(e)||DC("Cannot "+r);var Le=(e,t,r)=>(ux(e,t,"read from private field"),r?r.call(e):t.get(e)),mr=(e,t,r)=>t.has(e)?DC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ht=(e,t,r,n)=>(ux(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Gn=(e,t,r)=>(ux(e,t,"access private method"),r);var kp=(e,t,r,n)=>({set _(s){Ht(e,t,s,r)},get _(){return Le(e,t,n)}});function BB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var VB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var VI={exports:{}},Fh={},WI={exports:{}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=Symbol.for("react.element"),WB=Symbol.for("react.portal"),UB=Symbol.for("react.fragment"),GB=Symbol.for("react.strict_mode"),HB=Symbol.for("react.profiler"),qB=Symbol.for("react.provider"),KB=Symbol.for("react.context"),QB=Symbol.for("react.forward_ref"),XB=Symbol.for("react.suspense"),YB=Symbol.for("react.memo"),ZB=Symbol.for("react.lazy"),OC=Symbol.iterator;function JB(e){return e===null||typeof e!="object"?null:(e=OC&&e[OC]||e["@@iterator"],typeof e=="function"?e:null)}var UI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GI=Object.assign,HI={};function vd(e,t,r){this.props=e,this.context=t,this.refs=HI,this.updater=r||UI}vd.prototype.isReactComponent={};vd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qI(){}qI.prototype=vd.prototype;function By(e,t,r){this.props=e,this.context=t,this.refs=HI,this.updater=r||UI}var Vy=By.prototype=new qI;Vy.constructor=By;GI(Vy,vd.prototype);Vy.isPureReactComponent=!0;var FC=Array.isArray,KI=Object.prototype.hasOwnProperty,Wy={current:null},QI={key:!0,ref:!0,__self:!0,__source:!0};function XI(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)KI.call(t,n)&&!QI.hasOwnProperty(n)&&(s[n]=t[n]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var l=Array(i),d=0;d<i;d++)l[d]=arguments[d+2];s.children=l}if(e&&e.defaultProps)for(n in i=e.defaultProps,i)s[n]===void 0&&(s[n]=i[n]);return{$$typeof:wm,type:e,key:a,ref:o,props:s,_owner:Wy.current}}function eV(e,t){return{$$typeof:wm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uy(e){return typeof e=="object"&&e!==null&&e.$$typeof===wm}function tV(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var LC=/\/+/g;function mx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tV(""+e.key):t.toString(36)}function xf(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case wm:case WB:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+mx(o,0):n,FC(s)?(r="",e!=null&&(r=e.replace(LC,"$&/")+"/"),xf(s,t,r,"",function(d){return d})):s!=null&&(Uy(s)&&(s=eV(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(LC,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",FC(e))for(var i=0;i<e.length;i++){a=e[i];var l=n+mx(a,i);o+=xf(a,t,r,l,s)}else if(l=JB(e),typeof l=="function")for(e=l.call(e),i=0;!(a=e.next()).done;)a=a.value,l=n+mx(a,i++),o+=xf(a,t,r,l,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function jp(e,t,r){if(e==null)return e;var n=[],s=0;return xf(e,n,"","",function(a){return t.call(r,a,s++)}),n}function rV(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var os={current:null},vf={transition:null},nV={ReactCurrentDispatcher:os,ReactCurrentBatchConfig:vf,ReactCurrentOwner:Wy};function YI(){throw Error("act(...) is not supported in production builds of React.")}rr.Children={map:jp,forEach:function(e,t,r){jp(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return jp(e,function(){t++}),t},toArray:function(e){return jp(e,function(t){return t})||[]},only:function(e){if(!Uy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};rr.Component=vd;rr.Fragment=UB;rr.Profiler=HB;rr.PureComponent=By;rr.StrictMode=GB;rr.Suspense=XB;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nV;rr.act=YI;rr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=GI({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Wy.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(l in t)KI.call(t,l)&&!QI.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&i!==void 0?i[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){i=Array(l);for(var d=0;d<l;d++)i[d]=arguments[d+2];n.children=i}return{$$typeof:wm,type:e.type,key:s,ref:a,props:n,_owner:o}};rr.createContext=function(e){return e={$$typeof:KB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qB,_context:e},e.Consumer=e};rr.createElement=XI;rr.createFactory=function(e){var t=XI.bind(null,e);return t.type=e,t};rr.createRef=function(){return{current:null}};rr.forwardRef=function(e){return{$$typeof:QB,render:e}};rr.isValidElement=Uy;rr.lazy=function(e){return{$$typeof:ZB,_payload:{_status:-1,_result:e},_init:rV}};rr.memo=function(e,t){return{$$typeof:YB,type:e,compare:t===void 0?null:t}};rr.startTransition=function(e){var t=vf.transition;vf.transition={};try{e()}finally{vf.transition=t}};rr.unstable_act=YI;rr.useCallback=function(e,t){return os.current.useCallback(e,t)};rr.useContext=function(e){return os.current.useContext(e)};rr.useDebugValue=function(){};rr.useDeferredValue=function(e){return os.current.useDeferredValue(e)};rr.useEffect=function(e,t){return os.current.useEffect(e,t)};rr.useId=function(){return os.current.useId()};rr.useImperativeHandle=function(e,t,r){return os.current.useImperativeHandle(e,t,r)};rr.useInsertionEffect=function(e,t){return os.current.useInsertionEffect(e,t)};rr.useLayoutEffect=function(e,t){return os.current.useLayoutEffect(e,t)};rr.useMemo=function(e,t){return os.current.useMemo(e,t)};rr.useReducer=function(e,t,r){return os.current.useReducer(e,t,r)};rr.useRef=function(e){return os.current.useRef(e)};rr.useState=function(e){return os.current.useState(e)};rr.useSyncExternalStore=function(e,t,r){return os.current.useSyncExternalStore(e,t,r)};rr.useTransition=function(){return os.current.useTransition()};rr.version="18.3.1";WI.exports=rr;var k=WI.exports;const nt=zy(k),Gy=BB({__proto__:null,default:nt},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sV=k,aV=Symbol.for("react.element"),oV=Symbol.for("react.fragment"),iV=Object.prototype.hasOwnProperty,lV=sV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cV={key:!0,ref:!0,__self:!0,__source:!0};function ZI(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)iV.call(t,n)&&!cV.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:aV,type:e,key:a,ref:o,props:s,_owner:lV.current}}Fh.Fragment=oV;Fh.jsx=ZI;Fh.jsxs=ZI;VI.exports=Fh;var c=VI.exports,JI={exports:{}},As={},eN={exports:{}},tN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,ee){var oe=K.length;K.push(ee);e:for(;0<oe;){var ae=oe-1>>>1,G=K[ae];if(0<s(G,ee))K[ae]=ee,K[oe]=G,oe=ae;else break e}}function r(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var ee=K[0],oe=K.pop();if(oe!==ee){K[0]=oe;e:for(var ae=0,G=K.length,R=G>>>1;ae<R;){var Q=2*(ae+1)-1,ce=K[Q],ne=Q+1,me=K[ne];if(0>s(ce,oe))ne<G&&0>s(me,ce)?(K[ae]=me,K[ne]=oe,ae=ne):(K[ae]=ce,K[Q]=oe,ae=Q);else if(ne<G&&0>s(me,oe))K[ae]=me,K[ne]=oe,ae=ne;else break e}}return ee}function s(K,ee){var oe=K.sortIndex-ee.sortIndex;return oe!==0?oe:K.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var l=[],d=[],p=1,u=null,m=3,f=!1,h=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(K){for(var ee=r(d);ee!==null;){if(ee.callback===null)n(d);else if(ee.startTime<=K)n(d),ee.sortIndex=ee.expirationTime,t(l,ee);else break;ee=r(d)}}function w(K){if(_=!1,y(K),!h)if(r(l)!==null)h=!0,X(b);else{var ee=r(d);ee!==null&&Z(w,ee.startTime-K)}}function b(K,ee){h=!1,_&&(_=!1,g(P),P=-1),f=!0;var oe=m;try{for(y(ee),u=r(l);u!==null&&(!(u.expirationTime>ee)||K&&!z());){var ae=u.callback;if(typeof ae=="function"){u.callback=null,m=u.priorityLevel;var G=ae(u.expirationTime<=ee);ee=e.unstable_now(),typeof G=="function"?u.callback=G:u===r(l)&&n(l),y(ee)}else n(l);u=r(l)}if(u!==null)var R=!0;else{var Q=r(d);Q!==null&&Z(w,Q.startTime-ee),R=!1}return R}finally{u=null,m=oe,f=!1}}var C=!1,E=null,P=-1,I=5,$=-1;function z(){return!(e.unstable_now()-$<I)}function D(){if(E!==null){var K=e.unstable_now();$=K;var ee=!0;try{ee=E(!0,K)}finally{ee?B():(C=!1,E=null)}}else C=!1}var B;if(typeof x=="function")B=function(){x(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,q=U.port2;U.port1.onmessage=D,B=function(){q.postMessage(null)}}else B=function(){v(D,0)};function X(K){E=K,C||(C=!0,B())}function Z(K,ee){P=v(function(){K(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){h||f||(h=!0,X(b))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var ee=3;break;default:ee=m}var oe=m;m=ee;try{return K()}finally{m=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,ee){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var oe=m;m=K;try{return ee()}finally{m=oe}},e.unstable_scheduleCallback=function(K,ee,oe){var ae=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ae+oe:ae):oe=ae,K){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,K={id:p++,callback:ee,priorityLevel:K,startTime:oe,expirationTime:G,sortIndex:-1},oe>ae?(K.sortIndex=oe,t(d,K),r(l)===null&&K===r(d)&&(_?(g(P),P=-1):_=!0,Z(w,oe-ae))):(K.sortIndex=G,t(l,K),h||f||(h=!0,X(b))),K},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(K){var ee=m;return function(){var oe=m;m=ee;try{return K.apply(this,arguments)}finally{m=oe}}}})(tN);eN.exports=tN;var dV=eN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uV=k,ks=dV;function Ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rN=new Set,Bu={};function Gl(e,t){td(e,t),td(e+"Capture",t)}function td(e,t){for(Bu[e]=t,e=0;e<t.length;e++)rN.add(t[e])}var No=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),t0=Object.prototype.hasOwnProperty,mV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RC={},zC={};function pV(e){return t0.call(zC,e)?!0:t0.call(RC,e)?!1:mV.test(e)?zC[e]=!0:(RC[e]=!0,!1)}function fV(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hV(e,t,r,n){if(t===null||typeof t>"u"||fV(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function is(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zn[e]=new is(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zn[t]=new is(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zn[e]=new is(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zn[e]=new is(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zn[e]=new is(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zn[e]=new is(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zn[e]=new is(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zn[e]=new is(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zn[e]=new is(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hy=/[\-:]([a-z])/g;function qy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hy,qy);zn[t]=new is(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hy,qy);zn[t]=new is(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hy,qy);zn[t]=new is(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zn[e]=new is(e,1,!1,e.toLowerCase(),null,!1,!1)});zn.xlinkHref=new is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zn[e]=new is(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ky(e,t,r,n){var s=zn.hasOwnProperty(t)?zn[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hV(t,r,s,n)&&(r=null),n||s===null?pV(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Bo=uV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ap=Symbol.for("react.element"),bc=Symbol.for("react.portal"),Mc=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),r0=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),sN=Symbol.for("react.context"),Xy=Symbol.for("react.forward_ref"),n0=Symbol.for("react.suspense"),s0=Symbol.for("react.suspense_list"),Yy=Symbol.for("react.memo"),oi=Symbol.for("react.lazy"),aN=Symbol.for("react.offscreen"),BC=Symbol.iterator;function eu(e){return e===null||typeof e!="object"?null:(e=BC&&e[BC]||e["@@iterator"],typeof e=="function"?e:null)}var Qr=Object.assign,px;function yu(e){if(px===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);px=t&&t[1]||""}return`
`+px+e}var fx=!1;function hx(e,t){if(!e||fx)return"";fx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,i=a.length-1;1<=o&&0<=i&&s[o]!==a[i];)i--;for(;1<=o&&0<=i;o--,i--)if(s[o]!==a[i]){if(o!==1||i!==1)do if(o--,i--,0>i||s[o]!==a[i]){var l=`
`+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=i);break}}}finally{fx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yu(e):""}function gV(e){switch(e.tag){case 5:return yu(e.type);case 16:return yu("Lazy");case 13:return yu("Suspense");case 19:return yu("SuspenseList");case 0:case 2:case 15:return e=hx(e.type,!1),e;case 11:return e=hx(e.type.render,!1),e;case 1:return e=hx(e.type,!0),e;default:return""}}function a0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mc:return"Fragment";case bc:return"Portal";case r0:return"Profiler";case Qy:return"StrictMode";case n0:return"Suspense";case s0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sN:return(e.displayName||"Context")+".Consumer";case nN:return(e._context.displayName||"Context")+".Provider";case Xy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Yy:return t=e.displayName||null,t!==null?t:a0(e.type)||"Memo";case oi:t=e._payload,e=e._init;try{return a0(e(t))}catch{}}return null}function _V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a0(t);case 8:return t===Qy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ki(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xV(e){var t=oN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ip(e){e._valueTracker||(e._valueTracker=xV(e))}function iN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=oN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function o0(e,t){var r=t.checked;return Qr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function VC(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ki(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lN(e,t){t=t.checked,t!=null&&Ky(e,"checked",t,!1)}function i0(e,t){lN(e,t);var r=ki(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?l0(e,t.type,r):t.hasOwnProperty("defaultValue")&&l0(e,t.type,ki(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function l0(e,t,r){(t!=="number"||Bf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wu=Array.isArray;function Oc(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ki(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function c0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Qr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function UC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ye(92));if(wu(r)){if(1<r.length)throw Error(Ye(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ki(r)}}function cN(e,t){var r=ki(t.value),n=ki(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function GC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function d0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Np,uN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Np=Np||document.createElement("div"),Np.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Np.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vV=["Webkit","ms","Moz","O"];Object.keys(ku).forEach(function(e){vV.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ku[t]=ku[e]})});function mN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ku.hasOwnProperty(e)&&ku[e]?(""+t).trim():t+"px"}function pN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=mN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var yV=Qr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u0(e,t){if(t){if(yV[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ye(62))}}function m0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var p0=null;function Zy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var f0=null,Fc=null,Lc=null;function HC(e){if(e=Tm(e)){if(typeof f0!="function")throw Error(Ye(280));var t=e.stateNode;t&&(t=Vh(t),f0(e.stateNode,e.type,t))}}function fN(e){Fc?Lc?Lc.push(e):Lc=[e]:Fc=e}function hN(){if(Fc){var e=Fc,t=Lc;if(Lc=Fc=null,HC(e),t)for(e=0;e<t.length;e++)HC(t[e])}}function gN(e,t){return e(t)}function _N(){}var gx=!1;function xN(e,t,r){if(gx)return e(t,r);gx=!0;try{return gN(e,t,r)}finally{gx=!1,(Fc!==null||Lc!==null)&&(_N(),hN())}}function Wu(e,t){var r=e.stateNode;if(r===null)return null;var n=Vh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ye(231,t,typeof r));return r}var h0=!1;if(No)try{var tu={};Object.defineProperty(tu,"passive",{get:function(){h0=!0}}),window.addEventListener("test",tu,tu),window.removeEventListener("test",tu,tu)}catch{h0=!1}function wV(e,t,r,n,s,a,o,i,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(p){this.onError(p)}}var ju=!1,Vf=null,Wf=!1,g0=null,bV={onError:function(e){ju=!0,Vf=e}};function MV(e,t,r,n,s,a,o,i,l){ju=!1,Vf=null,wV.apply(bV,arguments)}function TV(e,t,r,n,s,a,o,i,l){if(MV.apply(this,arguments),ju){if(ju){var d=Vf;ju=!1,Vf=null}else throw Error(Ye(198));Wf||(Wf=!0,g0=d)}}function Hl(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qC(e){if(Hl(e)!==e)throw Error(Ye(188))}function EV(e){var t=e.alternate;if(!t){if(t=Hl(e),t===null)throw Error(Ye(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return qC(s),e;if(a===n)return qC(s),t;a=a.sibling}throw Error(Ye(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,i=s.child;i;){if(i===r){o=!0,r=s,n=a;break}if(i===n){o=!0,n=s,r=a;break}i=i.sibling}if(!o){for(i=a.child;i;){if(i===r){o=!0,r=a,n=s;break}if(i===n){o=!0,n=a,r=s;break}i=i.sibling}if(!o)throw Error(Ye(189))}}if(r.alternate!==n)throw Error(Ye(190))}if(r.tag!==3)throw Error(Ye(188));return r.stateNode.current===r?e:t}function yN(e){return e=EV(e),e!==null?wN(e):null}function wN(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wN(e);if(t!==null)return t;e=e.sibling}return null}var bN=ks.unstable_scheduleCallback,KC=ks.unstable_cancelCallback,CV=ks.unstable_shouldYield,PV=ks.unstable_requestPaint,un=ks.unstable_now,SV=ks.unstable_getCurrentPriorityLevel,Jy=ks.unstable_ImmediatePriority,MN=ks.unstable_UserBlockingPriority,Uf=ks.unstable_NormalPriority,kV=ks.unstable_LowPriority,TN=ks.unstable_IdlePriority,Lh=null,ro=null;function jV(e){if(ro&&typeof ro.onCommitFiberRoot=="function")try{ro.onCommitFiberRoot(Lh,e,void 0,(e.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:NV,AV=Math.log,IV=Math.LN2;function NV(e){return e>>>=0,e===0?32:31-(AV(e)/IV|0)|0}var $p=64,Dp=4194304;function bu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var i=o&~s;i!==0?n=bu(i):(a&=o,a!==0&&(n=bu(a)))}else o=r&~s,o!==0?n=bu(o):a!==0&&(n=bu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Pa(t),s=1<<r,n|=e[r],t&=~s;return n}function $V(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DV(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Pa(a),i=1<<o,l=s[o];l===-1?(!(i&r)||i&n)&&(s[o]=$V(i,t)):l<=t&&(e.expiredLanes|=i),a&=~i}}function _0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EN(){var e=$p;return $p<<=1,!($p&4194240)&&($p=64),e}function _x(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pa(t),e[t]=r}function OV(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Pa(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function ew(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Pa(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var xr=0;function CN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PN,tw,SN,kN,jN,x0=!1,Op=[],vi=null,yi=null,wi=null,Uu=new Map,Gu=new Map,li=[],FV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QC(e,t){switch(e){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Uu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gu.delete(t.pointerId)}}function ru(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Tm(t),t!==null&&tw(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function LV(e,t,r,n,s){switch(t){case"focusin":return vi=ru(vi,e,t,r,n,s),!0;case"dragenter":return yi=ru(yi,e,t,r,n,s),!0;case"mouseover":return wi=ru(wi,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Uu.set(a,ru(Uu.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Gu.set(a,ru(Gu.get(a)||null,e,t,r,n,s)),!0}return!1}function AN(e){var t=vl(e.target);if(t!==null){var r=Hl(t);if(r!==null){if(t=r.tag,t===13){if(t=vN(r),t!==null){e.blockedOn=t,jN(e.priority,function(){SN(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=v0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);p0=n,r.target.dispatchEvent(n),p0=null}else return t=Tm(r),t!==null&&tw(t),e.blockedOn=r,!1;t.shift()}return!0}function XC(e,t,r){yf(e)&&r.delete(t)}function RV(){x0=!1,vi!==null&&yf(vi)&&(vi=null),yi!==null&&yf(yi)&&(yi=null),wi!==null&&yf(wi)&&(wi=null),Uu.forEach(XC),Gu.forEach(XC)}function nu(e,t){e.blockedOn===t&&(e.blockedOn=null,x0||(x0=!0,ks.unstable_scheduleCallback(ks.unstable_NormalPriority,RV)))}function Hu(e){function t(s){return nu(s,e)}if(0<Op.length){nu(Op[0],e);for(var r=1;r<Op.length;r++){var n=Op[r];n.blockedOn===e&&(n.blockedOn=null)}}for(vi!==null&&nu(vi,e),yi!==null&&nu(yi,e),wi!==null&&nu(wi,e),Uu.forEach(t),Gu.forEach(t),r=0;r<li.length;r++)n=li[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<li.length&&(r=li[0],r.blockedOn===null);)AN(r),r.blockedOn===null&&li.shift()}var Rc=Bo.ReactCurrentBatchConfig,Hf=!0;function zV(e,t,r,n){var s=xr,a=Rc.transition;Rc.transition=null;try{xr=1,rw(e,t,r,n)}finally{xr=s,Rc.transition=a}}function BV(e,t,r,n){var s=xr,a=Rc.transition;Rc.transition=null;try{xr=4,rw(e,t,r,n)}finally{xr=s,Rc.transition=a}}function rw(e,t,r,n){if(Hf){var s=v0(e,t,r,n);if(s===null)Px(e,t,n,qf,r),QC(e,n);else if(LV(s,e,t,r,n))n.stopPropagation();else if(QC(e,n),t&4&&-1<FV.indexOf(e)){for(;s!==null;){var a=Tm(s);if(a!==null&&PN(a),a=v0(e,t,r,n),a===null&&Px(e,t,n,qf,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Px(e,t,n,null,r)}}var qf=null;function v0(e,t,r,n){if(qf=null,e=Zy(n),e=vl(e),e!==null)if(t=Hl(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vN(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qf=e,null}function IN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SV()){case Jy:return 1;case MN:return 4;case Uf:case kV:return 16;case TN:return 536870912;default:return 16}default:return 16}}var hi=null,nw=null,wf=null;function NN(){if(wf)return wf;var e,t=nw,r=t.length,n,s="value"in hi?hi.value:hi.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return wf=s.slice(e,1<n?1-n:void 0)}function bf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fp(){return!0}function YC(){return!1}function Is(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(a):a[i]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Fp:YC,this.isPropagationStopped=YC,this}return Qr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),t}var yd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sw=Is(yd),Mm=Qr({},yd,{view:0,detail:0}),VV=Is(Mm),xx,vx,su,Rh=Qr({},Mm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==su&&(su&&e.type==="mousemove"?(xx=e.screenX-su.screenX,vx=e.screenY-su.screenY):vx=xx=0,su=e),xx)},movementY:function(e){return"movementY"in e?e.movementY:vx}}),ZC=Is(Rh),WV=Qr({},Rh,{dataTransfer:0}),UV=Is(WV),GV=Qr({},Mm,{relatedTarget:0}),yx=Is(GV),HV=Qr({},yd,{animationName:0,elapsedTime:0,pseudoElement:0}),qV=Is(HV),KV=Qr({},yd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),QV=Is(KV),XV=Qr({},yd,{data:0}),JC=Is(XV),YV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JV[e])?!!t[e]:!1}function aw(){return e5}var t5=Qr({},Mm,{key:function(e){if(e.key){var t=YV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ZV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aw,charCode:function(e){return e.type==="keypress"?bf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r5=Is(t5),n5=Qr({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eP=Is(n5),s5=Qr({},Mm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aw}),a5=Is(s5),o5=Qr({},yd,{propertyName:0,elapsedTime:0,pseudoElement:0}),i5=Is(o5),l5=Qr({},Rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),c5=Is(l5),d5=[9,13,27,32],ow=No&&"CompositionEvent"in window,Au=null;No&&"documentMode"in document&&(Au=document.documentMode);var u5=No&&"TextEvent"in window&&!Au,$N=No&&(!ow||Au&&8<Au&&11>=Au),tP=" ",rP=!1;function DN(e,t){switch(e){case"keyup":return d5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ON(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tc=!1;function m5(e,t){switch(e){case"compositionend":return ON(t);case"keypress":return t.which!==32?null:(rP=!0,tP);case"textInput":return e=t.data,e===tP&&rP?null:e;default:return null}}function p5(e,t){if(Tc)return e==="compositionend"||!ow&&DN(e,t)?(e=NN(),wf=nw=hi=null,Tc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $N&&t.locale!=="ko"?null:t.data;default:return null}}var f5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f5[e.type]:t==="textarea"}function FN(e,t,r,n){fN(n),t=Kf(t,"onChange"),0<t.length&&(r=new sw("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Iu=null,qu=null;function h5(e){KN(e,0)}function zh(e){var t=Pc(e);if(iN(t))return e}function g5(e,t){if(e==="change")return t}var LN=!1;if(No){var wx;if(No){var bx="oninput"in document;if(!bx){var sP=document.createElement("div");sP.setAttribute("oninput","return;"),bx=typeof sP.oninput=="function"}wx=bx}else wx=!1;LN=wx&&(!document.documentMode||9<document.documentMode)}function aP(){Iu&&(Iu.detachEvent("onpropertychange",RN),qu=Iu=null)}function RN(e){if(e.propertyName==="value"&&zh(qu)){var t=[];FN(t,qu,e,Zy(e)),xN(h5,t)}}function _5(e,t,r){e==="focusin"?(aP(),Iu=t,qu=r,Iu.attachEvent("onpropertychange",RN)):e==="focusout"&&aP()}function x5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zh(qu)}function v5(e,t){if(e==="click")return zh(t)}function y5(e,t){if(e==="input"||e==="change")return zh(t)}function w5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:w5;function Ku(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!t0.call(t,s)||!Ia(e[s],t[s]))return!1}return!0}function oP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iP(e,t){var r=oP(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oP(r)}}function zN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function BN(){for(var e=window,t=Bf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bf(e.document)}return t}function iw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function b5(e){var t=BN(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&zN(r.ownerDocument.documentElement,r)){if(n!==null&&iw(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=iP(r,a);var o=iP(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M5=No&&"documentMode"in document&&11>=document.documentMode,Ec=null,y0=null,Nu=null,w0=!1;function lP(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;w0||Ec==null||Ec!==Bf(n)||(n=Ec,"selectionStart"in n&&iw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Nu&&Ku(Nu,n)||(Nu=n,n=Kf(y0,"onSelect"),0<n.length&&(t=new sw("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ec)))}function Lp(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cc={animationend:Lp("Animation","AnimationEnd"),animationiteration:Lp("Animation","AnimationIteration"),animationstart:Lp("Animation","AnimationStart"),transitionend:Lp("Transition","TransitionEnd")},Mx={},VN={};No&&(VN=document.createElement("div").style,"AnimationEvent"in window||(delete Cc.animationend.animation,delete Cc.animationiteration.animation,delete Cc.animationstart.animation),"TransitionEvent"in window||delete Cc.transitionend.transition);function Bh(e){if(Mx[e])return Mx[e];if(!Cc[e])return e;var t=Cc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in VN)return Mx[e]=t[r];return e}var WN=Bh("animationend"),UN=Bh("animationiteration"),GN=Bh("animationstart"),HN=Bh("transitionend"),qN=new Map,cP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(e,t){qN.set(e,t),Gl(t,[e])}for(var Tx=0;Tx<cP.length;Tx++){var Ex=cP[Tx],T5=Ex.toLowerCase(),E5=Ex[0].toUpperCase()+Ex.slice(1);Li(T5,"on"+E5)}Li(WN,"onAnimationEnd");Li(UN,"onAnimationIteration");Li(GN,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(HN,"onTransitionEnd");td("onMouseEnter",["mouseout","mouseover"]);td("onMouseLeave",["mouseout","mouseover"]);td("onPointerEnter",["pointerout","pointerover"]);td("onPointerLeave",["pointerout","pointerover"]);Gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mu));function dP(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,TV(n,t,void 0,e),e.currentTarget=null}function KN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var i=n[o],l=i.instance,d=i.currentTarget;if(i=i.listener,l!==a&&s.isPropagationStopped())break e;dP(s,i,d),a=l}else for(o=0;o<n.length;o++){if(i=n[o],l=i.instance,d=i.currentTarget,i=i.listener,l!==a&&s.isPropagationStopped())break e;dP(s,i,d),a=l}}}if(Wf)throw e=g0,Wf=!1,g0=null,e}function $r(e,t){var r=t[C0];r===void 0&&(r=t[C0]=new Set);var n=e+"__bubble";r.has(n)||(QN(t,e,2,!1),r.add(n))}function Cx(e,t,r){var n=0;t&&(n|=4),QN(r,e,n,t)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function Qu(e){if(!e[Rp]){e[Rp]=!0,rN.forEach(function(r){r!=="selectionchange"&&(C5.has(r)||Cx(r,!1,e),Cx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Rp]||(t[Rp]=!0,Cx("selectionchange",!1,t))}}function QN(e,t,r,n){switch(IN(t)){case 1:var s=zV;break;case 4:s=BV;break;default:s=rw}r=s.bind(null,t,r,e),s=void 0,!h0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Px(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var i=n.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;i!==null;){if(o=vl(i),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}i=i.parentNode}}n=n.return}xN(function(){var d=a,p=Zy(r),u=[];e:{var m=qN.get(e);if(m!==void 0){var f=sw,h=e;switch(e){case"keypress":if(bf(r)===0)break e;case"keydown":case"keyup":f=r5;break;case"focusin":h="focus",f=yx;break;case"focusout":h="blur",f=yx;break;case"beforeblur":case"afterblur":f=yx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=ZC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=a5;break;case WN:case UN:case GN:f=qV;break;case HN:f=i5;break;case"scroll":f=VV;break;case"wheel":f=c5;break;case"copy":case"cut":case"paste":f=QV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=eP}var _=(t&4)!==0,v=!_&&e==="scroll",g=_?m!==null?m+"Capture":null:m;_=[];for(var x=d,y;x!==null;){y=x;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=Wu(x,g),w!=null&&_.push(Xu(x,w,y)))),v)break;x=x.return}0<_.length&&(m=new f(m,h,null,r,p),u.push({event:m,listeners:_}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&r!==p0&&(h=r.relatedTarget||r.fromElement)&&(vl(h)||h[$o]))break e;if((f||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,f?(h=r.relatedTarget||r.toElement,f=d,h=h?vl(h):null,h!==null&&(v=Hl(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(f=null,h=d),f!==h)){if(_=ZC,w="onMouseLeave",g="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(_=eP,w="onPointerLeave",g="onPointerEnter",x="pointer"),v=f==null?m:Pc(f),y=h==null?m:Pc(h),m=new _(w,x+"leave",f,r,p),m.target=v,m.relatedTarget=y,w=null,vl(p)===d&&(_=new _(g,x+"enter",h,r,p),_.target=y,_.relatedTarget=v,w=_),v=w,f&&h)t:{for(_=f,g=h,x=0,y=_;y;y=pc(y))x++;for(y=0,w=g;w;w=pc(w))y++;for(;0<x-y;)_=pc(_),x--;for(;0<y-x;)g=pc(g),y--;for(;x--;){if(_===g||g!==null&&_===g.alternate)break t;_=pc(_),g=pc(g)}_=null}else _=null;f!==null&&uP(u,m,f,_,!1),h!==null&&v!==null&&uP(u,v,h,_,!0)}}e:{if(m=d?Pc(d):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var b=g5;else if(nP(m))if(LN)b=y5;else{b=x5;var C=_5}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=v5);if(b&&(b=b(e,d))){FN(u,b,r,p);break e}C&&C(e,m,d),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&l0(m,"number",m.value)}switch(C=d?Pc(d):window,e){case"focusin":(nP(C)||C.contentEditable==="true")&&(Ec=C,y0=d,Nu=null);break;case"focusout":Nu=y0=Ec=null;break;case"mousedown":w0=!0;break;case"contextmenu":case"mouseup":case"dragend":w0=!1,lP(u,r,p);break;case"selectionchange":if(M5)break;case"keydown":case"keyup":lP(u,r,p)}var E;if(ow)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Tc?DN(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&($N&&r.locale!=="ko"&&(Tc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Tc&&(E=NN()):(hi=p,nw="value"in hi?hi.value:hi.textContent,Tc=!0)),C=Kf(d,P),0<C.length&&(P=new JC(P,e,null,r,p),u.push({event:P,listeners:C}),E?P.data=E:(E=ON(r),E!==null&&(P.data=E)))),(E=u5?m5(e,r):p5(e,r))&&(d=Kf(d,"onBeforeInput"),0<d.length&&(p=new JC("onBeforeInput","beforeinput",null,r,p),u.push({event:p,listeners:d}),p.data=E))}KN(u,t)})}function Xu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kf(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Wu(e,r),a!=null&&n.unshift(Xu(e,a,s)),a=Wu(e,t),a!=null&&n.push(Xu(e,a,s))),e=e.return}return n}function pc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uP(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var i=r,l=i.alternate,d=i.stateNode;if(l!==null&&l===n)break;i.tag===5&&d!==null&&(i=d,s?(l=Wu(r,a),l!=null&&o.unshift(Xu(r,l,i))):s||(l=Wu(r,a),l!=null&&o.push(Xu(r,l,i)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var P5=/\r\n?/g,S5=/\u0000|\uFFFD/g;function mP(e){return(typeof e=="string"?e:""+e).replace(P5,`
`).replace(S5,"")}function zp(e,t,r){if(t=mP(t),mP(e)!==t&&r)throw Error(Ye(425))}function Qf(){}var b0=null,M0=null;function T0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var E0=typeof setTimeout=="function"?setTimeout:void 0,k5=typeof clearTimeout=="function"?clearTimeout:void 0,pP=typeof Promise=="function"?Promise:void 0,j5=typeof queueMicrotask=="function"?queueMicrotask:typeof pP<"u"?function(e){return pP.resolve(null).then(e).catch(A5)}:E0;function A5(e){setTimeout(function(){throw e})}function Sx(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Hu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Hu(t)}function bi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wd=Math.random().toString(36).slice(2),Qa="__reactFiber$"+wd,Yu="__reactProps$"+wd,$o="__reactContainer$"+wd,C0="__reactEvents$"+wd,I5="__reactListeners$"+wd,N5="__reactHandles$"+wd;function vl(e){var t=e[Qa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$o]||r[Qa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=fP(e);e!==null;){if(r=e[Qa])return r;e=fP(e)}return t}e=r,r=e.parentNode}return null}function Tm(e){return e=e[Qa]||e[$o],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function Vh(e){return e[Yu]||null}var P0=[],Sc=-1;function Ri(e){return{current:e}}function Dr(e){0>Sc||(e.current=P0[Sc],P0[Sc]=null,Sc--)}function jr(e,t){Sc++,P0[Sc]=e.current,e.current=t}var ji={},Yn=Ri(ji),fs=Ri(!1),Al=ji;function rd(e,t){var r=e.type.contextTypes;if(!r)return ji;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function hs(e){return e=e.childContextTypes,e!=null}function Xf(){Dr(fs),Dr(Yn)}function hP(e,t,r){if(Yn.current!==ji)throw Error(Ye(168));jr(Yn,t),jr(fs,r)}function XN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Ye(108,_V(e)||"Unknown",s));return Qr({},r,n)}function Yf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Al=Yn.current,jr(Yn,e),jr(fs,fs.current),!0}function gP(e,t,r){var n=e.stateNode;if(!n)throw Error(Ye(169));r?(e=XN(e,t,Al),n.__reactInternalMemoizedMergedChildContext=e,Dr(fs),Dr(Yn),jr(Yn,e)):Dr(fs),jr(fs,r)}var Co=null,Wh=!1,kx=!1;function YN(e){Co===null?Co=[e]:Co.push(e)}function $5(e){Wh=!0,YN(e)}function zi(){if(!kx&&Co!==null){kx=!0;var e=0,t=xr;try{var r=Co;for(xr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Co=null,Wh=!1}catch(s){throw Co!==null&&(Co=Co.slice(e+1)),bN(Jy,zi),s}finally{xr=t,kx=!1}}return null}var kc=[],jc=0,Zf=null,Jf=0,Ks=[],Qs=0,Il=null,ko=1,jo="";function pl(e,t){kc[jc++]=Jf,kc[jc++]=Zf,Zf=e,Jf=t}function ZN(e,t,r){Ks[Qs++]=ko,Ks[Qs++]=jo,Ks[Qs++]=Il,Il=e;var n=ko;e=jo;var s=32-Pa(n)-1;n&=~(1<<s),r+=1;var a=32-Pa(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ko=1<<32-Pa(t)+s|r<<s|n,jo=a+e}else ko=1<<a|r<<s|n,jo=e}function lw(e){e.return!==null&&(pl(e,1),ZN(e,1,0))}function cw(e){for(;e===Zf;)Zf=kc[--jc],kc[jc]=null,Jf=kc[--jc],kc[jc]=null;for(;e===Il;)Il=Ks[--Qs],Ks[Qs]=null,jo=Ks[--Qs],Ks[Qs]=null,ko=Ks[--Qs],Ks[Qs]=null}var Es=null,Ts=null,Rr=!1,Ta=null;function JN(e,t){var r=Ys(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _P(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Es=e,Ts=bi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Es=e,Ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Il!==null?{id:ko,overflow:jo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ys(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Es=e,Ts=null,!0):!1;default:return!1}}function S0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function k0(e){if(Rr){var t=Ts;if(t){var r=t;if(!_P(e,t)){if(S0(e))throw Error(Ye(418));t=bi(r.nextSibling);var n=Es;t&&_P(e,t)?JN(n,r):(e.flags=e.flags&-4097|2,Rr=!1,Es=e)}}else{if(S0(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Rr=!1,Es=e}}}function xP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Es=e}function Bp(e){if(e!==Es)return!1;if(!Rr)return xP(e),Rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!T0(e.type,e.memoizedProps)),t&&(t=Ts)){if(S0(e))throw e$(),Error(Ye(418));for(;t;)JN(e,t),t=bi(t.nextSibling)}if(xP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ts=bi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ts=null}}else Ts=Es?bi(e.stateNode.nextSibling):null;return!0}function e$(){for(var e=Ts;e;)e=bi(e.nextSibling)}function nd(){Ts=Es=null,Rr=!1}function dw(e){Ta===null?Ta=[e]:Ta.push(e)}var D5=Bo.ReactCurrentBatchConfig;function au(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ye(309));var n=r.stateNode}if(!n)throw Error(Ye(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var i=s.refs;o===null?delete i[a]:i[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Ye(284));if(!r._owner)throw Error(Ye(290,e))}return e}function Vp(e,t){throw e=Object.prototype.toString.call(t),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vP(e){var t=e._init;return t(e._payload)}function t$(e){function t(g,x){if(e){var y=g.deletions;y===null?(g.deletions=[x],g.flags|=16):y.push(x)}}function r(g,x){if(!e)return null;for(;x!==null;)t(g,x),x=x.sibling;return null}function n(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=Ci(g,x),g.index=0,g.sibling=null,g}function a(g,x,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<x?(g.flags|=2,x):y):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,x,y,w){return x===null||x.tag!==6?(x=Ox(y,g.mode,w),x.return=g,x):(x=s(x,y),x.return=g,x)}function l(g,x,y,w){var b=y.type;return b===Mc?p(g,x,y.props.children,w,y.key):x!==null&&(x.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===oi&&vP(b)===x.type)?(w=s(x,y.props),w.ref=au(g,x,y),w.return=g,w):(w=kf(y.type,y.key,y.props,null,g.mode,w),w.ref=au(g,x,y),w.return=g,w)}function d(g,x,y,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Fx(y,g.mode,w),x.return=g,x):(x=s(x,y.children||[]),x.return=g,x)}function p(g,x,y,w,b){return x===null||x.tag!==7?(x=jl(y,g.mode,w,b),x.return=g,x):(x=s(x,y),x.return=g,x)}function u(g,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ox(""+x,g.mode,y),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ap:return y=kf(x.type,x.key,x.props,null,g.mode,y),y.ref=au(g,null,x),y.return=g,y;case bc:return x=Fx(x,g.mode,y),x.return=g,x;case oi:var w=x._init;return u(g,w(x._payload),y)}if(wu(x)||eu(x))return x=jl(x,g.mode,y,null),x.return=g,x;Vp(g,x)}return null}function m(g,x,y,w){var b=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:i(g,x,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ap:return y.key===b?l(g,x,y,w):null;case bc:return y.key===b?d(g,x,y,w):null;case oi:return b=y._init,m(g,x,b(y._payload),w)}if(wu(y)||eu(y))return b!==null?null:p(g,x,y,w,null);Vp(g,y)}return null}function f(g,x,y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,i(x,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ap:return g=g.get(w.key===null?y:w.key)||null,l(x,g,w,b);case bc:return g=g.get(w.key===null?y:w.key)||null,d(x,g,w,b);case oi:var C=w._init;return f(g,x,y,C(w._payload),b)}if(wu(w)||eu(w))return g=g.get(y)||null,p(x,g,w,b,null);Vp(x,w)}return null}function h(g,x,y,w){for(var b=null,C=null,E=x,P=x=0,I=null;E!==null&&P<y.length;P++){E.index>P?(I=E,E=null):I=E.sibling;var $=m(g,E,y[P],w);if($===null){E===null&&(E=I);break}e&&E&&$.alternate===null&&t(g,E),x=a($,x,P),C===null?b=$:C.sibling=$,C=$,E=I}if(P===y.length)return r(g,E),Rr&&pl(g,P),b;if(E===null){for(;P<y.length;P++)E=u(g,y[P],w),E!==null&&(x=a(E,x,P),C===null?b=E:C.sibling=E,C=E);return Rr&&pl(g,P),b}for(E=n(g,E);P<y.length;P++)I=f(E,g,P,y[P],w),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?P:I.key),x=a(I,x,P),C===null?b=I:C.sibling=I,C=I);return e&&E.forEach(function(z){return t(g,z)}),Rr&&pl(g,P),b}function _(g,x,y,w){var b=eu(y);if(typeof b!="function")throw Error(Ye(150));if(y=b.call(y),y==null)throw Error(Ye(151));for(var C=b=null,E=x,P=x=0,I=null,$=y.next();E!==null&&!$.done;P++,$=y.next()){E.index>P?(I=E,E=null):I=E.sibling;var z=m(g,E,$.value,w);if(z===null){E===null&&(E=I);break}e&&E&&z.alternate===null&&t(g,E),x=a(z,x,P),C===null?b=z:C.sibling=z,C=z,E=I}if($.done)return r(g,E),Rr&&pl(g,P),b;if(E===null){for(;!$.done;P++,$=y.next())$=u(g,$.value,w),$!==null&&(x=a($,x,P),C===null?b=$:C.sibling=$,C=$);return Rr&&pl(g,P),b}for(E=n(g,E);!$.done;P++,$=y.next())$=f(E,g,P,$.value,w),$!==null&&(e&&$.alternate!==null&&E.delete($.key===null?P:$.key),x=a($,x,P),C===null?b=$:C.sibling=$,C=$);return e&&E.forEach(function(D){return t(g,D)}),Rr&&pl(g,P),b}function v(g,x,y,w){if(typeof y=="object"&&y!==null&&y.type===Mc&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ap:e:{for(var b=y.key,C=x;C!==null;){if(C.key===b){if(b=y.type,b===Mc){if(C.tag===7){r(g,C.sibling),x=s(C,y.props.children),x.return=g,g=x;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===oi&&vP(b)===C.type){r(g,C.sibling),x=s(C,y.props),x.ref=au(g,C,y),x.return=g,g=x;break e}r(g,C);break}else t(g,C);C=C.sibling}y.type===Mc?(x=jl(y.props.children,g.mode,w,y.key),x.return=g,g=x):(w=kf(y.type,y.key,y.props,null,g.mode,w),w.ref=au(g,x,y),w.return=g,g=w)}return o(g);case bc:e:{for(C=y.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){r(g,x.sibling),x=s(x,y.children||[]),x.return=g,g=x;break e}else{r(g,x);break}else t(g,x);x=x.sibling}x=Fx(y,g.mode,w),x.return=g,g=x}return o(g);case oi:return C=y._init,v(g,x,C(y._payload),w)}if(wu(y))return h(g,x,y,w);if(eu(y))return _(g,x,y,w);Vp(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(r(g,x.sibling),x=s(x,y),x.return=g,g=x):(r(g,x),x=Ox(y,g.mode,w),x.return=g,g=x),o(g)):r(g,x)}return v}var sd=t$(!0),r$=t$(!1),eh=Ri(null),th=null,Ac=null,uw=null;function mw(){uw=Ac=th=null}function pw(e){var t=eh.current;Dr(eh),e._currentValue=t}function j0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function zc(e,t){th=e,uw=Ac=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ps=!0),e.firstContext=null)}function ta(e){var t=e._currentValue;if(uw!==e)if(e={context:e,memoizedValue:t,next:null},Ac===null){if(th===null)throw Error(Ye(308));Ac=e,th.dependencies={lanes:0,firstContext:e}}else Ac=Ac.next=e;return t}var yl=null;function fw(e){yl===null?yl=[e]:yl.push(e)}function n$(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,fw(t)):(r.next=s.next,s.next=r),t.interleaved=r,Do(e,n)}function Do(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ii=!1;function hw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,dr&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Do(e,r)}return s=n.interleaved,s===null?(t.next=t,fw(n)):(t.next=s.next,s.next=t),n.interleaved=t,Do(e,r)}function Mf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ew(e,r)}}function yP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rh(e,t,r,n){var s=e.updateQueue;ii=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var l=i,d=l.next;l.next=null,o===null?a=d:o.next=d,o=l;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==o&&(i===null?p.firstBaseUpdate=d:i.next=d,p.lastBaseUpdate=l))}if(a!==null){var u=s.baseState;o=0,p=d=l=null,i=a;do{var m=i.lane,f=i.eventTime;if((n&m)===m){p!==null&&(p=p.next={eventTime:f,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,_=i;switch(m=t,f=r,_.tag){case 1:if(h=_.payload,typeof h=="function"){u=h.call(f,u,m);break e}u=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=_.payload,m=typeof h=="function"?h.call(f,u,m):h,m==null)break e;u=Qr({},u,m);break e;case 2:ii=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[i]:m.push(i))}else f={eventTime:f,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(d=p=f,l=u):p=p.next=f,o|=m;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;m=i,i=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(p===null&&(l=u),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);$l|=o,e.lanes=o,e.memoizedState=u}}function wP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Ye(191,s));s.call(n)}}}var Em={},no=Ri(Em),Zu=Ri(Em),Ju=Ri(Em);function wl(e){if(e===Em)throw Error(Ye(174));return e}function gw(e,t){switch(jr(Ju,t),jr(Zu,e),jr(no,Em),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:d0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=d0(t,e)}Dr(no),jr(no,t)}function ad(){Dr(no),Dr(Zu),Dr(Ju)}function a$(e){wl(Ju.current);var t=wl(no.current),r=d0(t,e.type);t!==r&&(jr(Zu,e),jr(no,r))}function _w(e){Zu.current===e&&(Dr(no),Dr(Zu))}var Hr=Ri(0);function nh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jx=[];function xw(){for(var e=0;e<jx.length;e++)jx[e]._workInProgressVersionPrimary=null;jx.length=0}var Tf=Bo.ReactCurrentDispatcher,Ax=Bo.ReactCurrentBatchConfig,Nl=0,Kr=null,Mn=null,An=null,sh=!1,$u=!1,em=0,O5=0;function Hn(){throw Error(Ye(321))}function vw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ia(e[r],t[r]))return!1;return!0}function yw(e,t,r,n,s,a){if(Nl=a,Kr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Tf.current=e===null||e.memoizedState===null?z5:B5,e=r(n,s),$u){a=0;do{if($u=!1,em=0,25<=a)throw Error(Ye(301));a+=1,An=Mn=null,t.updateQueue=null,Tf.current=V5,e=r(n,s)}while($u)}if(Tf.current=ah,t=Mn!==null&&Mn.next!==null,Nl=0,An=Mn=Kr=null,sh=!1,t)throw Error(Ye(300));return e}function ww(){var e=em!==0;return em=0,e}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Kr.memoizedState=An=e:An=An.next=e,An}function ra(){if(Mn===null){var e=Kr.alternate;e=e!==null?e.memoizedState:null}else e=Mn.next;var t=An===null?Kr.memoizedState:An.next;if(t!==null)An=t,Mn=e;else{if(e===null)throw Error(Ye(310));Mn=e,e={memoizedState:Mn.memoizedState,baseState:Mn.baseState,baseQueue:Mn.baseQueue,queue:Mn.queue,next:null},An===null?Kr.memoizedState=An=e:An=An.next=e}return An}function tm(e,t){return typeof t=="function"?t(e):t}function Ix(e){var t=ra(),r=t.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=e;var n=Mn,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var i=o=null,l=null,d=a;do{var p=d.lane;if((Nl&p)===p)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(i=l=u,o=n):l=l.next=u,Kr.lanes|=p,$l|=p}d=d.next}while(d!==null&&d!==a);l===null?o=n:l.next=i,Ia(n,t.memoizedState)||(ps=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,Kr.lanes|=a,$l|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Nx(e){var t=ra(),r=t.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);Ia(a,t.memoizedState)||(ps=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function o$(){}function i$(e,t){var r=Kr,n=ra(),s=t(),a=!Ia(n.memoizedState,s);if(a&&(n.memoizedState=s,ps=!0),n=n.queue,bw(d$.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||An!==null&&An.memoizedState.tag&1){if(r.flags|=2048,rm(9,c$.bind(null,r,n,s,t),void 0,null),In===null)throw Error(Ye(349));Nl&30||l$(r,t,s)}return s}function l$(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function c$(e,t,r,n){t.value=r,t.getSnapshot=n,u$(t)&&m$(e)}function d$(e,t,r){return r(function(){u$(t)&&m$(e)})}function u$(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ia(e,r)}catch{return!0}}function m$(e){var t=Do(e,1);t!==null&&Sa(t,e,1,-1)}function bP(e){var t=Ua();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:e},t.queue=e,e=e.dispatch=R5.bind(null,Kr,e),[t.memoizedState,e]}function rm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Kr.updateQueue,t===null?(t={lastEffect:null,stores:null},Kr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function p$(){return ra().memoizedState}function Ef(e,t,r,n){var s=Ua();Kr.flags|=e,s.memoizedState=rm(1|t,r,void 0,n===void 0?null:n)}function Uh(e,t,r,n){var s=ra();n=n===void 0?null:n;var a=void 0;if(Mn!==null){var o=Mn.memoizedState;if(a=o.destroy,n!==null&&vw(n,o.deps)){s.memoizedState=rm(t,r,a,n);return}}Kr.flags|=e,s.memoizedState=rm(1|t,r,a,n)}function MP(e,t){return Ef(8390656,8,e,t)}function bw(e,t){return Uh(2048,8,e,t)}function f$(e,t){return Uh(4,2,e,t)}function h$(e,t){return Uh(4,4,e,t)}function g$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _$(e,t,r){return r=r!=null?r.concat([e]):null,Uh(4,4,g$.bind(null,t,e),r)}function Mw(){}function x$(e,t){var r=ra();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vw(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function v$(e,t){var r=ra();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&vw(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function y$(e,t,r){return Nl&21?(Ia(r,t)||(r=EN(),Kr.lanes|=r,$l|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ps=!0),e.memoizedState=r)}function F5(e,t){var r=xr;xr=r!==0&&4>r?r:4,e(!0);var n=Ax.transition;Ax.transition={};try{e(!1),t()}finally{xr=r,Ax.transition=n}}function w$(){return ra().memoizedState}function L5(e,t,r){var n=Ei(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},b$(e))M$(t,r);else if(r=n$(e,t,r,n),r!==null){var s=as();Sa(r,e,n,s),T$(r,t,n)}}function R5(e,t,r){var n=Ei(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(b$(e))M$(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,i=a(o,r);if(s.hasEagerState=!0,s.eagerState=i,Ia(i,o)){var l=t.interleaved;l===null?(s.next=s,fw(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}r=n$(e,t,s,n),r!==null&&(s=as(),Sa(r,e,n,s),T$(r,t,n))}}function b$(e){var t=e.alternate;return e===Kr||t!==null&&t===Kr}function M$(e,t){$u=sh=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function T$(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ew(e,r)}}var ah={readContext:ta,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},z5={readContext:ta,useCallback:function(e,t){return Ua().memoizedState=[e,t===void 0?null:t],e},useContext:ta,useEffect:MP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ef(4194308,4,g$.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ef(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ef(4,2,e,t)},useMemo:function(e,t){var r=Ua();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ua();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=L5.bind(null,Kr,e),[n.memoizedState,e]},useRef:function(e){var t=Ua();return e={current:e},t.memoizedState=e},useState:bP,useDebugValue:Mw,useDeferredValue:function(e){return Ua().memoizedState=e},useTransition:function(){var e=bP(!1),t=e[0];return e=F5.bind(null,e[1]),Ua().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Kr,s=Ua();if(Rr){if(r===void 0)throw Error(Ye(407));r=r()}else{if(r=t(),In===null)throw Error(Ye(349));Nl&30||l$(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,MP(d$.bind(null,n,a,e),[e]),n.flags|=2048,rm(9,c$.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Ua(),t=In.identifierPrefix;if(Rr){var r=jo,n=ko;r=(n&~(1<<32-Pa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=em++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=O5++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B5={readContext:ta,useCallback:x$,useContext:ta,useEffect:bw,useImperativeHandle:_$,useInsertionEffect:f$,useLayoutEffect:h$,useMemo:v$,useReducer:Ix,useRef:p$,useState:function(){return Ix(tm)},useDebugValue:Mw,useDeferredValue:function(e){var t=ra();return y$(t,Mn.memoizedState,e)},useTransition:function(){var e=Ix(tm)[0],t=ra().memoizedState;return[e,t]},useMutableSource:o$,useSyncExternalStore:i$,useId:w$,unstable_isNewReconciler:!1},V5={readContext:ta,useCallback:x$,useContext:ta,useEffect:bw,useImperativeHandle:_$,useInsertionEffect:f$,useLayoutEffect:h$,useMemo:v$,useReducer:Nx,useRef:p$,useState:function(){return Nx(tm)},useDebugValue:Mw,useDeferredValue:function(e){var t=ra();return Mn===null?t.memoizedState=e:y$(t,Mn.memoizedState,e)},useTransition:function(){var e=Nx(tm)[0],t=ra().memoizedState;return[e,t]},useMutableSource:o$,useSyncExternalStore:i$,useId:w$,unstable_isNewReconciler:!1};function va(e,t){if(e&&e.defaultProps){t=Qr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function A0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Qr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Gh={isMounted:function(e){return(e=e._reactInternals)?Hl(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=as(),s=Ei(e),a=Ao(n,s);a.payload=t,r!=null&&(a.callback=r),t=Mi(e,a,s),t!==null&&(Sa(t,e,s,n),Mf(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=as(),s=Ei(e),a=Ao(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Mi(e,a,s),t!==null&&(Sa(t,e,s,n),Mf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=as(),n=Ei(e),s=Ao(r,n);s.tag=2,t!=null&&(s.callback=t),t=Mi(e,s,n),t!==null&&(Sa(t,e,n,r),Mf(t,e,n))}};function TP(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Ku(r,n)||!Ku(s,a):!0}function E$(e,t,r){var n=!1,s=ji,a=t.contextType;return typeof a=="object"&&a!==null?a=ta(a):(s=hs(t)?Al:Yn.current,n=t.contextTypes,a=(n=n!=null)?rd(e,s):ji),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function EP(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Gh.enqueueReplaceState(t,t.state,null)}function I0(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},hw(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=ta(a):(a=hs(t)?Al:Yn.current,s.context=rd(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(A0(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Gh.enqueueReplaceState(s,s.state,null),rh(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function od(e,t){try{var r="",n=t;do r+=gV(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function $x(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function N0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var W5=typeof WeakMap=="function"?WeakMap:Map;function C$(e,t,r){r=Ao(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ih||(ih=!0,W0=n),N0(e,t)},r}function P$(e,t,r){r=Ao(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){N0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){N0(e,t),typeof n!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function CP(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new W5;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=nW.bind(null,e,t,r),t.then(e,e))}function PP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function SP(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ao(-1,1),t.tag=2,Mi(r,t,1))),r.lanes|=1),e)}var U5=Bo.ReactCurrentOwner,ps=!1;function ns(e,t,r,n){t.child=e===null?r$(t,null,r,n):sd(t,e.child,r,n)}function kP(e,t,r,n,s){r=r.render;var a=t.ref;return zc(t,s),n=yw(e,t,r,n,a,s),r=ww(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Oo(e,t,s)):(Rr&&r&&lw(t),t.flags|=1,ns(e,t,n,s),t.child)}function jP(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Aw(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,S$(e,t,a,n,s)):(e=kf(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ku,r(o,n)&&e.ref===t.ref)return Oo(e,t,s)}return t.flags|=1,e=Ci(a,n),e.ref=t.ref,e.return=t,t.child=e}function S$(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Ku(a,n)&&e.ref===t.ref)if(ps=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(ps=!0);else return t.lanes=e.lanes,Oo(e,t,s)}return $0(e,t,r,n,s)}function k$(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jr(Nc,ws),ws|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jr(Nc,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,jr(Nc,ws),ws|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,jr(Nc,ws),ws|=n;return ns(e,t,s,r),t.child}function j$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $0(e,t,r,n,s){var a=hs(r)?Al:Yn.current;return a=rd(t,a),zc(t,s),r=yw(e,t,r,n,a,s),n=ww(),e!==null&&!ps?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Oo(e,t,s)):(Rr&&n&&lw(t),t.flags|=1,ns(e,t,r,s),t.child)}function AP(e,t,r,n,s){if(hs(r)){var a=!0;Yf(t)}else a=!1;if(zc(t,s),t.stateNode===null)Cf(e,t),E$(t,r,n),I0(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var l=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=ta(d):(d=hs(r)?Al:Yn.current,d=rd(t,d));var p=r.getDerivedStateFromProps,u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==n||l!==d)&&EP(t,o,n,d),ii=!1;var m=t.memoizedState;o.state=m,rh(t,n,o,s),l=t.memoizedState,i!==n||m!==l||fs.current||ii?(typeof p=="function"&&(A0(t,r,p,n),l=t.memoizedState),(i=ii||TP(t,r,i,n,m,l,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=d,n=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,s$(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:va(t.type,i),o.props=d,u=t.pendingProps,m=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ta(l):(l=hs(r)?Al:Yn.current,l=rd(t,l));var f=r.getDerivedStateFromProps;(p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==u||m!==l)&&EP(t,o,n,l),ii=!1,m=t.memoizedState,o.state=m,rh(t,n,o,s);var h=t.memoizedState;i!==u||m!==h||fs.current||ii?(typeof f=="function"&&(A0(t,r,f,n),h=t.memoizedState),(d=ii||TP(t,r,d,n,m,h,l)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,h,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=l,n=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return D0(e,t,r,n,a,s)}function D0(e,t,r,n,s,a){j$(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&gP(t,r,!1),Oo(e,t,a);n=t.stateNode,U5.current=t;var i=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=sd(t,e.child,null,a),t.child=sd(t,null,i,a)):ns(e,t,i,a),t.memoizedState=n.state,s&&gP(t,r,!0),t.child}function A$(e){var t=e.stateNode;t.pendingContext?hP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hP(e,t.context,!1),gw(e,t.containerInfo)}function IP(e,t,r,n,s){return nd(),dw(s),t.flags|=256,ns(e,t,r,n),t.child}var O0={dehydrated:null,treeContext:null,retryLane:0};function F0(e){return{baseLanes:e,cachePool:null,transitions:null}}function I$(e,t,r){var n=t.pendingProps,s=Hr.current,a=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),jr(Hr,s&1),e===null)return k0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Kh(o,n,0,null),e=jl(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=F0(r),t.memoizedState=O0,e):Tw(t,o));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return G5(e,t,o,n,i,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,i=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ci(s,l),n.subtreeFlags=s.subtreeFlags&14680064),i!==null?a=Ci(i,a):(a=jl(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?F0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=O0,n}return a=e.child,e=a.sibling,n=Ci(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Tw(e,t){return t=Kh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wp(e,t,r,n){return n!==null&&dw(n),sd(t,e.child,null,r),e=Tw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G5(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=$x(Error(Ye(422))),Wp(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=Kh({mode:"visible",children:n.children},s,0,null),a=jl(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&sd(t,e.child,null,o),t.child.memoizedState=F0(o),t.memoizedState=O0,a);if(!(t.mode&1))return Wp(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var i=n.dgst;return n=i,a=Error(Ye(419)),n=$x(a,n,void 0),Wp(e,t,o,n)}if(i=(o&e.childLanes)!==0,ps||i){if(n=In,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Do(e,s),Sa(n,e,s,-1))}return jw(),n=$x(Error(Ye(421))),Wp(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=sW.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Ts=bi(s.nextSibling),Es=t,Rr=!0,Ta=null,e!==null&&(Ks[Qs++]=ko,Ks[Qs++]=jo,Ks[Qs++]=Il,ko=e.id,jo=e.overflow,Il=t),t=Tw(t,n.children),t.flags|=4096,t)}function NP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),j0(e.return,t,r)}function Dx(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function N$(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(ns(e,t,n.children,r),n=Hr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&NP(e,r,t);else if(e.tag===19)NP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(jr(Hr,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&nh(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Dx(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&nh(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Dx(t,!0,r,null,a);break;case"together":Dx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Oo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$l|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ye(153));if(t.child!==null){for(e=t.child,r=Ci(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ci(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function H5(e,t,r){switch(t.tag){case 3:A$(t),nd();break;case 5:a$(t);break;case 1:hs(t.type)&&Yf(t);break;case 4:gw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;jr(eh,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(jr(Hr,Hr.current&1),t.flags|=128,null):r&t.child.childLanes?I$(e,t,r):(jr(Hr,Hr.current&1),e=Oo(e,t,r),e!==null?e.sibling:null);jr(Hr,Hr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return N$(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),jr(Hr,Hr.current),n)break;return null;case 22:case 23:return t.lanes=0,k$(e,t,r)}return Oo(e,t,r)}var $$,L0,D$,O$;$$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};L0=function(){};D$=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,wl(no.current);var a=null;switch(r){case"input":s=o0(e,s),n=o0(e,n),a=[];break;case"select":s=Qr({},s,{value:void 0}),n=Qr({},n,{value:void 0}),a=[];break;case"textarea":s=c0(e,s),n=c0(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Qf)}u0(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(o in i)i.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Bu.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var l=n[d];if(i=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&l!==i&&(l!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&i[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(d,r)),r=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,i=i?i.__html:void 0,l!=null&&i!==l&&(a=a||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Bu.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&$r("scroll",e),a||i===l||(a=[])):(a=a||[]).push(d,l))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};O$=function(e,t,r,n){r!==n&&(t.flags|=4)};function ou(e,t){if(!Rr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function q5(e,t,r){var n=t.pendingProps;switch(cw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qn(t),null;case 1:return hs(t.type)&&Xf(),qn(t),null;case 3:return n=t.stateNode,ad(),Dr(fs),Dr(Yn),xw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ta!==null&&(H0(Ta),Ta=null))),L0(e,t),qn(t),null;case 5:_w(t);var s=wl(Ju.current);if(r=t.type,e!==null&&t.stateNode!=null)D$(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Ye(166));return qn(t),null}if(e=wl(no.current),Bp(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Qa]=t,n[Yu]=a,e=(t.mode&1)!==0,r){case"dialog":$r("cancel",n),$r("close",n);break;case"iframe":case"object":case"embed":$r("load",n);break;case"video":case"audio":for(s=0;s<Mu.length;s++)$r(Mu[s],n);break;case"source":$r("error",n);break;case"img":case"image":case"link":$r("error",n),$r("load",n);break;case"details":$r("toggle",n);break;case"input":VC(n,a),$r("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},$r("invalid",n);break;case"textarea":UC(n,a),$r("invalid",n)}u0(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];o==="children"?typeof i=="string"?n.textContent!==i&&(a.suppressHydrationWarning!==!0&&zp(n.textContent,i,e),s=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(a.suppressHydrationWarning!==!0&&zp(n.textContent,i,e),s=["children",""+i]):Bu.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&$r("scroll",n)}switch(r){case"input":Ip(n),WC(n,a,!0);break;case"textarea":Ip(n),GC(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Qf)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Qa]=t,e[Yu]=n,$$(e,t,!1,!1),t.stateNode=e;e:{switch(o=m0(r,n),r){case"dialog":$r("cancel",e),$r("close",e),s=n;break;case"iframe":case"object":case"embed":$r("load",e),s=n;break;case"video":case"audio":for(s=0;s<Mu.length;s++)$r(Mu[s],e);s=n;break;case"source":$r("error",e),s=n;break;case"img":case"image":case"link":$r("error",e),$r("load",e),s=n;break;case"details":$r("toggle",e),s=n;break;case"input":VC(e,n),s=o0(e,n),$r("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Qr({},n,{value:void 0}),$r("invalid",e);break;case"textarea":UC(e,n),s=c0(e,n),$r("invalid",e);break;default:s=n}u0(r,s),i=s;for(a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="style"?pN(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uN(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Vu(e,l):typeof l=="number"&&Vu(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Bu.hasOwnProperty(a)?l!=null&&a==="onScroll"&&$r("scroll",e):l!=null&&Ky(e,a,l,o))}switch(r){case"input":Ip(e),WC(e,n,!1);break;case"textarea":Ip(e),GC(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ki(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Oc(e,!!n.multiple,a,!1):n.defaultValue!=null&&Oc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Qf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qn(t),null;case 6:if(e&&t.stateNode!=null)O$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Ye(166));if(r=wl(Ju.current),wl(no.current),Bp(t)){if(n=t.stateNode,r=t.memoizedProps,n[Qa]=t,(a=n.nodeValue!==r)&&(e=Es,e!==null))switch(e.tag){case 3:zp(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zp(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Qa]=t,t.stateNode=n}return qn(t),null;case 13:if(Dr(Hr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rr&&Ts!==null&&t.mode&1&&!(t.flags&128))e$(),nd(),t.flags|=98560,a=!1;else if(a=Bp(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(Ye(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ye(317));a[Qa]=t}else nd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qn(t),a=!1}else Ta!==null&&(H0(Ta),Ta=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Hr.current&1?En===0&&(En=3):jw())),t.updateQueue!==null&&(t.flags|=4),qn(t),null);case 4:return ad(),L0(e,t),e===null&&Qu(t.stateNode.containerInfo),qn(t),null;case 10:return pw(t.type._context),qn(t),null;case 17:return hs(t.type)&&Xf(),qn(t),null;case 19:if(Dr(Hr),a=t.memoizedState,a===null)return qn(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)ou(a,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nh(e),o!==null){for(t.flags|=128,ou(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return jr(Hr,Hr.current&1|2),t.child}e=e.sibling}a.tail!==null&&un()>id&&(t.flags|=128,n=!0,ou(a,!1),t.lanes=4194304)}else{if(!n)if(e=nh(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ou(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Rr)return qn(t),null}else 2*un()-a.renderingStartTime>id&&r!==1073741824&&(t.flags|=128,n=!0,ou(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=un(),t.sibling=null,r=Hr.current,jr(Hr,n?r&1|2:r&1),t):(qn(t),null);case 22:case 23:return kw(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ws&1073741824&&(qn(t),t.subtreeFlags&6&&(t.flags|=8192)):qn(t),null;case 24:return null;case 25:return null}throw Error(Ye(156,t.tag))}function K5(e,t){switch(cw(t),t.tag){case 1:return hs(t.type)&&Xf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ad(),Dr(fs),Dr(Yn),xw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _w(t),null;case 13:if(Dr(Hr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ye(340));nd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dr(Hr),null;case 4:return ad(),null;case 10:return pw(t.type._context),null;case 22:case 23:return kw(),null;case 24:return null;default:return null}}var Up=!1,Xn=!1,Q5=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Ic(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){rn(e,t,n)}else r.current=null}function R0(e,t,r){try{r()}catch(n){rn(e,t,n)}}var $P=!1;function X5(e,t){if(b0=Hf,e=BN(),iw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,i=-1,l=-1,d=0,p=0,u=e,m=null;t:for(;;){for(var f;u!==r||s!==0&&u.nodeType!==3||(i=o+s),u!==a||n!==0&&u.nodeType!==3||(l=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)m=u,u=f;for(;;){if(u===e)break t;if(m===r&&++d===s&&(i=o),m===a&&++p===n&&(l=o),(f=u.nextSibling)!==null)break;u=m,m=u.parentNode}u=f}r=i===-1||l===-1?null:{start:i,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(M0={focusedElem:e,selectionRange:r},Hf=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var _=h.memoizedProps,v=h.memoizedState,g=t.stateNode,x=g.getSnapshotBeforeUpdate(t.elementType===t.type?_:va(t.type,_),v);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(w){rn(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return h=$P,$P=!1,h}function Du(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&R0(t,r,a)}s=s.next}while(s!==n)}}function Hh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function z0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function F$(e){var t=e.alternate;t!==null&&(e.alternate=null,F$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qa],delete t[Yu],delete t[C0],delete t[I5],delete t[N5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function L$(e){return e.tag===5||e.tag===3||e.tag===4}function DP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||L$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function B0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qf));else if(n!==4&&(e=e.child,e!==null))for(B0(e,t,r),e=e.sibling;e!==null;)B0(e,t,r),e=e.sibling}function V0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(V0(e,t,r),e=e.sibling;e!==null;)V0(e,t,r),e=e.sibling}var Fn=null,Ma=!1;function Qo(e,t,r){for(r=r.child;r!==null;)R$(e,t,r),r=r.sibling}function R$(e,t,r){if(ro&&typeof ro.onCommitFiberUnmount=="function")try{ro.onCommitFiberUnmount(Lh,r)}catch{}switch(r.tag){case 5:Xn||Ic(r,t);case 6:var n=Fn,s=Ma;Fn=null,Qo(e,t,r),Fn=n,Ma=s,Fn!==null&&(Ma?(e=Fn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fn.removeChild(r.stateNode));break;case 18:Fn!==null&&(Ma?(e=Fn,r=r.stateNode,e.nodeType===8?Sx(e.parentNode,r):e.nodeType===1&&Sx(e,r),Hu(e)):Sx(Fn,r.stateNode));break;case 4:n=Fn,s=Ma,Fn=r.stateNode.containerInfo,Ma=!0,Qo(e,t,r),Fn=n,Ma=s;break;case 0:case 11:case 14:case 15:if(!Xn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&R0(r,t,o),s=s.next}while(s!==n)}Qo(e,t,r);break;case 1:if(!Xn&&(Ic(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(i){rn(r,t,i)}Qo(e,t,r);break;case 21:Qo(e,t,r);break;case 22:r.mode&1?(Xn=(n=Xn)||r.memoizedState!==null,Qo(e,t,r),Xn=n):Qo(e,t,r);break;default:Qo(e,t,r)}}function OP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Q5),t.forEach(function(n){var s=aW.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function ua(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:Fn=i.stateNode,Ma=!1;break e;case 3:Fn=i.stateNode.containerInfo,Ma=!0;break e;case 4:Fn=i.stateNode.containerInfo,Ma=!0;break e}i=i.return}if(Fn===null)throw Error(Ye(160));R$(a,o,s),Fn=null,Ma=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){rn(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)z$(t,e),t=t.sibling}function z$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ua(t,e),Va(e),n&4){try{Du(3,e,e.return),Hh(3,e)}catch(_){rn(e,e.return,_)}try{Du(5,e,e.return)}catch(_){rn(e,e.return,_)}}break;case 1:ua(t,e),Va(e),n&512&&r!==null&&Ic(r,r.return);break;case 5:if(ua(t,e),Va(e),n&512&&r!==null&&Ic(r,r.return),e.flags&32){var s=e.stateNode;try{Vu(s,"")}catch(_){rn(e,e.return,_)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,i=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{i==="input"&&a.type==="radio"&&a.name!=null&&lN(s,a),m0(i,o);var d=m0(i,a);for(o=0;o<l.length;o+=2){var p=l[o],u=l[o+1];p==="style"?pN(s,u):p==="dangerouslySetInnerHTML"?uN(s,u):p==="children"?Vu(s,u):Ky(s,p,u,d)}switch(i){case"input":i0(s,a);break;case"textarea":cN(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?Oc(s,!!a.multiple,f,!1):m!==!!a.multiple&&(a.defaultValue!=null?Oc(s,!!a.multiple,a.defaultValue,!0):Oc(s,!!a.multiple,a.multiple?[]:"",!1))}s[Yu]=a}catch(_){rn(e,e.return,_)}}break;case 6:if(ua(t,e),Va(e),n&4){if(e.stateNode===null)throw Error(Ye(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(_){rn(e,e.return,_)}}break;case 3:if(ua(t,e),Va(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Hu(t.containerInfo)}catch(_){rn(e,e.return,_)}break;case 4:ua(t,e),Va(e);break;case 13:ua(t,e),Va(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Pw=un())),n&4&&OP(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Xn=(d=Xn)||p,ua(t,e),Xn=d):ua(t,e),Va(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!p&&e.mode&1)for(gt=e,p=e.child;p!==null;){for(u=gt=p;gt!==null;){switch(m=gt,f=m.child,m.tag){case 0:case 11:case 14:case 15:Du(4,m,m.return);break;case 1:Ic(m,m.return);var h=m.stateNode;if(typeof h.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(_){rn(n,r,_)}}break;case 5:Ic(m,m.return);break;case 22:if(m.memoizedState!==null){LP(u);continue}}f!==null?(f.return=m,gt=f):LP(u)}p=p.sibling}e:for(p=null,u=e;;){if(u.tag===5){if(p===null){p=u;try{s=u.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(i=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,i.style.display=mN("display",o))}catch(_){rn(e,e.return,_)}}}else if(u.tag===6){if(p===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(_){rn(e,e.return,_)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ua(t,e),Va(e),n&4&&OP(e);break;case 21:break;default:ua(t,e),Va(e)}}function Va(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(L$(r)){var n=r;break e}r=r.return}throw Error(Ye(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Vu(s,""),n.flags&=-33);var a=DP(e);V0(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,i=DP(e);B0(e,i,o);break;default:throw Error(Ye(161))}}catch(l){rn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y5(e,t,r){gt=e,B$(e)}function B$(e,t,r){for(var n=(e.mode&1)!==0;gt!==null;){var s=gt,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Up;if(!o){var i=s.alternate,l=i!==null&&i.memoizedState!==null||Xn;i=Up;var d=Xn;if(Up=o,(Xn=l)&&!d)for(gt=s;gt!==null;)o=gt,l=o.child,o.tag===22&&o.memoizedState!==null?RP(s):l!==null?(l.return=o,gt=l):RP(s);for(;a!==null;)gt=a,B$(a),a=a.sibling;gt=s,Up=i,Xn=d}FP(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,gt=a):FP(e)}}function FP(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xn||Hh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Xn)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:va(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&wP(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}wP(t,o,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var u=p.dehydrated;u!==null&&Hu(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}Xn||t.flags&512&&z0(t)}catch(m){rn(t,t.return,m)}}if(t===e){gt=null;break}if(r=t.sibling,r!==null){r.return=t.return,gt=r;break}gt=t.return}}function LP(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,gt=r;break}gt=t.return}}function RP(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Hh(4,t)}catch(l){rn(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(l){rn(t,s,l)}}var a=t.return;try{z0(t)}catch(l){rn(t,a,l)}break;case 5:var o=t.return;try{z0(t)}catch(l){rn(t,o,l)}}}catch(l){rn(t,t.return,l)}if(t===e){gt=null;break}var i=t.sibling;if(i!==null){i.return=t.return,gt=i;break}gt=t.return}}var Z5=Math.ceil,oh=Bo.ReactCurrentDispatcher,Ew=Bo.ReactCurrentOwner,Zs=Bo.ReactCurrentBatchConfig,dr=0,In=null,vn=null,Ln=0,ws=0,Nc=Ri(0),En=0,nm=null,$l=0,qh=0,Cw=0,Ou=null,ms=null,Pw=0,id=1/0,Eo=null,ih=!1,W0=null,Ti=null,Gp=!1,gi=null,lh=0,Fu=0,U0=null,Pf=-1,Sf=0;function as(){return dr&6?un():Pf!==-1?Pf:Pf=un()}function Ei(e){return e.mode&1?dr&2&&Ln!==0?Ln&-Ln:D5.transition!==null?(Sf===0&&(Sf=EN()),Sf):(e=xr,e!==0||(e=window.event,e=e===void 0?16:IN(e.type)),e):1}function Sa(e,t,r,n){if(50<Fu)throw Fu=0,U0=null,Error(Ye(185));bm(e,r,n),(!(dr&2)||e!==In)&&(e===In&&(!(dr&2)&&(qh|=r),En===4&&ci(e,Ln)),gs(e,n),r===1&&dr===0&&!(t.mode&1)&&(id=un()+500,Wh&&zi()))}function gs(e,t){var r=e.callbackNode;DV(e,t);var n=Gf(e,e===In?Ln:0);if(n===0)r!==null&&KC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&KC(r),t===1)e.tag===0?$5(zP.bind(null,e)):YN(zP.bind(null,e)),j5(function(){!(dr&6)&&zi()}),r=null;else{switch(CN(n)){case 1:r=Jy;break;case 4:r=MN;break;case 16:r=Uf;break;case 536870912:r=TN;break;default:r=Uf}r=Q$(r,V$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function V$(e,t){if(Pf=-1,Sf=0,dr&6)throw Error(Ye(327));var r=e.callbackNode;if(Bc()&&e.callbackNode!==r)return null;var n=Gf(e,e===In?Ln:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ch(e,n);else{t=n;var s=dr;dr|=2;var a=U$();(In!==e||Ln!==t)&&(Eo=null,id=un()+500,kl(e,t));do try{tW();break}catch(i){W$(e,i)}while(!0);mw(),oh.current=a,dr=s,vn!==null?t=0:(In=null,Ln=0,t=En)}if(t!==0){if(t===2&&(s=_0(e),s!==0&&(n=s,t=G0(e,s))),t===1)throw r=nm,kl(e,0),ci(e,n),gs(e,un()),r;if(t===6)ci(e,n);else{if(s=e.current.alternate,!(n&30)&&!J5(s)&&(t=ch(e,n),t===2&&(a=_0(e),a!==0&&(n=a,t=G0(e,a))),t===1))throw r=nm,kl(e,0),ci(e,n),gs(e,un()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Ye(345));case 2:fl(e,ms,Eo);break;case 3:if(ci(e,n),(n&130023424)===n&&(t=Pw+500-un(),10<t)){if(Gf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){as(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=E0(fl.bind(null,e,ms,Eo),t);break}fl(e,ms,Eo);break;case 4:if(ci(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Pa(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=un()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Z5(n/1960))-n,10<n){e.timeoutHandle=E0(fl.bind(null,e,ms,Eo),n);break}fl(e,ms,Eo);break;case 5:fl(e,ms,Eo);break;default:throw Error(Ye(329))}}}return gs(e,un()),e.callbackNode===r?V$.bind(null,e):null}function G0(e,t){var r=Ou;return e.current.memoizedState.isDehydrated&&(kl(e,t).flags|=256),e=ch(e,t),e!==2&&(t=ms,ms=r,t!==null&&H0(t)),e}function H0(e){ms===null?ms=e:ms.push.apply(ms,e)}function J5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Ia(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ci(e,t){for(t&=~Cw,t&=~qh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Pa(t),n=1<<r;e[r]=-1,t&=~n}}function zP(e){if(dr&6)throw Error(Ye(327));Bc();var t=Gf(e,0);if(!(t&1))return gs(e,un()),null;var r=ch(e,t);if(e.tag!==0&&r===2){var n=_0(e);n!==0&&(t=n,r=G0(e,n))}if(r===1)throw r=nm,kl(e,0),ci(e,t),gs(e,un()),r;if(r===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,fl(e,ms,Eo),gs(e,un()),null}function Sw(e,t){var r=dr;dr|=1;try{return e(t)}finally{dr=r,dr===0&&(id=un()+500,Wh&&zi())}}function Dl(e){gi!==null&&gi.tag===0&&!(dr&6)&&Bc();var t=dr;dr|=1;var r=Zs.transition,n=xr;try{if(Zs.transition=null,xr=1,e)return e()}finally{xr=n,Zs.transition=r,dr=t,!(dr&6)&&zi()}}function kw(){ws=Nc.current,Dr(Nc)}function kl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,k5(r)),vn!==null)for(r=vn.return;r!==null;){var n=r;switch(cw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xf();break;case 3:ad(),Dr(fs),Dr(Yn),xw();break;case 5:_w(n);break;case 4:ad();break;case 13:Dr(Hr);break;case 19:Dr(Hr);break;case 10:pw(n.type._context);break;case 22:case 23:kw()}r=r.return}if(In=e,vn=e=Ci(e.current,null),Ln=ws=t,En=0,nm=null,Cw=qh=$l=0,ms=Ou=null,yl!==null){for(t=0;t<yl.length;t++)if(r=yl[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}yl=null}return e}function W$(e,t){do{var r=vn;try{if(mw(),Tf.current=ah,sh){for(var n=Kr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sh=!1}if(Nl=0,An=Mn=Kr=null,$u=!1,em=0,Ew.current=null,r===null||r.return===null){En=1,nm=t,vn=null;break}e:{var a=e,o=r.return,i=r,l=t;if(t=Ln,i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,p=i,u=p.tag;if(!(p.mode&1)&&(u===0||u===11||u===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var f=PP(o);if(f!==null){f.flags&=-257,SP(f,o,i,a,t),f.mode&1&&CP(a,d,t),t=f,l=d;var h=t.updateQueue;if(h===null){var _=new Set;_.add(l),t.updateQueue=_}else h.add(l);break e}else{if(!(t&1)){CP(a,d,t),jw();break e}l=Error(Ye(426))}}else if(Rr&&i.mode&1){var v=PP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),SP(v,o,i,a,t),dw(od(l,i));break e}}a=l=od(l,i),En!==4&&(En=2),Ou===null?Ou=[a]:Ou.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=C$(a,l,t);yP(a,g);break e;case 1:i=l;var x=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ti===null||!Ti.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=P$(a,i,t);yP(a,w);break e}}a=a.return}while(a!==null)}H$(r)}catch(b){t=b,vn===r&&r!==null&&(vn=r=r.return);continue}break}while(!0)}function U$(){var e=oh.current;return oh.current=ah,e===null?ah:e}function jw(){(En===0||En===3||En===2)&&(En=4),In===null||!($l&268435455)&&!(qh&268435455)||ci(In,Ln)}function ch(e,t){var r=dr;dr|=2;var n=U$();(In!==e||Ln!==t)&&(Eo=null,kl(e,t));do try{eW();break}catch(s){W$(e,s)}while(!0);if(mw(),dr=r,oh.current=n,vn!==null)throw Error(Ye(261));return In=null,Ln=0,En}function eW(){for(;vn!==null;)G$(vn)}function tW(){for(;vn!==null&&!CV();)G$(vn)}function G$(e){var t=K$(e.alternate,e,ws);e.memoizedProps=e.pendingProps,t===null?H$(e):vn=t,Ew.current=null}function H$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=K5(r,t),r!==null){r.flags&=32767,vn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,vn=null;return}}else if(r=q5(r,t,ws),r!==null){vn=r;return}if(t=t.sibling,t!==null){vn=t;return}vn=t=e}while(t!==null);En===0&&(En=5)}function fl(e,t,r){var n=xr,s=Zs.transition;try{Zs.transition=null,xr=1,rW(e,t,r,n)}finally{Zs.transition=s,xr=n}return null}function rW(e,t,r,n){do Bc();while(gi!==null);if(dr&6)throw Error(Ye(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(OV(e,a),e===In&&(vn=In=null,Ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gp||(Gp=!0,Q$(Uf,function(){return Bc(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Zs.transition,Zs.transition=null;var o=xr;xr=1;var i=dr;dr|=4,Ew.current=null,X5(e,r),z$(r,e),b5(M0),Hf=!!b0,M0=b0=null,e.current=r,Y5(r),PV(),dr=i,xr=o,Zs.transition=a}else e.current=r;if(Gp&&(Gp=!1,gi=e,lh=s),a=e.pendingLanes,a===0&&(Ti=null),jV(r.stateNode),gs(e,un()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(ih)throw ih=!1,e=W0,W0=null,e;return lh&1&&e.tag!==0&&Bc(),a=e.pendingLanes,a&1?e===U0?Fu++:(Fu=0,U0=e):Fu=0,zi(),null}function Bc(){if(gi!==null){var e=CN(lh),t=Zs.transition,r=xr;try{if(Zs.transition=null,xr=16>e?16:e,gi===null)var n=!1;else{if(e=gi,gi=null,lh=0,dr&6)throw Error(Ye(331));var s=dr;for(dr|=4,gt=e.current;gt!==null;){var a=gt,o=a.child;if(gt.flags&16){var i=a.deletions;if(i!==null){for(var l=0;l<i.length;l++){var d=i[l];for(gt=d;gt!==null;){var p=gt;switch(p.tag){case 0:case 11:case 15:Du(8,p,a)}var u=p.child;if(u!==null)u.return=p,gt=u;else for(;gt!==null;){p=gt;var m=p.sibling,f=p.return;if(F$(p),p===d){gt=null;break}if(m!==null){m.return=f,gt=m;break}gt=f}}}var h=a.alternate;if(h!==null){var _=h.child;if(_!==null){h.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}gt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,gt=o;else e:for(;gt!==null;){if(a=gt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Du(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,gt=g;break e}gt=a.return}}var x=e.current;for(gt=x;gt!==null;){o=gt;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,gt=y;else e:for(o=x;gt!==null;){if(i=gt,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Hh(9,i)}}catch(b){rn(i,i.return,b)}if(i===o){gt=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,gt=w;break e}gt=i.return}}if(dr=s,zi(),ro&&typeof ro.onPostCommitFiberRoot=="function")try{ro.onPostCommitFiberRoot(Lh,e)}catch{}n=!0}return n}finally{xr=r,Zs.transition=t}}return!1}function BP(e,t,r){t=od(r,t),t=C$(e,t,1),e=Mi(e,t,1),t=as(),e!==null&&(bm(e,1,t),gs(e,t))}function rn(e,t,r){if(e.tag===3)BP(e,e,r);else for(;t!==null;){if(t.tag===3){BP(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ti===null||!Ti.has(n))){e=od(r,e),e=P$(t,e,1),t=Mi(t,e,1),e=as(),t!==null&&(bm(t,1,e),gs(t,e));break}}t=t.return}}function nW(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=as(),e.pingedLanes|=e.suspendedLanes&r,In===e&&(Ln&r)===r&&(En===4||En===3&&(Ln&130023424)===Ln&&500>un()-Pw?kl(e,0):Cw|=r),gs(e,t)}function q$(e,t){t===0&&(e.mode&1?(t=Dp,Dp<<=1,!(Dp&130023424)&&(Dp=4194304)):t=1);var r=as();e=Do(e,t),e!==null&&(bm(e,t,r),gs(e,r))}function sW(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),q$(e,r)}function aW(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Ye(314))}n!==null&&n.delete(t),q$(e,r)}var K$;K$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||fs.current)ps=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ps=!1,H5(e,t,r);ps=!!(e.flags&131072)}else ps=!1,Rr&&t.flags&1048576&&ZN(t,Jf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Cf(e,t),e=t.pendingProps;var s=rd(t,Yn.current);zc(t,r),s=yw(null,t,n,e,s,r);var a=ww();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,hs(n)?(a=!0,Yf(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hw(t),s.updater=Gh,t.stateNode=s,s._reactInternals=t,I0(t,n,e,r),t=D0(null,t,n,!0,a,r)):(t.tag=0,Rr&&a&&lw(t),ns(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Cf(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=iW(n),e=va(n,e),s){case 0:t=$0(null,t,n,e,r);break e;case 1:t=AP(null,t,n,e,r);break e;case 11:t=kP(null,t,n,e,r);break e;case 14:t=jP(null,t,n,va(n.type,e),r);break e}throw Error(Ye(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:va(n,s),$0(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:va(n,s),AP(e,t,n,s,r);case 3:e:{if(A$(t),e===null)throw Error(Ye(387));n=t.pendingProps,a=t.memoizedState,s=a.element,s$(e,t),rh(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=od(Error(Ye(423)),t),t=IP(e,t,n,r,s);break e}else if(n!==s){s=od(Error(Ye(424)),t),t=IP(e,t,n,r,s);break e}else for(Ts=bi(t.stateNode.containerInfo.firstChild),Es=t,Rr=!0,Ta=null,r=r$(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(nd(),n===s){t=Oo(e,t,r);break e}ns(e,t,n,r)}t=t.child}return t;case 5:return a$(t),e===null&&k0(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,T0(n,s)?o=null:a!==null&&T0(n,a)&&(t.flags|=32),j$(e,t),ns(e,t,o,r),t.child;case 6:return e===null&&k0(t),null;case 13:return I$(e,t,r);case 4:return gw(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=sd(t,null,n,r):ns(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:va(n,s),kP(e,t,n,s,r);case 7:return ns(e,t,t.pendingProps,r),t.child;case 8:return ns(e,t,t.pendingProps.children,r),t.child;case 12:return ns(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,jr(eh,n._currentValue),n._currentValue=o,a!==null)if(Ia(a.value,o)){if(a.children===s.children&&!fs.current){t=Oo(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){o=a.child;for(var l=i.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Ao(-1,r&-r),l.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?l.next=l:(l.next=p.next,p.next=l),d.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),j0(a.return,r,t),i.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ye(341));o.lanes|=r,i=o.alternate,i!==null&&(i.lanes|=r),j0(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ns(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,zc(t,r),s=ta(s),n=n(s),t.flags|=1,ns(e,t,n,r),t.child;case 14:return n=t.type,s=va(n,t.pendingProps),s=va(n.type,s),jP(e,t,n,s,r);case 15:return S$(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:va(n,s),Cf(e,t),t.tag=1,hs(n)?(e=!0,Yf(t)):e=!1,zc(t,r),E$(t,n,s),I0(t,n,s,r),D0(null,t,n,!0,e,r);case 19:return N$(e,t,r);case 22:return k$(e,t,r)}throw Error(Ye(156,t.tag))};function Q$(e,t){return bN(e,t)}function oW(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(e,t,r,n){return new oW(e,t,r,n)}function Aw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iW(e){if(typeof e=="function")return Aw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xy)return 11;if(e===Yy)return 14}return 2}function Ci(e,t){var r=e.alternate;return r===null?(r=Ys(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kf(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")Aw(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Mc:return jl(r.children,s,a,t);case Qy:o=8,s|=8;break;case r0:return e=Ys(12,r,t,s|2),e.elementType=r0,e.lanes=a,e;case n0:return e=Ys(13,r,t,s),e.elementType=n0,e.lanes=a,e;case s0:return e=Ys(19,r,t,s),e.elementType=s0,e.lanes=a,e;case aN:return Kh(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nN:o=10;break e;case sN:o=9;break e;case Xy:o=11;break e;case Yy:o=14;break e;case oi:o=16,n=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return t=Ys(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function jl(e,t,r,n){return e=Ys(7,e,n,t),e.lanes=r,e}function Kh(e,t,r,n){return e=Ys(22,e,n,t),e.elementType=aN,e.lanes=r,e.stateNode={isHidden:!1},e}function Ox(e,t,r){return e=Ys(6,e,null,t),e.lanes=r,e}function Fx(e,t,r){return t=Ys(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lW(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_x(0),this.expirationTimes=_x(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_x(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Iw(e,t,r,n,s,a,o,i,l){return e=new lW(e,t,r,i,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ys(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hw(a),e}function cW(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function X$(e){if(!e)return ji;e=e._reactInternals;e:{if(Hl(e)!==e||e.tag!==1)throw Error(Ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(hs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ye(171))}if(e.tag===1){var r=e.type;if(hs(r))return XN(e,r,t)}return t}function Y$(e,t,r,n,s,a,o,i,l){return e=Iw(r,n,!0,e,s,a,o,i,l),e.context=X$(null),r=e.current,n=as(),s=Ei(r),a=Ao(n,s),a.callback=t??null,Mi(r,a,s),e.current.lanes=s,bm(e,s,n),gs(e,n),e}function Qh(e,t,r,n){var s=t.current,a=as(),o=Ei(s);return r=X$(r),t.context===null?t.context=r:t.pendingContext=r,t=Ao(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Mi(s,t,o),e!==null&&(Sa(e,s,o,a),Mf(e,s,o)),o}function dh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function VP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Nw(e,t){VP(e,t),(e=e.alternate)&&VP(e,t)}function dW(){return null}var Z$=typeof reportError=="function"?reportError:function(e){console.error(e)};function $w(e){this._internalRoot=e}Xh.prototype.render=$w.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ye(409));Qh(e,t,null,null)};Xh.prototype.unmount=$w.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dl(function(){Qh(null,e,null,null)}),t[$o]=null}};function Xh(e){this._internalRoot=e}Xh.prototype.unstable_scheduleHydration=function(e){if(e){var t=kN();e={blockedOn:null,target:e,priority:t};for(var r=0;r<li.length&&t!==0&&t<li[r].priority;r++);li.splice(r,0,e),r===0&&AN(e)}};function Dw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function WP(){}function uW(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=dh(o);a.call(d)}}var o=Y$(t,n,e,0,null,!1,!1,"",WP);return e._reactRootContainer=o,e[$o]=o.current,Qu(e.nodeType===8?e.parentNode:e),Dl(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var i=n;n=function(){var d=dh(l);i.call(d)}}var l=Iw(e,0,!1,null,null,!1,!1,"",WP);return e._reactRootContainer=l,e[$o]=l.current,Qu(e.nodeType===8?e.parentNode:e),Dl(function(){Qh(t,l,r,n)}),l}function Zh(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var i=s;s=function(){var l=dh(o);i.call(l)}}Qh(t,o,e,s)}else o=uW(r,t,e,s,n);return dh(o)}PN=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bu(t.pendingLanes);r!==0&&(ew(t,r|1),gs(t,un()),!(dr&6)&&(id=un()+500,zi()))}break;case 13:Dl(function(){var n=Do(e,1);if(n!==null){var s=as();Sa(n,e,1,s)}}),Nw(e,1)}};tw=function(e){if(e.tag===13){var t=Do(e,134217728);if(t!==null){var r=as();Sa(t,e,134217728,r)}Nw(e,134217728)}};SN=function(e){if(e.tag===13){var t=Ei(e),r=Do(e,t);if(r!==null){var n=as();Sa(r,e,t,n)}Nw(e,t)}};kN=function(){return xr};jN=function(e,t){var r=xr;try{return xr=e,t()}finally{xr=r}};f0=function(e,t,r){switch(t){case"input":if(i0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Vh(n);if(!s)throw Error(Ye(90));iN(n),i0(n,s)}}}break;case"textarea":cN(e,r);break;case"select":t=r.value,t!=null&&Oc(e,!!r.multiple,t,!1)}};gN=Sw;_N=Dl;var mW={usingClientEntryPoint:!1,Events:[Tm,Pc,Vh,fN,hN,Sw]},iu={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pW={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yN(e),e===null?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||dW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hp.isDisabled&&Hp.supportsFiber)try{Lh=Hp.inject(pW),ro=Hp}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mW;As.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dw(t))throw Error(Ye(200));return cW(e,t,null,r)};As.createRoot=function(e,t){if(!Dw(e))throw Error(Ye(299));var r=!1,n="",s=Z$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Iw(e,1,!1,null,null,r,!1,n,s),e[$o]=t.current,Qu(e.nodeType===8?e.parentNode:e),new $w(t)};As.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=yN(t),e=e===null?null:e.stateNode,e};As.flushSync=function(e){return Dl(e)};As.hydrate=function(e,t,r){if(!Yh(t))throw Error(Ye(200));return Zh(null,e,t,!0,r)};As.hydrateRoot=function(e,t,r){if(!Dw(e))throw Error(Ye(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=Z$;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Y$(t,null,e,1,r??null,s,!1,a,o),e[$o]=t.current,Qu(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xh(t)};As.render=function(e,t,r){if(!Yh(t))throw Error(Ye(200));return Zh(null,e,t,!1,r)};As.unmountComponentAtNode=function(e){if(!Yh(e))throw Error(Ye(40));return e._reactRootContainer?(Dl(function(){Zh(null,null,e,!1,function(){e._reactRootContainer=null,e[$o]=null})}),!0):!1};As.unstable_batchedUpdates=Sw;As.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yh(r))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return Zh(e,t,r,!1,n)};As.version="18.3.1-next-f1338f8080-20240426";function J$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J$)}catch(e){console.error(e)}}J$(),JI.exports=As;var ql=JI.exports;const e3=zy(ql);var t3,UP=ql;t3=UP.createRoot,UP.hydrateRoot;const fW=1,hW=1e6;let Lx=0;function gW(){return Lx=(Lx+1)%Number.MAX_SAFE_INTEGER,Lx.toString()}const Rx=new Map,GP=e=>{if(Rx.has(e))return;const t=setTimeout(()=>{Rx.delete(e),Lu({type:"REMOVE_TOAST",toastId:e})},hW);Rx.set(e,t)},_W=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,fW)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?GP(r):e.toasts.forEach(n=>{GP(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},jf=[];let Af={toasts:[]};function Lu(e){Af=_W(Af,e),jf.forEach(t=>{t(Af)})}function xW({...e}){const t=gW(),r=s=>Lu({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>Lu({type:"DISMISS_TOAST",toastId:t});return Lu({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function vW(){const[e,t]=k.useState(Af);return k.useEffect(()=>(jf.push(t),()=>{const r=jf.indexOf(t);r>-1&&jf.splice(r,1)}),[e]),{...e,toast:xW,dismiss:r=>Lu({type:"DISMISS_TOAST",toastId:r})}}function Et(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function HP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function r3(...e){return t=>{let r=!1;const n=e.map(s=>{const a=HP(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():HP(e[s],null)}}}}function tr(...e){return k.useCallback(r3(...e),e)}function yW(e,t){const r=k.createContext(t),n=a=>{const{children:o,...i}=a,l=k.useMemo(()=>i,Object.values(i));return c.jsx(r.Provider,{value:l,children:o})};n.displayName=e+"Provider";function s(a){const o=k.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function Ns(e,t=[]){let r=[];function n(a,o){const i=k.createContext(o),l=r.length;r=[...r,o];const d=u=>{var g;const{scope:m,children:f,...h}=u,_=((g=m==null?void 0:m[e])==null?void 0:g[l])||i,v=k.useMemo(()=>h,Object.values(h));return c.jsx(_.Provider,{value:v,children:f})};d.displayName=a+"Provider";function p(u,m){var _;const f=((_=m==null?void 0:m[e])==null?void 0:_[l])||i,h=k.useContext(f);if(h)return h;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${a}\``)}return[d,p]}const s=()=>{const a=r.map(o=>k.createContext(o));return function(i){const l=(i==null?void 0:i[e])||a;return k.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return s.scopeName=e,[n,wW(s,...t)]}function wW(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((i,{useScope:l,scopeName:d})=>{const u=l(a)[`__scope${d}`];return{...i,...u}},{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function ld(e){const t=MW(e),r=k.forwardRef((n,s)=>{const{children:a,...o}=n,i=k.Children.toArray(a),l=i.find(EW);if(l){const d=l.props.children,p=i.map(u=>u===l?k.Children.count(d)>1?k.Children.only(null):k.isValidElement(d)?d.props.children:null:u);return c.jsx(t,{...o,ref:s,children:k.isValidElement(d)?k.cloneElement(d,void 0,p):null})}return c.jsx(t,{...o,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var bW=ld("Slot");function MW(e){const t=k.forwardRef((r,n)=>{const{children:s,...a}=r;if(k.isValidElement(s)){const o=PW(s),i=CW(a,s.props);return s.type!==k.Fragment&&(i.ref=n?r3(n,o):o),k.cloneElement(s,i)}return k.Children.count(s)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var n3=Symbol("radix.slottable");function TW(e){const t=({children:r})=>c.jsx(c.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=n3,t}function EW(e){return k.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===n3}function CW(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...i)=>{const l=a(...i);return s(...i),l}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function PW(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ow(e){const t=e+"CollectionProvider",[r,n]=Ns(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=_=>{const{scope:v,children:g}=_,x=nt.useRef(null),y=nt.useRef(new Map).current;return c.jsx(s,{scope:v,itemMap:y,collectionRef:x,children:g})};o.displayName=t;const i=e+"CollectionSlot",l=ld(i),d=nt.forwardRef((_,v)=>{const{scope:g,children:x}=_,y=a(i,g),w=tr(v,y.collectionRef);return c.jsx(l,{ref:w,children:x})});d.displayName=i;const p=e+"CollectionItemSlot",u="data-radix-collection-item",m=ld(p),f=nt.forwardRef((_,v)=>{const{scope:g,children:x,...y}=_,w=nt.useRef(null),b=tr(v,w),C=a(p,g);return nt.useEffect(()=>(C.itemMap.set(w,{ref:w,...y}),()=>void C.itemMap.delete(w))),c.jsx(m,{[u]:"",ref:b,children:x})});f.displayName=p;function h(_){const v=a(e+"CollectionConsumer",_);return nt.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((C,E)=>y.indexOf(C.ref.current)-y.indexOf(E.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:d,ItemSlot:f},h,n]}var SW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],At=SW.reduce((e,t)=>{const r=ld(`Primitive.${t}`),n=k.forwardRef((s,a)=>{const{asChild:o,...i}=s,l=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...i,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function s3(e,t){e&&ql.flushSync(()=>e.dispatchEvent(t))}function Tn(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function kW(e,t=globalThis==null?void 0:globalThis.document){const r=Tn(e);k.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var jW="DismissableLayer",q0="dismissableLayer.update",AW="dismissableLayer.pointerDownOutside",IW="dismissableLayer.focusOutside",qP,a3=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Cm=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:i,...l}=e,d=k.useContext(a3),[p,u]=k.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=k.useState({}),h=tr(t,E=>u(E)),_=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=_.indexOf(v),x=p?_.indexOf(p):-1,y=d.layersWithOutsidePointerEventsDisabled.size>0,w=x>=g,b=$W(E=>{const P=E.target,I=[...d.branches].some($=>$.contains(P));!w||I||(s==null||s(E),o==null||o(E),E.defaultPrevented||i==null||i())},m),C=DW(E=>{const P=E.target;[...d.branches].some($=>$.contains(P))||(a==null||a(E),o==null||o(E),E.defaultPrevented||i==null||i())},m);return kW(E=>{x===d.layers.size-1&&(n==null||n(E),!E.defaultPrevented&&i&&(E.preventDefault(),i()))},m),k.useEffect(()=>{if(p)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(qP=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),KP(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=qP)}},[p,m,r,d]),k.useEffect(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),KP())},[p,d]),k.useEffect(()=>{const E=()=>f({});return document.addEventListener(q0,E),()=>document.removeEventListener(q0,E)},[]),c.jsx(At.div,{...l,ref:h,style:{pointerEvents:y?w?"auto":"none":void 0,...e.style},onFocusCapture:Et(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Et(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Et(e.onPointerDownCapture,b.onPointerDownCapture)})});Cm.displayName=jW;var NW="DismissableLayerBranch",o3=k.forwardRef((e,t)=>{const r=k.useContext(a3),n=k.useRef(null),s=tr(t,n);return k.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),c.jsx(At.div,{...e,ref:s})});o3.displayName=NW;function $W(e,t=globalThis==null?void 0:globalThis.document){const r=Tn(e),n=k.useRef(!1),s=k.useRef(()=>{});return k.useEffect(()=>{const a=i=>{if(i.target&&!n.current){let l=function(){i3(AW,r,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function DW(e,t=globalThis==null?void 0:globalThis.document){const r=Tn(e),n=k.useRef(!1);return k.useEffect(()=>{const s=a=>{a.target&&!n.current&&i3(IW,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function KP(){const e=new CustomEvent(q0);document.dispatchEvent(e)}function i3(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?s3(s,a):s.dispatchEvent(a)}var OW=Cm,FW=o3,$n=globalThis!=null&&globalThis.document?k.useLayoutEffect:()=>{},LW="Portal",Jh=k.forwardRef((e,t)=>{var i;const{container:r,...n}=e,[s,a]=k.useState(!1);$n(()=>a(!0),[]);const o=r||s&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return o?e3.createPortal(c.jsx(At.div,{...n,ref:t}),o):null});Jh.displayName=LW;function RW(e,t){return k.useReducer((r,n)=>t[r][n]??r,e)}var $s=e=>{const{present:t,children:r}=e,n=zW(t),s=typeof r=="function"?r({present:n.isPresent}):k.Children.only(r),a=tr(n.ref,BW(s));return typeof r=="function"||n.isPresent?k.cloneElement(s,{ref:a}):null};$s.displayName="Presence";function zW(e){const[t,r]=k.useState(),n=k.useRef(null),s=k.useRef(e),a=k.useRef("none"),o=e?"mounted":"unmounted",[i,l]=RW(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const d=qp(n.current);a.current=i==="mounted"?d:"none"},[i]),$n(()=>{const d=n.current,p=s.current;if(p!==e){const m=a.current,f=qp(d);e?l("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(p&&m!==f?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),$n(()=>{if(t){let d;const p=t.ownerDocument.defaultView??window,u=f=>{const _=qp(n.current).includes(f.animationName);if(f.target===t&&_&&(l("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},m=f=>{f.target===t&&(a.current=qp(n.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{p.clearTimeout(d),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:k.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function qp(e){return(e==null?void 0:e.animationName)||"none"}function BW(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var VW=Gy[" useInsertionEffect ".trim().toString()]||$n;function Fo({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,o]=WW({defaultProp:t,onChange:r}),i=e!==void 0,l=i?e:s;{const p=k.useRef(e!==void 0);k.useEffect(()=>{const u=p.current;u!==i&&console.warn(`${n} is changing from ${u?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=i},[i,n])}const d=k.useCallback(p=>{var u;if(i){const m=UW(p)?p(e):p;m!==e&&((u=o.current)==null||u.call(o,m))}else a(p)},[i,e,a,o]);return[l,d]}function WW({defaultProp:e,onChange:t}){const[r,n]=k.useState(e),s=k.useRef(r),a=k.useRef(t);return VW(()=>{a.current=t},[t]),k.useEffect(()=>{var o;s.current!==r&&((o=a.current)==null||o.call(a,r),s.current=r)},[r,s]),[r,n,a]}function UW(e){return typeof e=="function"}var l3=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GW="VisuallyHidden",eg=k.forwardRef((e,t)=>c.jsx(At.span,{...e,ref:t,style:{...l3,...e.style}}));eg.displayName=GW;var HW=eg,Fw="ToastProvider",[Lw,qW,KW]=Ow("Toast"),[c3,fZ]=Ns("Toast",[KW]),[QW,tg]=c3(Fw),d3=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[i,l]=k.useState(null),[d,p]=k.useState(0),u=k.useRef(!1),m=k.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fw}\`. Expected non-empty \`string\`.`),c.jsx(Lw.Provider,{scope:t,children:c.jsx(QW,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:d,viewport:i,onViewportChange:l,onToastAdd:k.useCallback(()=>p(f=>f+1),[]),onToastRemove:k.useCallback(()=>p(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};d3.displayName=Fw;var u3="ToastViewport",XW=["F8"],K0="toast.viewportPause",Q0="toast.viewportResume",m3=k.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=XW,label:s="Notifications ({hotkey})",...a}=e,o=tg(u3,r),i=qW(r),l=k.useRef(null),d=k.useRef(null),p=k.useRef(null),u=k.useRef(null),m=tr(t,u,o.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=o.toastCount>0;k.useEffect(()=>{const v=g=>{var y;n.length!==0&&n.every(w=>g[w]||g.code===w)&&((y=u.current)==null||y.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),k.useEffect(()=>{const v=l.current,g=u.current;if(h&&v&&g){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(K0);g.dispatchEvent(C),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(Q0);g.dispatchEvent(C),o.isClosePausedRef.current=!1}},w=C=>{!v.contains(C.relatedTarget)&&y()},b=()=>{v.contains(document.activeElement)||y()};return v.addEventListener("focusin",x),v.addEventListener("focusout",w),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",b),window.addEventListener("blur",x),window.addEventListener("focus",y),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",b),window.removeEventListener("blur",x),window.removeEventListener("focus",y)}}},[h,o.isClosePausedRef]);const _=k.useCallback(({tabbingDirection:v})=>{const x=i().map(y=>{const w=y.ref.current,b=[w,...cU(w)];return v==="forwards"?b:b.reverse()});return(v==="forwards"?x.reverse():x).flat()},[i]);return k.useEffect(()=>{const v=u.current;if(v){const g=x=>{var b,C,E;const y=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!y){const P=document.activeElement,I=x.shiftKey;if(x.target===v&&I){(b=d.current)==null||b.focus();return}const D=_({tabbingDirection:I?"backwards":"forwards"}),B=D.findIndex(U=>U===P);zx(D.slice(B+1))?x.preventDefault():I?(C=d.current)==null||C.focus():(E=p.current)==null||E.focus()}};return v.addEventListener("keydown",g),()=>v.removeEventListener("keydown",g)}},[i,_]),c.jsxs(FW,{ref:l,role:"region","aria-label":s.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&c.jsx(X0,{ref:d,onFocusFromOutsideViewport:()=>{const v=_({tabbingDirection:"forwards"});zx(v)}}),c.jsx(Lw.Slot,{scope:r,children:c.jsx(At.ol,{tabIndex:-1,...a,ref:m})}),h&&c.jsx(X0,{ref:p,onFocusFromOutsideViewport:()=>{const v=_({tabbingDirection:"backwards"});zx(v)}})]})});m3.displayName=u3;var p3="ToastFocusProxy",X0=k.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,a=tg(p3,r);return c.jsx(eg,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const i=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(i))&&n()}})});X0.displayName=p3;var Pm="Toast",YW="toast.swipeStart",ZW="toast.swipeMove",JW="toast.swipeCancel",eU="toast.swipeEnd",f3=k.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=e,[i,l]=Fo({prop:n,defaultProp:s??!0,onChange:a,caller:Pm});return c.jsx($s,{present:r||i,children:c.jsx(nU,{open:i,...o,ref:t,onClose:()=>l(!1),onPause:Tn(e.onPause),onResume:Tn(e.onResume),onSwipeStart:Et(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Et(e.onSwipeMove,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Et(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Et(e.onSwipeEnd,d=>{const{x:p,y:u}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${p}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});f3.displayName=Pm;var[tU,rU]=c3(Pm,{onClose(){}}),nU=k.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:i,onPause:l,onResume:d,onSwipeStart:p,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:f,...h}=e,_=tg(Pm,r),[v,g]=k.useState(null),x=tr(t,U=>g(U)),y=k.useRef(null),w=k.useRef(null),b=s||_.duration,C=k.useRef(0),E=k.useRef(b),P=k.useRef(0),{onToastAdd:I,onToastRemove:$}=_,z=Tn(()=>{var q;(v==null?void 0:v.contains(document.activeElement))&&((q=_.viewport)==null||q.focus()),o()}),D=k.useCallback(U=>{!U||U===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(z,U))},[z]);k.useEffect(()=>{const U=_.viewport;if(U){const q=()=>{D(E.current),d==null||d()},X=()=>{const Z=new Date().getTime()-C.current;E.current=E.current-Z,window.clearTimeout(P.current),l==null||l()};return U.addEventListener(K0,X),U.addEventListener(Q0,q),()=>{U.removeEventListener(K0,X),U.removeEventListener(Q0,q)}}},[_.viewport,b,l,d,D]),k.useEffect(()=>{a&&!_.isClosePausedRef.current&&D(b)},[a,b,_.isClosePausedRef,D]),k.useEffect(()=>(I(),()=>$()),[I,$]);const B=k.useMemo(()=>v?w3(v):null,[v]);return _.viewport?c.jsxs(c.Fragment,{children:[B&&c.jsx(sU,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),c.jsx(tU,{scope:r,onClose:z,children:ql.createPortal(c.jsx(Lw.ItemSlot,{scope:r,children:c.jsx(OW,{asChild:!0,onEscapeKeyDown:Et(i,()=>{_.isFocusedToastEscapeKeyDownRef.current||z(),_.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(At.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":_.swipeDirection,...h,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Et(e.onKeyDown,U=>{U.key==="Escape"&&(i==null||i(U.nativeEvent),U.nativeEvent.defaultPrevented||(_.isFocusedToastEscapeKeyDownRef.current=!0,z()))}),onPointerDown:Et(e.onPointerDown,U=>{U.button===0&&(y.current={x:U.clientX,y:U.clientY})}),onPointerMove:Et(e.onPointerMove,U=>{if(!y.current)return;const q=U.clientX-y.current.x,X=U.clientY-y.current.y,Z=!!w.current,K=["left","right"].includes(_.swipeDirection),ee=["left","up"].includes(_.swipeDirection)?Math.min:Math.max,oe=K?ee(0,q):0,ae=K?0:ee(0,X),G=U.pointerType==="touch"?10:2,R={x:oe,y:ae},Q={originalEvent:U,delta:R};Z?(w.current=R,Kp(ZW,u,Q,{discrete:!1})):QP(R,_.swipeDirection,G)?(w.current=R,Kp(YW,p,Q,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(q)>G||Math.abs(X)>G)&&(y.current=null)}),onPointerUp:Et(e.onPointerUp,U=>{const q=w.current,X=U.target;if(X.hasPointerCapture(U.pointerId)&&X.releasePointerCapture(U.pointerId),w.current=null,y.current=null,q){const Z=U.currentTarget,K={originalEvent:U,delta:q};QP(q,_.swipeDirection,_.swipeThreshold)?Kp(eU,f,K,{discrete:!0}):Kp(JW,m,K,{discrete:!0}),Z.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),_.viewport)})]}):null}),sU=e=>{const{__scopeToast:t,children:r,...n}=e,s=tg(Pm,t),[a,o]=k.useState(!1),[i,l]=k.useState(!1);return iU(()=>o(!0)),k.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),i?null:c.jsx(Jh,{asChild:!0,children:c.jsx(eg,{...n,children:a&&c.jsxs(c.Fragment,{children:[s.label," ",r]})})})},aU="ToastTitle",h3=k.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return c.jsx(At.div,{...n,ref:t})});h3.displayName=aU;var oU="ToastDescription",g3=k.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return c.jsx(At.div,{...n,ref:t})});g3.displayName=oU;var _3="ToastAction",x3=k.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?c.jsx(y3,{altText:r,asChild:!0,children:c.jsx(Rw,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${_3}\`. Expected non-empty \`string\`.`),null)});x3.displayName=_3;var v3="ToastClose",Rw=k.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=rU(v3,r);return c.jsx(y3,{asChild:!0,children:c.jsx(At.button,{type:"button",...n,ref:t,onClick:Et(e.onClick,s.onClose)})})});Rw.displayName=v3;var y3=k.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return c.jsx(At.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function w3(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),lU(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...w3(n))}}),t}function Kp(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?s3(s,a):s.dispatchEvent(a)}var QP=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return t==="left"||t==="right"?a&&n>r:!a&&s>r};function iU(e=()=>{}){const t=Tn(e);$n(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function lU(e){return e.nodeType===e.ELEMENT_NODE}function cU(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function zx(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var dU=d3,b3=m3,M3=f3,T3=h3,E3=g3,C3=x3,P3=Rw;function S3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=S3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function k3(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=S3(e))&&(n&&(n+=" "),n+=t);return n}const XP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,YP=k3,Sm=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return YP(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(d=>{const p=r==null?void 0:r[d],u=a==null?void 0:a[d];if(p===null)return null;const m=XP(p)||XP(u);return s[d][m]}),i=r&&Object.entries(r).reduce((d,p)=>{let[u,m]=p;return m===void 0||(d[u]=m),d},{}),l=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,p)=>{let{class:u,className:m,...f}=p;return Object.entries(f).every(h=>{let[_,v]=h;return Array.isArray(v)?v.includes({...a,...i}[_]):{...a,...i}[_]===v})?[...d,u,m]:d},[]);return YP(e,o,l,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),j3=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...i},l)=>k.createElement("svg",{ref:l,...mU,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:j3("lucide",s),...i},[...o.map(([d,p])=>k.createElement(d,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(e,t)=>{const r=k.forwardRef(({className:n,...s},a)=>k.createElement(pU,{ref:a,iconNode:t,className:j3(`lucide-${uU(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=bt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=bt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=bt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=bt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=bt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=bt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=bt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=bt("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=bt("Contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=bt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=bt("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=bt("HardHat",[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=bt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=bt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=bt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=bt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=bt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=bt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=bt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=bt("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=bt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=bt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=bt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=bt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=bt("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=bt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=bt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=bt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=bt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Bw="-",BU=e=>{const t=WU(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const i=o.split(Bw);return i[0]===""&&i.length!==1&&i.shift(),O3(i,t)||VU(o)},getConflictingClassGroupIds:(o,i)=>{const l=r[o]||[];return i&&n[o]?[...l,...n[o]]:l}}},O3=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?O3(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Bw);return(o=t.validators.find(({validator:i})=>i(a)))==null?void 0:o.classGroupId},sS=/^\[(.+)\]$/,VU=e=>{if(sS.test(e)){const t=sS.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},WU=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return GU(Object.entries(e.classGroups),r).forEach(([a,o])=>{J0(o,n,a,t)}),n},J0=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:aS(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(UU(s)){J0(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{J0(o,aS(t,a),r,n)})})},aS=(e,t)=>{let r=e;return t.split(Bw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},UU=e=>e.isThemeGetter,GU=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,i])=>[t+o,i])):a);return[r,s]}):e,HU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},F3="!",qU=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,o=i=>{const l=[];let d=0,p=0,u;for(let v=0;v<i.length;v++){let g=i[v];if(d===0){if(g===s&&(n||i.slice(v,v+a)===t)){l.push(i.slice(p,v)),p=v+a;continue}if(g==="/"){u=v;continue}}g==="["?d++:g==="]"&&d--}const m=l.length===0?i:i.substring(p),f=m.startsWith(F3),h=f?m.substring(1):m,_=u&&u>p?u-p:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:_}};return r?i=>r({className:i,parseClassName:o}):o},KU=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},QU=e=>({cache:HU(e.cacheSize),parseClassName:qU(e),...BU(e)}),XU=/\s+/,YU=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(XU);let i="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:p,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:f}=r(d);let h=!!f,_=n(h?m.substring(0,f):m);if(!_){if(!h){i=d+(i.length>0?" "+i:i);continue}if(_=n(m),!_){i=d+(i.length>0?" "+i:i);continue}h=!1}const v=KU(p).join(":"),g=u?v+F3:v,x=g+_;if(a.includes(x))continue;a.push(x);const y=s(_,h);for(let w=0;w<y.length;++w){const b=y[w];a.push(g+b)}i=d+(i.length>0?" "+i:i)}return i};function ZU(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=L3(t))&&(n&&(n+=" "),n+=r);return n}const L3=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=L3(e[n]))&&(r&&(r+=" "),r+=t);return r};function JU(e,...t){let r,n,s,a=o;function o(l){const d=t.reduce((p,u)=>u(p),e());return r=QU(d),n=r.cache.get,s=r.cache.set,a=i,i(l)}function i(l){const d=n(l);if(d)return d;const p=YU(l,r);return s(l,p),p}return function(){return a(ZU.apply(null,arguments))}}const Nr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},R3=/^\[(?:([a-z-]+):)?(.+)\]$/i,e6=/^\d+\/\d+$/,t6=new Set(["px","full","screen"]),r6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,n6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,s6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,a6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,o6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vo=e=>Vc(e)||t6.has(e)||e6.test(e),Xo=e=>Md(e,"length",f6),Vc=e=>!!e&&!Number.isNaN(Number(e)),Vx=e=>Md(e,"number",Vc),lu=e=>!!e&&Number.isInteger(Number(e)),i6=e=>e.endsWith("%")&&Vc(e.slice(0,-1)),Qt=e=>R3.test(e),Yo=e=>r6.test(e),l6=new Set(["length","size","percentage"]),c6=e=>Md(e,l6,z3),d6=e=>Md(e,"position",z3),u6=new Set(["image","url"]),m6=e=>Md(e,u6,g6),p6=e=>Md(e,"",h6),cu=()=>!0,Md=(e,t,r)=>{const n=R3.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},f6=e=>n6.test(e)&&!s6.test(e),z3=()=>!1,h6=e=>a6.test(e),g6=e=>o6.test(e),_6=()=>{const e=Nr("colors"),t=Nr("spacing"),r=Nr("blur"),n=Nr("brightness"),s=Nr("borderColor"),a=Nr("borderRadius"),o=Nr("borderSpacing"),i=Nr("borderWidth"),l=Nr("contrast"),d=Nr("grayscale"),p=Nr("hueRotate"),u=Nr("invert"),m=Nr("gap"),f=Nr("gradientColorStops"),h=Nr("gradientColorStopPositions"),_=Nr("inset"),v=Nr("margin"),g=Nr("opacity"),x=Nr("padding"),y=Nr("saturate"),w=Nr("scale"),b=Nr("sepia"),C=Nr("skew"),E=Nr("space"),P=Nr("translate"),I=()=>["auto","contain","none"],$=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",Qt,t],D=()=>[Qt,t],B=()=>["",vo,Xo],U=()=>["auto",Vc,Qt],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",Qt],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Vc,Qt];return{cacheSize:500,separator:":",theme:{colors:[cu],spacing:[vo,Xo],blur:["none","",Yo,Qt],brightness:ae(),borderColor:[e],borderRadius:["none","","full",Yo,Qt],borderSpacing:D(),borderWidth:B(),contrast:ae(),grayscale:ee(),hueRotate:ae(),invert:ee(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[i6,Xo],inset:z(),margin:z(),opacity:ae(),padding:D(),saturate:ae(),scale:ae(),sepia:ee(),skew:ae(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[Yo]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Qt]}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lu,Qt]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",lu,Qt]}],"grid-cols":[{"grid-cols":[cu]}],"col-start-end":[{col:["auto",{span:["full",lu,Qt]},Qt]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[cu]}],"row-start-end":[{row:["auto",{span:[lu,Qt]},Qt]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...K()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...K(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...K(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,t]}],"min-w":[{"min-w":[Qt,t,"min","max","fit"]}],"max-w":[{"max-w":[Qt,t,"none","full","min","max","fit","prose",{screen:[Yo]},Yo]}],h:[{h:[Qt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Yo,Xo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vx]}],"font-family":[{font:[cu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",Vc,Vx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vo,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vo,Xo]}],"underline-offset":[{"underline-offset":["auto",vo,Qt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),d6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",c6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},m6]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[vo,Qt]}],"outline-w":[{outline:[vo,Xo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[vo,Xo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Yo,p6]}],"shadow-color":[{shadow:[cu]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Yo,Qt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[p]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[p]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[lu,Qt]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[vo,Xo,Vx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},x6=JU(_6);function zt(...e){return x6(k3(e))}const v6=dU,B3=k.forwardRef(({className:e,...t},r)=>c.jsx(b3,{ref:r,className:zt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));B3.displayName=b3.displayName;const y6=Sm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),V3=k.forwardRef(({className:e,variant:t,...r},n)=>c.jsx(M3,{ref:n,className:zt(y6({variant:t}),e),...r}));V3.displayName=M3.displayName;const w6=k.forwardRef(({className:e,...t},r)=>c.jsx(C3,{ref:r,className:zt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));w6.displayName=C3.displayName;const W3=k.forwardRef(({className:e,...t},r)=>c.jsx(P3,{ref:r,className:zt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:c.jsx(Ol,{className:"h-4 w-4"})}));W3.displayName=P3.displayName;const U3=k.forwardRef(({className:e,...t},r)=>c.jsx(T3,{ref:r,className:zt("text-sm font-semibold",e),...t}));U3.displayName=T3.displayName;const G3=k.forwardRef(({className:e,...t},r)=>c.jsx(E3,{ref:r,className:zt("text-sm opacity-90",e),...t}));G3.displayName=E3.displayName;function b6(){const{toasts:e}=vW();return c.jsxs(v6,{children:[e.map(function({id:t,title:r,description:n,action:s,...a}){return c.jsxs(V3,{...a,children:[c.jsxs("div",{className:"grid gap-1",children:[r&&c.jsx(U3,{children:r}),n&&c.jsx(G3,{children:n})]}),s,c.jsx(W3,{})]},t)}),c.jsx(B3,{})]})}var ph=["light","dark"],Vw="(prefers-color-scheme: dark)",M6=typeof window>"u",Ww=k.createContext(void 0),T6={setTheme:e=>{},themes:[]},H3=()=>{var e;return(e=k.useContext(Ww))!=null?e:T6},E6=e=>k.useContext(Ww)?e.children:k.createElement(P6,{...e}),C6=["light","dark"],P6=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:a=C6,defaultTheme:o=r?"system":"light",attribute:i="data-theme",value:l,children:d,nonce:p})=>{let[u,m]=k.useState(()=>oS(s,o)),[f,h]=k.useState(()=>oS(s)),_=l?Object.values(l):a,v=k.useCallback(w=>{let b=w;if(!b)return;w==="system"&&r&&(b=iS());let C=l?l[b]:b,E=t?k6():null,P=document.documentElement;if(i==="class"?(P.classList.remove(..._),C&&P.classList.add(C)):C?P.setAttribute(i,C):P.removeAttribute(i),n){let I=ph.includes(o)?o:null,$=ph.includes(b)?b:I;P.style.colorScheme=$}E==null||E()},[]),g=k.useCallback(w=>{let b=typeof w=="function"?w(w):w;m(b);try{localStorage.setItem(s,b)}catch{}},[e]),x=k.useCallback(w=>{let b=iS(w);h(b),u==="system"&&r&&!e&&v("system")},[u,e]);k.useEffect(()=>{let w=window.matchMedia(Vw);return w.addListener(x),x(w),()=>w.removeListener(x)},[x]),k.useEffect(()=>{let w=b=>{if(b.key!==s)return;let C=b.newValue||o;g(C)};return window.addEventListener("storage",w),()=>window.removeEventListener("storage",w)},[g]),k.useEffect(()=>{v(e??u)},[e,u]);let y=k.useMemo(()=>({theme:u,setTheme:g,forcedTheme:e,resolvedTheme:u==="system"?f:u,themes:r?[...a,"system"]:a,systemTheme:r?f:void 0}),[u,g,e,f,r,a]);return k.createElement(Ww.Provider,{value:y},k.createElement(S6,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:r,enableColorScheme:n,storageKey:s,themes:a,defaultTheme:o,attribute:i,value:l,children:d,attrs:_,nonce:p}),d)},S6=k.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:a,value:o,attrs:i,nonce:l})=>{let d=a==="system",p=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${i.map(h=>`'${h}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,u=s?ph.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(h,_=!1,v=!0)=>{let g=o?o[h]:h,x=_?h+"|| ''":`'${g}'`,y="";return s&&v&&!_&&ph.includes(h)&&(y+=`d.style.colorScheme = '${h}';`),r==="class"?_||g?y+=`c.add(${x})`:y+="null":g&&(y+=`d[s](n,${x})`),y},f=e?`!function(){${p}${m(e)}}()`:n?`!function(){try{${p}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${d})){var t='${Vw}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${p}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${u}}catch(t){}}();`;return k.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:f}})}),oS=(e,t)=>{if(M6)return;let r;try{r=localStorage.getItem(e)||void 0}catch{}return r||t},k6=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},iS=e=>(e||(e=window.matchMedia(Vw)),e.matches?"dark":"light"),j6=e=>{switch(e){case"success":return N6;case"info":return D6;case"warning":return $6;case"error":return O6;default:return null}},A6=Array(12).fill(0),I6=({visible:e,className:t})=>nt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},nt.createElement("div",{className:"sonner-spinner"},A6.map((r,n)=>nt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),N6=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$6=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),D6=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),O6=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},nt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),F6=nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},nt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),nt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),L6=()=>{let[e,t]=nt.useState(document.hidden);return nt.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},ey=1,R6=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...s}=t,a=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:ey++,o=this.toasts.find(l=>l.id===a),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...t,id:a,title:n}),{...l,...t,id:a,dismissible:i,title:n}):l):this.addToast({title:n,...s,dismissible:i,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let s=t instanceof Promise?t:t(),a=n!==void 0,o,i=s.then(async d=>{if(o=["resolve",d],nt.isValidElement(d))a=!1,this.create({id:n,type:"default",message:d});else if(B6(d)&&!d.ok){a=!1;let p=typeof r.error=="function"?await r.error(`HTTP error! status: ${d.status}`):r.error,u=typeof r.description=="function"?await r.description(`HTTP error! status: ${d.status}`):r.description;this.create({id:n,type:"error",message:p,description:u})}else if(r.success!==void 0){a=!1;let p=typeof r.success=="function"?await r.success(d):r.success,u=typeof r.description=="function"?await r.description(d):r.description;this.create({id:n,type:"success",message:p,description:u})}}).catch(async d=>{if(o=["reject",d],r.error!==void 0){a=!1;let p=typeof r.error=="function"?await r.error(d):r.error,u=typeof r.description=="function"?await r.description(d):r.description;this.create({id:n,type:"error",message:p,description:u})}}).finally(()=>{var d;a&&(this.dismiss(n),n=void 0),(d=r.finally)==null||d.call(r)}),l=()=>new Promise((d,p)=>i.then(()=>o[0]==="reject"?p(o[1]):d(o[1])).catch(p));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(t,r)=>{let n=(r==null?void 0:r.id)||ey++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},us=new R6,z6=(e,t)=>{let r=(t==null?void 0:t.id)||ey++;return us.addToast({title:e,...t,id:r}),r},B6=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",V6=z6,W6=()=>us.toasts,U6=()=>us.getActiveToasts(),qr=Object.assign(V6,{success:us.success,info:us.info,warning:us.warning,error:us.error,custom:us.custom,message:us.message,promise:us.promise,dismiss:us.dismiss,loading:us.loading},{getHistory:W6,getToasts:U6});function G6(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}G6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Qp(e){return e.label!==void 0}var H6=3,q6="32px",K6="16px",lS=4e3,Q6=356,X6=14,Y6=20,Z6=200;function ma(...e){return e.filter(Boolean).join(" ")}function J6(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var e8=e=>{var t,r,n,s,a,o,i,l,d,p,u;let{invert:m,toast:f,unstyled:h,interacting:_,setHeights:v,visibleToasts:g,heights:x,index:y,toasts:w,expanded:b,removeToast:C,defaultRichColors:E,closeButton:P,style:I,cancelButtonStyle:$,actionButtonStyle:z,className:D="",descriptionClassName:B="",duration:U,position:q,gap:X,loadingIcon:Z,expandByDefault:K,classNames:ee,icons:oe,closeButtonAriaLabel:ae="Close toast",pauseWhenPageIsHidden:G}=e,[R,Q]=nt.useState(null),[ce,ne]=nt.useState(null),[me,we]=nt.useState(!1),[Ne,Me]=nt.useState(!1),[te,F]=nt.useState(!1),[ue,xe]=nt.useState(!1),[be,Ee]=nt.useState(!1),[ye,Ae]=nt.useState(0),[Ce,De]=nt.useState(0),Be=nt.useRef(f.duration||U||lS),Ze=nt.useRef(null),Se=nt.useRef(null),it=y===0,et=y+1<=g,lt=f.type,st=f.dismissible!==!1,Re=f.className||"",Qe=f.descriptionClassName||"",Pt=nt.useMemo(()=>x.findIndex(He=>He.toastId===f.id)||0,[x,f.id]),Mt=nt.useMemo(()=>{var He;return(He=f.closeButton)!=null?He:P},[f.closeButton,P]),Wt=nt.useMemo(()=>f.duration||U||lS,[f.duration,U]),vt=nt.useRef(0),wr=nt.useRef(0),Yr=nt.useRef(0),Br=nt.useRef(null),[Pn,br]=q.split("-"),Zr=nt.useMemo(()=>x.reduce((He,Xt,mt)=>mt>=Pt?He:He+Xt.height,0),[x,Pt]),aa=L6(),La=f.invert||m,Os=lt==="loading";wr.current=nt.useMemo(()=>Pt*X+Zr,[Pt,Zr]),nt.useEffect(()=>{Be.current=Wt},[Wt]),nt.useEffect(()=>{we(!0)},[]),nt.useEffect(()=>{let He=Se.current;if(He){let Xt=He.getBoundingClientRect().height;return De(Xt),v(mt=>[{toastId:f.id,height:Xt,position:f.position},...mt]),()=>v(mt=>mt.filter(Kt=>Kt.toastId!==f.id))}},[v,f.id]),nt.useLayoutEffect(()=>{if(!me)return;let He=Se.current,Xt=He.style.height;He.style.height="auto";let mt=He.getBoundingClientRect().height;He.style.height=Xt,De(mt),v(Kt=>Kt.find(N=>N.toastId===f.id)?Kt.map(N=>N.toastId===f.id?{...N,height:mt}:N):[{toastId:f.id,height:mt,position:f.position},...Kt])},[me,f.title,f.description,v,f.id]);let an=nt.useCallback(()=>{Me(!0),Ae(wr.current),v(He=>He.filter(Xt=>Xt.toastId!==f.id)),setTimeout(()=>{C(f)},Z6)},[f,C,v,wr]);nt.useEffect(()=>{if(f.promise&&lt==="loading"||f.duration===1/0||f.type==="loading")return;let He;return b||_||G&&aa?(()=>{if(Yr.current<vt.current){let Xt=new Date().getTime()-vt.current;Be.current=Be.current-Xt}Yr.current=new Date().getTime()})():Be.current!==1/0&&(vt.current=new Date().getTime(),He=setTimeout(()=>{var Xt;(Xt=f.onAutoClose)==null||Xt.call(f,f),an()},Be.current)),()=>clearTimeout(He)},[b,_,f,lt,G,aa,an]),nt.useEffect(()=>{f.delete&&an()},[an,f.delete]);function oa(){var He,Xt,mt;return oe!=null&&oe.loading?nt.createElement("div",{className:ma(ee==null?void 0:ee.loader,(He=f==null?void 0:f.classNames)==null?void 0:He.loader,"sonner-loader"),"data-visible":lt==="loading"},oe.loading):Z?nt.createElement("div",{className:ma(ee==null?void 0:ee.loader,(Xt=f==null?void 0:f.classNames)==null?void 0:Xt.loader,"sonner-loader"),"data-visible":lt==="loading"},Z):nt.createElement(I6,{className:ma(ee==null?void 0:ee.loader,(mt=f==null?void 0:f.classNames)==null?void 0:mt.loader),visible:lt==="loading"})}return nt.createElement("li",{tabIndex:0,ref:Se,className:ma(D,Re,ee==null?void 0:ee.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,ee==null?void 0:ee.default,ee==null?void 0:ee[lt],(r=f==null?void 0:f.classNames)==null?void 0:r[lt]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:E,"data-styled":!(f.jsx||f.unstyled||h),"data-mounted":me,"data-promise":!!f.promise,"data-swiped":be,"data-removed":Ne,"data-visible":et,"data-y-position":Pn,"data-x-position":br,"data-index":y,"data-front":it,"data-swiping":te,"data-dismissible":st,"data-type":lt,"data-invert":La,"data-swipe-out":ue,"data-swipe-direction":ce,"data-expanded":!!(b||K&&me),style:{"--index":y,"--toasts-before":y,"--z-index":w.length-y,"--offset":`${Ne?ye:wr.current}px`,"--initial-height":K?"auto":`${Ce}px`,...I,...f.style},onDragEnd:()=>{F(!1),Q(null),Br.current=null},onPointerDown:He=>{Os||!st||(Ze.current=new Date,Ae(wr.current),He.target.setPointerCapture(He.pointerId),He.target.tagName!=="BUTTON"&&(F(!0),Br.current={x:He.clientX,y:He.clientY}))},onPointerUp:()=>{var He,Xt,mt,Kt;if(ue||!st)return;Br.current=null;let N=Number(((He=Se.current)==null?void 0:He.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),se=Number(((Xt=Se.current)==null?void 0:Xt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),H=new Date().getTime()-((mt=Ze.current)==null?void 0:mt.getTime()),re=R==="x"?N:se,de=Math.abs(re)/H;if(Math.abs(re)>=Y6||de>.11){Ae(wr.current),(Kt=f.onDismiss)==null||Kt.call(f,f),ne(R==="x"?N>0?"right":"left":se>0?"down":"up"),an(),xe(!0),Ee(!1);return}F(!1),Q(null)},onPointerMove:He=>{var Xt,mt,Kt,N;if(!Br.current||!st||((Xt=window.getSelection())==null?void 0:Xt.toString().length)>0)return;let se=He.clientY-Br.current.y,H=He.clientX-Br.current.x,re=(mt=e.swipeDirections)!=null?mt:J6(q);!R&&(Math.abs(H)>1||Math.abs(se)>1)&&Q(Math.abs(H)>Math.abs(se)?"x":"y");let de={x:0,y:0};R==="y"?(re.includes("top")||re.includes("bottom"))&&(re.includes("top")&&se<0||re.includes("bottom")&&se>0)&&(de.y=se):R==="x"&&(re.includes("left")||re.includes("right"))&&(re.includes("left")&&H<0||re.includes("right")&&H>0)&&(de.x=H),(Math.abs(de.x)>0||Math.abs(de.y)>0)&&Ee(!0),(Kt=Se.current)==null||Kt.style.setProperty("--swipe-amount-x",`${de.x}px`),(N=Se.current)==null||N.style.setProperty("--swipe-amount-y",`${de.y}px`)}},Mt&&!f.jsx?nt.createElement("button",{"aria-label":ae,"data-disabled":Os,"data-close-button":!0,onClick:Os||!st?()=>{}:()=>{var He;an(),(He=f.onDismiss)==null||He.call(f,f)},className:ma(ee==null?void 0:ee.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},(a=oe==null?void 0:oe.close)!=null?a:F6):null,f.jsx||k.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:nt.createElement(nt.Fragment,null,lt||f.icon||f.promise?nt.createElement("div",{"data-icon":"",className:ma(ee==null?void 0:ee.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||oa():null,f.type!=="loading"?f.icon||(oe==null?void 0:oe[lt])||j6(lt):null):null,nt.createElement("div",{"data-content":"",className:ma(ee==null?void 0:ee.content,(i=f==null?void 0:f.classNames)==null?void 0:i.content)},nt.createElement("div",{"data-title":"",className:ma(ee==null?void 0:ee.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},typeof f.title=="function"?f.title():f.title),f.description?nt.createElement("div",{"data-description":"",className:ma(B,Qe,ee==null?void 0:ee.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),k.isValidElement(f.cancel)?f.cancel:f.cancel&&Qp(f.cancel)?nt.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||$,onClick:He=>{var Xt,mt;Qp(f.cancel)&&st&&((mt=(Xt=f.cancel).onClick)==null||mt.call(Xt,He),an())},className:ma(ee==null?void 0:ee.cancelButton,(p=f==null?void 0:f.classNames)==null?void 0:p.cancelButton)},f.cancel.label):null,k.isValidElement(f.action)?f.action:f.action&&Qp(f.action)?nt.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||z,onClick:He=>{var Xt,mt;Qp(f.action)&&((mt=(Xt=f.action).onClick)==null||mt.call(Xt,He),!He.defaultPrevented&&an())},className:ma(ee==null?void 0:ee.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function cS(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function t8(e,t){let r={};return[e,t].forEach((n,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",i=a?K6:q6;function l(d){["top","right","bottom","left"].forEach(p=>{r[`${o}-${p}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${o}-${d}`]=i:r[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):l(i)}),r}var r8=k.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:i,offset:l,mobileOffset:d,theme:p="light",richColors:u,duration:m,style:f,visibleToasts:h=H6,toastOptions:_,dir:v=cS(),gap:g=X6,loadingIcon:x,icons:y,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:b}=e,[C,E]=nt.useState([]),P=nt.useMemo(()=>Array.from(new Set([n].concat(C.filter(G=>G.position).map(G=>G.position)))),[C,n]),[I,$]=nt.useState([]),[z,D]=nt.useState(!1),[B,U]=nt.useState(!1),[q,X]=nt.useState(p!=="system"?p:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Z=nt.useRef(null),K=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=nt.useRef(null),oe=nt.useRef(!1),ae=nt.useCallback(G=>{E(R=>{var Q;return(Q=R.find(ce=>ce.id===G.id))!=null&&Q.delete||us.dismiss(G.id),R.filter(({id:ce})=>ce!==G.id)})},[]);return nt.useEffect(()=>us.subscribe(G=>{if(G.dismiss){E(R=>R.map(Q=>Q.id===G.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{e3.flushSync(()=>{E(R=>{let Q=R.findIndex(ce=>ce.id===G.id);return Q!==-1?[...R.slice(0,Q),{...R[Q],...G},...R.slice(Q+1)]:[G,...R]})})})}),[]),nt.useEffect(()=>{if(p!=="system"){X(p);return}if(p==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:R})=>{X(R?"dark":"light")})}catch{G.addListener(({matches:Q})=>{try{X(Q?"dark":"light")}catch(ce){console.error(ce)}})}},[p]),nt.useEffect(()=>{C.length<=1&&D(!1)},[C]),nt.useEffect(()=>{let G=R=>{var Q,ce;s.every(ne=>R[ne]||R.code===ne)&&(D(!0),(Q=Z.current)==null||Q.focus()),R.code==="Escape"&&(document.activeElement===Z.current||(ce=Z.current)!=null&&ce.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[s]),nt.useEffect(()=>{if(Z.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,oe.current=!1)}},[Z.current]),nt.createElement("section",{ref:t,"aria-label":`${w} ${K}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((G,R)=>{var Q;let[ce,ne]=G.split("-");return C.length?nt.createElement("ol",{key:G,dir:v==="auto"?cS():v,tabIndex:-1,ref:Z,className:i,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":ce,"data-lifted":z&&C.length>1&&!a,"data-x-position":ne,style:{"--front-toast-height":`${((Q=I[0])==null?void 0:Q.height)||0}px`,"--width":`${Q6}px`,"--gap":`${g}px`,...f,...t8(l,d)},onBlur:me=>{oe.current&&!me.currentTarget.contains(me.relatedTarget)&&(oe.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||oe.current||(oe.current=!0,ee.current=me.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{B||D(!1)},onDragEnd:()=>D(!1),onPointerDown:me=>{me.target instanceof HTMLElement&&me.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},C.filter(me=>!me.position&&R===0||me.position===G).map((me,we)=>{var Ne,Me;return nt.createElement(e8,{key:me.id,icons:y,index:we,toast:me,defaultRichColors:u,duration:(Ne=_==null?void 0:_.duration)!=null?Ne:m,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:h,closeButton:(Me=_==null?void 0:_.closeButton)!=null?Me:o,interacting:B,position:G,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,removeToast:ae,toasts:C.filter(te=>te.position==me.position),heights:I.filter(te=>te.position==me.position),setHeights:$,expandByDefault:a,gap:g,loadingIcon:x,expanded:z,pauseWhenPageIsHidden:b,swipeDirections:e.swipeDirections})})):null}))});const n8=({...e})=>{const{theme:t="system"}=H3();return c.jsx(r8,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var s8=Gy[" useId ".trim().toString()]||(()=>{}),a8=0;function Io(e){const[t,r]=k.useState(s8());return $n(()=>{r(n=>n??String(a8++))},[e]),t?`radix-${t}`:""}const o8=["top","right","bottom","left"],Ni=Math.min,bs=Math.max,fh=Math.round,Xp=Math.floor,ao=e=>({x:e,y:e}),i8={left:"right",right:"left",bottom:"top",top:"bottom"},l8={start:"end",end:"start"};function ty(e,t,r){return bs(e,Ni(t,r))}function Ro(e,t){return typeof e=="function"?e(t):e}function zo(e){return e.split("-")[0]}function Td(e){return e.split("-")[1]}function Uw(e){return e==="x"?"y":"x"}function Gw(e){return e==="y"?"height":"width"}const c8=new Set(["top","bottom"]);function Ja(e){return c8.has(zo(e))?"y":"x"}function Hw(e){return Uw(Ja(e))}function d8(e,t,r){r===void 0&&(r=!1);const n=Td(e),s=Hw(e),a=Gw(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=hh(o)),[o,hh(o)]}function u8(e){const t=hh(e);return[ry(e),t,ry(t)]}function ry(e){return e.replace(/start|end/g,t=>l8[t])}const dS=["left","right"],uS=["right","left"],m8=["top","bottom"],p8=["bottom","top"];function f8(e,t,r){switch(e){case"top":case"bottom":return r?t?uS:dS:t?dS:uS;case"left":case"right":return t?m8:p8;default:return[]}}function h8(e,t,r,n){const s=Td(e);let a=f8(zo(e),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(ry)))),a}function hh(e){return e.replace(/left|right|bottom|top/g,t=>i8[t])}function g8(e){return{top:0,right:0,bottom:0,left:0,...e}}function q3(e){return typeof e!="number"?g8(e):{top:e,right:e,bottom:e,left:e}}function gh(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function mS(e,t,r){let{reference:n,floating:s}=e;const a=Ja(t),o=Hw(t),i=Gw(o),l=zo(t),d=a==="y",p=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,m=n[i]/2-s[i]/2;let f;switch(l){case"top":f={x:p,y:n.y-s.height};break;case"bottom":f={x:p,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:u};break;case"left":f={x:n.x-s.width,y:u};break;default:f={x:n.x,y:n.y}}switch(Td(t)){case"start":f[o]-=m*(r&&d?-1:1);break;case"end":f[o]+=m*(r&&d?-1:1);break}return f}const _8=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,i=a.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:p,y:u}=mS(d,n,l),m=n,f={},h=0;for(let _=0;_<i.length;_++){const{name:v,fn:g}=i[_],{x,y,data:w,reset:b}=await g({x:p,y:u,initialPlacement:n,placement:m,strategy:s,middlewareData:f,rects:d,platform:o,elements:{reference:e,floating:t}});p=x??p,u=y??u,f={...f,[v]:{...f[v],...w}},b&&h<=50&&(h++,typeof b=="object"&&(b.placement&&(m=b.placement),b.rects&&(d=b.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):b.rects),{x:p,y:u}=mS(d,m,l)),_=-1)}return{x:p,y:u,placement:m,strategy:s,middlewareData:f}};async function im(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:o,elements:i,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:p="viewport",elementContext:u="floating",altBoundary:m=!1,padding:f=0}=Ro(t,e),h=q3(f),v=i[m?u==="floating"?"reference":"floating":u],g=gh(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(v)))==null||r?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:d,rootBoundary:p,strategy:l})),x=u==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),w=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},b=gh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-b.top+h.top)/w.y,bottom:(b.bottom-g.bottom+h.bottom)/w.y,left:(g.left-b.left+h.left)/w.x,right:(b.right-g.right+h.right)/w.x}}const x8=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:o,elements:i,middlewareData:l}=t,{element:d,padding:p=0}=Ro(e,t)||{};if(d==null)return{};const u=q3(p),m={x:r,y:n},f=Hw(s),h=Gw(f),_=await o.getDimensions(d),v=f==="y",g=v?"top":"left",x=v?"bottom":"right",y=v?"clientHeight":"clientWidth",w=a.reference[h]+a.reference[f]-m[f]-a.floating[h],b=m[f]-a.reference[f],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=C?C[y]:0;(!E||!await(o.isElement==null?void 0:o.isElement(C)))&&(E=i.floating[y]||a.floating[h]);const P=w/2-b/2,I=E/2-_[h]/2-1,$=Ni(u[g],I),z=Ni(u[x],I),D=$,B=E-_[h]-z,U=E/2-_[h]/2+P,q=ty(D,U,B),X=!l.arrow&&Td(s)!=null&&U!==q&&a.reference[h]/2-(U<D?$:z)-_[h]/2<0,Z=X?U<D?U-D:U-B:0;return{[f]:m[f]+Z,data:{[f]:q,centerOffset:U-q-Z,...X&&{alignmentOffset:Z}},reset:X}}}),v8=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:i,platform:l,elements:d}=t,{mainAxis:p=!0,crossAxis:u=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:_=!0,...v}=Ro(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const g=zo(s),x=Ja(i),y=zo(i)===i,w=await(l.isRTL==null?void 0:l.isRTL(d.floating)),b=m||(y||!_?[hh(i)]:u8(i)),C=h!=="none";!m&&C&&b.push(...h8(i,_,h,w));const E=[i,...b],P=await im(t,v),I=[];let $=((n=a.flip)==null?void 0:n.overflows)||[];if(p&&I.push(P[g]),u){const U=d8(s,o,w);I.push(P[U[0]],P[U[1]])}if($=[...$,{placement:s,overflows:I}],!I.every(U=>U<=0)){var z,D;const U=(((z=a.flip)==null?void 0:z.index)||0)+1,q=E[U];if(q&&(!(u==="alignment"?x!==Ja(q):!1)||$.every(K=>K.overflows[0]>0&&Ja(K.placement)===x)))return{data:{index:U,overflows:$},reset:{placement:q}};let X=(D=$.filter(Z=>Z.overflows[0]<=0).sort((Z,K)=>Z.overflows[1]-K.overflows[1])[0])==null?void 0:D.placement;if(!X)switch(f){case"bestFit":{var B;const Z=(B=$.filter(K=>{if(C){const ee=Ja(K.placement);return ee===x||ee==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(ee=>ee>0).reduce((ee,oe)=>ee+oe,0)]).sort((K,ee)=>K[1]-ee[1])[0])==null?void 0:B[0];Z&&(X=Z);break}case"initialPlacement":X=i;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function pS(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fS(e){return o8.some(t=>e[t]>=0)}const y8=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Ro(e,t);switch(n){case"referenceHidden":{const a=await im(t,{...s,elementContext:"reference"}),o=pS(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fS(o)}}}case"escaped":{const a=await im(t,{...s,altBoundary:!0}),o=pS(a,r.floating);return{data:{escapedOffsets:o,escaped:fS(o)}}}default:return{}}}}},K3=new Set(["left","top"]);async function w8(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=zo(r),i=Td(r),l=Ja(r)==="y",d=K3.has(o)?-1:1,p=a&&l?-1:1,u=Ro(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:h}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return i&&typeof h=="number"&&(f=i==="end"?h*-1:h),l?{x:f*p,y:m*d}:{x:m*d,y:f*p}}const b8=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:o,middlewareData:i}=t,l=await w8(t,e);return o===((r=i.offset)==null?void 0:r.placement)&&(n=i.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:a+l.y,data:{...l,placement:o}}}}},M8=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:i={fn:v=>{let{x:g,y:x}=v;return{x:g,y:x}}},...l}=Ro(e,t),d={x:r,y:n},p=await im(t,l),u=Ja(zo(s)),m=Uw(u);let f=d[m],h=d[u];if(a){const v=m==="y"?"top":"left",g=m==="y"?"bottom":"right",x=f+p[v],y=f-p[g];f=ty(x,f,y)}if(o){const v=u==="y"?"top":"left",g=u==="y"?"bottom":"right",x=h+p[v],y=h-p[g];h=ty(x,h,y)}const _=i.fn({...t,[m]:f,[u]:h});return{..._,data:{x:_.x-r,y:_.y-n,enabled:{[m]:a,[u]:o}}}}}},T8=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=t,{offset:i=0,mainAxis:l=!0,crossAxis:d=!0}=Ro(e,t),p={x:r,y:n},u=Ja(s),m=Uw(u);let f=p[m],h=p[u];const _=Ro(i,t),v=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const y=m==="y"?"height":"width",w=a.reference[m]-a.floating[y]+v.mainAxis,b=a.reference[m]+a.reference[y]-v.mainAxis;f<w?f=w:f>b&&(f=b)}if(d){var g,x;const y=m==="y"?"width":"height",w=K3.has(zo(s)),b=a.reference[u]-a.floating[y]+(w&&((g=o.offset)==null?void 0:g[u])||0)+(w?0:v.crossAxis),C=a.reference[u]+a.reference[y]+(w?0:((x=o.offset)==null?void 0:x[u])||0)-(w?v.crossAxis:0);h<b?h=b:h>C&&(h=C)}return{[m]:f,[u]:h}}}},E8=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:o,elements:i}=t,{apply:l=()=>{},...d}=Ro(e,t),p=await im(t,d),u=zo(s),m=Td(s),f=Ja(s)==="y",{width:h,height:_}=a.floating;let v,g;u==="top"||u==="bottom"?(v=u,g=m===(await(o.isRTL==null?void 0:o.isRTL(i.floating))?"start":"end")?"left":"right"):(g=u,v=m==="end"?"top":"bottom");const x=_-p.top-p.bottom,y=h-p.left-p.right,w=Ni(_-p[v],x),b=Ni(h-p[g],y),C=!t.middlewareData.shift;let E=w,P=b;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=y),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(E=x),C&&!m){const $=bs(p.left,0),z=bs(p.right,0),D=bs(p.top,0),B=bs(p.bottom,0);f?P=h-2*($!==0||z!==0?$+z:bs(p.left,p.right)):E=_-2*(D!==0||B!==0?D+B:bs(p.top,p.bottom))}await l({...t,availableWidth:P,availableHeight:E});const I=await o.getDimensions(i.floating);return h!==I.width||_!==I.height?{reset:{rects:!0}}:{}}}};function rg(){return typeof window<"u"}function Ed(e){return Q3(e)?(e.nodeName||"").toLowerCase():"#document"}function Ps(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function po(e){var t;return(t=(Q3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Q3(e){return rg()?e instanceof Node||e instanceof Ps(e).Node:!1}function Na(e){return rg()?e instanceof Element||e instanceof Ps(e).Element:!1}function uo(e){return rg()?e instanceof HTMLElement||e instanceof Ps(e).HTMLElement:!1}function hS(e){return!rg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ps(e).ShadowRoot}const C8=new Set(["inline","contents"]);function km(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=$a(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!C8.has(s)}const P8=new Set(["table","td","th"]);function S8(e){return P8.has(Ed(e))}const k8=[":popover-open",":modal"];function ng(e){return k8.some(t=>{try{return e.matches(t)}catch{return!1}})}const j8=["transform","translate","scale","rotate","perspective"],A8=["transform","translate","scale","rotate","perspective","filter"],I8=["paint","layout","strict","content"];function qw(e){const t=Kw(),r=Na(e)?$a(e):e;return j8.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||A8.some(n=>(r.willChange||"").includes(n))||I8.some(n=>(r.contain||"").includes(n))}function N8(e){let t=$i(e);for(;uo(t)&&!ud(t);){if(qw(t))return t;if(ng(t))return null;t=$i(t)}return null}function Kw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $8=new Set(["html","body","#document"]);function ud(e){return $8.has(Ed(e))}function $a(e){return Ps(e).getComputedStyle(e)}function sg(e){return Na(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $i(e){if(Ed(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hS(e)&&e.host||po(e);return hS(t)?t.host:t}function X3(e){const t=$i(e);return ud(t)?e.ownerDocument?e.ownerDocument.body:e.body:uo(t)&&km(t)?t:X3(t)}function lm(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=X3(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=Ps(s);if(a){const i=ny(o);return t.concat(o,o.visualViewport||[],km(s)?s:[],i&&r?lm(i):[])}return t.concat(s,lm(s,[],r))}function ny(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Y3(e){const t=$a(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=uo(e),a=s?e.offsetWidth:r,o=s?e.offsetHeight:n,i=fh(r)!==a||fh(n)!==o;return i&&(r=a,n=o),{width:r,height:n,$:i}}function Qw(e){return Na(e)?e:e.contextElement}function Wc(e){const t=Qw(e);if(!uo(t))return ao(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=Y3(t);let o=(a?fh(r.width):r.width)/n,i=(a?fh(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!i||!Number.isFinite(i))&&(i=1),{x:o,y:i}}const D8=ao(0);function Z3(e){const t=Ps(e);return!Kw()||!t.visualViewport?D8:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function O8(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ps(e)?!1:t}function Fl(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=Qw(e);let o=ao(1);t&&(n?Na(n)&&(o=Wc(n)):o=Wc(e));const i=O8(a,r,n)?Z3(a):ao(0);let l=(s.left+i.x)/o.x,d=(s.top+i.y)/o.y,p=s.width/o.x,u=s.height/o.y;if(a){const m=Ps(a),f=n&&Na(n)?Ps(n):n;let h=m,_=ny(h);for(;_&&n&&f!==h;){const v=Wc(_),g=_.getBoundingClientRect(),x=$a(_),y=g.left+(_.clientLeft+parseFloat(x.paddingLeft))*v.x,w=g.top+(_.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,d*=v.y,p*=v.x,u*=v.y,l+=y,d+=w,h=Ps(_),_=ny(h)}}return gh({width:p,height:u,x:l,y:d})}function Xw(e,t){const r=sg(e).scrollLeft;return t?t.left+r:Fl(po(e)).left+r}function J3(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Xw(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function F8(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",o=po(n),i=t?ng(t.floating):!1;if(n===o||i&&a)return r;let l={scrollLeft:0,scrollTop:0},d=ao(1);const p=ao(0),u=uo(n);if((u||!u&&!a)&&((Ed(n)!=="body"||km(o))&&(l=sg(n)),uo(n))){const f=Fl(n);d=Wc(n),p.x=f.x+n.clientLeft,p.y=f.y+n.clientTop}const m=o&&!u&&!a?J3(o,l,!0):ao(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-l.scrollLeft*d.x+p.x+m.x,y:r.y*d.y-l.scrollTop*d.y+p.y+m.y}}function L8(e){return Array.from(e.getClientRects())}function R8(e){const t=po(e),r=sg(e),n=e.ownerDocument.body,s=bs(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=bs(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Xw(e);const i=-r.scrollTop;return $a(n).direction==="rtl"&&(o+=bs(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:i}}function z8(e,t){const r=Ps(e),n=po(e),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,i=0,l=0;if(s){a=s.width,o=s.height;const d=Kw();(!d||d&&t==="fixed")&&(i=s.offsetLeft,l=s.offsetTop)}return{width:a,height:o,x:i,y:l}}const B8=new Set(["absolute","fixed"]);function V8(e,t){const r=Fl(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=uo(e)?Wc(e):ao(1),o=e.clientWidth*a.x,i=e.clientHeight*a.y,l=s*a.x,d=n*a.y;return{width:o,height:i,x:l,y:d}}function gS(e,t,r){let n;if(t==="viewport")n=z8(e,r);else if(t==="document")n=R8(po(e));else if(Na(t))n=V8(t,r);else{const s=Z3(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return gh(n)}function eD(e,t){const r=$i(e);return r===t||!Na(r)||ud(r)?!1:$a(r).position==="fixed"||eD(r,t)}function W8(e,t){const r=t.get(e);if(r)return r;let n=lm(e,[],!1).filter(i=>Na(i)&&Ed(i)!=="body"),s=null;const a=$a(e).position==="fixed";let o=a?$i(e):e;for(;Na(o)&&!ud(o);){const i=$a(o),l=qw(o);!l&&i.position==="fixed"&&(s=null),(a?!l&&!s:!l&&i.position==="static"&&!!s&&B8.has(s.position)||km(o)&&!l&&eD(e,o))?n=n.filter(p=>p!==o):s=i,o=$i(o)}return t.set(e,n),n}function U8(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?ng(t)?[]:W8(t,this._c):[].concat(r),n],i=o[0],l=o.reduce((d,p)=>{const u=gS(t,p,s);return d.top=bs(u.top,d.top),d.right=Ni(u.right,d.right),d.bottom=Ni(u.bottom,d.bottom),d.left=bs(u.left,d.left),d},gS(t,i,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function G8(e){const{width:t,height:r}=Y3(e);return{width:t,height:r}}function H8(e,t,r){const n=uo(t),s=po(t),a=r==="fixed",o=Fl(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const l=ao(0);function d(){l.x=Xw(s)}if(n||!n&&!a)if((Ed(t)!=="body"||km(s))&&(i=sg(t)),n){const f=Fl(t,!0,a,t);l.x=f.x+t.clientLeft,l.y=f.y+t.clientTop}else s&&d();a&&!n&&s&&d();const p=s&&!n&&!a?J3(s,i):ao(0),u=o.left+i.scrollLeft-l.x-p.x,m=o.top+i.scrollTop-l.y-p.y;return{x:u,y:m,width:o.width,height:o.height}}function Wx(e){return $a(e).position==="static"}function _S(e,t){if(!uo(e)||$a(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return po(e)===r&&(r=r.ownerDocument.body),r}function tD(e,t){const r=Ps(e);if(ng(e))return r;if(!uo(e)){let s=$i(e);for(;s&&!ud(s);){if(Na(s)&&!Wx(s))return s;s=$i(s)}return r}let n=_S(e,t);for(;n&&S8(n)&&Wx(n);)n=_S(n,t);return n&&ud(n)&&Wx(n)&&!qw(n)?r:n||N8(e)||r}const q8=async function(e){const t=this.getOffsetParent||tD,r=this.getDimensions,n=await r(e.floating);return{reference:H8(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function K8(e){return $a(e).direction==="rtl"}const Q8={convertOffsetParentRelativeRectToViewportRelativeRect:F8,getDocumentElement:po,getClippingRect:U8,getOffsetParent:tD,getElementRects:q8,getClientRects:L8,getDimensions:G8,getScale:Wc,isElement:Na,isRTL:K8};function rD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function X8(e,t){let r=null,n;const s=po(e);function a(){var i;clearTimeout(n),(i=r)==null||i.disconnect(),r=null}function o(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),a();const d=e.getBoundingClientRect(),{left:p,top:u,width:m,height:f}=d;if(i||t(),!m||!f)return;const h=Xp(u),_=Xp(s.clientWidth-(p+m)),v=Xp(s.clientHeight-(u+f)),g=Xp(p),y={rootMargin:-h+"px "+-_+"px "+-v+"px "+-g+"px",threshold:bs(0,Ni(1,l))||1};let w=!0;function b(C){const E=C[0].intersectionRatio;if(E!==l){if(!w)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!rD(d,e.getBoundingClientRect())&&o(),w=!1}try{r=new IntersectionObserver(b,{...y,root:s.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(e)}return o(!0),a}function Y8(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,d=Qw(e),p=s||a?[...d?lm(d):[],...lm(t)]:[];p.forEach(g=>{s&&g.addEventListener("scroll",r,{passive:!0}),a&&g.addEventListener("resize",r)});const u=d&&i?X8(d,r):null;let m=-1,f=null;o&&(f=new ResizeObserver(g=>{let[x]=g;x&&x.target===d&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var y;(y=f)==null||y.observe(t)})),r()}),d&&!l&&f.observe(d),f.observe(t));let h,_=l?Fl(e):null;l&&v();function v(){const g=Fl(e);_&&!rD(_,g)&&r(),_=g,h=requestAnimationFrame(v)}return r(),()=>{var g;p.forEach(x=>{s&&x.removeEventListener("scroll",r),a&&x.removeEventListener("resize",r)}),u==null||u(),(g=f)==null||g.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const Z8=b8,J8=M8,eG=v8,tG=E8,rG=y8,xS=x8,nG=T8,sG=(e,t,r)=>{const n=new Map,s={platform:Q8,...r},a={...s.platform,_c:n};return _8(e,t,{...s,platform:a})};var aG=typeof document<"u",oG=function(){},If=aG?k.useLayoutEffect:oG;function _h(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!_h(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!_h(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function nD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function vS(e,t){const r=nD(e);return Math.round(t*r)/r}function Ux(e){const t=k.useRef(e);return If(()=>{t.current=e}),t}function iG(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:i=!0,whileElementsMounted:l,open:d}=e,[p,u]=k.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=k.useState(n);_h(m,n)||f(n);const[h,_]=k.useState(null),[v,g]=k.useState(null),x=k.useCallback(K=>{K!==C.current&&(C.current=K,_(K))},[]),y=k.useCallback(K=>{K!==E.current&&(E.current=K,g(K))},[]),w=a||h,b=o||v,C=k.useRef(null),E=k.useRef(null),P=k.useRef(p),I=l!=null,$=Ux(l),z=Ux(s),D=Ux(d),B=k.useCallback(()=>{if(!C.current||!E.current)return;const K={placement:t,strategy:r,middleware:m};z.current&&(K.platform=z.current),sG(C.current,E.current,K).then(ee=>{const oe={...ee,isPositioned:D.current!==!1};U.current&&!_h(P.current,oe)&&(P.current=oe,ql.flushSync(()=>{u(oe)}))})},[m,t,r,z,D]);If(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,u(K=>({...K,isPositioned:!1})))},[d]);const U=k.useRef(!1);If(()=>(U.current=!0,()=>{U.current=!1}),[]),If(()=>{if(w&&(C.current=w),b&&(E.current=b),w&&b){if($.current)return $.current(w,b,B);B()}},[w,b,B,$,I]);const q=k.useMemo(()=>({reference:C,floating:E,setReference:x,setFloating:y}),[x,y]),X=k.useMemo(()=>({reference:w,floating:b}),[w,b]),Z=k.useMemo(()=>{const K={position:r,left:0,top:0};if(!X.floating)return K;const ee=vS(X.floating,p.x),oe=vS(X.floating,p.y);return i?{...K,transform:"translate("+ee+"px, "+oe+"px)",...nD(X.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ee,top:oe}},[r,i,X.floating,p.x,p.y]);return k.useMemo(()=>({...p,update:B,refs:q,elements:X,floatingStyles:Z}),[p,B,q,X,Z])}const lG=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?xS({element:n.current,padding:s}).fn(r):{}:n?xS({element:n,padding:s}).fn(r):{}}}},cG=(e,t)=>({...Z8(e),options:[e,t]}),dG=(e,t)=>({...J8(e),options:[e,t]}),uG=(e,t)=>({...nG(e),options:[e,t]}),mG=(e,t)=>({...eG(e),options:[e,t]}),pG=(e,t)=>({...tG(e),options:[e,t]}),fG=(e,t)=>({...rG(e),options:[e,t]}),hG=(e,t)=>({...lG(e),options:[e,t]});var gG="Arrow",sD=k.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return c.jsx(At.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});sD.displayName=gG;var _G=sD;function Yw(e){const[t,r]=k.useState(void 0);return $n(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,i;if("borderBoxSize"in a){const l=a.borderBoxSize,d=Array.isArray(l)?l[0]:l;o=d.inlineSize,i=d.blockSize}else o=e.offsetWidth,i=e.offsetHeight;r({width:o,height:i})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Zw="Popper",[aD,ag]=Ns(Zw),[xG,oD]=aD(Zw),iD=e=>{const{__scopePopper:t,children:r}=e,[n,s]=k.useState(null);return c.jsx(xG,{scope:t,anchor:n,onAnchorChange:s,children:r})};iD.displayName=Zw;var lD="PopperAnchor",cD=k.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=oD(lD,r),o=k.useRef(null),i=tr(t,o);return k.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:c.jsx(At.div,{...s,ref:i})});cD.displayName=lD;var Jw="PopperContent",[vG,yG]=aD(Jw),dD=k.forwardRef((e,t)=>{var me,we,Ne,Me,te,F;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:i=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:p=0,sticky:u="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:h,..._}=e,v=oD(Jw,r),[g,x]=k.useState(null),y=tr(t,ue=>x(ue)),[w,b]=k.useState(null),C=Yw(w),E=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,I=n+(a!=="center"?"-"+a:""),$=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},z=Array.isArray(d)?d:[d],D=z.length>0,B={padding:$,boundary:z.filter(bG),altBoundary:D},{refs:U,floatingStyles:q,placement:X,isPositioned:Z,middlewareData:K}=iG({strategy:"fixed",placement:I,whileElementsMounted:(...ue)=>Y8(...ue,{animationFrame:f==="always"}),elements:{reference:v.anchor},middleware:[cG({mainAxis:s+P,alignmentAxis:o}),l&&dG({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?uG():void 0,...B}),l&&mG({...B}),pG({...B,apply:({elements:ue,rects:xe,availableWidth:be,availableHeight:Ee})=>{const{width:ye,height:Ae}=xe.reference,Ce=ue.floating.style;Ce.setProperty("--radix-popper-available-width",`${be}px`),Ce.setProperty("--radix-popper-available-height",`${Ee}px`),Ce.setProperty("--radix-popper-anchor-width",`${ye}px`),Ce.setProperty("--radix-popper-anchor-height",`${Ae}px`)}}),w&&hG({element:w,padding:i}),MG({arrowWidth:E,arrowHeight:P}),m&&fG({strategy:"referenceHidden",...B})]}),[ee,oe]=pD(X),ae=Tn(h);$n(()=>{Z&&(ae==null||ae())},[Z,ae]);const G=(me=K.arrow)==null?void 0:me.x,R=(we=K.arrow)==null?void 0:we.y,Q=((Ne=K.arrow)==null?void 0:Ne.centerOffset)!==0,[ce,ne]=k.useState();return $n(()=>{g&&ne(window.getComputedStyle(g).zIndex)},[g]),c.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:Z?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(Me=K.transformOrigin)==null?void 0:Me.x,(te=K.transformOrigin)==null?void 0:te.y].join(" "),...((F=K.hide)==null?void 0:F.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:c.jsx(vG,{scope:r,placedSide:ee,onArrowChange:b,arrowX:G,arrowY:R,shouldHideArrow:Q,children:c.jsx(At.div,{"data-side":ee,"data-align":oe,..._,ref:y,style:{..._.style,animation:Z?void 0:"none"}})})})});dD.displayName=Jw;var uD="PopperArrow",wG={top:"bottom",right:"left",bottom:"top",left:"right"},mD=k.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=yG(uD,n),o=wG[a.placedSide];return c.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:c.jsx(_G,{...s,ref:r,style:{...s.style,display:"block"}})})});mD.displayName=uD;function bG(e){return e!==null}var MG=e=>({name:"transformOrigin",options:e,fn(t){var v,g,x;const{placement:r,rects:n,middlewareData:s}=t,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,i=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[d,p]=pD(r),u={start:"0%",center:"50%",end:"100%"}[p],m=(((g=s.arrow)==null?void 0:g.x)??0)+i/2,f=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let h="",_="";return d==="bottom"?(h=o?u:`${m}px`,_=`${-l}px`):d==="top"?(h=o?u:`${m}px`,_=`${n.floating.height+l}px`):d==="right"?(h=`${-l}px`,_=o?u:`${f}px`):d==="left"&&(h=`${n.floating.width+l}px`,_=o?u:`${f}px`),{data:{x:h,y:_}}}});function pD(e){const[t,r="center"]=e.split("-");return[t,r]}var fD=iD,hD=cD,gD=dD,_D=mD,[og,gZ]=Ns("Tooltip",[ag]),ig=ag(),xD="TooltipProvider",TG=700,sy="tooltip.open",[EG,eb]=og(xD),vD=e=>{const{__scopeTooltip:t,delayDuration:r=TG,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,o=k.useRef(!0),i=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),c.jsx(EG,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:i,onPointerInTransitChange:k.useCallback(d=>{i.current=d},[]),disableHoverableContent:s,children:a})};vD.displayName=xD;var cm="Tooltip",[CG,lg]=og(cm),yD=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s,onOpenChange:a,disableHoverableContent:o,delayDuration:i}=e,l=eb(cm,e.__scopeTooltip),d=ig(t),[p,u]=k.useState(null),m=Io(),f=k.useRef(0),h=o??l.disableHoverableContent,_=i??l.delayDuration,v=k.useRef(!1),[g,x]=Fo({prop:n,defaultProp:s??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(sy))):l.onClose(),a==null||a(E)},caller:cm}),y=k.useMemo(()=>g?v.current?"delayed-open":"instant-open":"closed",[g]),w=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v.current=!1,x(!0)},[x]),b=k.useCallback(()=>{window.clearTimeout(f.current),f.current=0,x(!1)},[x]),C=k.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{v.current=!0,x(!0),f.current=0},_)},[_,x]);return k.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),c.jsx(fD,{...d,children:c.jsx(CG,{scope:t,contentId:m,open:g,stateAttribute:y,trigger:p,onTriggerChange:u,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?C():w()},[l.isOpenDelayedRef,C,w]),onTriggerLeave:k.useCallback(()=>{h?b():(window.clearTimeout(f.current),f.current=0)},[b,h]),onOpen:w,onClose:b,disableHoverableContent:h,children:r})})};yD.displayName=cm;var ay="TooltipTrigger",wD=k.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=lg(ay,r),a=eb(ay,r),o=ig(r),i=k.useRef(null),l=tr(t,i,s.onTriggerChange),d=k.useRef(!1),p=k.useRef(!1),u=k.useCallback(()=>d.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),c.jsx(hD,{asChild:!0,...o,children:c.jsx(At.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:Et(e.onPointerMove,m=>{m.pointerType!=="touch"&&!p.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),p.current=!0)}),onPointerLeave:Et(e.onPointerLeave,()=>{s.onTriggerLeave(),p.current=!1}),onPointerDown:Et(e.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Et(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:Et(e.onBlur,s.onClose),onClick:Et(e.onClick,s.onClose)})})});wD.displayName=ay;var PG="TooltipPortal",[_Z,SG]=og(PG,{forceMount:void 0}),md="TooltipContent",bD=k.forwardRef((e,t)=>{const r=SG(md,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,o=lg(md,e.__scopeTooltip);return c.jsx($s,{present:n||o.open,children:o.disableHoverableContent?c.jsx(MD,{side:s,...a,ref:t}):c.jsx(kG,{side:s,...a,ref:t})})}),kG=k.forwardRef((e,t)=>{const r=lg(md,e.__scopeTooltip),n=eb(md,e.__scopeTooltip),s=k.useRef(null),a=tr(t,s),[o,i]=k.useState(null),{trigger:l,onClose:d}=r,p=s.current,{onPointerInTransitChange:u}=n,m=k.useCallback(()=>{i(null),u(!1)},[u]),f=k.useCallback((h,_)=>{const v=h.currentTarget,g={x:h.clientX,y:h.clientY},x=$G(g,v.getBoundingClientRect()),y=DG(g,x),w=OG(_.getBoundingClientRect()),b=LG([...y,...w]);i(b),u(!0)},[u]);return k.useEffect(()=>()=>m(),[m]),k.useEffect(()=>{if(l&&p){const h=v=>f(v,p),_=v=>f(v,l);return l.addEventListener("pointerleave",h),p.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",h),p.removeEventListener("pointerleave",_)}}},[l,p,f,m]),k.useEffect(()=>{if(o){const h=_=>{const v=_.target,g={x:_.clientX,y:_.clientY},x=(l==null?void 0:l.contains(v))||(p==null?void 0:p.contains(v)),y=!FG(g,o);x?m():y&&(m(),d())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[l,p,o,d,m]),c.jsx(MD,{...e,ref:a})}),[jG,AG]=og(cm,{isInside:!1}),IG=TW("TooltipContent"),MD=k.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...i}=e,l=lg(md,r),d=ig(r),{onClose:p}=l;return k.useEffect(()=>(document.addEventListener(sy,p),()=>document.removeEventListener(sy,p)),[p]),k.useEffect(()=>{if(l.trigger){const u=m=>{const f=m.target;f!=null&&f.contains(l.trigger)&&p()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[l.trigger,p]),c.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:u=>u.preventDefault(),onDismiss:p,children:c.jsxs(gD,{"data-state":l.stateAttribute,...d,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(IG,{children:n}),c.jsx(jG,{scope:r,isInside:!0,children:c.jsx(HW,{id:l.contentId,role:"tooltip",children:s||n})})]})})});bD.displayName=md;var TD="TooltipArrow",NG=k.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=ig(r);return AG(TD,r).isInside?null:c.jsx(_D,{...s,...n,ref:t})});NG.displayName=TD;function $G(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function DG(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function OG(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function FG(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const i=t[a],l=t[o],d=i.x,p=i.y,u=l.x,m=l.y;p>n!=m>n&&r<(u-d)*(n-p)/(m-p)+d&&(s=!s)}return s}function LG(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),RG(t)}function RG(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var zG=vD,BG=yD,VG=wD,ED=bD;const bo=zG,Zo=BG,Jo=VG,Mo=k.forwardRef(({className:e,sideOffset:t=4,...r},n)=>c.jsx(ED,{ref:n,sideOffset:t,className:zt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Mo.displayName=ED.displayName;var cg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dg=typeof window>"u"||"Deno"in globalThis;function ya(){}function WG(e,t){return typeof e=="function"?e(t):e}function UG(e){return typeof e=="number"&&e>=0&&e!==1/0}function GG(e,t){return Math.max(e+(t||0)-Date.now(),0)}function oy(e,t){return typeof e=="function"?e(t):e}function HG(e,t){return typeof e=="function"?e(t):e}function yS(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:i}=e;if(o){if(n){if(t.queryHash!==tb(o,t.options))return!1}else if(!um(t.queryKey,o))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||s&&s!==t.state.fetchStatus||a&&!a(t))}function wS(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(dm(t.options.mutationKey)!==dm(a))return!1}else if(!um(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function tb(e,t){return((t==null?void 0:t.queryKeyHashFn)||dm)(e)}function dm(e){return JSON.stringify(e,(t,r)=>iy(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function um(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>um(e[r],t[r])):!1}function CD(e,t){if(e===t)return e;const r=bS(e)&&bS(t);if(r||iy(e)&&iy(t)){const n=r?e:Object.keys(e),s=n.length,a=r?t:Object.keys(t),o=a.length,i=r?[]:{},l=new Set(n);let d=0;for(let p=0;p<o;p++){const u=r?p:a[p];(!r&&l.has(u)||r)&&e[u]===void 0&&t[u]===void 0?(i[u]=void 0,d++):(i[u]=CD(e[u],t[u]),i[u]===e[u]&&e[u]!==void 0&&d++)}return s===o&&d===s?e:i}return t}function bS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function iy(e){if(!MS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!MS(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function MS(e){return Object.prototype.toString.call(e)==="[object Object]"}function qG(e){return new Promise(t=>{setTimeout(t,e)})}function KG(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?CD(e,t):t}function QG(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function XG(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var rb=Symbol();function PD(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===rb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ml,di,qc,$I,YG=($I=class extends cg{constructor(){super();mr(this,Ml);mr(this,di);mr(this,qc);Ht(this,qc,t=>{if(!dg&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Le(this,di)||this.setEventListener(Le(this,qc))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,di))==null||t.call(this),Ht(this,di,void 0))}setEventListener(t){var r;Ht(this,qc,t),(r=Le(this,di))==null||r.call(this),Ht(this,di,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Le(this,Ml)!==t&&(Ht(this,Ml,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Le(this,Ml)=="boolean"?Le(this,Ml):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ml=new WeakMap,di=new WeakMap,qc=new WeakMap,$I),SD=new YG,Kc,ui,Qc,DI,ZG=(DI=class extends cg{constructor(){super();mr(this,Kc,!0);mr(this,ui);mr(this,Qc);Ht(this,Qc,t=>{if(!dg&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Le(this,ui)||this.setEventListener(Le(this,Qc))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,ui))==null||t.call(this),Ht(this,ui,void 0))}setEventListener(t){var r;Ht(this,Qc,t),(r=Le(this,ui))==null||r.call(this),Ht(this,ui,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Kc)!==t&&(Ht(this,Kc,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Le(this,Kc)}},Kc=new WeakMap,ui=new WeakMap,Qc=new WeakMap,DI),xh=new ZG;function JG(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function eH(e){return Math.min(1e3*2**e,3e4)}function kD(e){return(e??"online")==="online"?xh.isOnline():!0}var jD=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Gx(e){return e instanceof jD}function AD(e){let t=!1,r=0,n=!1,s;const a=JG(),o=_=>{var v;n||(m(new jD(_)),(v=e.abort)==null||v.call(e))},i=()=>{t=!0},l=()=>{t=!1},d=()=>SD.isFocused()&&(e.networkMode==="always"||xh.isOnline())&&e.canRun(),p=()=>kD(e.networkMode)&&e.canRun(),u=_=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,_),s==null||s(),a.resolve(_))},m=_=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,_),s==null||s(),a.reject(_))},f=()=>new Promise(_=>{var v;s=g=>{(n||d())&&_(g)},(v=e.onPause)==null||v.call(e)}).then(()=>{var _;s=void 0,n||(_=e.onContinue)==null||_.call(e)}),h=()=>{if(n)return;let _;const v=r===0?e.initialPromise:void 0;try{_=v??e.fn()}catch(g){_=Promise.reject(g)}Promise.resolve(_).then(u).catch(g=>{var C;if(n)return;const x=e.retry??(dg?0:3),y=e.retryDelay??eH,w=typeof y=="function"?y(r,g):y,b=x===!0||typeof x=="number"&&r<x||typeof x=="function"&&x(r,g);if(t||!b){m(g);return}r++,(C=e.onFail)==null||C.call(e,r,g),qG(w).then(()=>d()?void 0:f()).then(()=>{t?m(g):h()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:i,continueRetry:l,canStart:p,start:()=>(p()?h():f().then(h),a)}}var tH=e=>setTimeout(e,0);function rH(){let e=[],t=0,r=i=>{i()},n=i=>{i()},s=tH;const a=i=>{t?e.push(i):s(()=>{r(i)})},o=()=>{const i=e;e=[],i.length&&s(()=>{n(()=>{i.forEach(l=>{r(l)})})})};return{batch:i=>{let l;t++;try{l=i()}finally{t--,t||o()}return l},batchCalls:i=>(...l)=>{a(()=>{i(...l)})},schedule:a,setNotifyFunction:i=>{r=i},setBatchNotifyFunction:i=>{n=i},setScheduler:i=>{s=i}}}var ss=rH(),Tl,OI,ID=(OI=class{constructor(){mr(this,Tl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),UG(this.gcTime)&&Ht(this,Tl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(dg?1/0:5*60*1e3))}clearGcTimeout(){Le(this,Tl)&&(clearTimeout(Le(this,Tl)),Ht(this,Tl,void 0))}},Tl=new WeakMap,OI),Xc,El,qs,Cl,Kn,vm,Pl,wa,To,FI,nH=(FI=class extends ID{constructor(t){super();mr(this,wa);mr(this,Xc);mr(this,El);mr(this,qs);mr(this,Cl);mr(this,Kn);mr(this,vm);mr(this,Pl);Ht(this,Pl,!1),Ht(this,vm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ht(this,Cl,t.client),Ht(this,qs,Le(this,Cl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ht(this,Xc,aH(this.options)),this.state=t.state??Le(this,Xc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,Kn))==null?void 0:t.promise}setOptions(t){this.options={...Le(this,vm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,qs).remove(this)}setData(t,r){const n=KG(this.state.data,t,this.options);return Gn(this,wa,To).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Gn(this,wa,To).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=Le(this,Kn))==null?void 0:n.promise;return(s=Le(this,Kn))==null||s.cancel(t),r?r.then(ya).catch(ya):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,Xc))}isActive(){return this.observers.some(t=>HG(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===rb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>oy(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!GG(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,Kn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Le(this,Kn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,qs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Le(this,Kn)&&(Le(this,Pl)?Le(this,Kn).cancel({revert:!0}):Le(this,Kn).cancelRetry()),this.scheduleGc()),Le(this,qs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gn(this,wa,To).call(this,{type:"invalidate"})}fetch(t,r){var d,p,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Le(this,Kn))return Le(this,Kn).continueRetry(),Le(this,Kn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const m=this.observers.find(f=>f.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,s=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ht(this,Pl,!0),n.signal)})},a=()=>{const m=PD(this.options,r),h=(()=>{const _={client:Le(this,Cl),queryKey:this.queryKey,meta:this.meta};return s(_),_})();return Ht(this,Pl,!1),this.options.persister?this.options.persister(m,h,this):m(h)},i=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Le(this,Cl),state:this.state,fetchFn:a};return s(m),m})();(d=this.options.behavior)==null||d.onFetch(i,this),Ht(this,El,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=i.fetchOptions)==null?void 0:p.meta))&&Gn(this,wa,To).call(this,{type:"fetch",meta:(u=i.fetchOptions)==null?void 0:u.meta});const l=m=>{var f,h,_,v;Gx(m)&&m.silent||Gn(this,wa,To).call(this,{type:"error",error:m}),Gx(m)||((h=(f=Le(this,qs).config).onError)==null||h.call(f,m,this),(v=(_=Le(this,qs).config).onSettled)==null||v.call(_,this.state.data,m,this)),this.scheduleGc()};return Ht(this,Kn,AD({initialPromise:r==null?void 0:r.initialPromise,fn:i.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var f,h,_,v;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){l(g);return}(h=(f=Le(this,qs).config).onSuccess)==null||h.call(f,m,this),(v=(_=Le(this,qs).config).onSettled)==null||v.call(_,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,f)=>{Gn(this,wa,To).call(this,{type:"failed",failureCount:m,error:f})},onPause:()=>{Gn(this,wa,To).call(this,{type:"pause"})},onContinue:()=>{Gn(this,wa,To).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),Le(this,Kn).start()}},Xc=new WeakMap,El=new WeakMap,qs=new WeakMap,Cl=new WeakMap,Kn=new WeakMap,vm=new WeakMap,Pl=new WeakMap,wa=new WeakSet,To=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...sH(n.data,this.options),fetchMeta:t.meta??null};case"success":return Ht(this,El,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Gx(s)&&s.revert&&Le(this,El)?{...Le(this,El),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ss.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Le(this,qs).notify({query:this,type:"updated",action:t})})},FI);function sH(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kD(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function aH(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ga,LI,oH=(LI=class extends cg{constructor(t={}){super();mr(this,Ga);this.config=t,Ht(this,Ga,new Map)}build(t,r,n){const s=r.queryKey,a=r.queryHash??tb(s,r);let o=this.get(a);return o||(o=new nH({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){Le(this,Ga).has(t.queryHash)||(Le(this,Ga).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Le(this,Ga).get(t.queryHash);r&&(t.destroy(),r===t&&Le(this,Ga).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ss.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Ga).get(t)}getAll(){return[...Le(this,Ga).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>yS(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>yS(t,n)):r}notify(t){ss.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ss.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ss.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ga=new WeakMap,LI),Ha,rs,Sl,qa,si,RI,iH=(RI=class extends ID{constructor(t){super();mr(this,qa);mr(this,Ha);mr(this,rs);mr(this,Sl);this.mutationId=t.mutationId,Ht(this,rs,t.mutationCache),Ht(this,Ha,[]),this.state=t.state||lH(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,Ha).includes(t)||(Le(this,Ha).push(t),this.clearGcTimeout(),Le(this,rs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ht(this,Ha,Le(this,Ha).filter(r=>r!==t)),this.scheduleGc(),Le(this,rs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,Ha).length||(this.state.status==="pending"?this.scheduleGc():Le(this,rs).remove(this))}continue(){var t;return((t=Le(this,Sl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,o,i,l,d,p,u,m,f,h,_,v,g,x,y,w,b,C,E,P;const r=()=>{Gn(this,qa,si).call(this,{type:"continue"})};Ht(this,Sl,AD({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,$)=>{Gn(this,qa,si).call(this,{type:"failed",failureCount:I,error:$})},onPause:()=>{Gn(this,qa,si).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,rs).canRun(this)}));const n=this.state.status==="pending",s=!Le(this,Sl).canStart();try{if(n)r();else{Gn(this,qa,si).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(a=Le(this,rs).config).onMutate)==null?void 0:o.call(a,t,this));const $=await((l=(i=this.options).onMutate)==null?void 0:l.call(i,t));$!==this.state.context&&Gn(this,qa,si).call(this,{type:"pending",context:$,variables:t,isPaused:s})}const I=await Le(this,Sl).start();return await((p=(d=Le(this,rs).config).onSuccess)==null?void 0:p.call(d,I,t,this.state.context,this)),await((m=(u=this.options).onSuccess)==null?void 0:m.call(u,I,t,this.state.context)),await((h=(f=Le(this,rs).config).onSettled)==null?void 0:h.call(f,I,null,this.state.variables,this.state.context,this)),await((v=(_=this.options).onSettled)==null?void 0:v.call(_,I,null,t,this.state.context)),Gn(this,qa,si).call(this,{type:"success",data:I}),I}catch(I){try{throw await((x=(g=Le(this,rs).config).onError)==null?void 0:x.call(g,I,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,I,t,this.state.context)),await((C=(b=Le(this,rs).config).onSettled)==null?void 0:C.call(b,void 0,I,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,I,t,this.state.context)),I}finally{Gn(this,qa,si).call(this,{type:"error",error:I})}}finally{Le(this,rs).runNext(this)}}},Ha=new WeakMap,rs=new WeakMap,Sl=new WeakMap,qa=new WeakSet,si=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ss.batch(()=>{Le(this,Ha).forEach(n=>{n.onMutationUpdate(t)}),Le(this,rs).notify({mutation:this,type:"updated",action:t})})},RI);function lH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Po,ba,ym,zI,cH=(zI=class extends cg{constructor(t={}){super();mr(this,Po);mr(this,ba);mr(this,ym);this.config=t,Ht(this,Po,new Set),Ht(this,ba,new Map),Ht(this,ym,0)}build(t,r,n){const s=new iH({mutationCache:this,mutationId:++kp(this,ym)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){Le(this,Po).add(t);const r=Yp(t);if(typeof r=="string"){const n=Le(this,ba).get(r);n?n.push(t):Le(this,ba).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Le(this,Po).delete(t)){const r=Yp(t);if(typeof r=="string"){const n=Le(this,ba).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&Le(this,ba).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Yp(t);if(typeof r=="string"){const n=Le(this,ba).get(r),s=n==null?void 0:n.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Yp(t);if(typeof r=="string"){const s=(n=Le(this,ba).get(r))==null?void 0:n.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ss.batch(()=>{Le(this,Po).forEach(t=>{this.notify({type:"removed",mutation:t})}),Le(this,Po).clear(),Le(this,ba).clear()})}getAll(){return Array.from(Le(this,Po))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>wS(r,n))}findAll(t={}){return this.getAll().filter(r=>wS(t,r))}notify(t){ss.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ss.batch(()=>Promise.all(t.map(r=>r.continue().catch(ya))))}},Po=new WeakMap,ba=new WeakMap,ym=new WeakMap,zI);function Yp(e){var t;return(t=e.options.scope)==null?void 0:t.id}function TS(e){return{onFetch:(t,r)=>{var p,u,m,f,h;const n=t.options,s=(m=(u=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:u.fetchMore)==null?void 0:m.direction,a=((f=t.state.data)==null?void 0:f.pages)||[],o=((h=t.state.data)==null?void 0:h.pageParams)||[];let i={pages:[],pageParams:[]},l=0;const d=async()=>{let _=!1;const v=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?_=!0:t.signal.addEventListener("abort",()=>{_=!0}),t.signal)})},g=PD(t.options,t.fetchOptions),x=async(y,w,b)=>{if(_)return Promise.reject();if(w==null&&y.pages.length)return Promise.resolve(y);const E=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:w,direction:b?"backward":"forward",meta:t.options.meta};return v(z),z})(),P=await g(E),{maxPages:I}=t.options,$=b?XG:QG;return{pages:$(y.pages,P,I),pageParams:$(y.pageParams,w,I)}};if(s&&a.length){const y=s==="backward",w=y?dH:ES,b={pages:a,pageParams:o},C=w(n,b);i=await x(b,C,y)}else{const y=e??a.length;do{const w=l===0?o[0]??n.initialPageParam:ES(n,i);if(l>0&&w==null)break;i=await x(i,w),l++}while(l<y)}return i};t.options.persister?t.fetchFn=()=>{var _,v;return(v=(_=t.options).persister)==null?void 0:v.call(_,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function ES(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function dH(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var tn,mi,pi,Yc,Zc,fi,Jc,ed,BI,uH=(BI=class{constructor(e={}){mr(this,tn);mr(this,mi);mr(this,pi);mr(this,Yc);mr(this,Zc);mr(this,fi);mr(this,Jc);mr(this,ed);Ht(this,tn,e.queryCache||new oH),Ht(this,mi,e.mutationCache||new cH),Ht(this,pi,e.defaultOptions||{}),Ht(this,Yc,new Map),Ht(this,Zc,new Map),Ht(this,fi,0)}mount(){kp(this,fi)._++,Le(this,fi)===1&&(Ht(this,Jc,SD.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,tn).onFocus())})),Ht(this,ed,xh.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,tn).onOnline())})))}unmount(){var e,t;kp(this,fi)._--,Le(this,fi)===0&&((e=Le(this,Jc))==null||e.call(this),Ht(this,Jc,void 0),(t=Le(this,ed))==null||t.call(this),Ht(this,ed,void 0))}isFetching(e){return Le(this,tn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,mi).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,tn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Le(this,tn).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(oy(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Le(this,tn).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=Le(this,tn).get(n.queryHash),a=s==null?void 0:s.state.data,o=WG(t,a);if(o!==void 0)return Le(this,tn).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ss.batch(()=>Le(this,tn).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Le(this,tn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Le(this,tn);ss.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Le(this,tn);return ss.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ss.batch(()=>Le(this,tn).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(ya).catch(ya)}invalidateQueries(e,t={}){return ss.batch(()=>(Le(this,tn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ss.batch(()=>Le(this,tn).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(ya)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(ya)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Le(this,tn).build(this,t);return r.isStaleByTime(oy(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ya).catch(ya)}fetchInfiniteQuery(e){return e.behavior=TS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ya).catch(ya)}ensureInfiniteQueryData(e){return e.behavior=TS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xh.isOnline()?Le(this,mi).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,tn)}getMutationCache(){return Le(this,mi)}getDefaultOptions(){return Le(this,pi)}setDefaultOptions(e){Ht(this,pi,e)}setQueryDefaults(e,t){Le(this,Yc).set(dm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,Yc).values()],r={};return t.forEach(n=>{um(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Le(this,Zc).set(dm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,Zc).values()],r={};return t.forEach(n=>{um(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,pi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=tb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===rb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,pi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,tn).clear(),Le(this,mi).clear()}},tn=new WeakMap,mi=new WeakMap,pi=new WeakMap,Yc=new WeakMap,Zc=new WeakMap,fi=new WeakMap,Jc=new WeakMap,ed=new WeakMap,BI),mH=k.createContext(void 0),pH=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),c.jsx(mH.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(this,arguments)}var xi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xi||(xi={}));const CS="popstate";function fH(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:o,hash:i}=n.location;return ly("",{pathname:a,search:o,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:vh(s)}return gH(t,r,null,e)}function nn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ND(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hH(){return Math.random().toString(36).substr(2,8)}function PS(e,t){return{usr:e.state,key:e.key,idx:t}}function ly(e,t,r,n){return r===void 0&&(r=null),mm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Cd(t):t,{state:r,key:t&&t.key||n||hH()})}function vh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Cd(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function gH(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,i=xi.Pop,l=null,d=p();d==null&&(d=0,o.replaceState(mm({},o.state,{idx:d}),""));function p(){return(o.state||{idx:null}).idx}function u(){i=xi.Pop;let v=p(),g=v==null?null:v-d;d=v,l&&l({action:i,location:_.location,delta:g})}function m(v,g){i=xi.Push;let x=ly(_.location,v,g);d=p()+1;let y=PS(x,d),w=_.createHref(x);try{o.pushState(y,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(w)}a&&l&&l({action:i,location:_.location,delta:1})}function f(v,g){i=xi.Replace;let x=ly(_.location,v,g);d=p();let y=PS(x,d),w=_.createHref(x);o.replaceState(y,"",w),a&&l&&l({action:i,location:_.location,delta:0})}function h(v){let g=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:vh(v);return x=x.replace(/ $/,"%20"),nn(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let _={get action(){return i},get location(){return e(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(CS,u),l=v,()=>{s.removeEventListener(CS,u),l=null}},createHref(v){return t(s,v)},createURL:h,encodeLocation(v){let g=h(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:f,go(v){return o.go(v)}};return _}var SS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(SS||(SS={}));function _H(e,t,r){return r===void 0&&(r="/"),xH(e,t,r,!1)}function xH(e,t,r,n){let s=typeof t=="string"?Cd(t):t,a=pd(s.pathname||"/",r);if(a==null)return null;let o=$D(e);vH(o);let i=null;for(let l=0;i==null&&l<o.length;++l){let d=jH(a);i=SH(o[l],d,n)}return i}function $D(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,o,i)=>{let l={relativePath:i===void 0?a.path||"":i,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};l.relativePath.startsWith("/")&&(nn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let d=Pi([n,l.relativePath]),p=r.concat(l);a.children&&a.children.length>0&&(nn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$D(a.children,t,p,d)),!(a.path==null&&!a.index)&&t.push({path:d,score:CH(d,a.index),routesMeta:p})};return e.forEach((a,o)=>{var i;if(a.path===""||!((i=a.path)!=null&&i.includes("?")))s(a,o);else for(let l of DD(a.path))s(a,o,l)}),t}function DD(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=DD(n.join("/")),i=[];return i.push(...o.map(l=>l===""?a:[a,l].join("/"))),s&&i.push(...o),i.map(l=>e.startsWith("/")&&l===""?"/":l)}function vH(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:PH(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const yH=/^:[\w-]+$/,wH=3,bH=2,MH=1,TH=10,EH=-2,kS=e=>e==="*";function CH(e,t){let r=e.split("/"),n=r.length;return r.some(kS)&&(n+=EH),t&&(n+=bH),r.filter(s=>!kS(s)).reduce((s,a)=>s+(yH.test(a)?wH:a===""?MH:TH),n)}function PH(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function SH(e,t,r){let{routesMeta:n}=e,s={},a="/",o=[];for(let i=0;i<n.length;++i){let l=n[i],d=i===n.length-1,p=a==="/"?t:t.slice(a.length)||"/",u=yh({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},p),m=l.route;if(!u&&d&&r&&!n[n.length-1].route.index&&(u=yh({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},p)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:Pi([a,u.pathname]),pathnameBase:$H(Pi([a,u.pathnameBase])),route:m}),u.pathnameBase!=="/"&&(a=Pi([a,u.pathnameBase]))}return o}function yh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=kH(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:n.reduce((d,p,u)=>{let{paramName:m,isOptional:f}=p;if(m==="*"){let _=i[u]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const h=i[u];return f&&!h?d[m]=void 0:d[m]=(h||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function kH(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ND(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,l)=>(n.push({paramName:i,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function jH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ND(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pd(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function AH(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Cd(e):e;return{pathname:r?r.startsWith("/")?r:IH(r,t):t,search:DH(n),hash:OH(s)}}function IH(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hx(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NH(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function OD(e,t){let r=NH(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function FD(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Cd(e):(s=mm({},e),nn(!s.pathname||!s.pathname.includes("?"),Hx("?","pathname","search",s)),nn(!s.pathname||!s.pathname.includes("#"),Hx("#","pathname","hash",s)),nn(!s.search||!s.search.includes("#"),Hx("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,i;if(o==null)i=r;else{let u=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),u-=1;s.pathname=m.join("/")}i=u>=0?t[u]:"/"}let l=AH(s,i),d=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(d||p)&&(l.pathname+="/"),l}const Pi=e=>e.join("/").replace(/\/\/+/g,"/"),$H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LD=["post","put","patch","delete"];new Set(LD);const LH=["get",...LD];new Set(LH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pm.apply(this,arguments)}const ug=k.createContext(null),RD=k.createContext(null),Bi=k.createContext(null),mg=k.createContext(null),Vi=k.createContext({outlet:null,matches:[],isDataRoute:!1}),zD=k.createContext(null);function RH(e,t){let{relative:r}=t===void 0?{}:t;jm()||nn(!1);let{basename:n,navigator:s}=k.useContext(Bi),{hash:a,pathname:o,search:i}=fg(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Pi([n,o])),s.createHref({pathname:l,search:i,hash:a})}function jm(){return k.useContext(mg)!=null}function Kl(){return jm()||nn(!1),k.useContext(mg).location}function BD(e){k.useContext(Bi).static||k.useLayoutEffect(e)}function sn(){let{isDataRoute:e}=k.useContext(Vi);return e?ZH():zH()}function zH(){jm()||nn(!1);let e=k.useContext(ug),{basename:t,future:r,navigator:n}=k.useContext(Bi),{matches:s}=k.useContext(Vi),{pathname:a}=Kl(),o=JSON.stringify(OD(s,r.v7_relativeSplatPath)),i=k.useRef(!1);return BD(()=>{i.current=!0}),k.useCallback(function(d,p){if(p===void 0&&(p={}),!i.current)return;if(typeof d=="number"){n.go(d);return}let u=FD(d,JSON.parse(o),a,p.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Pi([t,u.pathname])),(p.replace?n.replace:n.push)(u,p.state,p)},[t,n,o,a,e])}function pg(){let{matches:e}=k.useContext(Vi),t=e[e.length-1];return t?t.params:{}}function fg(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=k.useContext(Bi),{matches:s}=k.useContext(Vi),{pathname:a}=Kl(),o=JSON.stringify(OD(s,n.v7_relativeSplatPath));return k.useMemo(()=>FD(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function BH(e,t){return VH(e,t)}function VH(e,t,r,n){jm()||nn(!1);let{navigator:s}=k.useContext(Bi),{matches:a}=k.useContext(Vi),o=a[a.length-1],i=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=Kl(),p;if(t){var u;let v=typeof t=="string"?Cd(t):t;l==="/"||(u=v.pathname)!=null&&u.startsWith(l)||nn(!1),p=v}else p=d;let m=p.pathname||"/",f=m;if(l!=="/"){let v=l.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let h=_H(e,{pathname:f}),_=qH(h&&h.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:Pi([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Pi([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&_?k.createElement(mg.Provider,{value:{location:pm({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:xi.Pop}},_):_}function WH(){let e=YH(),t=FH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:s},r):null,null)}const UH=k.createElement(WH,null);class GH extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?k.createElement(Vi.Provider,{value:this.props.routeContext},k.createElement(zD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HH(e){let{routeContext:t,match:r,children:n}=e,s=k.useContext(ug);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(Vi.Provider,{value:t},n)}function qH(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,i=(s=r)==null?void 0:s.errors;if(i!=null){let p=o.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);p>=0||nn(!1),o=o.slice(0,Math.min(o.length,p+1))}let l=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let u=o[p];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=p),u.route.id){let{loaderData:m,errors:f}=r,h=u.route.loader&&m[u.route.id]===void 0&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,u,m)=>{let f,h=!1,_=null,v=null;r&&(f=i&&u.route.id?i[u.route.id]:void 0,_=u.route.errorElement||UH,l&&(d<0&&m===0?(h=!0,v=null):d===m&&(h=!0,v=u.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),x=()=>{let y;return f?y=_:h?y=v:u.route.Component?y=k.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=p,k.createElement(HH,{match:u,routeContext:{outlet:p,matches:g,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?k.createElement(GH,{location:r.location,revalidation:r.revalidation,component:_,error:f,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):x()},null)}var VD=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(VD||{}),wh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(wh||{});function KH(e){let t=k.useContext(ug);return t||nn(!1),t}function QH(e){let t=k.useContext(RD);return t||nn(!1),t}function XH(e){let t=k.useContext(Vi);return t||nn(!1),t}function WD(e){let t=XH(),r=t.matches[t.matches.length-1];return r.route.id||nn(!1),r.route.id}function YH(){var e;let t=k.useContext(zD),r=QH(wh.UseRouteError),n=WD(wh.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ZH(){let{router:e}=KH(VD.UseNavigateStable),t=WD(wh.UseNavigateStable),r=k.useRef(!1);return BD(()=>{r.current=!0}),k.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,pm({fromRouteId:t},a)))},[e,t])}function JH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function cn(e){nn(!1)}function eq(e){let{basename:t="/",children:r=null,location:n,navigationType:s=xi.Pop,navigator:a,static:o=!1,future:i}=e;jm()&&nn(!1);let l=t.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:l,navigator:a,static:o,future:pm({v7_relativeSplatPath:!1},i)}),[l,i,a,o]);typeof n=="string"&&(n=Cd(n));let{pathname:p="/",search:u="",hash:m="",state:f=null,key:h="default"}=n,_=k.useMemo(()=>{let v=pd(p,l);return v==null?null:{location:{pathname:v,search:u,hash:m,state:f,key:h},navigationType:s}},[l,p,u,m,f,h,s]);return _==null?null:k.createElement(Bi.Provider,{value:d},k.createElement(mg.Provider,{children:r,value:_}))}function tq(e){let{children:t,location:r}=e;return BH(cy(t),r)}new Promise(()=>{});function cy(e,t){t===void 0&&(t=[]);let r=[];return k.Children.forEach(e,(n,s)=>{if(!k.isValidElement(n))return;let a=[...t,s];if(n.type===k.Fragment){r.push.apply(r,cy(n.props.children,a));return}n.type!==cn&&nn(!1),!n.props.index||!n.props.children||nn(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=cy(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bh(){return bh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bh.apply(this,arguments)}function UD(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function rq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nq(e,t){return e.button===0&&(!t||t==="_self")&&!rq(e)}function dy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function sq(e,t){let r=dy(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}const aq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oq=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iq="6";try{window.__reactRouterVersion=iq}catch{}const lq=k.createContext({isTransitioning:!1}),cq="startTransition",jS=Gy[cq];function dq(e){let{basename:t,children:r,future:n,window:s}=e,a=k.useRef();a.current==null&&(a.current=fH({window:s,v5Compat:!0}));let o=a.current,[i,l]=k.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},p=k.useCallback(u=>{d&&jS?jS(()=>l(u)):l(u)},[l,d]);return k.useLayoutEffect(()=>o.listen(p),[o,p]),k.useEffect(()=>JH(n),[n]),k.createElement(eq,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:o,future:n})}const uq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GD=k.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:o,state:i,target:l,to:d,preventScrollReset:p,viewTransition:u}=t,m=UD(t,aq),{basename:f}=k.useContext(Bi),h,_=!1;if(typeof d=="string"&&mq.test(d)&&(h=d,uq))try{let y=new URL(window.location.href),w=d.startsWith("//")?new URL(y.protocol+d):new URL(d),b=pd(w.pathname,f);w.origin===y.origin&&b!=null?d=b+w.search+w.hash:_=!0}catch{}let v=RH(d,{relative:s}),g=hq(d,{replace:o,state:i,target:l,preventScrollReset:p,relative:s,viewTransition:u});function x(y){n&&n(y),y.defaultPrevented||g(y)}return k.createElement("a",bh({},m,{href:h||v,onClick:_||a?n:x,ref:r,target:l}))}),pq=k.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:a="",end:o=!1,style:i,to:l,viewTransition:d,children:p}=t,u=UD(t,oq),m=fg(l,{relative:u.relative}),f=Kl(),h=k.useContext(RD),{navigator:_,basename:v}=k.useContext(Bi),g=h!=null&&_q(m)&&d===!0,x=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,y=f.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;s||(y=y.toLowerCase(),w=w?w.toLowerCase():null,x=x.toLowerCase()),w&&v&&(w=pd(w,v)||w);const b=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=y===x||!o&&y.startsWith(x)&&y.charAt(b)==="/",E=w!=null&&(w===x||!o&&w.startsWith(x)&&w.charAt(x.length)==="/"),P={isActive:C,isPending:E,isTransitioning:g},I=C?n:void 0,$;typeof a=="function"?$=a(P):$=[a,C?"active":null,E?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(P):i;return k.createElement(GD,bh({},u,{"aria-current":I,className:$,ref:r,style:z,to:l,viewTransition:d}),typeof p=="function"?p(P):p)});var uy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uy||(uy={}));var AS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(AS||(AS={}));function fq(e){let t=k.useContext(ug);return t||nn(!1),t}function hq(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:i}=t===void 0?{}:t,l=sn(),d=Kl(),p=fg(e,{relative:o});return k.useCallback(u=>{if(nq(u,r)){u.preventDefault();let m=n!==void 0?n:vh(d)===vh(p);l(e,{replace:m,state:s,preventScrollReset:a,relative:o,viewTransition:i})}},[d,l,p,n,s,r,e,a,o,i])}function gq(e){let t=k.useRef(dy(e)),r=k.useRef(!1),n=Kl(),s=k.useMemo(()=>sq(n.search,r.current?null:t.current),[n.search]),a=sn(),o=k.useCallback((i,l)=>{const d=dy(typeof i=="function"?i(s):i);r.current=!0,a("?"+d,l)},[a,s]);return[s,o]}function _q(e,t){t===void 0&&(t={});let r=k.useContext(lq);r==null&&nn(!1);let{basename:n}=fq(uy.useViewTransitionState),s=fg(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=pd(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=pd(r.nextLocation.pathname,n)||r.nextLocation.pathname;return yh(s.pathname,o)!=null||yh(s.pathname,a)!=null}const xq=Sm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ze=k.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const o=n?bW:"button";return c.jsx(o,{className:zt(xq({variant:t,size:r,className:e})),ref:a,...s})});ze.displayName="Button";const vq=()=>{const[e,t]=k.useState(!1),[r,n]=k.useState(100),[s,a]=k.useState(!1),[o,i]=k.useState(!1);k.useEffect(()=>{const v=localStorage.getItem("accessibility-font-size"),g=localStorage.getItem("accessibility-high-contrast");if(v){const x=parseInt(v);n(x),document.documentElement.style.fontSize=`${x}%`}g==="true"&&(a(!0),document.documentElement.classList.add("high-contrast"))},[]);const l=()=>{const v=Math.min(r+10,150);n(v),document.documentElement.style.fontSize=`${v}%`,localStorage.setItem("accessibility-font-size",v.toString())},d=()=>{const v=Math.max(r-10,80);n(v),document.documentElement.style.fontSize=`${v}%`,localStorage.setItem("accessibility-font-size",v.toString())},p=()=>{n(100),document.documentElement.style.fontSize="100%",localStorage.setItem("accessibility-font-size","100")},u=()=>{const v=!s;a(v),v?(document.documentElement.classList.add("high-contrast"),localStorage.setItem("accessibility-high-contrast","true")):(document.documentElement.classList.remove("high-contrast"),localStorage.setItem("accessibility-high-contrast","false"))},m=()=>{i(!o),o?(document.body.style.userSelect="",document.removeEventListener("mouseup",f)):(document.body.style.userSelect="text",document.addEventListener("mouseup",f))},f=()=>{const v=window.getSelection(),g=v==null?void 0:v.toString().trim();g&&g.length>0&&h(g)},h=v=>{if("speechSynthesis"in window){window.speechSynthesis.cancel();const g=new SpeechSynthesisUtterance(v);g.lang="pt-BR",g.rate=1,g.pitch=1,window.speechSynthesis.speak(g)}},_=()=>{const v=document.querySelector("[vw-access-button]");v&&v.click()};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"fixed left-0 top-1/2 -translate-y-1/2 z-50 flex flex-col gap-2",children:[c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsx(ze,{onClick:()=>t(!e),className:"rounded-r-lg rounded-l-none h-12 w-12 bg-[#1e40af] hover:bg-[#1e3a8a] shadow-lg text-white","aria-label":"Abrir menu de acessibilidade",children:e?c.jsx(Ol,{className:"h-5 w-5"}):c.jsx(tS,{className:"h-6 w-6"})})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Recursos de Acessibilidade"})})]})}),c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsx(ze,{onClick:_,className:"rounded-r-lg rounded-l-none h-12 w-12 bg-[#1e40af] hover:bg-[#1e3a8a] shadow-lg text-white","aria-label":"Abrir VLibras - Traduo em LIBRAS",children:c.jsx(TU,{className:"h-6 w-6"})})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"LIBRAS (VLibras)"})})]})})]}),e&&c.jsx("div",{className:"fixed left-0 top-1/2 -translate-y-1/2 z-40 ml-12",children:c.jsxs("div",{className:"bg-card border border-border rounded-r-lg shadow-2xl p-4 w-64",children:[c.jsxs("h3",{className:"font-semibold text-sm mb-4 flex items-center gap-2",children:[c.jsx(tS,{className:"h-4 w-4"}),"Acessibilidade"]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-xs font-medium flex items-center gap-2",children:[c.jsx($U,{className:"h-3 w-3"}),"Tamanho do Texto"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsx(ze,{variant:"outline",size:"sm",onClick:d,disabled:r<=80,"aria-label":"Diminuir tamanho do texto",children:c.jsx(zU,{className:"h-3 w-3"})})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Diminuir texto"})})]})}),c.jsxs("span",{className:"text-xs flex-1 text-center font-medium",children:[r,"%"]}),c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsx(ze,{variant:"outline",size:"sm",onClick:l,disabled:r>=150,"aria-label":"Aumentar tamanho do texto",children:c.jsx(RU,{className:"h-3 w-3"})})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Aumentar texto"})})]})}),c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsx(ze,{variant:"outline",size:"sm",onClick:p,"aria-label":"Resetar tamanho do texto",children:c.jsx(AU,{className:"h-3 w-3"})})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Resetar"})})]})})]})]}),c.jsx("div",{className:"pt-2 border-t",children:c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsxs(ze,{variant:s?"default":"outline",size:"sm",onClick:u,className:"w-full justify-start","aria-label":"Alternar alto contraste",children:[c.jsx(wU,{className:"h-3 w-3 mr-2"}),c.jsx("span",{className:"text-xs",children:"Alto Contraste"})]})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Ativar/desativar alto contraste"})})]})})}),c.jsx("div",{children:c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsxs(ze,{variant:o?"default":"outline",size:"sm",onClick:m,className:"w-full justify-start","aria-label":"Alternar leitura de texto",children:[c.jsx(OU,{className:"h-3 w-3 mr-2"}),c.jsx("span",{className:"text-xs",children:"Leitura de Texto"})]})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Selecione texto para ouvir"})})]})})}),c.jsx("div",{className:"pt-2 border-t",children:c.jsx(bo,{children:c.jsxs(Zo,{children:[c.jsx(Jo,{asChild:!0,children:c.jsxs(ze,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{h("Esta plataforma est otimizada para leitores de tela. Use as teclas de atalho do seu leitor de tela para navegar pelos elementos da pgina.")},"aria-label":"Guia de leitor de tela",children:[c.jsx(N3,{className:"h-3 w-3 mr-2"}),c.jsx("span",{className:"text-xs",children:"Leitor de Tela"})]})}),c.jsx(Mo,{side:"right",children:c.jsx("p",{children:"Guia para leitores de tela"})})]})})})]}),c.jsx("div",{className:"mt-4 pt-3 border-t text-xs text-muted-foreground",children:c.jsx("p",{children:"Plataforma acessvel conforme WCAG 2.1 AA"})})]})})]})},ot=k.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:zt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ot.displayName="Card";const yq=k.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:zt("flex flex-col space-y-1.5 p-6",e),...t}));yq.displayName="CardHeader";const wq=k.forwardRef(({className:e,...t},r)=>c.jsx("h3",{ref:r,className:zt("text-2xl font-semibold leading-none tracking-tight",e),...t}));wq.displayName="CardTitle";const bq=k.forwardRef(({className:e,...t},r)=>c.jsx("p",{ref:r,className:zt("text-sm text-muted-foreground",e),...t}));bq.displayName="CardDescription";const Mq=k.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:zt("p-6 pt-0",e),...t}));Mq.displayName="CardContent";const Tq=k.forwardRef(({className:e,...t},r)=>c.jsx("div",{ref:r,className:zt("flex items-center p-6 pt-0",e),...t}));Tq.displayName="CardFooter";const Eq="/assets/pecem-logo-Cg8zJak8.png",Cq=({onFinish:e})=>{const[t,r]=k.useState(!0),[n,s]=k.useState(!1);return k.useEffect(()=>{setTimeout(()=>s(!0),100);const a=setTimeout(()=>{s(!1)},2500),o=setTimeout(()=>{r(!1),e()},3200);return()=>{clearTimeout(a),clearTimeout(o)}},[e]),t?c.jsx("div",{className:`fixed inset-0 z-[100] flex items-center justify-center bg-white transition-opacity duration-700 ${n?"opacity-100":"opacity-0"}`,"aria-hidden":"true",children:c.jsx("div",{className:`transform transition-all duration-1000 ease-out px-4 ${n?"scale-100 opacity-100":"scale-90 opacity-0"}`,children:c.jsx("img",{src:Eq,alt:"Porto do Pecm",className:"h-24 w-auto max-w-[80vw] sm:h-28 md:h-32 lg:h-36 object-contain"})})}):null};function Pq(){const{theme:e,setTheme:t}=H3(),[r,n]=k.useState(!1);return k.useEffect(()=>{n(!0)},[]),r?c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>t(e==="dark"?"light":"dark"),className:"w-9 h-9 p-0","aria-label":"Alternar tema",children:e==="dark"?c.jsx(rS,{className:"h-4 w-4 text-foreground"}):c.jsx(SU,{className:"h-4 w-4 text-foreground"})}):c.jsx(ze,{variant:"ghost",size:"sm",className:"w-9 h-9 p-0",children:c.jsx(rS,{className:"h-4 w-4"})})}const fd="/assets/pecem-logo-Cg8zJak8.png",Sq=()=>{const e=sn(),[t,r]=k.useState(!0),n=()=>{r(!1)};return t?c.jsx(Cq,{onFinish:n}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx("header",{className:"border-b bg-card sticky top-0 z-50",children:c.jsxs("div",{className:"container mx-auto px-3 sm:px-4 md:px-6 py-2 sm:py-3 md:py-4 flex justify-between items-center gap-2",children:[c.jsx("img",{src:fd,alt:"Pecm - Complexo Industrial e Porturio",className:"h-8 sm:h-10 md:h-12 lg:h-14 w-auto object-contain"}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx(Pq,{}),c.jsx(ze,{variant:"outline",onClick:()=>e("/login"),"aria-label":"Fazer login",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",children:"Login"}),c.jsx(ze,{onClick:()=>e("/cadastro"),"aria-label":"Criar nova conta",size:"sm",className:"text-xs sm:text-sm px-2 sm:px-3",children:"Cadastrar"})]})]})}),c.jsxs("main",{children:[c.jsx("section",{className:"hero-gradient py-10 sm:py-16 md:py-20 lg:py-28",children:c.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[c.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 md:mb-6 text-primary dark:text-white leading-tight px-2","data-aos":"fade-down","data-aos-duration":"1000",children:"Conectando Talentos ao Porto do Pecm"}),c.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-foreground/80 max-w-3xl mx-auto leading-relaxed px-2","data-aos":"fade-up","data-aos-delay":"200","data-aos-duration":"1000",children:"Plataforma de empregabilidade focada em certificaes tcnicas e segurana"})]})})}),c.jsx("section",{className:"container mx-auto px-4 sm:px-6 -mt-8 sm:-mt-12 mb-12 sm:mb-16",children:c.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 sm:gap-6 max-w-4xl mx-auto",children:[c.jsx(ot,{className:"p-6 sm:p-8 hover:shadow-xl transition-all cursor-pointer card-elevated h-full",onClick:()=>e("/cadastro?tipo=candidato"),"data-aos":"fade-right","data-aos-delay":"300","data-aos-duration":"1000",role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&e("/cadastro?tipo=candidato")},"aria-label":"Sou Candidato - Criar conta como profissional",children:c.jsxs("div",{className:"flex flex-col items-center justify-between text-center space-y-4 h-full",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:c.jsx(so,{className:"h-8 w-8 text-primary","aria-hidden":"true"})}),c.jsxs("div",{className:"space-y-3 flex-1 flex flex-col justify-center",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Sou Candidato"}),c.jsx("p",{className:"text-base text-muted-foreground leading-relaxed min-h-[4.5rem]",children:"Cadastre suas certificaes, encontre vagas compatveis e candidate-se s melhores oportunidades."})]}),c.jsx(ze,{className:"w-full mt-auto",size:"lg",children:"Comear Agora"})]})}),c.jsx(ot,{className:"p-6 sm:p-8 hover:shadow-xl transition-all cursor-pointer card-elevated h-full",onClick:()=>e("/cadastro?tipo=empresa"),"data-aos":"fade-left","data-aos-delay":"300","data-aos-duration":"1000",role:"button",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&e("/cadastro?tipo=empresa")},"aria-label":"Sou Empresa - Criar conta empresarial",children:c.jsxs("div",{className:"flex flex-col items-center justify-between text-center space-y-4 h-full",children:[c.jsx("div",{className:"w-16 h-16 rounded-full bg-secondary/10 flex items-center justify-center flex-shrink-0",children:c.jsx(Rn,{className:"h-8 w-8 text-secondary","aria-hidden":"true"})}),c.jsxs("div",{className:"space-y-3 flex-1 flex flex-col justify-center",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Sou Empresa"}),c.jsx("p",{className:"text-base text-muted-foreground leading-relaxed min-h-[4.5rem]",children:"Publique vagas, encontre profissionais qualificados e gerencie seus processos seletivos."})]}),c.jsx(ze,{className:"w-full mt-auto",size:"lg",variant:"secondary",children:"Criar Conta Empresarial"})]})})]})}),c.jsx("section",{className:"py-12 sm:py-16",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[c.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-8 sm:mb-12","data-aos":"fade-up","data-aos-duration":"1000",children:"Por que usar nossa plataforma?"}),c.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[c.jsxs(ot,{className:"p-5 sm:p-6","data-aos":"fade-up","data-aos-delay":"200","data-aos-duration":"1000",children:[c.jsx(om,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-3 sm:mb-4","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Certificaes Verificadas"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Sistema de controle de validade de NRs e certificaes tcnicas. Receba alertas antes do vencimento."})]}),c.jsxs(ot,{className:"p-5 sm:p-6","data-aos":"fade-up","data-aos-delay":"350","data-aos-duration":"1000",children:[c.jsx(Lo,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-3 sm:mb-4","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Match Inteligente"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Algoritmo que conecta candidatos e vagas com base em certificaes, habilidades e localizao."})]}),c.jsxs(ot,{className:"p-5 sm:p-6","data-aos":"fade-up","data-aos-delay":"500","data-aos-duration":"1000",children:[c.jsx(so,{className:"h-8 w-8 sm:h-10 sm:w-10 text-primary mb-3 sm:mb-4","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Incluso e Acessibilidade"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Vagas exclusivas PCD e plataforma totalmente acessvel seguindo padres WCAG 2.1 AA."})]})]})]})})]}),c.jsx("footer",{className:"border-t bg-card py-6 sm:py-8",children:c.jsxs("div",{className:"container mx-auto px-4 sm:px-6 text-center text-muted-foreground",children:[c.jsx("p",{className:"text-sm sm:text-base",children:" 2024 Porto do Pecm - Plataforma de Empregabilidade"}),c.jsxs("div",{className:"mt-3 sm:mt-4 flex flex-wrap justify-center gap-4 sm:gap-6",children:[c.jsx("a",{href:"/sobre",className:"text-sm sm:text-base hover:text-primary transition-colors focus-ring",children:"Sobre"}),c.jsx("a",{href:"#",className:"text-sm sm:text-base hover:text-primary transition-colors focus-ring",children:"Privacidade"}),c.jsx("a",{href:"#",className:"text-sm sm:text-base hover:text-primary transition-colors focus-ring",children:"Termos de Uso"})]})]})})]})},dn=k.forwardRef(({className:e,type:t,...r},n)=>c.jsx("input",{type:t,className:zt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));dn.displayName="Input";var kq="Label",HD=k.forwardRef((e,t)=>c.jsx(At.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));HD.displayName=kq;var qD=HD;const jq=Sm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),kr=k.forwardRef(({className:e,...t},r)=>c.jsx(qD,{ref:r,className:zt(jq(),e),...t}));kr.displayName=qD.displayName;const Aq=[{email:"joao.santos@email.com",password:"senha123",role:"candidate",id:"c001",name:"Joo da Silva Santos"},{email:"maria.costa@email.com",password:"senha123",role:"candidate",id:"c002",name:"Maria Oliveira Costa"},{email:"empresa@logistica.com",password:"senha123",role:"company",id:"comp001",name:"Logstica Porto S.A."}],Iq=(e,t)=>{const r=Aq.find(n=>n.email===e&&n.password===t);if(r){const{password:n,...s}=r;return s}return null},Nq=(e,t,r,n)=>({id:`${n}_${Date.now()}`,email:e,name:r,role:n}),ls=()=>{const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null},KD=e=>{e?localStorage.setItem("currentUser",JSON.stringify(e)):localStorage.removeItem("currentUser")},$q=()=>{const e=sn(),[t,r]=k.useState(""),[n,s]=k.useState(""),[a,o]=k.useState(!1),i=async l=>{if(l.preventDefault(),!t||!n){qr.error("Por favor, preencha todos os campos");return}o(!0),setTimeout(()=>{const d=Iq(t,n);d?(KD(d),qr.success("Login realizado com sucesso!"),d.role==="candidate"?e("/candidato/dashboard"):e("/empresa/dashboard")):qr.error("E-mail ou senha incorretos"),o(!1)},500)};return c.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center p-3 sm:p-4",children:c.jsxs(ot,{className:"w-full max-w-md p-4 sm:p-6 md:p-8",children:[c.jsxs("div",{className:"flex flex-col items-center mb-6 sm:mb-8",children:[c.jsx("img",{src:fd,alt:"Pecm - Complexo Industrial e Porturio",className:"h-14 sm:h-16 md:h-20 w-auto mb-4 sm:mb-6 object-contain"}),c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center",children:"Entrar na Plataforma"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground text-center mt-2",children:"Acesse sua conta para continuar"})]}),c.jsxs("form",{onSubmit:i,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"email",children:"E-mail"}),c.jsx(dn,{id:"email",type:"email",placeholder:"seu@email.com",value:t,onChange:l=>r(l.target.value),required:!0,autoComplete:"email","aria-required":"true"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"password",children:"Senha"}),c.jsx(dn,{id:"password",type:"password",placeholder:"",value:n,onChange:l=>s(l.target.value),required:!0,autoComplete:"current-password","aria-required":"true"})]}),c.jsx(ze,{type:"submit",className:"w-full",size:"lg",disabled:a,"aria-busy":a,children:a?"Entrando...":"Entrar"})]}),c.jsxs("div",{className:"mt-6 text-center space-y-4",children:[c.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ainda no tem conta?"," ",c.jsx(GD,{to:"/cadastro",className:"text-primary hover:underline focus-ring",children:"Cadastre-se aqui"})]}),c.jsxs(ze,{variant:"ghost",onClick:()=>e("/"),className:"w-full",children:[c.jsx(bd,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Voltar para home"]})]}),c.jsxs("div",{className:"mt-6 sm:mt-8 p-3 sm:p-4 bg-muted rounded-lg",children:[c.jsx("p",{className:"text-xs font-semibold mb-2",children:"Contas de demonstrao:"}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Candidato:"})," joao.santos@email.com / senha123"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Empresa:"})," empresa@logistica.com / senha123"]})]})]})]})})};function nb(e){const t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var hg="Checkbox",[Dq,xZ]=Ns(hg),[Oq,sb]=Dq(hg);function Fq(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:s,disabled:a,form:o,name:i,onCheckedChange:l,required:d,value:p="on",internal_do_not_use_render:u}=e,[m,f]=Fo({prop:r,defaultProp:s??!1,onChange:l,caller:hg}),[h,_]=k.useState(null),[v,g]=k.useState(null),x=k.useRef(!1),y=h?!!o||!!h.closest("form"):!0,w={checked:m,disabled:a,setChecked:f,control:h,setControl:_,name:i,form:o,value:p,hasConsumerStoppedPropagationRef:x,required:d,defaultChecked:Si(s)?!1:s,isFormControl:y,bubbleInput:v,setBubbleInput:g};return c.jsx(Oq,{scope:t,...w,children:Lq(u)?u(w):n})}var QD="CheckboxTrigger",XD=k.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},s)=>{const{control:a,value:o,disabled:i,checked:l,required:d,setControl:p,setChecked:u,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:h}=sb(QD,e),_=tr(s,p),v=k.useRef(l);return k.useEffect(()=>{const g=a==null?void 0:a.form;if(g){const x=()=>u(v.current);return g.addEventListener("reset",x),()=>g.removeEventListener("reset",x)}},[a,u]),c.jsx(At.button,{type:"button",role:"checkbox","aria-checked":Si(l)?"mixed":l,"aria-required":d,"data-state":tO(l),"data-disabled":i?"":void 0,disabled:i,value:o,...n,ref:_,onKeyDown:Et(t,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:Et(r,g=>{u(x=>Si(x)?!0:!x),h&&f&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})})});XD.displayName=QD;var ab=k.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:i,value:l,onCheckedChange:d,form:p,...u}=e;return c.jsx(Fq,{__scopeCheckbox:r,checked:s,defaultChecked:a,disabled:i,required:o,onCheckedChange:d,name:n,form:p,value:l,internal_do_not_use_render:({isFormControl:m})=>c.jsxs(c.Fragment,{children:[c.jsx(XD,{...u,ref:t,__scopeCheckbox:r}),m&&c.jsx(eO,{__scopeCheckbox:r})]})})});ab.displayName=hg;var YD="CheckboxIndicator",ZD=k.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,a=sb(YD,r);return c.jsx($s,{present:n||Si(a.checked)||a.checked===!0,children:c.jsx(At.span,{"data-state":tO(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});ZD.displayName=YD;var JD="CheckboxBubbleInput",eO=k.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:o,required:i,disabled:l,name:d,value:p,form:u,bubbleInput:m,setBubbleInput:f}=sb(JD,e),h=tr(r,f),_=nb(a),v=Yw(n);k.useEffect(()=>{const x=m;if(!x)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set,C=!s.current;if(_!==a&&b){const E=new Event("click",{bubbles:C});x.indeterminate=Si(a),b.call(x,Si(a)?!1:a),x.dispatchEvent(E)}},[m,_,a,s]);const g=k.useRef(Si(a)?!1:a);return c.jsx(At.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??g.current,required:i,disabled:l,name:d,value:p,form:u,...t,tabIndex:-1,ref:h,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});eO.displayName=JD;function Lq(e){return typeof e=="function"}function Si(e){return e==="indeterminate"}function tO(e){return Si(e)?"indeterminate":e?"checked":"unchecked"}const gg=k.forwardRef(({className:e,...t},r)=>c.jsx(ab,{ref:r,className:zt("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:c.jsx(ZD,{className:zt("flex items-center justify-center text-current"),children:c.jsx(A3,{className:"h-4 w-4"})})}));gg.displayName=ab.displayName;var Rq=k.createContext(void 0);function Am(e){const t=k.useContext(Rq);return e||t||"ltr"}var qx="rovingFocusGroup.onEntryFocus",zq={bubbles:!1,cancelable:!0},Im="RovingFocusGroup",[my,rO,Bq]=Ow(Im),[Vq,_g]=Ns(Im,[Bq]),[Wq,Uq]=Vq(Im),nO=k.forwardRef((e,t)=>c.jsx(my.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(my.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(Gq,{...e,ref:t})})}));nO.displayName=Im;var Gq=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:p=!1,...u}=e,m=k.useRef(null),f=tr(t,m),h=Am(a),[_,v]=Fo({prop:o,defaultProp:i??null,onChange:l,caller:Im}),[g,x]=k.useState(!1),y=Tn(d),w=rO(r),b=k.useRef(!1),[C,E]=k.useState(0);return k.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(qx,y),()=>P.removeEventListener(qx,y)},[y]),c.jsx(Wq,{scope:r,orientation:n,dir:h,loop:s,currentTabStopId:_,onItemFocus:k.useCallback(P=>v(P),[v]),onItemShiftTab:k.useCallback(()=>x(!0),[]),onFocusableItemAdd:k.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:k.useCallback(()=>E(P=>P-1),[]),children:c.jsx(At.div,{tabIndex:g||C===0?-1:0,"data-orientation":n,...u,ref:f,style:{outline:"none",...e.style},onMouseDown:Et(e.onMouseDown,()=>{b.current=!0}),onFocus:Et(e.onFocus,P=>{const I=!b.current;if(P.target===P.currentTarget&&I&&!g){const $=new CustomEvent(qx,zq);if(P.currentTarget.dispatchEvent($),!$.defaultPrevented){const z=w().filter(X=>X.focusable),D=z.find(X=>X.active),B=z.find(X=>X.id===_),q=[D,B,...z].filter(Boolean).map(X=>X.ref.current);oO(q,p)}}b.current=!1}),onBlur:Et(e.onBlur,()=>x(!1))})})}),sO="RovingFocusGroupItem",aO=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,children:o,...i}=e,l=Io(),d=a||l,p=Uq(sO,r),u=p.currentTabStopId===d,m=rO(r),{onFocusableItemAdd:f,onFocusableItemRemove:h,currentTabStopId:_}=p;return k.useEffect(()=>{if(n)return f(),()=>h()},[n,f,h]),c.jsx(my.ItemSlot,{scope:r,id:d,focusable:n,active:s,children:c.jsx(At.span,{tabIndex:u?0:-1,"data-orientation":p.orientation,...i,ref:t,onMouseDown:Et(e.onMouseDown,v=>{n?p.onItemFocus(d):v.preventDefault()}),onFocus:Et(e.onFocus,()=>p.onItemFocus(d)),onKeyDown:Et(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){p.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=Kq(v,p.orientation,p.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=m().filter(w=>w.focusable).map(w=>w.ref.current);if(g==="last")y.reverse();else if(g==="prev"||g==="next"){g==="prev"&&y.reverse();const w=y.indexOf(v.currentTarget);y=p.loop?Qq(y,w+1):y.slice(w+1)}setTimeout(()=>oO(y))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:_!=null}):o})})});aO.displayName=sO;var Hq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qq(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Kq(e,t,r){const n=qq(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Hq[n]}function oO(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function Qq(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var iO=nO,lO=aO,ob="Radio",[Xq,cO]=Ns(ob),[Yq,Zq]=Xq(ob),dO=k.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:s=!1,required:a,disabled:o,value:i="on",onCheck:l,form:d,...p}=e,[u,m]=k.useState(null),f=tr(t,v=>m(v)),h=k.useRef(!1),_=u?d||!!u.closest("form"):!0;return c.jsxs(Yq,{scope:r,checked:s,disabled:o,children:[c.jsx(At.button,{type:"button",role:"radio","aria-checked":s,"data-state":fO(s),"data-disabled":o?"":void 0,disabled:o,value:i,...p,ref:f,onClick:Et(e.onClick,v=>{s||l==null||l(),_&&(h.current=v.isPropagationStopped(),h.current||v.stopPropagation())})}),_&&c.jsx(pO,{control:u,bubbles:!h.current,name:n,value:i,checked:s,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});dO.displayName=ob;var uO="RadioIndicator",mO=k.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...s}=e,a=Zq(uO,r);return c.jsx($s,{present:n||a.checked,children:c.jsx(At.span,{"data-state":fO(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});mO.displayName=uO;var Jq="RadioBubbleInput",pO=k.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...s},a)=>{const o=k.useRef(null),i=tr(o,a),l=nb(r),d=Yw(t);return k.useEffect(()=>{const p=o.current;if(!p)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(l!==r&&f){const h=new Event("click",{bubbles:n});f.call(p,r),p.dispatchEvent(h)}},[l,r,n]),c.jsx(At.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pO.displayName=Jq;function fO(e){return e?"checked":"unchecked"}var eK=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xg="RadioGroup",[tK,vZ]=Ns(xg,[_g,cO]),hO=_g(),gO=cO(),[rK,nK]=tK(xg),_O=k.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:s,value:a,required:o=!1,disabled:i=!1,orientation:l,dir:d,loop:p=!0,onValueChange:u,...m}=e,f=hO(r),h=Am(d),[_,v]=Fo({prop:a,defaultProp:s??null,onChange:u,caller:xg});return c.jsx(rK,{scope:r,name:n,required:o,disabled:i,value:_,onValueChange:v,children:c.jsx(iO,{asChild:!0,...f,orientation:l,dir:h,loop:p,children:c.jsx(At.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":i?"":void 0,dir:h,...m,ref:t})})})});_O.displayName=xg;var xO="RadioGroupItem",vO=k.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...s}=e,a=nK(xO,r),o=a.disabled||n,i=hO(r),l=gO(r),d=k.useRef(null),p=tr(t,d),u=a.value===s.value,m=k.useRef(!1);return k.useEffect(()=>{const f=_=>{eK.includes(_.key)&&(m.current=!0)},h=()=>m.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",h)}},[]),c.jsx(lO,{asChild:!0,...i,focusable:!o,active:u,children:c.jsx(dO,{disabled:o,required:a.required,checked:u,...l,...s,name:a.name,ref:p,onCheck:()=>a.onValueChange(s.value),onKeyDown:Et(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:Et(s.onFocus,()=>{var f;m.current&&((f=d.current)==null||f.click())})})})});vO.displayName=xO;var sK="RadioGroupIndicator",yO=k.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,s=gO(r);return c.jsx(mO,{...s,...n,ref:t})});yO.displayName=sK;var wO=_O,bO=vO,aK=yO;const py=k.forwardRef(({className:e,...t},r)=>c.jsx(wO,{className:zt("grid gap-2",e),...t,ref:r}));py.displayName=wO.displayName;const Nf=k.forwardRef(({className:e,...t},r)=>c.jsx(bO,{ref:r,className:zt("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:c.jsx(aK,{className:"flex items-center justify-center",children:c.jsx(yU,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Nf.displayName=bO.displayName;function fy(e,[t,r]){return Math.min(r,Math.max(t,e))}var Kx=0;function MO(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??IS()),document.body.insertAdjacentElement("beforeend",e[1]??IS()),Kx++,()=>{Kx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Kx--}},[])}function IS(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Qx="focusScope.autoFocusOnMount",Xx="focusScope.autoFocusOnUnmount",NS={bubbles:!1,cancelable:!0},oK="FocusScope",ib=k.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[i,l]=k.useState(null),d=Tn(s),p=Tn(a),u=k.useRef(null),m=tr(t,_=>l(_)),f=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(n){let _=function(y){if(f.paused||!i)return;const w=y.target;i.contains(w)?u.current=w:ai(u.current,{select:!0})},v=function(y){if(f.paused||!i)return;const w=y.relatedTarget;w!==null&&(i.contains(w)||ai(u.current,{select:!0}))},g=function(y){if(document.activeElement===document.body)for(const b of y)b.removedNodes.length>0&&ai(i)};document.addEventListener("focusin",_),document.addEventListener("focusout",v);const x=new MutationObserver(g);return i&&x.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",v),x.disconnect()}}},[n,i,f.paused]),k.useEffect(()=>{if(i){DS.add(f);const _=document.activeElement;if(!i.contains(_)){const g=new CustomEvent(Qx,NS);i.addEventListener(Qx,d),i.dispatchEvent(g),g.defaultPrevented||(iK(mK(TO(i)),{select:!0}),document.activeElement===_&&ai(i))}return()=>{i.removeEventListener(Qx,d),setTimeout(()=>{const g=new CustomEvent(Xx,NS);i.addEventListener(Xx,p),i.dispatchEvent(g),g.defaultPrevented||ai(_??document.body,{select:!0}),i.removeEventListener(Xx,p),DS.remove(f)},0)}}},[i,d,p,f]);const h=k.useCallback(_=>{if(!r&&!n||f.paused)return;const v=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,g=document.activeElement;if(v&&g){const x=_.currentTarget,[y,w]=lK(x);y&&w?!_.shiftKey&&g===w?(_.preventDefault(),r&&ai(y,{select:!0})):_.shiftKey&&g===y&&(_.preventDefault(),r&&ai(w,{select:!0})):g===x&&_.preventDefault()}},[r,n,f.paused]);return c.jsx(At.div,{tabIndex:-1,...o,ref:m,onKeyDown:h})});ib.displayName=oK;function iK(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ai(n,{select:t}),document.activeElement!==r)return}function lK(e){const t=TO(e),r=$S(t,e),n=$S(t.reverse(),e);return[r,n]}function TO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function $S(e,t){for(const r of e)if(!cK(r,{upTo:t}))return r}function cK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dK(e){return e instanceof HTMLInputElement&&"select"in e}function ai(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&dK(e)&&t&&e.select()}}var DS=uK();function uK(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=OS(e,t),e.unshift(t)},remove(t){var r;e=OS(e,t),(r=e[0])==null||r.resume()}}}function OS(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function mK(e){return e.filter(t=>t.tagName!=="A")}var pK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fc=new WeakMap,Zp=new WeakMap,Jp={},Yx=0,EO=function(e){return e&&(e.host||EO(e.parentNode))},fK=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=EO(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},hK=function(e,t,r,n){var s=fK(t,Array.isArray(e)?e:[e]);Jp[r]||(Jp[r]=new WeakMap);var a=Jp[r],o=[],i=new Set,l=new Set(s),d=function(u){!u||i.has(u)||(i.add(u),d(u.parentNode))};s.forEach(d);var p=function(u){!u||l.has(u)||Array.prototype.forEach.call(u.children,function(m){if(i.has(m))p(m);else try{var f=m.getAttribute(n),h=f!==null&&f!=="false",_=(fc.get(m)||0)+1,v=(a.get(m)||0)+1;fc.set(m,_),a.set(m,v),o.push(m),_===1&&h&&Zp.set(m,!0),v===1&&m.setAttribute(r,"true"),h||m.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return p(t),i.clear(),Yx++,function(){o.forEach(function(u){var m=fc.get(u)-1,f=a.get(u)-1;fc.set(u,m),a.set(u,f),m||(Zp.has(u)||u.removeAttribute(n),Zp.delete(u)),f||u.removeAttribute(r)}),Yx--,Yx||(fc=new WeakMap,fc=new WeakMap,Zp=new WeakMap,Jp={})}},CO=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=pK(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),hK(n,s,r,"aria-hidden")):function(){return null}},Xa=function(){return Xa=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Xa.apply(this,arguments)};function PO(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function gK(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var $f="right-scroll-bar-position",Df="width-before-scroll-bar",_K="with-scroll-bars-hidden",xK="--removed-body-scroll-bar-size";function Zx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vK(e,t){var r=k.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var yK=typeof window<"u"?k.useLayoutEffect:k.useEffect,FS=new WeakMap;function wK(e,t){var r=vK(null,function(n){return e.forEach(function(s){return Zx(s,n)})});return yK(function(){var n=FS.get(r);if(n){var s=new Set(n),a=new Set(e),o=r.current;s.forEach(function(i){a.has(i)||Zx(i,null)}),a.forEach(function(i){s.has(i)||Zx(i,o)})}FS.set(r,e)},[e]),r}function bK(e){return e}function MK(e,t){t===void 0&&(t=bK);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(i){return i!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(i){return a(i)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var i=r;r=[],i.forEach(a),o=r}var l=function(){var p=o;o=[],p.forEach(a)},d=function(){return Promise.resolve().then(l)};d(),r={push:function(p){o.push(p),d()},filter:function(p){return o=o.filter(p),r}}}};return s}function TK(e){e===void 0&&(e={});var t=MK(null);return t.options=Xa({async:!0,ssr:!1},e),t}var SO=function(e){var t=e.sideCar,r=PO(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return k.createElement(n,Xa({},r))};SO.isSideCarExport=!0;function EK(e,t){return e.useMedium(t),SO}var kO=TK(),Jx=function(){},vg=k.forwardRef(function(e,t){var r=k.useRef(null),n=k.useState({onScrollCapture:Jx,onWheelCapture:Jx,onTouchMoveCapture:Jx}),s=n[0],a=n[1],o=e.forwardProps,i=e.children,l=e.className,d=e.removeScrollBar,p=e.enabled,u=e.shards,m=e.sideCar,f=e.noRelative,h=e.noIsolation,_=e.inert,v=e.allowPinchZoom,g=e.as,x=g===void 0?"div":g,y=e.gapMode,w=PO(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=m,C=wK([r,t]),E=Xa(Xa({},w),s);return k.createElement(k.Fragment,null,p&&k.createElement(b,{sideCar:kO,removeScrollBar:d,shards:u,noRelative:f,noIsolation:h,inert:_,setCallbacks:a,allowPinchZoom:!!v,lockRef:r,gapMode:y}),o?k.cloneElement(k.Children.only(i),Xa(Xa({},E),{ref:C})):k.createElement(x,Xa({},E,{className:l,ref:C}),i))});vg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vg.classNames={fullWidth:Df,zeroRight:$f};var CK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PK(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=CK();return t&&e.setAttribute("nonce",t),e}function SK(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kK(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var jK=function(){var e=0,t=null;return{add:function(r){e==0&&(t=PK())&&(SK(t,r),kK(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},AK=function(){var e=jK();return function(t,r){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},jO=function(){var e=AK(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},IK={left:0,top:0,right:0,gap:0},ev=function(e){return parseInt(e||"",10)||0},NK=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ev(r),ev(n),ev(s)]},$K=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return IK;var t=NK(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},DK=jO(),Uc="data-scroll-locked",OK=function(e,t,r,n){var s=e.left,a=e.top,o=e.right,i=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(_K,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(i,"px ").concat(n,`;
  }
  body[`).concat(Uc,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($f,` {
    right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat(Df,` {
    margin-right: `).concat(i,"px ").concat(n,`;
  }
  
  .`).concat($f," .").concat($f,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Df," .").concat(Df,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Uc,`] {
    `).concat(xK,": ").concat(i,`px;
  }
`)},LS=function(){var e=parseInt(document.body.getAttribute(Uc)||"0",10);return isFinite(e)?e:0},FK=function(){k.useEffect(function(){return document.body.setAttribute(Uc,(LS()+1).toString()),function(){var e=LS()-1;e<=0?document.body.removeAttribute(Uc):document.body.setAttribute(Uc,e.toString())}},[])},LK=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;FK();var a=k.useMemo(function(){return $K(s)},[s]);return k.createElement(DK,{styles:OK(a,!t,s,r?"":"!important")})},hy=!1;if(typeof window<"u")try{var ef=Object.defineProperty({},"passive",{get:function(){return hy=!0,!0}});window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{hy=!1}var hc=hy?{passive:!1}:!1,RK=function(e){return e.tagName==="TEXTAREA"},AO=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!RK(e)&&r[t]==="visible")},zK=function(e){return AO(e,"overflowY")},BK=function(e){return AO(e,"overflowX")},RS=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=IO(e,n);if(s){var a=NO(e,n),o=a[1],i=a[2];if(o>i)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},VK=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},WK=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},IO=function(e,t){return e==="v"?zK(t):BK(t)},NO=function(e,t){return e==="v"?VK(t):WK(t)},UK=function(e,t){return e==="h"&&t==="rtl"?-1:1},GK=function(e,t,r,n,s){var a=UK(e,window.getComputedStyle(t).direction),o=a*n,i=r.target,l=t.contains(i),d=!1,p=o>0,u=0,m=0;do{if(!i)break;var f=NO(e,i),h=f[0],_=f[1],v=f[2],g=_-v-a*h;(h||g)&&IO(e,i)&&(u+=g,m+=h);var x=i.parentNode;i=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(p&&(Math.abs(u)<1||!s)||!p&&(Math.abs(m)<1||!s))&&(d=!0),d},tf=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},zS=function(e){return[e.deltaX,e.deltaY]},BS=function(e){return e&&"current"in e?e.current:e},HK=function(e,t){return e[0]===t[0]&&e[1]===t[1]},qK=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},KK=0,gc=[];function QK(e){var t=k.useRef([]),r=k.useRef([0,0]),n=k.useRef(),s=k.useState(KK++)[0],a=k.useState(jO)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var _=gK([e.lockRef.current],(e.shards||[]).map(BS),!0).filter(Boolean);return _.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=k.useCallback(function(_,v){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var g=tf(_),x=r.current,y="deltaX"in _?_.deltaX:x[0]-g[0],w="deltaY"in _?_.deltaY:x[1]-g[1],b,C=_.target,E=Math.abs(y)>Math.abs(w)?"h":"v";if("touches"in _&&E==="h"&&C.type==="range")return!1;var P=RS(E,C);if(!P)return!0;if(P?b=E:(b=E==="v"?"h":"v",P=RS(E,C)),!P)return!1;if(!n.current&&"changedTouches"in _&&(y||w)&&(n.current=b),!b)return!0;var I=n.current||b;return GK(I,v,_,I==="h"?y:w,!0)},[]),l=k.useCallback(function(_){var v=_;if(!(!gc.length||gc[gc.length-1]!==a)){var g="deltaY"in v?zS(v):tf(v),x=t.current.filter(function(b){return b.name===v.type&&(b.target===v.target||v.target===b.shadowParent)&&HK(b.delta,g)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var y=(o.current.shards||[]).map(BS).filter(Boolean).filter(function(b){return b.contains(v.target)}),w=y.length>0?i(v,y[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),d=k.useCallback(function(_,v,g,x){var y={name:_,delta:v,target:g,should:x,shadowParent:XK(g)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(w){return w!==y})},1)},[]),p=k.useCallback(function(_){r.current=tf(_),n.current=void 0},[]),u=k.useCallback(function(_){d(_.type,zS(_),_.target,i(_,e.lockRef.current))},[]),m=k.useCallback(function(_){d(_.type,tf(_),_.target,i(_,e.lockRef.current))},[]);k.useEffect(function(){return gc.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,hc),document.addEventListener("touchmove",l,hc),document.addEventListener("touchstart",p,hc),function(){gc=gc.filter(function(_){return _!==a}),document.removeEventListener("wheel",l,hc),document.removeEventListener("touchmove",l,hc),document.removeEventListener("touchstart",p,hc)}},[]);var f=e.removeScrollBar,h=e.inert;return k.createElement(k.Fragment,null,h?k.createElement(a,{styles:qK(s)}):null,f?k.createElement(LK,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function XK(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const YK=EK(kO,QK);var lb=k.forwardRef(function(e,t){return k.createElement(vg,Xa({},e,{ref:t,sideCar:YK}))});lb.classNames=vg.classNames;var ZK=[" ","Enter","ArrowUp","ArrowDown"],JK=[" ","Enter"],Ll="Select",[yg,wg,e9]=Ow(Ll),[Pd,yZ]=Ns(Ll,[e9,ag]),bg=ag(),[t9,Wi]=Pd(Ll),[r9,n9]=Pd(Ll),$O=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:i,onValueChange:l,dir:d,name:p,autoComplete:u,disabled:m,required:f,form:h}=e,_=bg(t),[v,g]=k.useState(null),[x,y]=k.useState(null),[w,b]=k.useState(!1),C=Am(d),[E,P]=Fo({prop:n,defaultProp:s??!1,onChange:a,caller:Ll}),[I,$]=Fo({prop:o,defaultProp:i,onChange:l,caller:Ll}),z=k.useRef(null),D=v?h||!!v.closest("form"):!0,[B,U]=k.useState(new Set),q=Array.from(B).map(X=>X.props.value).join(";");return c.jsx(fD,{..._,children:c.jsxs(t9,{required:f,scope:t,trigger:v,onTriggerChange:g,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:w,onValueNodeHasChildrenChange:b,contentId:Io(),value:I,onValueChange:$,open:E,onOpenChange:P,dir:C,triggerPointerDownPosRef:z,disabled:m,children:[c.jsx(yg.Provider,{scope:t,children:c.jsx(r9,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(X=>{U(Z=>new Set(Z).add(X))},[]),onNativeOptionRemove:k.useCallback(X=>{U(Z=>{const K=new Set(Z);return K.delete(X),K})},[]),children:r})}),D?c.jsxs(sF,{"aria-hidden":!0,required:f,tabIndex:-1,name:p,autoComplete:u,value:I,onChange:X=>$(X.target.value),disabled:m,form:h,children:[I===void 0?c.jsx("option",{value:""}):null,Array.from(B)]},q):null]})})};$O.displayName=Ll;var DO="SelectTrigger",OO=k.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=bg(r),o=Wi(DO,r),i=o.disabled||n,l=tr(t,o.onTriggerChange),d=wg(r),p=k.useRef("touch"),[u,m,f]=oF(_=>{const v=d().filter(y=>!y.disabled),g=v.find(y=>y.value===o.value),x=iF(v,_,g);x!==void 0&&o.onValueChange(x.value)}),h=_=>{i||(o.onOpenChange(!0),f()),_&&(o.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return c.jsx(hD,{asChild:!0,...a,children:c.jsx(At.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":aF(o.value)?"":void 0,...s,ref:l,onClick:Et(s.onClick,_=>{_.currentTarget.focus(),p.current!=="mouse"&&h(_)}),onPointerDown:Et(s.onPointerDown,_=>{p.current=_.pointerType;const v=_.target;v.hasPointerCapture(_.pointerId)&&v.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(h(_),_.preventDefault())}),onKeyDown:Et(s.onKeyDown,_=>{const v=u.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&m(_.key),!(v&&_.key===" ")&&ZK.includes(_.key)&&(h(),_.preventDefault())})})})});OO.displayName=DO;var FO="SelectValue",LO=k.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...i}=e,l=Wi(FO,r),{onValueNodeHasChildrenChange:d}=l,p=a!==void 0,u=tr(t,l.onValueNodeChange);return $n(()=>{d(p)},[d,p]),c.jsx(At.span,{...i,ref:u,style:{pointerEvents:"none"},children:aF(l.value)?c.jsx(c.Fragment,{children:o}):a})});LO.displayName=FO;var s9="SelectIcon",RO=k.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return c.jsx(At.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});RO.displayName=s9;var a9="SelectPortal",zO=e=>c.jsx(Jh,{asChild:!0,...e});zO.displayName=a9;var Rl="SelectContent",BO=k.forwardRef((e,t)=>{const r=Wi(Rl,e.__scopeSelect),[n,s]=k.useState();if($n(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?ql.createPortal(c.jsx(VO,{scope:e.__scopeSelect,children:c.jsx(yg.Slot,{scope:e.__scopeSelect,children:c.jsx("div",{children:e.children})})}),a):null}return c.jsx(WO,{...e,ref:t})});BO.displayName=Rl;var xa=10,[VO,Ui]=Pd(Rl),o9="SelectContentImpl",i9=ld("SelectContent.RemoveScroll"),WO=k.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:i,sideOffset:l,align:d,alignOffset:p,arrowPadding:u,collisionBoundary:m,collisionPadding:f,sticky:h,hideWhenDetached:_,avoidCollisions:v,...g}=e,x=Wi(Rl,r),[y,w]=k.useState(null),[b,C]=k.useState(null),E=tr(t,me=>w(me)),[P,I]=k.useState(null),[$,z]=k.useState(null),D=wg(r),[B,U]=k.useState(!1),q=k.useRef(!1);k.useEffect(()=>{if(y)return CO(y)},[y]),MO();const X=k.useCallback(me=>{const[we,...Ne]=D().map(F=>F.ref.current),[Me]=Ne.slice(-1),te=document.activeElement;for(const F of me)if(F===te||(F==null||F.scrollIntoView({block:"nearest"}),F===we&&b&&(b.scrollTop=0),F===Me&&b&&(b.scrollTop=b.scrollHeight),F==null||F.focus(),document.activeElement!==te))return},[D,b]),Z=k.useCallback(()=>X([P,y]),[X,P,y]);k.useEffect(()=>{B&&Z()},[B,Z]);const{onOpenChange:K,triggerPointerDownPosRef:ee}=x;k.useEffect(()=>{if(y){let me={x:0,y:0};const we=Me=>{var te,F;me={x:Math.abs(Math.round(Me.pageX)-(((te=ee.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(Me.pageY)-(((F=ee.current)==null?void 0:F.y)??0))}},Ne=Me=>{me.x<=10&&me.y<=10?Me.preventDefault():y.contains(Me.target)||K(!1),document.removeEventListener("pointermove",we),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[y,K,ee]),k.useEffect(()=>{const me=()=>K(!1);return window.addEventListener("blur",me),window.addEventListener("resize",me),()=>{window.removeEventListener("blur",me),window.removeEventListener("resize",me)}},[K]);const[oe,ae]=oF(me=>{const we=D().filter(te=>!te.disabled),Ne=we.find(te=>te.ref.current===document.activeElement),Me=iF(we,me,Ne);Me&&setTimeout(()=>Me.ref.current.focus())}),G=k.useCallback((me,we,Ne)=>{const Me=!q.current&&!Ne;(x.value!==void 0&&x.value===we||Me)&&(I(me),Me&&(q.current=!0))},[x.value]),R=k.useCallback(()=>y==null?void 0:y.focus(),[y]),Q=k.useCallback((me,we,Ne)=>{const Me=!q.current&&!Ne;(x.value!==void 0&&x.value===we||Me)&&z(me)},[x.value]),ce=n==="popper"?gy:UO,ne=ce===gy?{side:i,sideOffset:l,align:d,alignOffset:p,arrowPadding:u,collisionBoundary:m,collisionPadding:f,sticky:h,hideWhenDetached:_,avoidCollisions:v}:{};return c.jsx(VO,{scope:r,content:y,viewport:b,onViewportChange:C,itemRefCallback:G,selectedItem:P,onItemLeave:R,itemTextRefCallback:Q,focusSelectedItem:Z,selectedItemText:$,position:n,isPositioned:B,searchRef:oe,children:c.jsx(lb,{as:i9,allowPinchZoom:!0,children:c.jsx(ib,{asChild:!0,trapped:x.open,onMountAutoFocus:me=>{me.preventDefault()},onUnmountAutoFocus:Et(s,me=>{var we;(we=x.trigger)==null||we.focus({preventScroll:!0}),me.preventDefault()}),children:c.jsx(Cm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:me=>me.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:c.jsx(ce,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:me=>me.preventDefault(),...g,...ne,onPlaced:()=>U(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:Et(g.onKeyDown,me=>{const we=me.ctrlKey||me.altKey||me.metaKey;if(me.key==="Tab"&&me.preventDefault(),!we&&me.key.length===1&&ae(me.key),["ArrowUp","ArrowDown","Home","End"].includes(me.key)){let Me=D().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(me.key)&&(Me=Me.slice().reverse()),["ArrowUp","ArrowDown"].includes(me.key)){const te=me.target,F=Me.indexOf(te);Me=Me.slice(F+1)}setTimeout(()=>X(Me)),me.preventDefault()}})})})})})})});WO.displayName=o9;var l9="SelectItemAlignedPosition",UO=k.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=Wi(Rl,r),o=Ui(Rl,r),[i,l]=k.useState(null),[d,p]=k.useState(null),u=tr(t,E=>p(E)),m=wg(r),f=k.useRef(!1),h=k.useRef(!0),{viewport:_,selectedItem:v,selectedItemText:g,focusSelectedItem:x}=o,y=k.useCallback(()=>{if(a.trigger&&a.valueNode&&i&&d&&_&&v&&g){const E=a.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),$=g.getBoundingClientRect();if(a.dir!=="rtl"){const te=$.left-P.left,F=I.left-te,ue=E.left-F,xe=E.width+ue,be=Math.max(xe,P.width),Ee=window.innerWidth-xa,ye=fy(F,[xa,Math.max(xa,Ee-be)]);i.style.minWidth=xe+"px",i.style.left=ye+"px"}else{const te=P.right-$.right,F=window.innerWidth-I.right-te,ue=window.innerWidth-E.right-F,xe=E.width+ue,be=Math.max(xe,P.width),Ee=window.innerWidth-xa,ye=fy(F,[xa,Math.max(xa,Ee-be)]);i.style.minWidth=xe+"px",i.style.right=ye+"px"}const z=m(),D=window.innerHeight-xa*2,B=_.scrollHeight,U=window.getComputedStyle(d),q=parseInt(U.borderTopWidth,10),X=parseInt(U.paddingTop,10),Z=parseInt(U.borderBottomWidth,10),K=parseInt(U.paddingBottom,10),ee=q+X+B+K+Z,oe=Math.min(v.offsetHeight*5,ee),ae=window.getComputedStyle(_),G=parseInt(ae.paddingTop,10),R=parseInt(ae.paddingBottom,10),Q=E.top+E.height/2-xa,ce=D-Q,ne=v.offsetHeight/2,me=v.offsetTop+ne,we=q+X+me,Ne=ee-we;if(we<=Q){const te=z.length>0&&v===z[z.length-1].ref.current;i.style.bottom="0px";const F=d.clientHeight-_.offsetTop-_.offsetHeight,ue=Math.max(ce,ne+(te?R:0)+F+Z),xe=we+ue;i.style.height=xe+"px"}else{const te=z.length>0&&v===z[0].ref.current;i.style.top="0px";const ue=Math.max(Q,q+_.offsetTop+(te?G:0)+ne)+Ne;i.style.height=ue+"px",_.scrollTop=we-Q+_.offsetTop}i.style.margin=`${xa}px 0`,i.style.minHeight=oe+"px",i.style.maxHeight=D+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[m,a.trigger,a.valueNode,i,d,_,v,g,a.dir,n]);$n(()=>y(),[y]);const[w,b]=k.useState();$n(()=>{d&&b(window.getComputedStyle(d).zIndex)},[d]);const C=k.useCallback(E=>{E&&h.current===!0&&(y(),x==null||x(),h.current=!1)},[y,x]);return c.jsx(d9,{scope:r,contentWrapper:i,shouldExpandOnScrollRef:f,onScrollButtonChange:C,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:c.jsx(At.div,{...s,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});UO.displayName=l9;var c9="SelectPopperPosition",gy=k.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=xa,...a}=e,o=bg(r);return c.jsx(gD,{...o,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});gy.displayName=c9;var[d9,cb]=Pd(Rl,{}),_y="SelectViewport",GO=k.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=Ui(_y,r),o=cb(_y,r),i=tr(t,a.onViewportChange),l=k.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),c.jsx(yg.Slot,{scope:r,children:c.jsx(At.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Et(s.onScroll,d=>{const p=d.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&u){const f=Math.abs(l.current-p.scrollTop);if(f>0){const h=window.innerHeight-xa*2,_=parseFloat(u.style.minHeight),v=parseFloat(u.style.height),g=Math.max(_,v);if(g<h){const x=g+f,y=Math.min(h,x),w=x-y;u.style.height=y+"px",u.style.bottom==="0px"&&(p.scrollTop=w>0?w:0,u.style.justifyContent="flex-end")}}}l.current=p.scrollTop})})})]})});GO.displayName=_y;var HO="SelectGroup",[u9,m9]=Pd(HO),p9=k.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Io();return c.jsx(u9,{scope:r,id:s,children:c.jsx(At.div,{role:"group","aria-labelledby":s,...n,ref:t})})});p9.displayName=HO;var qO="SelectLabel",KO=k.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=m9(qO,r);return c.jsx(At.div,{id:s.id,...n,ref:t})});KO.displayName=qO;var Mh="SelectItem",[f9,QO]=Pd(Mh),XO=k.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=e,i=Wi(Mh,r),l=Ui(Mh,r),d=i.value===n,[p,u]=k.useState(a??""),[m,f]=k.useState(!1),h=tr(t,x=>{var y;return(y=l.itemRefCallback)==null?void 0:y.call(l,x,n,s)}),_=Io(),v=k.useRef("touch"),g=()=>{s||(i.onValueChange(n),i.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(f9,{scope:r,value:n,disabled:s,textId:_,isSelected:d,onItemTextChange:k.useCallback(x=>{u(y=>y||((x==null?void 0:x.textContent)??"").trim())},[]),children:c.jsx(yg.ItemSlot,{scope:r,value:n,disabled:s,textValue:p,children:c.jsx(At.div,{role:"option","aria-labelledby":_,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:h,onFocus:Et(o.onFocus,()=>f(!0)),onBlur:Et(o.onBlur,()=>f(!1)),onClick:Et(o.onClick,()=>{v.current!=="mouse"&&g()}),onPointerUp:Et(o.onPointerUp,()=>{v.current==="mouse"&&g()}),onPointerDown:Et(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:Et(o.onPointerMove,x=>{var y;v.current=x.pointerType,s?(y=l.onItemLeave)==null||y.call(l):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Et(o.onPointerLeave,x=>{var y;x.currentTarget===document.activeElement&&((y=l.onItemLeave)==null||y.call(l))}),onKeyDown:Et(o.onKeyDown,x=>{var w;((w=l.searchRef)==null?void 0:w.current)!==""&&x.key===" "||(JK.includes(x.key)&&g(),x.key===" "&&x.preventDefault())})})})})});XO.displayName=Mh;var Tu="SelectItemText",YO=k.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,o=Wi(Tu,r),i=Ui(Tu,r),l=QO(Tu,r),d=n9(Tu,r),[p,u]=k.useState(null),m=tr(t,g=>u(g),l.onItemTextChange,g=>{var x;return(x=i.itemTextRefCallback)==null?void 0:x.call(i,g,l.value,l.disabled)}),f=p==null?void 0:p.textContent,h=k.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:_,onNativeOptionRemove:v}=d;return $n(()=>(_(h),()=>v(h)),[_,v,h]),c.jsxs(c.Fragment,{children:[c.jsx(At.span,{id:l.textId,...a,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ql.createPortal(a.children,o.valueNode):null]})});YO.displayName=Tu;var ZO="SelectItemIndicator",JO=k.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return QO(ZO,r).isSelected?c.jsx(At.span,{"aria-hidden":!0,...n,ref:t}):null});JO.displayName=ZO;var xy="SelectScrollUpButton",eF=k.forwardRef((e,t)=>{const r=Ui(xy,e.__scopeSelect),n=cb(xy,e.__scopeSelect),[s,a]=k.useState(!1),o=tr(t,n.onScrollButtonChange);return $n(()=>{if(r.viewport&&r.isPositioned){let i=function(){const d=l.scrollTop>0;a(d)};const l=r.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?c.jsx(rF,{...e,ref:o,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=r;i&&l&&(i.scrollTop=i.scrollTop-l.offsetHeight)}}):null});eF.displayName=xy;var vy="SelectScrollDownButton",tF=k.forwardRef((e,t)=>{const r=Ui(vy,e.__scopeSelect),n=cb(vy,e.__scopeSelect),[s,a]=k.useState(!1),o=tr(t,n.onScrollButtonChange);return $n(()=>{if(r.viewport&&r.isPositioned){let i=function(){const d=l.scrollHeight-l.clientHeight,p=Math.ceil(l.scrollTop)<d;a(p)};const l=r.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[r.viewport,r.isPositioned]),s?c.jsx(rF,{...e,ref:o,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=r;i&&l&&(i.scrollTop=i.scrollTop+l.offsetHeight)}}):null});tF.displayName=vy;var rF=k.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=Ui("SelectScrollButton",r),o=k.useRef(null),i=wg(r),l=k.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),$n(()=>{var p;const d=i().find(u=>u.ref.current===document.activeElement);(p=d==null?void 0:d.ref.current)==null||p.scrollIntoView({block:"nearest"})},[i]),c.jsx(At.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Et(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Et(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Et(s.onPointerLeave,()=>{l()})})}),h9="SelectSeparator",nF=k.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return c.jsx(At.div,{"aria-hidden":!0,...n,ref:t})});nF.displayName=h9;var yy="SelectArrow",g9=k.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=bg(r),a=Wi(yy,r),o=Ui(yy,r);return a.open&&o.position==="popper"?c.jsx(_D,{...s,...n,ref:t}):null});g9.displayName=yy;var _9="SelectBubbleInput",sF=k.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=k.useRef(null),a=tr(n,s),o=nb(t);return k.useEffect(()=>{const i=s.current;if(!i)return;const l=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&p){const u=new Event("change",{bubbles:!0});p.call(i,t),i.dispatchEvent(u)}},[o,t]),c.jsx(At.select,{...r,style:{...l3,...r.style},ref:a,defaultValue:t})});sF.displayName=_9;function aF(e){return e===""||e===void 0}function oF(e){const t=Tn(e),r=k.useRef(""),n=k.useRef(0),s=k.useCallback(o=>{const i=r.current+o;t(i),function l(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(i)},[t]),a=k.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function iF(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=x9(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==r));const l=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function x9(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var v9=$O,lF=OO,y9=LO,w9=RO,b9=zO,cF=BO,M9=GO,dF=KO,uF=XO,T9=YO,E9=JO,mF=eF,pF=tF,fF=nF;const oo=v9,io=y9,ka=k.forwardRef(({className:e,children:t,...r},n)=>c.jsxs(lF,{ref:n,className:zt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,c.jsx(w9,{asChild:!0,children:c.jsx(I3,{className:"h-4 w-4 opacity-50"})})]}));ka.displayName=lF.displayName;const hF=k.forwardRef(({className:e,...t},r)=>c.jsx(mF,{ref:r,className:zt("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(vU,{className:"h-4 w-4"})}));hF.displayName=mF.displayName;const gF=k.forwardRef(({className:e,...t},r)=>c.jsx(pF,{ref:r,className:zt("flex cursor-default items-center justify-center py-1",e),...t,children:c.jsx(I3,{className:"h-4 w-4"})}));gF.displayName=pF.displayName;const ja=k.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>c.jsx(b9,{children:c.jsxs(cF,{ref:s,className:zt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[c.jsx(hF,{}),c.jsx(M9,{className:zt("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),c.jsx(gF,{})]})}));ja.displayName=cF.displayName;const C9=k.forwardRef(({className:e,...t},r)=>c.jsx(dF,{ref:r,className:zt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));C9.displayName=dF.displayName;const cr=k.forwardRef(({className:e,children:t,...r},n)=>c.jsxs(uF,{ref:n,className:zt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(E9,{children:c.jsx(A3,{className:"h-4 w-4"})})}),c.jsx(T9,{children:t})]}));cr.displayName=uF.displayName;const P9=k.forwardRef(({className:e,...t},r)=>c.jsx(fF,{ref:r,className:zt("-mx-1 my-1 h-px bg-muted",e),...t}));P9.displayName=fF.displayName;const S9=[{value:"operacao",label:"Operao de Equipamentos",icon:EU},{value:"logistica",label:"Logstica e Armazenagem",icon:kU},{value:"manutencao",label:"Manuteno Industrial",icon:FU},{value:"seguranca",label:"Segurana do Trabalho",icon:om},{value:"energia",label:"Energia e Utilidades",icon:LU},{value:"administrativa",label:"Administrativa",icon:sm}],k9=()=>{const e=sn(),[t]=gq(),[r,n]=k.useState(1),[s,a]=k.useState(!1),[o,i]=k.useState(""),[l,d]=k.useState({name:"",cpf:"",email:"",phone:"",password:"",confirmPassword:"",cep:"",city:"",isPCD:!1,gender:"",area:""});k.useEffect(()=>{const h=t.get("tipo");h==="candidato"?(i("candidate"),n(2)):h==="empresa"&&(i("company"),n(2))},[t]);const p=()=>{if(r===1&&!o){qr.error("Selecione o tipo de conta");return}if(r===2){if(!l.name||!l.email||!l.password){qr.error("Preencha todos os campos obrigatrios");return}if(l.password.length<8){qr.error("A senha deve ter no mnimo 8 caracteres");return}if(l.password!==l.confirmPassword){qr.error("As senhas no coincidem");return}}n(r+1)},u=()=>{r>1?n(r-1):e("/")},m=()=>{if(o==="candidate"&&!l.area){qr.error("Selecione uma rea de interesse");return}a(!0),setTimeout(()=>{const h=Nq(l.email,l.password,l.name,o);KD(h),qr.success("Cadastro realizado com sucesso!"),h.role==="candidate"?e("/candidato/dashboard"):e("/empresa/dashboard"),a(!1)},500)},f=()=>c.jsx("div",{className:"flex justify-center gap-2 mb-8",role:"progressbar","aria-valuenow":r,"aria-valuemin":1,"aria-valuemax":3,children:[1,2,3].map(_=>c.jsx("div",{className:`h-2 rounded-full transition-all ${_===r?"w-12 bg-primary":_<r?"w-8 bg-primary/50":"w-8 bg-muted"}`,"aria-label":`Etapa ${_} de 3${_===r?" - atual":""}`},_))});return c.jsx("div",{className:"min-h-screen bg-muted flex items-center justify-center p-3 sm:p-4 py-6",children:c.jsxs(ot,{className:"w-full max-w-2xl p-4 sm:p-6 md:p-8","data-aos":"fade-up","data-aos-duration":"800",children:[c.jsxs("div",{className:"flex flex-col items-center mb-4 sm:mb-6",children:[c.jsx("img",{src:fd,alt:"Pecm - Complexo Industrial e Porturio",className:"h-12 sm:h-16 md:h-20 w-auto mb-3 sm:mb-4 object-contain"}),c.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-center",children:"Criar Conta"})]}),f(),r===1&&c.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Qual tipo de conta voc deseja criar?"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Escolha a opo que melhor se encaixa"})]}),c.jsx(py,{value:o,onValueChange:h=>i(h),children:c.jsxs("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-4",children:[c.jsx("label",{htmlFor:"candidate-radio",children:c.jsx(ot,{className:`p-4 sm:p-6 cursor-pointer transition-all ${o==="candidate"?"border-primary bg-primary/5":"hover:border-primary/50"}`,children:c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[c.jsx(Nf,{value:"candidate",id:"candidate-radio"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[c.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary","aria-hidden":"true"}),c.jsx("span",{className:"text-sm sm:text-base font-semibold",children:"Sou Candidato"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Procuro oportunidades de emprego"})]})]})})}),c.jsx("label",{htmlFor:"company-radio",children:c.jsx(ot,{className:`p-4 sm:p-6 cursor-pointer transition-all ${o==="company"?"border-primary bg-primary/5":"hover:border-primary/50"}`,children:c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[c.jsx(Nf,{value:"company",id:"company-radio"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 sm:mb-2",children:[c.jsx(Rn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-secondary","aria-hidden":"true"}),c.jsx("span",{className:"text-sm sm:text-base font-semibold",children:"Sou Empresa"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Quero contratar profissionais"})]})]})})})]})})]}),r===2&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Dados Bsicos"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Preencha suas informaes"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2 md:col-span-2",children:[c.jsx(kr,{htmlFor:"name",children:"Nome Completo *"}),c.jsx(dn,{id:"name",value:l.name,onChange:h=>d({...l,name:h.target.value}),placeholder:"Seu nome completo",required:!0,"aria-required":"true"})]}),o==="candidate"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"cpf",children:"CPF *"}),c.jsx(dn,{id:"cpf",value:l.cpf,onChange:h=>d({...l,cpf:h.target.value}),placeholder:"000.000.000-00",required:!0,"aria-required":"true"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"email",children:"E-mail *"}),c.jsx(dn,{id:"email",type:"email",value:l.email,onChange:h=>d({...l,email:h.target.value}),placeholder:"seu@email.com",required:!0,autoComplete:"email","aria-required":"true"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"phone",children:"Telefone *"}),c.jsx(dn,{id:"phone",type:"tel",value:l.phone,onChange:h=>d({...l,phone:h.target.value}),placeholder:"(85) 99999-9999",required:!0,"aria-required":"true"})]}),o==="candidate"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"cep",children:"CEP"}),c.jsx(dn,{id:"cep",value:l.cep,onChange:h=>d({...l,cep:h.target.value}),placeholder:"00000-000"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"city",children:"Cidade *"}),c.jsx(dn,{id:"city",value:l.city,onChange:h=>d({...l,city:h.target.value}),placeholder:"Sua cidade",required:!0,"aria-required":"true"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"gender",children:"Gnero"}),c.jsxs(oo,{value:l.gender,onValueChange:h=>d({...l,gender:h}),children:[c.jsx(ka,{id:"gender",children:c.jsx(io,{placeholder:"Selecione seu gnero"})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"feminino",children:"Feminino"}),c.jsx(cr,{value:"masculino",children:"Masculino"}),c.jsx(cr,{value:"nao-binario",children:"No-binrio"}),c.jsx(cr,{value:"prefiro-nao-informar",children:"Prefiro no informar"}),c.jsx(cr,{value:"outro",children:"Outro"})]})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"password",children:"Senha *"}),c.jsx(dn,{id:"password",type:"password",value:l.password,onChange:h=>d({...l,password:h.target.value}),placeholder:"Mnimo 8 caracteres",required:!0,autoComplete:"new-password","aria-required":"true"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"confirmPassword",children:"Confirmar Senha *"}),c.jsx(dn,{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:h=>d({...l,confirmPassword:h.target.value}),placeholder:"Digite a senha novamente",required:!0,autoComplete:"new-password","aria-required":"true"})]}),o==="candidate"&&c.jsxs("div",{className:"md:col-span-2 flex items-center space-x-2",children:[c.jsx(gg,{id:"isPCD",checked:l.isPCD,onCheckedChange:h=>d({...l,isPCD:h})}),c.jsx(kr,{htmlFor:"isPCD",className:"cursor-pointer",children:"Sou pessoa com deficincia (PCD)"})]})]})]}),r===3&&c.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[c.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2",children:o==="candidate"?"rea de Interesse":"Segmento da Empresa"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:o==="candidate"?"Selecione sua principal rea de atuao":"Qual o segmento da sua empresa?"})]}),c.jsx(py,{value:l.area,onValueChange:h=>d({...l,area:h}),children:c.jsx("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-4",children:S9.map(h=>{const _=h.icon;return c.jsx("label",{htmlFor:`area-${h.value}`,children:c.jsx(ot,{className:`p-3 sm:p-4 cursor-pointer transition-all ${l.area===h.value?"border-primary bg-primary/5":"hover:border-primary/50"}`,children:c.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[c.jsx(Nf,{value:h.value,id:`area-${h.value}`}),c.jsx(_,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:"font-medium text-xs sm:text-sm",children:h.label})]})})},h.value)})})})]}),c.jsxs("div",{className:"flex gap-4 mt-8",children:[c.jsxs(ze,{variant:"outline",onClick:u,className:"flex-1",children:[c.jsx(bd,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Voltar"]}),r<3?c.jsxs(ze,{onClick:p,className:"flex-1",children:["Prximo",c.jsx(fU,{className:"h-4 w-4 ml-2","aria-hidden":"true"})]}):c.jsx(ze,{onClick:m,className:"flex-1",disabled:s,"aria-busy":s,children:s?"Criando conta...":"Criar Conta"})]})]})})},j9=()=>{const e=sn();return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx("header",{className:"border-b bg-card",children:c.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center gap-4",children:[c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>e("/"),"aria-label":"Voltar para home",children:c.jsx(bd,{className:"h-5 w-5"})}),c.jsx("img",{src:fd,alt:"Pecm - Complexo Industrial e Porturio",className:"h-11 sm:h-13 w-auto object-contain"})]})}),c.jsx("main",{className:"container mx-auto px-4 py-12",children:c.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Sobre a Plataforma"}),c.jsx("p",{className:"text-lg text-muted-foreground",children:"Conectando profissionais qualificados s oportunidades do Porto do Pecm"})]}),c.jsxs(ot,{className:"p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Nossa Misso"}),c.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Desenvolver uma plataforma de empregabilidade focada em certificaes tcnicas, segurana e incluso para o Complexo Industrial e Porturio do Pecm. Facilitamos a conexo entre profissionais qualificados e empresas que buscam talentos com as competncias necessrias para atuar em um dos principais complexos porturios do Brasil."})]}),c.jsxs(ot,{className:"p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Diferenciais"}),c.jsxs("ul",{className:"space-y-3 text-muted-foreground",children:[c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"text-primary",children:""}),c.jsx("span",{children:"Sistema de controle de validade de certificaes tcnicas (NRs)"})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"text-primary",children:""}),c.jsx("span",{children:"Algoritmo de match inteligente baseado em competncias e localizao"})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"text-primary",children:""}),c.jsx("span",{children:"Foco em acessibilidade e incluso de pessoas com deficincia"})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"text-primary",children:""}),c.jsx("span",{children:"Interface mobile-first otimizada para dispositivos bsicos"})]}),c.jsxs("li",{className:"flex gap-2",children:[c.jsx("span",{className:"text-primary",children:""}),c.jsx("span",{children:"Conformidade com WCAG 2.1 AA para mxima acessibilidade"})]})]})]}),c.jsxs(ot,{className:"p-8",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Contato"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Para mais informaes sobre a plataforma ou parcerias, entre em contato:"}),c.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[c.jsx("p",{children:c.jsx("strong",{children:"Porto do Pecm"})}),c.jsx("p",{children:"So Gonalo do Amarante - CE"}),c.jsx("p",{children:"contato@portodopecem.ce.gov.br"})]})]})]})})]})},A9=()=>{const e=Kl();return k.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),c.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),c.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},Of=new Map,hl=[],I9=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){const n=Of.get(e);if(n===void 0)Of.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){const s=hl.indexOf(e);s!==-1&&hl.splice(s,1);for(let a=0;a<hl.length;a++)if(Of.get(hl[a]).priority<=r){hl.splice(a,0,e);return}hl.push(e)}return}throw new TypeError("not a valid backend")},N9=async e=>{const t=Of.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},$9=async e=>{const t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?hl:r;let s;const a=[],o=new Set;for(const l of n){const d=await N9(l);typeof d=="string"?a.push({name:l,err:d}):(s||(s=d),s===d&&o.add(l))}if(!s)throw new Error(`no available backend found. ERR: ${a.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(const{name:l,err:d}of a)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${d}`);const i=t.filter(l=>o.has(typeof l=="string"?l:l.name));return[s,new Proxy(e,{get:(l,d)=>d==="executionProviders"?i:Reflect.get(l,d)})]},D9="1.21.0";let VS="warning";const Aa={wasm:{},webgl:{},webgpu:{},versions:{common:D9},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);VS=e}},get logLevel(){return VS}};Object.defineProperty(Aa,"logLevel",{enumerable:!0});const O9=Aa,F9=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];const n=r.getContext("2d");if(n!=null){let s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(s=e.dims[2],a=e.dims[3]):(s=e.dims[3],a=e.dims[2]);const o=(t==null?void 0:t.format)!==void 0?t.format:"RGB",i=t==null?void 0:t.norm;let l,d;i===void 0||i.mean===void 0?l=[255,255,255,255]:typeof i.mean=="number"?l=[i.mean,i.mean,i.mean,i.mean]:(l=[i.mean[0],i.mean[1],i.mean[2],0],i.mean[3]!==void 0&&(l[3]=i.mean[3])),i===void 0||i.bias===void 0?d=[0,0,0,0]:typeof i.bias=="number"?d=[i.bias,i.bias,i.bias,i.bias]:(d=[i.bias[0],i.bias[1],i.bias[2],0],i.bias[3]!==void 0&&(d[3]=i.bias[3]));const p=a*s;let u=0,m=p,f=p*2,h=-1;o==="RGBA"?(u=0,m=p,f=p*2,h=p*3):o==="RGB"?(u=0,m=p,f=p*2):o==="RBG"&&(u=0,f=p,m=p*2);for(let _=0;_<a;_++)for(let v=0;v<s;v++){const g=(e.data[u++]-d[0])*l[0],x=(e.data[m++]-d[1])*l[1],y=(e.data[f++]-d[2])*l[2],w=h===-1?255:(e.data[h++]-d[3])*l[3];n.fillStyle="rgba("+g+","+x+","+y+","+w+")",n.fillRect(v,_,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},L9=(e,t)=>{const r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");let n;if(r!=null){let s,a,o;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(s=e.dims[2],a=e.dims[1],o=e.dims[3]):(s=e.dims[3],a=e.dims[2],o=e.dims[1]);const i=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm;let d,p;l===void 0||l.mean===void 0?d=[255,255,255,255]:typeof l.mean=="number"?d=[l.mean,l.mean,l.mean,l.mean]:(d=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(d[3]=l.mean[3])),l===void 0||l.bias===void 0?p=[0,0,0,0]:typeof l.bias=="number"?p=[l.bias,l.bias,l.bias,l.bias]:(p=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(p[3]=l.bias[3]));const u=a*s;if(t!==void 0&&(t.format!==void 0&&o===4&&t.format!=="RGBA"||o===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");const m=4;let f=0,h=1,_=2,v=3,g=0,x=u,y=u*2,w=-1;i==="RGBA"?(g=0,x=u,y=u*2,w=u*3):i==="RGB"?(g=0,x=u,y=u*2):i==="RBG"&&(g=0,y=u,x=u*2),n=r.createImageData(s,a);for(let b=0;b<a*s;f+=m,h+=m,_+=m,v+=m,b++)n.data[f]=(e.data[g++]-p[0])*d[0],n.data[h]=(e.data[x++]-p[1])*d[1],n.data[_]=(e.data[y++]-p[2])*d[2],n.data[v]=w===-1?255:(e.data[w++]-p[3])*d[3]}else throw new Error("Can not access image data");return n},tv=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");const{height:r,width:n}=t,s=t.norm??{mean:255,bias:0};let a,o;typeof s.mean=="number"?a=[s.mean,s.mean,s.mean,s.mean]:a=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?o=[s.bias,s.bias,s.bias,s.bias]:o=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];const i=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",d=r*n,p=l==="RGBA"?new Float32Array(d*4):new Float32Array(d*3);let u=4,m=0,f=1,h=2,_=3,v=0,g=d,x=d*2,y=-1;i==="RGB"&&(u=3,m=0,f=1,h=2,_=-1),l==="RGBA"?y=d*3:l==="RBG"?(v=0,x=d,g=d*2):l==="BGR"&&(x=0,g=d,v=d*2);for(let b=0;b<d;b++,m+=u,h+=u,f+=u,_+=u)p[v++]=(e[m]+o[0])/a[0],p[g++]=(e[f]+o[1])/a[1],p[x++]=(e[h]+o[2])/a[2],y!==-1&&_!==-1&&(p[y++]=(e[_]+o[3])/a[3]);return l==="RGBA"?new Xs("float32",p,[1,4,r,n]):new Xs("float32",p,[1,3,r,n])},R9=async(e,t)=>{const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,s=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,a=typeof e=="string";let o,i=t??{};const l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},d=p=>typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||p instanceof OffscreenCanvas?p.getContext("2d"):null;if(r){const p=l();p.width=e.width,p.height=e.height;const u=d(p);if(u!=null){let m=e.height,f=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,f=t.resizedWidth),t!==void 0){if(i=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");i.tensorFormat="RGBA",i.height=m,i.width=f}else i.tensorFormat="RGBA",i.height=m,i.width=f;u.drawImage(e,0,0),o=u.getImageData(0,0,f,m).data}else throw new Error("Can not access image data")}else if(n){let p,u;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(p=t.resizedHeight,u=t.resizedWidth):(p=e.height,u=e.width),t!==void 0&&(i=t),i.format="RGBA",i.height=p,i.width=u,t!==void 0){const m=l();m.width=u,m.height=p;const f=d(m);if(f!=null)f.putImageData(e,0,0),o=f.getImageData(0,0,u,p).data;else throw new Error("Can not access image data")}else o=e.data}else if(s){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");const p=l();p.width=e.width,p.height=e.height;const u=d(p);if(u!=null){const m=e.height,f=e.width;return u.drawImage(e,0,0,f,m),o=u.getImageData(0,0,f,m).data,i.height=m,i.width=f,tv(o,i)}else throw new Error("Can not access image data")}else{if(a)return new Promise((p,u)=>{const m=l(),f=d(m);if(!e||!f)return u();const h=new Image;h.crossOrigin="Anonymous",h.src=e,h.onload=()=>{m.width=h.width,m.height=h.height,f.drawImage(h,0,0,m.width,m.height);const _=f.getImageData(0,0,m.width,m.height);i.height=m.height,i.width=m.width,p(tv(_.data,i))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o!==void 0)return tv(o,i);throw new Error("Input data provided is not supported - aborted tensor creation")},z9=(e,t)=>{const{width:r,height:n,download:s,dispose:a}=t,o=[1,n,r,4];return new Xs({location:"texture",type:"float32",texture:e,dims:o,download:s,dispose:a})},B9=(e,t)=>{const{dataType:r,dims:n,download:s,dispose:a}=t;return new Xs({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:s,dispose:a})},V9=(e,t)=>{const{dataType:r,dims:n,download:s,dispose:a}=t;return new Xs({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:s,dispose:a})},W9=(e,t,r)=>new Xs({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]}),$c=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Ff=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let WS=!1;const U9=()=>{if(!WS){WS=!0;const e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&($c.set("int64",BigInt64Array),Ff.set(BigInt64Array,"int64")),t&&($c.set("uint64",BigUint64Array),Ff.set(BigUint64Array,"uint64")),n?($c.set("float16",r),Ff.set(r,"float16")):$c.set("float16",Uint16Array)}},G9=e=>{let t=1;for(let r=0;r<e.length;r++){const n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},H9=(e,t)=>{switch(e.location){case"cpu":return new Xs(e.type,e.data,t);case"cpu-pinned":return new Xs({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Xs({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Xs({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Xs({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}};let Xs=class{constructor(t,r,n){U9();let s,a;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,s=t.type,a=t.dims,t.location){case"cpu-pinned":{const i=$c.get(s);if(!i)throw new TypeError(`unsupported type "${s}" to create tensor from pinned buffer`);if(!(t.data instanceof i))throw new TypeError(`buffer should be of type ${i.name}`);this.cpuData=t.data;break}case"texture":{if(s!=="float32")throw new TypeError(`unsupported type "${s}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="uint8"&&s!=="bool"&&s!=="uint4"&&s!=="int4")throw new TypeError(`unsupported type "${s}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}case"ml-tensor":{if(s!=="float32"&&s!=="float16"&&s!=="int32"&&s!=="int64"&&s!=="uint32"&&s!=="uint64"&&s!=="int8"&&s!=="uint8"&&s!=="bool"&&s!=="uint4"&&s!=="int4")throw new TypeError(`unsupported type "${s}" to create tensor from MLTensor`);this.mlTensorData=t.mlTensor,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let i,l;if(typeof t=="string")if(s=t,l=n,t==="string"){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");i=r}else{const d=$c.get(t);if(d===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(r)){if(t==="float16"&&d===Uint16Array||t==="uint4"||t==="int4")throw new TypeError(`Creating a ${t} tensor from number array is not supported. Please use ${d.name} as data.`);t==="uint64"||t==="int64"?i=d.from(r,BigInt):i=d.from(r)}else if(r instanceof d)i=r;else if(r instanceof Uint8ClampedArray)if(t==="uint8")i=Uint8Array.from(r);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(t==="float16"&&r instanceof Uint16Array&&d!==Uint16Array)i=new globalThis.Float16Array(r.buffer,r.byteOffset,r.length);else throw new TypeError(`A ${s} tensor's data must be type of ${d}`)}else if(l=r,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const d=typeof t[0];if(d==="string")s="string",i=t;else if(d==="boolean")s="bool",i=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${d}.`)}else if(t instanceof Uint8ClampedArray)s="uint8",i=Uint8Array.from(t);else{const d=Ff.get(t.constructor);if(d===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);s=d,i=t}if(l===void 0)l=[i.length];else if(!Array.isArray(l))throw new TypeError("A tensor's dims must be a number array");a=l,this.cpuData=i,this.dataLocation="cpu"}const o=G9(a);if(this.cpuData&&o!==this.cpuData.length&&!((s==="uint4"||s==="int4")&&Math.ceil(o/2)===this.cpuData.length))throw new Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=s,this.dims=a,this.size=o}static async fromImage(t,r){return R9(t,r)}static fromTexture(t,r){return z9(t,r)}static fromGpuBuffer(t,r){return B9(t,r)}static fromMLTensor(t,r){return V9(t,r)}static fromPinnedBuffer(t,r,n){return W9(t,r,n)}toDataURL(t){return F9(this,t)}toImageData(t){return L9(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(t){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;const r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,t&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return H9(this,t)}};const yc=Xs,_F=(e,t)=>{(typeof Aa.trace>"u"?!Aa.wasm.trace:!Aa.trace)||console.timeStamp(`${e}::ORT::${t}`)},xF=(e,t)=>{var s;const r=((s=new Error().stack)==null?void 0:s.split(/\r\n|\r|\n/g))||[];let n=!1;for(let a=0;a<r.length;a++){if(n&&!r[a].includes("TRACE_FUNC")){let o=`FUNC_${e}::${r[a].trim().split(" ")[1]}`;t&&(o+=`::${t}`),_F("CPU",o);return}r[a].includes("TRACE_FUNC")&&(n=!0)}},wy=e=>{(typeof Aa.trace>"u"?!Aa.wasm.trace:!Aa.trace)||xF("BEGIN",e)},by=e=>{(typeof Aa.trace>"u"?!Aa.wasm.trace:!Aa.trace)||xF("END",e)};let q9=class vF{constructor(t){this.handler=t}async run(t,r,n){wy();const s={};let a={};if(typeof t!="object"||t===null||t instanceof yc||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof yc)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(const d of r){if(typeof d!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(d)===-1)throw new RangeError(`'fetches' contains invalid output name: ${d}.`);s[d]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let d=!1;const p=Object.getOwnPropertyNames(r);for(const u of this.outputNames)if(p.indexOf(u)!==-1){const m=r[u];(m===null||m instanceof yc)&&(d=!0,o=!1,s[u]=m)}if(d){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const d of this.inputNames)if(typeof t[d]>"u")throw new Error(`input '${d}' is missing in 'feeds'.`);if(o)for(const d of this.outputNames)s[d]=null;const i=await this.handler.run(t,s,a),l={};for(const d in i)if(Object.hasOwnProperty.call(i,d)){const p=i[d];p instanceof yc?l[d]=p:l[d]=new yc(p.type,p.data,p.dims)}return by(),l}async release(){return this.handler.dispose()}static async create(t,r,n,s){wy();let a,o={};if(typeof t=="string"){if(a=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(a=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){const p=t;let u=0,m=t.byteLength;if(typeof r=="object"&&r!==null)o=r;else if(typeof r=="number"){if(u=r,!Number.isSafeInteger(u))throw new RangeError("'byteOffset' must be an integer.");if(u<0||u>=p.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${p.byteLength}).`);if(m=t.byteLength-u,typeof n=="number"){if(m=n,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||u+m>p.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${p.byteLength-u}].`);if(typeof s=="object"&&s!==null)o=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(p,u,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const[i,l]=await $9(o),d=await i.createInferenceSessionHandler(a,l);return by(),new vF(d)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const K9=q9,Q9=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:K9,TRACE:_F,TRACE_FUNC_BEGIN:wy,TRACE_FUNC_END:by,Tensor:yc,env:O9,registerBackend:I9},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.22.0-dev.20250409-89f8206ba4
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var db=Object.defineProperty,X9=Object.getOwnPropertyDescriptor,Y9=Object.getOwnPropertyNames,Z9=Object.prototype.hasOwnProperty,J9=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Ke=(e,t)=>()=>(e&&(t=e(e=0)),t),Sd=(e,t)=>{for(var r in t)db(e,r,{get:t[r],enumerable:!0})},e7=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Y9(t))!Z9.call(e,s)&&s!==r&&db(e,s,{get:()=>t[s],enumerable:!(n=X9(t,s))||n.enumerable});return e},fm=e=>e7(db({},"__esModule",{value:!0}),e),du,ei,bl,US,yF,wF=Ke(()=>{du=new Map,ei=[],bl=(e,t,r)=>{if(t&&typeof t.init=="function"&&typeof t.createInferenceSessionHandler=="function"){let n=du.get(e);if(n===void 0)du.set(e,{backend:t,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${r}`)}if(r>=0){let s=ei.indexOf(e);s!==-1&&ei.splice(s,1);for(let a=0;a<ei.length;a++)if(du.get(ei[a]).priority<=r){ei.splice(a,0,e);return}ei.push(e)}return}throw new TypeError("not a valid backend")},US=async e=>{let t=du.get(e);if(!t)return"backend not found.";if(t.initialized)return t.backend;if(t.aborted)return t.error;{let r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init(e)),await t.initPromise,t.initialized=!0,t.backend}catch(n){return r||(t.error=`${n}`,t.aborted=!0),t.error}finally{delete t.initPromise}}},yF=async e=>{let t=e.executionProviders||[],r=t.map(l=>typeof l=="string"?l:l.name),n=r.length===0?ei:r,s,a=[],o=new Set;for(let l of n){let d=await US(l);typeof d=="string"?a.push({name:l,err:d}):(s||(s=d),s===d&&o.add(l))}if(!s)throw new Error(`no available backend found. ERR: ${a.map(l=>`[${l.name}] ${l.err}`).join(", ")}`);for(let{name:l,err:d}of a)r.includes(l)&&console.warn(`removing requested execution provider "${l}" from session options because it is not available: ${d}`);let i=t.filter(l=>o.has(typeof l=="string"?l:l.name));return[s,new Proxy(e,{get:(l,d)=>d==="executionProviders"?i:Reflect.get(l,d)})]}}),t7=Ke(()=>{wF()}),bF,r7=Ke(()=>{bF="1.22.0-dev.20250409-89f8206ba4"}),rv,Hs,MF=Ke(()=>{r7(),rv="warning",Hs={wasm:{},webgl:{},webgpu:{},versions:{common:bF},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);rv=e}},get logLevel(){return rv}},Object.defineProperty(Hs,"logLevel",{enumerable:!0})}),Er,n7=Ke(()=>{MF(),Er=Hs}),TF,EF,s7=Ke(()=>{TF=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=e.dims[3],r.height=e.dims[2];let n=r.getContext("2d");if(n!=null){let s,a;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(s=e.dims[2],a=e.dims[3]):(s=e.dims[3],a=e.dims[2]);let o=(t==null?void 0:t.format)!==void 0?t.format:"RGB",i=t==null?void 0:t.norm,l,d;i===void 0||i.mean===void 0?l=[255,255,255,255]:typeof i.mean=="number"?l=[i.mean,i.mean,i.mean,i.mean]:(l=[i.mean[0],i.mean[1],i.mean[2],0],i.mean[3]!==void 0&&(l[3]=i.mean[3])),i===void 0||i.bias===void 0?d=[0,0,0,0]:typeof i.bias=="number"?d=[i.bias,i.bias,i.bias,i.bias]:(d=[i.bias[0],i.bias[1],i.bias[2],0],i.bias[3]!==void 0&&(d[3]=i.bias[3]));let p=a*s,u=0,m=p,f=p*2,h=-1;o==="RGBA"?(u=0,m=p,f=p*2,h=p*3):o==="RGB"?(u=0,m=p,f=p*2):o==="RBG"&&(u=0,f=p,m=p*2);for(let _=0;_<a;_++)for(let v=0;v<s;v++){let g=(e.data[u++]-d[0])*l[0],x=(e.data[m++]-d[1])*l[1],y=(e.data[f++]-d[2])*l[2],w=h===-1?255:(e.data[h++]-d[3])*l[3];n.fillStyle="rgba("+g+","+x+","+y+","+w+")",n.fillRect(v,_,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},EF=(e,t)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let s,a,o;(t==null?void 0:t.tensorLayout)!==void 0&&t.tensorLayout==="NHWC"?(s=e.dims[2],a=e.dims[1],o=e.dims[3]):(s=e.dims[3],a=e.dims[2],o=e.dims[1]);let i=t!==void 0&&t.format!==void 0?t.format:"RGB",l=t==null?void 0:t.norm,d,p;l===void 0||l.mean===void 0?d=[255,255,255,255]:typeof l.mean=="number"?d=[l.mean,l.mean,l.mean,l.mean]:(d=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(d[3]=l.mean[3])),l===void 0||l.bias===void 0?p=[0,0,0,0]:typeof l.bias=="number"?p=[l.bias,l.bias,l.bias,l.bias]:(p=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(p[3]=l.bias[3]));let u=a*s;if(t!==void 0&&(t.format!==void 0&&o===4&&t.format!=="RGBA"||o===3&&t.format!=="RGB"&&t.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let m=4,f=0,h=1,_=2,v=3,g=0,x=u,y=u*2,w=-1;i==="RGBA"?(g=0,x=u,y=u*2,w=u*3):i==="RGB"?(g=0,x=u,y=u*2):i==="RBG"&&(g=0,y=u,x=u*2),n=r.createImageData(s,a);for(let b=0;b<a*s;f+=m,h+=m,_+=m,v+=m,b++)n.data[f]=(e.data[g++]-p[0])*d[0],n.data[h]=(e.data[x++]-p[1])*d[1],n.data[_]=(e.data[y++]-p[2])*d[2],n.data[v]=w===-1?255:(e.data[w++]-p[3])*d[3]}else throw new Error("Can not access image data");return n}}),rf,CF,PF,SF,kF,jF,a7=Ke(()=>{ub(),rf=(e,t)=>{if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");if(t.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=t,s=t.norm??{mean:255,bias:0},a,o;typeof s.mean=="number"?a=[s.mean,s.mean,s.mean,s.mean]:a=[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],typeof s.bias=="number"?o=[s.bias,s.bias,s.bias,s.bias]:o=[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let i=t.format!==void 0?t.format:"RGBA",l=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",d=r*n,p=l==="RGBA"?new Float32Array(d*4):new Float32Array(d*3),u=4,m=0,f=1,h=2,_=3,v=0,g=d,x=d*2,y=-1;i==="RGB"&&(u=3,m=0,f=1,h=2,_=-1),l==="RGBA"?y=d*3:l==="RBG"?(v=0,x=d,g=d*2):l==="BGR"&&(x=0,g=d,v=d*2);for(let w=0;w<d;w++,m+=u,h+=u,f+=u,_+=u)p[v++]=(e[m]+o[0])/a[0],p[g++]=(e[f]+o[1])/a[1],p[x++]=(e[h]+o[2])/a[2],y!==-1&&_!==-1&&(p[y++]=(e[_]+o[3])/a[3]);return l==="RGBA"?new Ms("float32",p,[1,4,r,n]):new Ms("float32",p,[1,3,r,n])},CF=async(e,t)=>{let r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,s=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,a=typeof e=="string",o,i=t??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},d=p=>typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement||p instanceof OffscreenCanvas?p.getContext("2d"):null;if(r){let p=l();p.width=e.width,p.height=e.height;let u=d(p);if(u!=null){let m=e.height,f=e.width;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(m=t.resizedHeight,f=t.resizedWidth),t!==void 0){if(i=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");i.tensorFormat="RGBA",i.height=m,i.width=f}else i.tensorFormat="RGBA",i.height=m,i.width=f;u.drawImage(e,0,0),o=u.getImageData(0,0,f,m).data}else throw new Error("Can not access image data")}else if(n){let p,u;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?(p=t.resizedHeight,u=t.resizedWidth):(p=e.height,u=e.width),t!==void 0&&(i=t),i.format="RGBA",i.height=p,i.width=u,t!==void 0){let m=l();m.width=u,m.height=p;let f=d(m);if(f!=null)f.putImageData(e,0,0),o=f.getImageData(0,0,u,p).data;else throw new Error("Can not access image data")}else o=e.data}else if(s){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");let p=l();p.width=e.width,p.height=e.height;let u=d(p);if(u!=null){let m=e.height,f=e.width;return u.drawImage(e,0,0,f,m),o=u.getImageData(0,0,f,m).data,i.height=m,i.width=f,rf(o,i)}else throw new Error("Can not access image data")}else{if(a)return new Promise((p,u)=>{let m=l(),f=d(m);if(!e||!f)return u();let h=new Image;h.crossOrigin="Anonymous",h.src=e,h.onload=()=>{m.width=h.width,m.height=h.height,f.drawImage(h,0,0,m.width,m.height);let _=f.getImageData(0,0,m.width,m.height);i.height=m.height,i.width=m.width,p(rf(_.data,i))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(o!==void 0)return rf(o,i);throw new Error("Input data provided is not supported - aborted tensor creation")},PF=(e,t)=>{let{width:r,height:n,download:s,dispose:a}=t,o=[1,n,r,4];return new Ms({location:"texture",type:"float32",texture:e,dims:o,download:s,dispose:a})},SF=(e,t)=>{let{dataType:r,dims:n,download:s,dispose:a}=t;return new Ms({location:"gpu-buffer",type:r??"float32",gpuBuffer:e,dims:n,download:s,dispose:a})},kF=(e,t)=>{let{dataType:r,dims:n,download:s,dispose:a}=t;return new Ms({location:"ml-tensor",type:r??"float32",mlTensor:e,dims:n,download:s,dispose:a})},jF=(e,t,r)=>new Ms({location:"cpu-pinned",type:e,data:t,dims:r??[t.length]})}),_l,Eu,nv,AF,o7=Ke(()=>{_l=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array],["int4",Uint8Array],["uint4",Uint8Array]]),Eu=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),nv=!1,AF=()=>{if(!nv){nv=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,t=typeof BigUint64Array<"u"&&BigUint64Array.from,r=globalThis.Float16Array,n=typeof r<"u"&&r.from;e&&(_l.set("int64",BigInt64Array),Eu.set(BigInt64Array,"int64")),t&&(_l.set("uint64",BigUint64Array),Eu.set(BigUint64Array,"uint64")),n?(_l.set("float16",r),Eu.set(r,"float16")):_l.set("float16",Uint16Array)}}}),IF,NF,i7=Ke(()=>{ub(),IF=e=>{let t=1;for(let r=0;r<e.length;r++){let n=e[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);t*=n}return t},NF=(e,t)=>{switch(e.location){case"cpu":return new Ms(e.type,e.data,t);case"cpu-pinned":return new Ms({location:"cpu-pinned",data:e.data,type:e.type,dims:t});case"texture":return new Ms({location:"texture",texture:e.texture,type:e.type,dims:t});case"gpu-buffer":return new Ms({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:t});case"ml-tensor":return new Ms({location:"ml-tensor",mlTensor:e.mlTensor,type:e.type,dims:t});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}}),Ms,ub=Ke(()=>{s7(),a7(),o7(),i7(),Ms=class{constructor(e,t,r){AF();let n,s;if(typeof e=="object"&&"location"in e)switch(this.dataLocation=e.location,n=e.type,s=e.dims,e.location){case"cpu-pinned":{let o=_l.get(n);if(!o)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(e.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=e.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break}case"ml-tensor":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="uint64"&&n!=="int8"&&n!=="uint8"&&n!=="bool"&&n!=="uint4"&&n!=="int4")throw new TypeError(`unsupported type "${n}" to create tensor from MLTensor`);this.mlTensorData=e.mlTensor,this.downloader=e.download,this.disposer=e.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,i;if(typeof e=="string")if(n=e,i=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");o=t}else{let l=_l.get(e);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t)){if(e==="float16"&&l===Uint16Array||e==="uint4"||e==="int4")throw new TypeError(`Creating a ${e} tensor from number array is not supported. Please use ${l.name} as data.`);e==="uint64"||e==="int64"?o=l.from(t,BigInt):o=l.from(t)}else if(t instanceof l)o=t;else if(t instanceof Uint8ClampedArray)if(e==="uint8")o=Uint8Array.from(t);else throw new TypeError("A Uint8ClampedArray tensor's data must be type of uint8");else if(e==="float16"&&t instanceof Uint16Array&&l!==Uint16Array)o=new globalThis.Float16Array(t.buffer,t.byteOffset,t.length);else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(i=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof e[0];if(l==="string")n="string",o=e;else if(l==="boolean")n="bool",o=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else if(e instanceof Uint8ClampedArray)n="uint8",o=Uint8Array.from(e);else{let l=Eu.get(e.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);n=l,o=e}if(i===void 0)i=[o.length];else if(!Array.isArray(i))throw new TypeError("A tensor's dims must be a number array");s=i,this.cpuData=o,this.dataLocation="cpu"}let a=IF(s);if(this.cpuData&&a!==this.cpuData.length&&!((n==="uint4"||n==="int4")&&Math.ceil(a/2)===this.cpuData.length))throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=s,this.size=a}static async fromImage(e,t){return CF(e,t)}static fromTexture(e,t){return PF(e,t)}static fromGpuBuffer(e,t){return SF(e,t)}static fromMLTensor(e,t){return kF(e,t)}static fromPinnedBuffer(e,t,r){return jF(e,t,r)}toDataURL(e){return TF(this,e)}toImageData(e){return EF(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}get mlTensor(){if(this.ensureValid(),!this.mlTensorData)throw new Error("The data is not stored as a WebNN MLTensor.");return this.mlTensorData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":case"ml-tensor":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,e&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.mlTensorData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return NF(this,e)}}}),Ca,$F=Ke(()=>{ub(),Ca=Ms}),hm,sv,Da,ea,DF=Ke(()=>{MF(),hm=(e,t)=>{(typeof Hs.trace>"u"?!Hs.wasm.trace:!Hs.trace)||console.timeStamp(`${e}::ORT::${t}`)},sv=(e,t)=>{var s;let r=((s=new Error().stack)==null?void 0:s.split(/\r\n|\r|\n/g))||[],n=!1;for(let a=0;a<r.length;a++){if(n&&!r[a].includes("TRACE_FUNC")){let o=`FUNC_${e}::${r[a].trim().split(" ")[1]}`;t&&(o+=`::${t}`),hm("CPU",o);return}r[a].includes("TRACE_FUNC")&&(n=!0)}},Da=e=>{(typeof Hs.trace>"u"?!Hs.wasm.trace:!Hs.trace)||sv("BEGIN",e)},ea=e=>{(typeof Hs.trace>"u"?!Hs.wasm.trace:!Hs.trace)||sv("END",e)}}),OF,l7=Ke(()=>{wF(),$F(),DF(),OF=class FF{constructor(t){this.handler=t}async run(t,r,n){Da();let s={},a={};if(typeof t!="object"||t===null||t instanceof Ca||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Ca)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(let d of r){if(typeof d!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(d)===-1)throw new RangeError(`'fetches' contains invalid output name: ${d}.`);s[d]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let d=!1,p=Object.getOwnPropertyNames(r);for(let u of this.outputNames)if(p.indexOf(u)!==-1){let m=r[u];(m===null||m instanceof Ca)&&(d=!0,o=!1,s[u]=m)}if(d){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let d of this.inputNames)if(typeof t[d]>"u")throw new Error(`input '${d}' is missing in 'feeds'.`);if(o)for(let d of this.outputNames)s[d]=null;let i=await this.handler.run(t,s,a),l={};for(let d in i)if(Object.hasOwnProperty.call(i,d)){let p=i[d];p instanceof Ca?l[d]=p:l[d]=new Ca(p.type,p.data,p.dims)}return ea(),l}async release(){return this.handler.dispose()}static async create(t,r,n,s){Da();let a,o={};if(typeof t=="string"){if(a=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(a=t,typeof r=="object"&&r!==null)o=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer){let p=t,u=0,m=t.byteLength;if(typeof r=="object"&&r!==null)o=r;else if(typeof r=="number"){if(u=r,!Number.isSafeInteger(u))throw new RangeError("'byteOffset' must be an integer.");if(u<0||u>=p.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${p.byteLength}).`);if(m=t.byteLength-u,typeof n=="number"){if(m=n,!Number.isSafeInteger(m))throw new RangeError("'byteLength' must be an integer.");if(m<=0||u+m>p.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${p.byteLength-u}].`);if(typeof s=="object"&&s!==null)o=s;else if(typeof s<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(p,u,m)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[i,l]=await yF(o),d=await i.createInferenceSessionHandler(a,l);return ea(),new FF(d)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}get inputMetadata(){return this.handler.inputMetadata}get outputMetadata(){return this.handler.outputMetadata}}}),mb,c7=Ke(()=>{l7(),mb=OF}),d7=Ke(()=>{}),u7=Ke(()=>{}),m7=Ke(()=>{}),p7=Ke(()=>{}),LF={};Sd(LF,{InferenceSession:()=>mb,TRACE:()=>hm,TRACE_FUNC_BEGIN:()=>Da,TRACE_FUNC_END:()=>ea,Tensor:()=>Ca,env:()=>Er,registerBackend:()=>bl});var Oa=Ke(()=>{t7(),n7(),c7(),$F(),d7(),u7(),DF(),m7(),p7()}),pb=Ke(()=>{}),RF={};Sd(RF,{default:()=>zF});var av,ov,zF,f7=Ke(()=>{var e;G4(),Ql(),fb(),av="ort-wasm-proxy-worker",ov=((e=globalThis.self)==null?void 0:e.name)===av,ov&&(self.onmessage=t=>{let{type:r,in:n}=t.data;try{switch(r){case"init-wasm":hb(n.wasm).then(()=>{Nb(n).then(()=>{postMessage({type:r})},s=>{postMessage({type:r,err:s})})},s=>{postMessage({type:r,err:s})});break;case"init-ep":{let{epName:s,env:a}=n;$b(a,s).then(()=>{postMessage({type:r})},o=>{postMessage({type:r,err:o})});break}case"copy-from":{let{buffer:s}=n,a=jh(s);postMessage({type:r,out:a});break}case"create":{let{model:s,options:a}=n;Db(s,a).then(o=>{postMessage({type:r,out:o})},o=>{postMessage({type:r,err:o})});break}case"release":Ob(n),postMessage({type:r});break;case"run":{let{sessionId:s,inputIndices:a,inputs:o,outputIndices:i,options:l}=n;Fb(s,a,o,i,new Array(i.length).fill(null),l).then(d=>{d.some(p=>p[3]!=="cpu")?postMessage({type:r,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:r,out:d},Rb([...o,...d]))},d=>{postMessage({type:r,err:d})});break}case"end-profiling":Lb(n),postMessage({type:r});break;default:}}catch(s){postMessage({type:r,err:s})}}),zF=ov?null:t=>new Worker(t??ys,{type:"module",name:av})}),BF={};Sd(BF,{default:()=>VF});var iv,lv,VF,GS,h7=Ke(()=>{var e,t;lv=(iv=import.meta.url,async function(r={}){var Xd;var n,s,a=r,o=new Promise((M,j)=>{n=M,s=j}),i=typeof window=="object",l=typeof WorkerGlobalScope<"u",d=l&&((Xd=self.name)==null?void 0:Xd.startsWith("em-pthread"));a.mountExternalData=(M,j)=>{M.startsWith("./")&&(M=M.substring(2)),(a.Eb||(a.Eb=new Map)).set(M,j)},a.unmountExternalData=()=>{delete a.Eb};var p=globalThis.SharedArrayBuffer??new WebAssembly.Memory({initial:0,maximum:0,pc:!0}).buffer.constructor;let u=M=>async(...j)=>{var L;try{if(a.Fb)throw Error("Session already started");let W=a.Fb={dc:j[0],errors:[]},J=await M(...j);if(a.Fb!==W)throw Error("Session mismatch");(L=a.Jb)==null||L.flush();let he=W.errors;if(0<he.length){let Ie=await Promise.all(he);if(Ie=Ie.filter(We=>We),0<Ie.length)throw Error(Ie.join(`
`))}return J}finally{a.Fb=null}};a.jsepInit=(M,j)=>{if(M==="webgpu"){[a.Jb,a.Ub,a.Yb,a.Kb,a.Xb,a.jb,a.Zb,a.ac,a.Vb,a.Wb,a.$b]=j;let L=a.Jb;a.jsepRegisterBuffer=(W,J,he,Ie)=>L.registerBuffer(W,J,he,Ie),a.jsepGetBuffer=W=>L.getBuffer(W),a.jsepCreateDownloader=(W,J,he)=>L.createDownloader(W,J,he),a.jsepOnCreateSession=W=>{L.onCreateSession(W)},a.jsepOnReleaseSession=W=>{L.onReleaseSession(W)},a.jsepOnRunStart=W=>L.onRunStart(W),a.bc=(W,J)=>{L.upload(W,J)}}else if(M==="webnn"){let L=j[0];[a.nc,a.Nb,a.webnnEnsureTensor,a.Ob,a.webnnDownloadTensor]=j.slice(1),a.webnnReleaseTensorId=a.Nb,a.webnnUploadTensor=a.Ob,a.webnnOnRunStart=W=>L.onRunStart(W),a.webnnOnRunEnd=L.onRunEnd.bind(L),a.webnnRegisterMLContext=(W,J)=>{L.registerMLContext(W,J)},a.webnnOnReleaseSession=W=>{L.onReleaseSession(W)},a.webnnCreateMLTensorDownloader=(W,J)=>L.createMLTensorDownloader(W,J),a.webnnRegisterMLTensor=(W,J,he,Ie)=>L.registerMLTensor(W,J,he,Ie),a.webnnCreateMLContext=W=>L.createMLContext(W),a.webnnRegisterMLConstant=(W,J,he,Ie,We,tt)=>L.registerMLConstant(W,J,he,Ie,We,a.Eb,tt),a.webnnRegisterGraphInput=L.registerGraphInput.bind(L),a.webnnIsGraphInput=L.isGraphInput.bind(L),a.webnnCreateTemporaryTensor=L.createTemporaryTensor.bind(L),a.webnnIsInt64Supported=L.isInt64Supported.bind(L)}};let m=()=>{let M=(j,L,W)=>(...J)=>{let he=Ir,Ie=L==null?void 0:L();J=j(...J);let We=L==null?void 0:L();return Ie!==We&&(j=We,W(Ie),L=W=null),Ir!=he?new Promise((tt,ft)=>{Sn={resolve:tt,reject:ft}}):J};(()=>{for(let j of["_OrtAppendExecutionProvider","_OrtCreateSession","_OrtRun","_OrtRunWithBinding","_OrtBindInput"])a[j]=M(a[j],()=>a[j],L=>a[j]=L)})(),u!==void 0&&(a._OrtRun=u(a._OrtRun),a._OrtRunWithBinding=u(a._OrtRunWithBinding)),m=void 0};a.asyncInit=()=>{m==null||m()};var f,h,_=Object.assign({},a),v=(M,j)=>{throw j},g="";(i||l)&&(l?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),iv&&(g=iv),g=g.startsWith("blob:")?"":g.slice(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),l&&(h=M=>{var j=new XMLHttpRequest;return j.open("GET",M,!1),j.responseType="arraybuffer",j.send(null),new Uint8Array(j.response)}),f=async M=>{if(ae(M))return new Promise((L,W)=>{var J=new XMLHttpRequest;J.open("GET",M,!0),J.responseType="arraybuffer",J.onload=()=>{J.status==200||J.status==0&&J.response?L(J.response):W(J.status)},J.onerror=W,J.send(null)});var j=await fetch(M,{credentials:"same-origin"});if(j.ok)return j.arrayBuffer();throw Error(j.status+" : "+j.url)});var x=console.log.bind(console),y=console.error.bind(console),w=x,b=y;Object.assign(a,_),_=null;var C,E,P,I,$,z,D,B,U,q,X,Z,K,ee=a.wasmBinary,oe=!1,ae=M=>M.startsWith("file://");function G(){return C.buffer!=I.buffer&&F(),I}function R(){return C.buffer!=I.buffer&&F(),$}function Q(){return C.buffer!=I.buffer&&F(),z}function ce(){return C.buffer!=I.buffer&&F(),D}function ne(){return C.buffer!=I.buffer&&F(),B}function me(){return C.buffer!=I.buffer&&F(),U}function we(){return C.buffer!=I.buffer&&F(),q}function Ne(){return C.buffer!=I.buffer&&F(),K}if(d){let M=function(j){try{var L=j.data,W=L.Bb;if(W==="load"){let J=[];self.onmessage=he=>J.push(he),self.startWorker=()=>{postMessage({Bb:"loaded"});for(let he of J)M(he);self.onmessage=M};for(let he of L.Rb)a[he]&&!a[he].proxy||(a[he]=(...Ie)=>{postMessage({Bb:"callHandler",Qb:he,args:Ie})},he=="print"&&(w=a[he]),he=="printErr"&&(b=a[he]));C=L.kc,F(),Me(L.lc)}else if(W==="run"){aa(L.Ab),rl(L.Ab,0,0,1,0,0),Pn(),fe(L.Ab),te||(Vd(),te=!0);try{La(L.fc,L.Hb)}catch(J){if(J!="unwind")throw J}}else L.target!=="setimmediate"&&(W==="checkMailbox"?te&&ge():W&&(b(`worker: received unknown command ${W}`),b(L)))}catch(J){throw Wd(),J}};var Me,te=!1;b=function(...j){j=j.join(" "),console.error(j)},self.alert=function(...j){postMessage({Bb:"alert",text:j.join(" "),ic:Go()})},self.onunhandledrejection=j=>{throw j.reason||j},self.onmessage=M}function F(){var M=C.buffer;a.HEAP8=I=new Int8Array(M),a.HEAP16=z=new Int16Array(M),a.HEAPU8=$=new Uint8Array(M),a.HEAPU16=D=new Uint16Array(M),a.HEAP32=B=new Int32Array(M),a.HEAPU32=U=new Uint32Array(M),a.HEAPF32=q=new Float32Array(M),a.HEAPF64=K=new Float64Array(M),a.HEAP64=X=new BigInt64Array(M),a.HEAPU64=Z=new BigUint64Array(M)}function ue(){d?startWorker(a):yt.Ca()}d||(C=new WebAssembly.Memory({initial:256,maximum:65536,shared:!0}),F());var xe,be=0,Ee=null;function ye(){if(--be==0&&Ee){var M=Ee;Ee=null,M()}}function Ae(M){throw b(M="Aborted("+M+")"),oe=!0,M=new WebAssembly.RuntimeError(M+". Build with -sASSERTIONS for more info."),s(M),M}function Ce(){return{a:{L:Ze,Aa:Be,b:an,$:He,A:N,pa:se,X:de,Z:Pe,qa:Fe,na:pt,ga:It,ma:St,J:Ot,Y:dt,V:Yt,oa:hr,W:Bn,va:on,E:za,Q:Rs,O:Vn,D:Ge,u:ut,r:gr,P:go,z:_e,R:O,ja:Y,T:$e,aa:at,M:Je,F:ct,ia:fe,sa:$t,t:Fr,Ba:pr,w:kn,o:fn,l:en,c:zs,n:Us,j:$m,v:Dm,p:Wo,f:Om,s:Fm,m:Lm,e:Rm,k:zm,i:Uo,g:Bm,d:Vm,da:Wm,ea:Um,fa:Gm,ba:Jl,ca:Id,N:ec,xa:zg,ua:Nd,h:Km,C:Qm,G:Xm,ta:qm,x:Ym,ra:Zm,U:Jm,q:Hm,y:ep,K:tp,S:$d,za:rp,ya:Dd,ka:Od,la:sp,_:Mt,B:Fd,I:nc,ha:Ld,H:Rd,a:C,wa:Qe}}}var De={829644:(M,j,L,W,J)=>{if(a===void 0||!a.Eb)return 1;if((M=Kt(Number(M>>>0))).startsWith("./")&&(M=M.substring(2)),!(M=a.Eb.get(M)))return 2;if(j=Number(j>>>0),L=Number(L>>>0),W=Number(W>>>0),j+L>M.byteLength)return 3;try{let he=M.subarray(j,j+L);switch(J){case 0:R().set(he,W>>>0);break;case 1:a.mc?a.mc(W,he):a.bc(W,he);break;default:return 4}return 0}catch{return 4}},830468:(M,j,L)=>{a.Ob(M,R().subarray(j>>>0,j+L>>>0))},830532:()=>a.nc(),830574:M=>{a.Nb(M)},830611:()=>{a.Vb()},830642:()=>{a.Wb()},830671:()=>{a.$b()},830696:M=>a.Ub(M),830729:M=>a.Yb(M),830761:(M,j,L)=>{a.Kb(Number(M),Number(j),Number(L),!0)},830824:(M,j,L)=>{a.Kb(Number(M),Number(j),Number(L))},830881:()=>typeof wasmOffsetConverter<"u",830938:M=>{a.jb("Abs",M,void 0)},830989:M=>{a.jb("Neg",M,void 0)},831040:M=>{a.jb("Floor",M,void 0)},831093:M=>{a.jb("Ceil",M,void 0)},831145:M=>{a.jb("Reciprocal",M,void 0)},831203:M=>{a.jb("Sqrt",M,void 0)},831255:M=>{a.jb("Exp",M,void 0)},831306:M=>{a.jb("Erf",M,void 0)},831357:M=>{a.jb("Sigmoid",M,void 0)},831412:(M,j,L)=>{a.jb("HardSigmoid",M,{alpha:j,beta:L})},831491:M=>{a.jb("Log",M,void 0)},831542:M=>{a.jb("Sin",M,void 0)},831593:M=>{a.jb("Cos",M,void 0)},831644:M=>{a.jb("Tan",M,void 0)},831695:M=>{a.jb("Asin",M,void 0)},831747:M=>{a.jb("Acos",M,void 0)},831799:M=>{a.jb("Atan",M,void 0)},831851:M=>{a.jb("Sinh",M,void 0)},831903:M=>{a.jb("Cosh",M,void 0)},831955:M=>{a.jb("Asinh",M,void 0)},832008:M=>{a.jb("Acosh",M,void 0)},832061:M=>{a.jb("Atanh",M,void 0)},832114:M=>{a.jb("Tanh",M,void 0)},832166:M=>{a.jb("Not",M,void 0)},832217:(M,j,L)=>{a.jb("Clip",M,{min:j,max:L})},832286:M=>{a.jb("Clip",M,void 0)},832338:(M,j)=>{a.jb("Elu",M,{alpha:j})},832396:M=>{a.jb("Gelu",M,void 0)},832448:M=>{a.jb("Relu",M,void 0)},832500:(M,j)=>{a.jb("LeakyRelu",M,{alpha:j})},832564:(M,j)=>{a.jb("ThresholdedRelu",M,{alpha:j})},832634:(M,j)=>{a.jb("Cast",M,{to:j})},832692:M=>{a.jb("Add",M,void 0)},832743:M=>{a.jb("Sub",M,void 0)},832794:M=>{a.jb("Mul",M,void 0)},832845:M=>{a.jb("Div",M,void 0)},832896:M=>{a.jb("Pow",M,void 0)},832947:M=>{a.jb("Equal",M,void 0)},833e3:M=>{a.jb("Greater",M,void 0)},833055:M=>{a.jb("GreaterOrEqual",M,void 0)},833117:M=>{a.jb("Less",M,void 0)},833169:M=>{a.jb("LessOrEqual",M,void 0)},833228:(M,j,L,W,J)=>{a.jb("ReduceMean",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},833403:(M,j,L,W,J)=>{a.jb("ReduceMax",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},833577:(M,j,L,W,J)=>{a.jb("ReduceMin",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},833751:(M,j,L,W,J)=>{a.jb("ReduceProd",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},833926:(M,j,L,W,J)=>{a.jb("ReduceSum",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834100:(M,j,L,W,J)=>{a.jb("ReduceL1",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834273:(M,j,L,W,J)=>{a.jb("ReduceL2",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834446:(M,j,L,W,J)=>{a.jb("ReduceLogSum",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834623:(M,j,L,W,J)=>{a.jb("ReduceSumSquare",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834803:(M,j,L,W,J)=>{a.jb("ReduceLogSumExp",M,{keepDims:!!j,noopWithEmptyAxes:!!L,axes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},834983:M=>{a.jb("Where",M,void 0)},835036:(M,j,L)=>{a.jb("Transpose",M,{perm:j?Array.from(ne().subarray(Number(j)>>>0,Number(L)>>>0)):[]})},835160:(M,j,L,W)=>{a.jb("DepthToSpace",M,{blocksize:j,mode:Kt(L),format:W?"NHWC":"NCHW"})},835293:(M,j,L,W)=>{a.jb("DepthToSpace",M,{blocksize:j,mode:Kt(L),format:W?"NHWC":"NCHW"})},835426:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn,xo)=>{a.jb("ConvTranspose",M,{format:tt?"NHWC":"NCHW",autoPad:j,dilations:[L],group:W,kernelShape:[J],pads:[he,Ie],strides:[We],wIsConst:()=>!!G()[ft>>>0],outputPadding:Lt?Array.from(ne().subarray(Number(Lt)>>>0,Number(Jt)>>>0)):[],outputShape:ir?Array.from(ne().subarray(Number(ir)>>>0,Number(hn)>>>0)):[],activation:Kt(xo)})},835859:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("ConvTranspose",M,{format:We?"NHWC":"NCHW",autoPad:j,dilations:Array.from(ne().subarray(Number(L)>>>0,2+(Number(L)>>>0)>>>0)),group:W,kernelShape:Array.from(ne().subarray(Number(J)>>>0,2+(Number(J)>>>0)>>>0)),pads:Array.from(ne().subarray(Number(he)>>>0,4+(Number(he)>>>0)>>>0)),strides:Array.from(ne().subarray(Number(Ie)>>>0,2+(Number(Ie)>>>0)>>>0)),wIsConst:()=>!!G()[tt>>>0],outputPadding:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],outputShape:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[],activation:Kt(hn)})},836520:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn,xo)=>{a.jb("ConvTranspose",M,{format:tt?"NHWC":"NCHW",autoPad:j,dilations:[L],group:W,kernelShape:[J],pads:[he,Ie],strides:[We],wIsConst:()=>!!G()[ft>>>0],outputPadding:Lt?Array.from(ne().subarray(Number(Lt)>>>0,Number(Jt)>>>0)):[],outputShape:ir?Array.from(ne().subarray(Number(ir)>>>0,Number(hn)>>>0)):[],activation:Kt(xo)})},836953:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("ConvTranspose",M,{format:We?"NHWC":"NCHW",autoPad:j,dilations:Array.from(ne().subarray(Number(L)>>>0,2+(Number(L)>>>0)>>>0)),group:W,kernelShape:Array.from(ne().subarray(Number(J)>>>0,2+(Number(J)>>>0)>>>0)),pads:Array.from(ne().subarray(Number(he)>>>0,4+(Number(he)>>>0)>>>0)),strides:Array.from(ne().subarray(Number(Ie)>>>0,2+(Number(Ie)>>>0)>>>0)),wIsConst:()=>!!G()[tt>>>0],outputPadding:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],outputShape:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[],activation:Kt(hn)})},837614:(M,j)=>{a.jb("GlobalAveragePool",M,{format:j?"NHWC":"NCHW"})},837705:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("AveragePool",M,{format:hn?"NHWC":"NCHW",auto_pad:j,ceil_mode:L,count_include_pad:W,storage_order:J,dilations:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(ne().subarray(Number(We)>>>0,Number(tt)>>>0)):[],pads:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],strides:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[]})},838184:(M,j)=>{a.jb("GlobalAveragePool",M,{format:j?"NHWC":"NCHW"})},838275:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("AveragePool",M,{format:hn?"NHWC":"NCHW",auto_pad:j,ceil_mode:L,count_include_pad:W,storage_order:J,dilations:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(ne().subarray(Number(We)>>>0,Number(tt)>>>0)):[],pads:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],strides:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[]})},838754:(M,j)=>{a.jb("GlobalMaxPool",M,{format:j?"NHWC":"NCHW"})},838841:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("MaxPool",M,{format:hn?"NHWC":"NCHW",auto_pad:j,ceil_mode:L,count_include_pad:W,storage_order:J,dilations:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(ne().subarray(Number(We)>>>0,Number(tt)>>>0)):[],pads:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],strides:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[]})},839316:(M,j)=>{a.jb("GlobalMaxPool",M,{format:j?"NHWC":"NCHW"})},839403:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn)=>{a.jb("MaxPool",M,{format:hn?"NHWC":"NCHW",auto_pad:j,ceil_mode:L,count_include_pad:W,storage_order:J,dilations:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[],kernel_shape:We?Array.from(ne().subarray(Number(We)>>>0,Number(tt)>>>0)):[],pads:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],strides:Jt?Array.from(ne().subarray(Number(Jt)>>>0,Number(ir)>>>0)):[]})},839878:(M,j,L,W,J)=>{a.jb("Gemm",M,{alpha:j,beta:L,transA:W,transB:J})},839982:M=>{a.jb("MatMul",M,void 0)},840036:(M,j,L,W)=>{a.jb("ArgMax",M,{keepDims:!!j,selectLastIndex:!!L,axis:W})},840144:(M,j,L,W)=>{a.jb("ArgMin",M,{keepDims:!!j,selectLastIndex:!!L,axis:W})},840252:(M,j)=>{a.jb("Softmax",M,{axis:j})},840315:(M,j)=>{a.jb("Concat",M,{axis:j})},840375:(M,j,L,W,J)=>{a.jb("Split",M,{axis:j,numOutputs:L,splitSizes:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},840531:M=>{a.jb("Expand",M,void 0)},840585:(M,j)=>{a.jb("Gather",M,{axis:Number(j)})},840656:(M,j)=>{a.jb("GatherElements",M,{axis:Number(j)})},840735:(M,j)=>{a.jb("GatherND",M,{batch_dims:Number(j)})},840814:(M,j,L,W,J,he,Ie,We,tt,ft,Lt)=>{a.jb("Resize",M,{antialias:j,axes:L?Array.from(ne().subarray(Number(L)>>>0,Number(W)>>>0)):[],coordinateTransformMode:Kt(J),cubicCoeffA:he,excludeOutside:Ie,extrapolationValue:We,keepAspectRatioPolicy:Kt(tt),mode:Kt(ft),nearestMode:Kt(Lt)})},841176:(M,j,L,W,J,he,Ie)=>{a.jb("Slice",M,{starts:j?Array.from(ne().subarray(Number(j)>>>0,Number(L)>>>0)):[],ends:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[],axes:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[]})},841440:M=>{a.jb("Tile",M,void 0)},841492:(M,j,L)=>{a.jb("InstanceNormalization",M,{epsilon:j,format:L?"NHWC":"NCHW"})},841606:(M,j,L)=>{a.jb("InstanceNormalization",M,{epsilon:j,format:L?"NHWC":"NCHW"})},841720:M=>{a.jb("Range",M,void 0)},841773:(M,j)=>{a.jb("Einsum",M,{equation:Kt(j)})},841854:(M,j,L,W,J)=>{a.jb("Pad",M,{mode:j,value:L,pads:W?Array.from(ne().subarray(Number(W)>>>0,Number(J)>>>0)):[]})},841997:(M,j,L,W,J,he)=>{a.jb("BatchNormalization",M,{epsilon:j,momentum:L,spatial:!!J,trainingMode:!!W,format:he?"NHWC":"NCHW"})},842166:(M,j,L,W,J,he)=>{a.jb("BatchNormalization",M,{epsilon:j,momentum:L,spatial:!!J,trainingMode:!!W,format:he?"NHWC":"NCHW"})},842335:(M,j,L)=>{a.jb("CumSum",M,{exclusive:Number(j),reverse:Number(L)})},842432:(M,j,L)=>{a.jb("DequantizeLinear",M,{axis:j,blockSize:L})},842522:(M,j,L,W,J)=>{a.jb("GridSample",M,{align_corners:j,mode:Kt(L),padding_mode:Kt(W),format:J?"NHWC":"NCHW"})},842692:(M,j,L,W,J)=>{a.jb("GridSample",M,{align_corners:j,mode:Kt(L),padding_mode:Kt(W),format:J?"NHWC":"NCHW"})},842862:(M,j)=>{a.jb("ScatterND",M,{reduction:Kt(j)})},842947:(M,j,L,W,J,he,Ie,We,tt)=>{a.jb("Attention",M,{numHeads:j,isUnidirectional:L,maskFilterValue:W,scale:J,doRotary:he,qkvHiddenSizes:Ie?Array.from(ne().subarray(Number(We)>>>0,Number(We)+Ie>>>0)):[],pastPresentShareBuffer:!!tt})},843219:M=>{a.jb("BiasAdd",M,void 0)},843274:M=>{a.jb("BiasSplitGelu",M,void 0)},843335:M=>{a.jb("FastGelu",M,void 0)},843391:(M,j,L,W,J,he,Ie,We,tt,ft,Lt,Jt,ir,hn,xo,Yd)=>{a.jb("Conv",M,{format:Jt?"NHWC":"NCHW",auto_pad:j,dilations:L?Array.from(ne().subarray(Number(L)>>>0,Number(W)>>>0)):[],group:J,kernel_shape:he?Array.from(ne().subarray(Number(he)>>>0,Number(Ie)>>>0)):[],pads:We?Array.from(ne().subarray(Number(We)>>>0,Number(tt)>>>0)):[],strides:ft?Array.from(ne().subarray(Number(ft)>>>0,Number(Lt)>>>0)):[],w_is_const:()=>!!G()[Number(ir)>>>0],activation:Kt(hn),activation_params:xo?Array.from(we().subarray(Number(xo)>>>0,Number(Yd)>>>0)):[]})},843975:M=>{a.jb("Gelu",M,void 0)},844027:(M,j,L,W,J,he,Ie,We,tt)=>{a.jb("GroupQueryAttention",M,{numHeads:j,kvNumHeads:L,scale:W,softcap:J,doRotary:he,rotaryInterleaved:Ie,smoothSoftmax:We,localWindowSize:tt})},844244:(M,j,L,W)=>{a.jb("LayerNormalization",M,{axis:j,epsilon:L,simplified:!!W})},844355:(M,j,L,W)=>{a.jb("LayerNormalization",M,{axis:j,epsilon:L,simplified:!!W})},844466:(M,j,L,W,J,he)=>{a.jb("MatMulNBits",M,{k:j,n:L,accuracyLevel:W,bits:J,blockSize:he})},844593:(M,j,L,W,J,he)=>{a.jb("MultiHeadAttention",M,{numHeads:j,isUnidirectional:L,maskFilterValue:W,scale:J,doRotary:he})},844752:(M,j)=>{a.jb("QuickGelu",M,{alpha:j})},844816:(M,j,L,W,J)=>{a.jb("RotaryEmbedding",M,{interleaved:!!j,numHeads:L,rotaryEmbeddingDim:W,scale:J})},844955:(M,j,L)=>{a.jb("SkipLayerNormalization",M,{epsilon:j,simplified:!!L})},845057:(M,j,L)=>{a.jb("SkipLayerNormalization",M,{epsilon:j,simplified:!!L})},845159:(M,j,L,W)=>{a.jb("GatherBlockQuantized",M,{gatherAxis:j,quantizeAxis:L,blockSize:W})},845280:M=>{a.Zb(M)},845314:(M,j)=>a.ac(Number(M),Number(j),a.Fb.dc,a.Fb.errors)};function Be(M,j,L){return Ws(async()=>{await a.Xb(Number(M),Number(j),Number(L))})}function Ze(){return typeof wasmOffsetConverter<"u"}class Se{constructor(j){le(this,"name","ExitStatus");this.message=`Program terminated with exit(${j})`,this.status=j}}var it=M=>{M.terminate(),M.onmessage=()=>{}},et=[],lt=M=>{Wt.length==0&&(Zr(),br(Wt[0]));var j=Wt.pop();if(!j)return 6;vt.push(j),Yr[M.Ab]=j,j.Ab=M.Ab;var L={Bb:"run",fc:M.ec,Hb:M.Hb,Ab:M.Ab};return j.postMessage(L,M.Mb),0},st=0,Re=(M,j,...L)=>{for(var W=2*L.length,J=ic(),he=sl(8*W),Ie=he>>>3,We=0;We<L.length;We++){var tt=L[We];typeof tt=="bigint"?(X[Ie+2*We]=1n,X[Ie+2*We+1]=tt):(X[Ie+2*We]=0n,Ne()[Ie+2*We+1>>>0]=tt)}return M=Ud(M,0,W,he,j),nl(J),M};function Qe(M){if(d)return Re(0,1,M);if(P=M,!(0<st)){for(var j of vt)it(j);for(j of Wt)it(j);Wt=[],vt=[],Yr={},oe=!0}v(0,new Se(M))}function Pt(M){if(d)return Re(1,0,M);Mt(M)}var Mt=M=>{if(P=M,d)throw Pt(M),"unwind";Qe(M)},Wt=[],vt=[],wr=[],Yr={},Br=M=>{var j=M.Ab;delete Yr[j],Wt.push(M),vt.splice(vt.indexOf(M),1),M.Ab=0,sc(j)};function Pn(){wr.forEach(M=>M())}var br=M=>new Promise(j=>{M.onmessage=J=>{var he=(J=J.data).Bb;if(J.Gb&&J.Gb!=Go()){var Ie=Yr[J.Gb];Ie?Ie.postMessage(J,J.Mb):b(`Internal error! Worker sent a message "${he}" to target pthread ${J.Gb}, but that thread no longer exists!`)}else he==="checkMailbox"?ge():he==="spawnThread"?lt(J):he==="cleanupThread"?Br(Yr[J.hc]):he==="loaded"?(M.loaded=!0,j(M)):he==="alert"?alert(`Thread ${J.ic}: ${J.text}`):J.target==="setimmediate"?M.postMessage(J):he==="callHandler"?a[J.Qb](...J.args):he&&b(`worker sent an unknown command ${he}`)},M.onerror=J=>{throw b(`worker sent an error! ${J.filename}:${J.lineno}: ${J.message}`),J};var L,W=[];for(L of[])a.propertyIsEnumerable(L)&&W.push(L);M.postMessage({Bb:"load",Rb:W,kc:C,lc:E})});function Zr(){var M=new Worker((()=>{let j=URL;return import.meta.url>"file:"&&import.meta.url<"file;"?new j("ort.bundle.min.mjs",import.meta.url):new URL(import.meta.url)})(),{type:"module",workerData:"em-pthread",name:"em-pthread"});Wt.push(M)}var aa=M=>{F();var j=me()[M+52>>>2>>>0];M=me()[M+56>>>2>>>0],Hd(j,j-M),nl(j)},La=(M,j)=>{st=0,M=qd(M,j),0<st?P=M:ac(M)};class Os{constructor(j){this.Ib=j-24}}function an(M,j,L){var W=new Os(M>>>=0);throw j>>>=0,L>>>=0,me()[W.Ib+16>>>2>>>0]=0,me()[W.Ib+4>>>2>>>0]=j,me()[W.Ib+8>>>2>>>0]=L,M}function oa(M,j,L,W){return d?Re(2,1,M,j,L,W):He(M,j,L,W)}function He(M,j,L,W){if(M>>>=0,L>>>=0,W>>>=0,p===void 0)return 6;var J=[];return d&&J.length===0?oa(M,j>>>=0,L,W):(M={ec:L,Ab:M,Hb:W,Mb:J},d?(M.Bb="spawnThread",postMessage(M,J),0):lt(M))}var Xt=typeof TextDecoder<"u"?new TextDecoder:void 0,mt=(M,j=0,L=NaN)=>{var W=(j>>>=0)+L;for(L=j;M[L]&&!(L>=W);)++L;if(16<L-j&&M.buffer&&Xt)return Xt.decode(M.buffer instanceof ArrayBuffer?M.subarray(j,L):M.slice(j,L));for(W="";j<L;){var J=M[j++];if(128&J){var he=63&M[j++];if((224&J)==192)W+=String.fromCharCode((31&J)<<6|he);else{var Ie=63&M[j++];65536>(J=(240&J)==224?(15&J)<<12|he<<6|Ie:(7&J)<<18|he<<12|Ie<<6|63&M[j++])?W+=String.fromCharCode(J):(J-=65536,W+=String.fromCharCode(55296|J>>10,56320|1023&J))}}else W+=String.fromCharCode(J)}return W},Kt=(M,j)=>(M>>>=0)?mt(R(),M,j):"";function N(M,j,L){return d?Re(3,1,M,j,L):0}function se(M,j){if(d)return Re(4,1,M,j)}var H=M=>{for(var j=0,L=0;L<M.length;++L){var W=M.charCodeAt(L);127>=W?j++:2047>=W?j+=2:55296<=W&&57343>=W?(j+=4,++L):j+=3}return j},re=(M,j,L)=>{var W=R();if(j>>>=0,0<L){var J=j;L=j+L-1;for(var he=0;he<M.length;++he){var Ie=M.charCodeAt(he);if(55296<=Ie&&57343>=Ie&&(Ie=65536+((1023&Ie)<<10)|1023&M.charCodeAt(++he)),127>=Ie){if(j>=L)break;W[j++>>>0]=Ie}else{if(2047>=Ie){if(j+1>=L)break;W[j++>>>0]=192|Ie>>6}else{if(65535>=Ie){if(j+2>=L)break;W[j++>>>0]=224|Ie>>12}else{if(j+3>=L)break;W[j++>>>0]=240|Ie>>18,W[j++>>>0]=128|Ie>>12&63}W[j++>>>0]=128|Ie>>6&63}W[j++>>>0]=128|63&Ie}}W[j>>>0]=0,M=j-J}else M=0;return M};function de(M,j){if(d)return Re(5,1,M,j)}function Pe(M,j,L){if(d)return Re(6,1,M,j,L)}function Fe(M,j,L){return d?Re(7,1,M,j,L):0}function pt(M,j){if(d)return Re(8,1,M,j)}function It(M,j,L){if(d)return Re(9,1,M,j,L)}function St(M,j,L,W){if(d)return Re(10,1,M,j,L,W)}function Ot(M,j,L,W){if(d)return Re(11,1,M,j,L,W)}function dt(M,j,L,W){if(d)return Re(12,1,M,j,L,W)}function Yt(M){if(d)return Re(13,1,M)}function hr(M,j){if(d)return Re(14,1,M,j)}function Bn(M,j,L){if(d)return Re(15,1,M,j,L)}var Zn,Vr,on=()=>Ae(""),Wr=M=>{for(var j="";R()[M>>>0];)j+=Zn[R()[M++>>>0]];return j},Fs={},Ls={};function yn(M,j,L={}){return function(W,J,he={}){var Ie=J.name;if(!W)throw new Vr(`type "${Ie}" must have a positive integer typeid pointer`);if(Ls.hasOwnProperty(W)){if(he.Sb)return;throw new Vr(`Cannot register type '${Ie}' twice`)}Ls[W]=J,Fs.hasOwnProperty(W)&&(J=Fs[W],delete Fs[W],J.forEach(We=>We()))}(M,j,L)}var Ra=(M,j,L)=>{switch(j){case 1:return L?W=>G()[W>>>0]:W=>R()[W>>>0];case 2:return L?W=>Q()[W>>>1>>>0]:W=>ce()[W>>>1>>>0];case 4:return L?W=>ne()[W>>>2>>>0]:W=>me()[W>>>2>>>0];case 8:return L?W=>X[W>>>3]:W=>Z[W>>>3];default:throw new TypeError(`invalid integer width (${j}): ${M}`)}};function za(M,j,L){L>>>=0,yn(M>>>=0,{name:j=Wr(j>>>0),fromWireType:W=>W,toWireType:function(W,J){if(typeof J!="bigint"&&typeof J!="number")throw J=J===null?"null":(W=typeof J)=="object"||W==="array"||W==="function"?J.toString():""+J,new TypeError(`Cannot convert "${J}" to ${this.name}`);return typeof J=="number"&&(J=BigInt(J)),J},Cb:mn,readValueFromPointer:Ra(j,L,j.indexOf("u")==-1),Db:null})}var mn=8;function Rs(M,j,L,W){yn(M>>>=0,{name:j=Wr(j>>>0),fromWireType:function(J){return!!J},toWireType:function(J,he){return he?L:W},Cb:mn,readValueFromPointer:function(J){return this.fromWireType(R()[J>>>0])},Db:null})}var cs=[],Dn=[];function zs(M){9<(M>>>=0)&&--Dn[M+1]==0&&(Dn[M]=void 0,cs.push(M))}var Jr=M=>{if(!M)throw new Vr("Cannot use deleted val. handle = "+M);return Dn[M]},Or=M=>{switch(M){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let j=cs.pop()||Dn.length;return Dn[j]=M,Dn[j+1]=1,j}};function Bs(M){return this.fromWireType(me()[M>>>2>>>0])}var ho={name:"emscripten::val",fromWireType:M=>{var j=Jr(M);return zs(M),j},toWireType:(M,j)=>Or(j),Cb:mn,readValueFromPointer:Bs,Db:null};function Vn(M){return yn(M>>>0,ho)}var Ue=(M,j)=>{switch(j){case 4:return function(L){return this.fromWireType(we()[L>>>2>>>0])};case 8:return function(L){return this.fromWireType(Ne()[L>>>3>>>0])};default:throw new TypeError(`invalid float width (${j}): ${M}`)}};function Ge(M,j,L){L>>>=0,yn(M>>>=0,{name:j=Wr(j>>>0),fromWireType:W=>W,toWireType:(W,J)=>J,Cb:mn,readValueFromPointer:Ue(j,L),Db:null})}function ut(M,j,L,W,J){if(M>>>=0,L>>>=0,j=Wr(j>>>0),J===-1&&(J=4294967295),J=We=>We,W===0){var he=32-8*L;J=We=>We<<he>>>he}var Ie=j.includes("unsigned")?function(We,tt){return tt>>>0}:function(We,tt){return tt};yn(M,{name:j,fromWireType:J,toWireType:Ie,Cb:mn,readValueFromPointer:Ra(j,L,W!==0),Db:null})}function gr(M,j,L){function W(he){var Ie=me()[he>>>2>>>0];return he=me()[he+4>>>2>>>0],new J(G().buffer,he,Ie)}var J=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][j];yn(M>>>=0,{name:L=Wr(L>>>0),fromWireType:W,Cb:mn,readValueFromPointer:W},{Sb:!0})}function go(M,j){yn(M>>>=0,{name:j=Wr(j>>>0),fromWireType:function(L){for(var W,J=me()[L>>>2>>>0],he=L+4,Ie=he,We=0;We<=J;++We){var tt=he+We;We!=J&&R()[tt>>>0]!=0||(Ie=Kt(Ie,tt-Ie),W===void 0?W=Ie:(W+="\0",W+=Ie),Ie=tt+1)}return xs(L),W},toWireType:function(L,W){W instanceof ArrayBuffer&&(W=new Uint8Array(W));var J=typeof W=="string";if(!(J||W instanceof Uint8Array||W instanceof Uint8ClampedArray||W instanceof Int8Array))throw new Vr("Cannot pass non-string to std::string");var he=J?H(W):W.length,Ie=tl(4+he+1),We=Ie+4;if(me()[Ie>>>2>>>0]=he,J)re(W,We,he+1);else if(J)for(J=0;J<he;++J){var tt=W.charCodeAt(J);if(255<tt)throw xs(Ie),new Vr("String has UTF-16 code units that do not fit in 8 bits");R()[We+J>>>0]=tt}else for(J=0;J<he;++J)R()[We+J>>>0]=W[J];return L!==null&&L.push(xs,Ie),Ie},Cb:mn,readValueFromPointer:Bs,Db(L){xs(L)}})}var ia=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,_s=(M,j)=>{for(var L=M>>1,W=L+j/2;!(L>=W)&&ce()[L>>>0];)++L;if(32<(L<<=1)-M&&ia)return ia.decode(R().slice(M,L));for(L="",W=0;!(W>=j/2);++W){var J=Q()[M+2*W>>>1>>>0];if(J==0)break;L+=String.fromCharCode(J)}return L},Hi=(M,j,L)=>{if(L??(L=2147483647),2>L)return 0;var W=j;L=(L-=2)<2*M.length?L/2:M.length;for(var J=0;J<L;++J){var he=M.charCodeAt(J);Q()[j>>>1>>>0]=he,j+=2}return Q()[j>>>1>>>0]=0,j-W},qi=M=>2*M.length,Ki=(M,j)=>{for(var L=0,W="";!(L>=j/4);){var J=ne()[M+4*L>>>2>>>0];if(J==0)break;++L,65536<=J?(J-=65536,W+=String.fromCharCode(55296|J>>10,56320|1023&J)):W+=String.fromCharCode(J)}return W},Qi=(M,j,L)=>{if(j>>>=0,L??(L=2147483647),4>L)return 0;var W=j;L=W+L-4;for(var J=0;J<M.length;++J){var he=M.charCodeAt(J);if(55296<=he&&57343>=he&&(he=65536+((1023&he)<<10)|1023&M.charCodeAt(++J)),ne()[j>>>2>>>0]=he,(j+=4)+4>L)break}return ne()[j>>>2>>>0]=0,j-W},Xi=M=>{for(var j=0,L=0;L<M.length;++L){var W=M.charCodeAt(L);55296<=W&&57343>=W&&++L,j+=4}return j};function _e(M,j,L){if(M>>>=0,j>>>=0,L=Wr(L>>>=0),j===2)var W=_s,J=Hi,he=qi,Ie=We=>ce()[We>>>1>>>0];else j===4&&(W=Ki,J=Qi,he=Xi,Ie=We=>me()[We>>>2>>>0]);yn(M,{name:L,fromWireType:We=>{for(var tt,ft=me()[We>>>2>>>0],Lt=We+4,Jt=0;Jt<=ft;++Jt){var ir=We+4+Jt*j;Jt!=ft&&Ie(ir)!=0||(Lt=W(Lt,ir-Lt),tt===void 0?tt=Lt:(tt+="\0",tt+=Lt),Lt=ir+j)}return xs(We),tt},toWireType:(We,tt)=>{if(typeof tt!="string")throw new Vr(`Cannot pass non-string to C++ string type ${L}`);var ft=he(tt),Lt=tl(4+ft+j);return me()[Lt>>>2>>>0]=ft/j,J(tt,Lt+4,ft+j),We!==null&&We.push(xs,Lt),Lt},Cb:mn,readValueFromPointer:Bs,Db(We){xs(We)}})}function O(M,j){yn(M>>>=0,{Tb:!0,name:j=Wr(j>>>0),Cb:0,fromWireType:()=>{},toWireType:()=>{}})}function Y(M){rl(M>>>0,!l,1,!i,131072,!1),Pn()}var ie=M=>{if(!oe)try{if(M(),!(0<st))try{d?ac(P):Mt(P)}catch(j){j instanceof Se||j=="unwind"||v(0,j)}}catch(j){j instanceof Se||j=="unwind"||v(0,j)}};function fe(M){M>>>=0,typeof Atomics.jc=="function"&&(Atomics.jc(ne(),M>>>2,M).value.then(ge),M+=128,Atomics.store(ne(),M>>>2,1))}var ge=()=>{var M=Go();M&&(fe(M),ie(oc))};function $e(M,j){(M>>>=0)==j>>>0?setTimeout(ge):d?postMessage({Gb:M,Bb:"checkMailbox"}):(M=Yr[M])&&M.postMessage({Bb:"checkMailbox"})}var qe=[];function at(M,j,L,W,J){for(j>>>=0,W/=2,qe.length=W,L=J>>>0>>>3,J=0;J<W;J++)qe[J]=X[L+2*J]?X[L+2*J+1]:Ne()[L+2*J+1>>>0];return(j?De[j]:op[M])(...qe)}var Je=()=>{st=0};function ct(M){M>>>=0,d?postMessage({Bb:"cleanupThread",hc:M}):Br(Yr[M])}function $t(M){}var Zt=(M,j)=>{var L=Ls[M];if(L===void 0)throw M=Bd(M),L=Wr(M),xs(M),new Vr(`${j} has unknown type ${L}`);return L},nr=(M,j,L)=>{var W=[];return M=M.toWireType(W,L),W.length&&(me()[j>>>2>>>0]=Or(W)),M};function Fr(M,j,L){return j>>>=0,L>>>=0,M=Jr(M>>>0),j=Zt(j,"emval::as"),nr(j,L,M)}function pr(M,j){return j>>>=0,M=Jr(M>>>0),(j=Zt(j,"emval::as")).toWireType(null,M)}var Ar=M=>{try{M()}catch(j){Ae(j)}},Lr=0,Ir=null,Jn=0,pn=[],la={},Mr={},Ur=0,Sn=null,Vs=[];function Ws(M){return function(j){if(!oe){if(Lr===0){var L=!1,W=!1;j((J=0)=>{if(!oe&&(Jn=J,L=!0,W)){Lr=2,Ar(()=>Qd(Ir)),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.resume(),J=!1;try{var he=function(){var tt=ne()[Ir+8>>>2>>>0];return tt=yt[Mr[tt]],--st,tt()}()}catch(tt){he=tt,J=!0}var Ie=!1;if(!Ir){var We=Sn;We&&(Sn=null,(J?We.reject:We.resolve)(he),Ie=!0)}if(J&&!Ie)throw he}}),W=!0,L||(Lr=1,Ir=function(){var J=tl(65548),he=J+12;me()[J>>>2>>>0]=he,me()[J+4>>>2>>>0]=he+65536,he=pn[0];var Ie=la[he];return Ie===void 0&&(Ie=Ur++,la[he]=Ie,Mr[Ie]=he),he=Ie,ne()[J+8>>>2>>>0]=he,J}(),typeof MainLoop<"u"&&MainLoop.Pb&&MainLoop.pause(),Ar(()=>lc(Ir)))}else Lr===2?(Lr=0,Ar(cc),xs(Ir),Ir=null,Vs.forEach(ie)):Ae(`invalid state: ${Lr}`);return Jn}}(j=>{M().then(j)})}function kn(M){return M>>>=0,Ws(async()=>{var j=await Jr(M);return Or(j)})}var Wn=[];function fn(M,j,L,W){return L>>>=0,W>>>=0,(M=Wn[M>>>0])(null,j=Jr(j>>>0),L,W)}var Gr={},Cr=M=>{var j=Gr[M];return j===void 0?Wr(M):j};function en(M,j,L,W,J){return L>>>=0,W>>>=0,J>>>=0,(M=Wn[M>>>0])(j=Jr(j>>>0),j[L=Cr(L)],W,J)}var Un=()=>typeof globalThis=="object"?globalThis:Function("return this")();function Us(M){return(M>>>=0)==0?Or(Un()):(M=Cr(M),Or(Un()[M]))}var Yl=M=>{var j=Wn.length;return Wn.push(M),j},Nm=(M,j)=>{for(var L=Array(M),W=0;W<M;++W)L[W]=Zt(me()[j+4*W>>>2>>>0],"parameter "+W);return L},kd=(M,j)=>Object.defineProperty(j,"name",{value:M});function $m(M,j,L){var W=(j=Nm(M,j>>>0)).shift();M--;var J=`return function (obj, func, destructorsRef, args) {
`,he=0,Ie=[];L===0&&Ie.push("obj");for(var We=["retType"],tt=[W],ft=0;ft<M;++ft)Ie.push("arg"+ft),We.push("argType"+ft),tt.push(j[ft]),J+=`  var arg${ft} = argType${ft}.readValueFromPointer(args${he?"+"+he:""});
`,he+=j[ft].Cb;return J+=`  var rv = ${L===1?"new func":"func.call"}(${Ie.join(", ")});
`,W.Tb||(We.push("emval_returnValue"),tt.push(nr),J+=`  return emval_returnValue(retType, destructorsRef, rv);
`),We.push(J+`};
`),M=function(Lt){var Jt=Function;if(!(Jt instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Jt} which is not a function`);var ir=kd(Jt.name||"unknownFunctionName",function(){});return ir.prototype=Jt.prototype,ir=new ir,(Lt=Jt.apply(ir,Lt))instanceof Object?Lt:ir}(We)(...tt),L=`methodCaller<(${j.map(Lt=>Lt.name).join(", ")}) => ${W.name}>`,Yl(kd(L,M))}function Dm(M){return M=Cr(M>>>0),Or(a[M])}function Wo(M,j){return j>>>=0,M=Jr(M>>>0),j=Jr(j),Or(M[j])}function Om(M){9<(M>>>=0)&&(Dn[M+1]+=1)}function Fm(){return Or([])}function Lm(M){M=Jr(M>>>0);for(var j=Array(M.length),L=0;L<M.length;L++)j[L]=M[L];return Or(j)}function Rm(M){return Or(Cr(M>>>0))}function zm(){return Or({})}function Uo(M){for(var j=Jr(M>>>=0);j.length;){var L=j.pop();j.pop()(L)}zs(M)}function Bm(M,j,L){j>>>=0,L>>>=0,M=Jr(M>>>0),j=Jr(j),L=Jr(L),M[j]=L}function Vm(M,j){return j>>>=0,M=(M=Zt(M>>>0,"_emval_take_value")).readValueFromPointer(j),Or(M)}function Wm(M,j){M=-9007199254740992>M||9007199254740992<M?NaN:Number(M),j>>>=0,M=new Date(1e3*M),ne()[j>>>2>>>0]=M.getUTCSeconds(),ne()[j+4>>>2>>>0]=M.getUTCMinutes(),ne()[j+8>>>2>>>0]=M.getUTCHours(),ne()[j+12>>>2>>>0]=M.getUTCDate(),ne()[j+16>>>2>>>0]=M.getUTCMonth(),ne()[j+20>>>2>>>0]=M.getUTCFullYear()-1900,ne()[j+24>>>2>>>0]=M.getUTCDay(),M=(M.getTime()-Date.UTC(M.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,ne()[j+28>>>2>>>0]=M}var jd=M=>M%4==0&&(M%100!=0||M%400==0),Ad=[0,31,60,91,121,152,182,213,244,274,305,335],Zl=[0,31,59,90,120,151,181,212,243,273,304,334];function Um(M,j){M=-9007199254740992>M||9007199254740992<M?NaN:Number(M),j>>>=0,M=new Date(1e3*M),ne()[j>>>2>>>0]=M.getSeconds(),ne()[j+4>>>2>>>0]=M.getMinutes(),ne()[j+8>>>2>>>0]=M.getHours(),ne()[j+12>>>2>>>0]=M.getDate(),ne()[j+16>>>2>>>0]=M.getMonth(),ne()[j+20>>>2>>>0]=M.getFullYear()-1900,ne()[j+24>>>2>>>0]=M.getDay();var L=(jd(M.getFullYear())?Ad:Zl)[M.getMonth()]+M.getDate()-1|0;ne()[j+28>>>2>>>0]=L,ne()[j+36>>>2>>>0]=-60*M.getTimezoneOffset(),L=new Date(M.getFullYear(),6,1).getTimezoneOffset();var W=new Date(M.getFullYear(),0,1).getTimezoneOffset();M=0|(L!=W&&M.getTimezoneOffset()==Math.min(W,L)),ne()[j+32>>>2>>>0]=M}function Gm(M){M>>>=0;var j=new Date(ne()[M+20>>>2>>>0]+1900,ne()[M+16>>>2>>>0],ne()[M+12>>>2>>>0],ne()[M+8>>>2>>>0],ne()[M+4>>>2>>>0],ne()[M>>>2>>>0],0),L=ne()[M+32>>>2>>>0],W=j.getTimezoneOffset(),J=new Date(j.getFullYear(),6,1).getTimezoneOffset(),he=new Date(j.getFullYear(),0,1).getTimezoneOffset(),Ie=Math.min(he,J);return 0>L?ne()[M+32>>>2>>>0]=+(J!=he&&Ie==W):0<L!=(Ie==W)&&(J=Math.max(he,J),j.setTime(j.getTime()+6e4*((0<L?Ie:J)-W))),ne()[M+24>>>2>>>0]=j.getDay(),L=(jd(j.getFullYear())?Ad:Zl)[j.getMonth()]+j.getDate()-1|0,ne()[M+28>>>2>>>0]=L,ne()[M>>>2>>>0]=j.getSeconds(),ne()[M+4>>>2>>>0]=j.getMinutes(),ne()[M+8>>>2>>>0]=j.getHours(),ne()[M+12>>>2>>>0]=j.getDate(),ne()[M+16>>>2>>>0]=j.getMonth(),ne()[M+20>>>2>>>0]=j.getYear(),M=j.getTime(),BigInt(isNaN(M)?-1:M/1e3)}function Jl(M,j,L,W,J,he,Ie){return d?Re(16,1,M,j,L,W,J,he,Ie):-52}function Id(M,j,L,W,J,he){if(d)return Re(17,1,M,j,L,W,J,he)}var _o={},Hm=()=>performance.timeOrigin+performance.now();function ec(M,j){if(d)return Re(18,1,M,j);if(_o[M]&&(clearTimeout(_o[M].id),delete _o[M]),!j)return 0;var L=setTimeout(()=>{delete _o[M],ie(()=>Gd(M,performance.timeOrigin+performance.now()))},j);return _o[M]={id:L,qc:j},0}function zg(M,j,L,W){M>>>=0,j>>>=0,L>>>=0,W>>>=0;var J=new Date().getFullYear(),he=new Date(J,0,1).getTimezoneOffset();J=new Date(J,6,1).getTimezoneOffset();var Ie=Math.max(he,J);me()[M>>>2>>>0]=60*Ie,ne()[j>>>2>>>0]=+(he!=J),M=(j=We=>{var tt=Math.abs(We);return`UTC${0<=We?"-":"+"}${String(Math.floor(tt/60)).padStart(2,"0")}${String(tt%60).padStart(2,"0")}`})(he),j=j(J),J<he?(re(M,L,17),re(j,W,17)):(re(M,W,17),re(j,L,17))}var qm=()=>Date.now();function Nd(M,j,L){return 0<=M&&3>=M?(M===0?M=Date.now():M=performance.timeOrigin+performance.now(),X[L>>>0>>>3]=BigInt(Math.round(1e6*M)),0):28}var Yi=[],Zi=(M,j)=>{Yi.length=0;for(var L;L=R()[M++>>>0];){var W=L!=105;j+=(W&=L!=112)&&j%8?4:0,Yi.push(L==112?me()[j>>>2>>>0]:L==106?X[j>>>3]:L==105?ne()[j>>>2>>>0]:Ne()[j>>>3>>>0]),j+=W?8:4}return Yi};function Km(M,j,L){return M>>>=0,j=Zi(j>>>0,L>>>0),De[M](...j)}function Qm(M,j,L){return M>>>=0,j=Zi(j>>>0,L>>>0),De[M](...j)}var Xm=()=>{};function Ym(M,j){return b(Kt(M>>>0,j>>>0))}var Zm=()=>{throw st+=1,"unwind"};function Jm(){return 4294901760}var ep=()=>navigator.hardwareConcurrency;function tp(){return Ae("Cannot use emscripten_pc_get_function without -sUSE_OFFSET_CONVERTER"),0}function $d(M){M>>>=0;var j=R().length;if(M<=j||4294901760<M)return!1;for(var L=1;4>=L;L*=2){var W=j*(1+.2/L);W=Math.min(W,M+100663296);e:{W=(Math.min(4294901760,65536*Math.ceil(Math.max(M,W)/65536))-C.buffer.byteLength+65535)/65536|0;try{C.grow(W),F();var J=1;break e}catch{}J=void 0}if(J)return!0}return!1}var Ji=()=>(Ae("Cannot use convertFrameToPC (needed by __builtin_return_address) without -sUSE_OFFSET_CONVERTER"),0),Ba={},tc=M=>{M.forEach(j=>{Ji()})};function rp(){var M=Error().stack.toString().split(`
`);return M[0]=="Error"&&M.shift(),tc(M),Ba.Lb=Ji(),Ba.cc=M,Ba.Lb}function Dd(M,j,L){if(M>>>=0,j>>>=0,Ba.Lb==M)var W=Ba.cc;else(W=Error().stack.toString().split(`
`))[0]=="Error"&&W.shift(),tc(W);for(var J=3;W[J]&&Ji()!=M;)++J;for(M=0;M<L&&W[M+J];++M)ne()[j+4*M>>>2>>>0]=Ji();return M}var ca,rc={},np=()=>{if(!ca){var M,j={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:"./this.program"};for(M in rc)rc[M]===void 0?delete j[M]:j[M]=rc[M];var L=[];for(M in j)L.push(`${M}=${j[M]}`);ca=L}return ca};function Od(M,j){if(d)return Re(19,1,M,j);M>>>=0,j>>>=0;var L=0;return np().forEach((W,J)=>{var he=j+L;for(J=me()[M+4*J>>>2>>>0]=he,he=0;he<W.length;++he)G()[J++>>>0]=W.charCodeAt(he);G()[J>>>0]=0,L+=W.length+1}),0}function sp(M,j){if(d)return Re(20,1,M,j);M>>>=0,j>>>=0;var L=np();me()[M>>>2>>>0]=L.length;var W=0;return L.forEach(J=>W+=J.length+1),me()[j>>>2>>>0]=W,0}function Fd(M){return d?Re(21,1,M):52}function nc(M,j,L,W){return d?Re(22,1,M,j,L,W):52}function Ld(M,j,L,W){return d?Re(23,1,M,j,L,W):70}var ap=[null,[],[]];function Rd(M,j,L,W){if(d)return Re(24,1,M,j,L,W);j>>>=0,L>>>=0,W>>>=0;for(var J=0,he=0;he<L;he++){var Ie=me()[j>>>2>>>0],We=me()[j+4>>>2>>>0];j+=8;for(var tt=0;tt<We;tt++){var ft=R()[Ie+tt>>>0],Lt=ap[M];ft===0||ft===10?((M===1?w:b)(mt(Lt)),Lt.length=0):Lt.push(ft)}J+=We}return me()[W>>>2>>>0]=J,0}d||function(){for(var M=a.numThreads-1;M--;)Zr();et.unshift(()=>{be++,function(j){d?j():Promise.all(Wt.map(br)).then(j)}(()=>ye())})}();for(var zd=Array(256),el=0;256>el;++el)zd[el]=String.fromCharCode(el);Zn=zd,Vr=a.BindingError=class extends Error{constructor(M){super(M),this.name="BindingError"}},a.InternalError=class extends Error{constructor(M){super(M),this.name="InternalError"}},Dn.push(0,1,void 0,1,null,1,!0,1,!1,1),a.count_emval_handles=()=>Dn.length/2-5-cs.length;var yt,op=[Qe,Pt,oa,N,se,de,Pe,Fe,pt,It,St,Ot,dt,Yt,hr,Bn,Jl,Id,ec,Od,sp,Fd,nc,Ld,Rd];(async function(){function M(W,J){return yt=W.exports,yt=function(){var he=yt,Ie={};for(let[We,tt]of Object.entries(he))Ie[We]=typeof tt=="function"?(...ft)=>{pn.push(We);try{return tt(...ft)}finally{oe||(pn.pop(),Ir&&Lr===1&&pn.length===0&&(Lr=0,st+=1,Ar(Kd),typeof Fibers<"u"&&Fibers.rc()))}}:tt;return Ie}(),yt=function(){var he=yt,Ie=tt=>ft=>tt(ft)>>>0,We=tt=>()=>tt()>>>0;return(he=Object.assign({},he)).Da=Ie(he.Da),he.fb=We(he.fb),he.hb=Ie(he.hb),he.tb=Ie(he.tb),he.ub=We(he.ub),he.__cxa_get_exception_ptr=Ie(he.__cxa_get_exception_ptr),he}(),wr.push(yt.ib),E=J,ye(),yt}be++;var j=Ce();if(a.instantiateWasm)return new Promise(W=>{a.instantiateWasm(j,(J,he)=>{M(J,he),W(J.exports)})});if(d)return new Promise(W=>{Me=J=>{var he=new WebAssembly.Instance(J,Ce());W(M(he,J))}});xe??(xe=a.locateFile?a.locateFile?a.locateFile("ort-wasm-simd-threaded.jsep.wasm",g):g+"ort-wasm-simd-threaded.jsep.wasm":new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href);try{var L=await async function(W){var J=xe;if(!ee&&typeof WebAssembly.instantiateStreaming=="function"&&!ae(J))try{var he=fetch(J,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(he,W)}catch(Ie){b(`wasm streaming compile failed: ${Ie}`),b("falling back to ArrayBuffer instantiation")}return async function(Ie,We){try{var tt=await async function(ft){if(!ee)try{var Lt=await f(ft);return new Uint8Array(Lt)}catch{}if(ft==xe&&ee)ft=new Uint8Array(ee);else{if(!h)throw"both async and sync fetching of the wasm failed";ft=h(ft)}return ft}(Ie);return await WebAssembly.instantiate(tt,We)}catch(ft){b(`failed to asynchronously prepare wasm: ${ft}`),Ae(ft)}}(J,W)}(j);return M(L.instance,L.module)}catch(W){return s(W),Promise.reject(W)}})();var Bd=M=>(Bd=yt.Da)(M),Vd=()=>(Vd=yt.Ea)();a._OrtInit=(M,j)=>(a._OrtInit=yt.Fa)(M,j),a._OrtGetLastError=(M,j)=>(a._OrtGetLastError=yt.Ga)(M,j),a._OrtCreateSessionOptions=(M,j,L,W,J,he,Ie,We,tt,ft)=>(a._OrtCreateSessionOptions=yt.Ha)(M,j,L,W,J,he,Ie,We,tt,ft),a._OrtAppendExecutionProvider=(M,j,L,W,J)=>(a._OrtAppendExecutionProvider=yt.Ia)(M,j,L,W,J),a._OrtAddFreeDimensionOverride=(M,j,L)=>(a._OrtAddFreeDimensionOverride=yt.Ja)(M,j,L),a._OrtAddSessionConfigEntry=(M,j,L)=>(a._OrtAddSessionConfigEntry=yt.Ka)(M,j,L),a._OrtReleaseSessionOptions=M=>(a._OrtReleaseSessionOptions=yt.La)(M),a._OrtCreateSession=(M,j,L)=>(a._OrtCreateSession=yt.Ma)(M,j,L),a._OrtReleaseSession=M=>(a._OrtReleaseSession=yt.Na)(M),a._OrtGetInputOutputCount=(M,j,L)=>(a._OrtGetInputOutputCount=yt.Oa)(M,j,L),a._OrtGetInputOutputMetadata=(M,j,L,W)=>(a._OrtGetInputOutputMetadata=yt.Pa)(M,j,L,W),a._OrtFree=M=>(a._OrtFree=yt.Qa)(M),a._OrtCreateTensor=(M,j,L,W,J,he)=>(a._OrtCreateTensor=yt.Ra)(M,j,L,W,J,he),a._OrtGetTensorData=(M,j,L,W,J)=>(a._OrtGetTensorData=yt.Sa)(M,j,L,W,J),a._OrtReleaseTensor=M=>(a._OrtReleaseTensor=yt.Ta)(M),a._OrtCreateRunOptions=(M,j,L,W)=>(a._OrtCreateRunOptions=yt.Ua)(M,j,L,W),a._OrtAddRunConfigEntry=(M,j,L)=>(a._OrtAddRunConfigEntry=yt.Va)(M,j,L),a._OrtReleaseRunOptions=M=>(a._OrtReleaseRunOptions=yt.Wa)(M),a._OrtCreateBinding=M=>(a._OrtCreateBinding=yt.Xa)(M),a._OrtBindInput=(M,j,L)=>(a._OrtBindInput=yt.Ya)(M,j,L),a._OrtBindOutput=(M,j,L,W)=>(a._OrtBindOutput=yt.Za)(M,j,L,W),a._OrtClearBoundOutputs=M=>(a._OrtClearBoundOutputs=yt._a)(M),a._OrtReleaseBinding=M=>(a._OrtReleaseBinding=yt.$a)(M),a._OrtRunWithBinding=(M,j,L,W,J)=>(a._OrtRunWithBinding=yt.ab)(M,j,L,W,J),a._OrtRun=(M,j,L,W,J,he,Ie,We)=>(a._OrtRun=yt.bb)(M,j,L,W,J,he,Ie,We),a._OrtEndProfiling=M=>(a._OrtEndProfiling=yt.cb)(M),a._JsepOutput=(M,j,L)=>(a._JsepOutput=yt.db)(M,j,L),a._JsepGetNodeName=M=>(a._JsepGetNodeName=yt.eb)(M);var Go=()=>(Go=yt.fb)(),xs=a._free=M=>(xs=a._free=yt.gb)(M),tl=a._malloc=M=>(tl=a._malloc=yt.hb)(M),rl=(M,j,L,W,J,he)=>(rl=yt.kb)(M,j,L,W,J,he),Wd=()=>(Wd=yt.lb)(),Ud=(M,j,L,W,J)=>(Ud=yt.mb)(M,j,L,W,J),sc=M=>(sc=yt.nb)(M),ac=M=>(ac=yt.ob)(M),Gd=(M,j)=>(Gd=yt.pb)(M,j),oc=()=>(oc=yt.qb)(),Hd=(M,j)=>(Hd=yt.rb)(M,j),nl=M=>(nl=yt.sb)(M),sl=M=>(sl=yt.tb)(M),ic=()=>(ic=yt.ub)(),qd=a.dynCall_ii=(M,j)=>(qd=a.dynCall_ii=yt.vb)(M,j),lc=M=>(lc=yt.wb)(M),Kd=()=>(Kd=yt.xb)(),Qd=M=>(Qd=yt.yb)(M),cc=()=>(cc=yt.zb)();return a.stackSave=()=>ic(),a.stackRestore=M=>nl(M),a.stackAlloc=M=>sl(M),a.setValue=function(M,j,L="i8"){switch(L.endsWith("*")&&(L="*"),L){case"i1":case"i8":G()[M>>>0]=j;break;case"i16":Q()[M>>>1>>>0]=j;break;case"i32":ne()[M>>>2>>>0]=j;break;case"i64":X[M>>>3]=BigInt(j);break;case"float":we()[M>>>2>>>0]=j;break;case"double":Ne()[M>>>3>>>0]=j;break;case"*":me()[M>>>2>>>0]=j;break;default:Ae(`invalid type for setValue: ${L}`)}},a.getValue=function(M,j="i8"){switch(j.endsWith("*")&&(j="*"),j){case"i1":case"i8":return G()[M>>>0];case"i16":return Q()[M>>>1>>>0];case"i32":return ne()[M>>>2>>>0];case"i64":return X[M>>>3];case"float":return we()[M>>>2>>>0];case"double":return Ne()[M>>>3>>>0];case"*":return me()[M>>>2>>>0];default:Ae(`invalid type for getValue: ${j}`)}},a.UTF8ToString=Kt,a.stringToUTF8=re,a.lengthBytesUTF8=H,function M(){if(0<be)Ee=M;else if(d)n(a),ue();else{for(;0<et.length;)et.shift()(a);0<be?Ee=M:(a.calledRun=!0,oe||(ue(),n(a)))}}(),a.PTR_SIZE=4,o}),VF=lv,GS=(t=(e=globalThis.self)==null?void 0:e.name)==null?void 0:t.startsWith("em-pthread"),GS&&lv()}),cv,My,HS,ys,WF,nf,qS,KS,dv,QS,uv,UF,mv,GF,fb=Ke(()=>{pb(),cv=typeof location>"u"?void 0:location.origin,My=import.meta.url>"file:"&&import.meta.url<"file;",HS=()=>{{if(My){let e=URL;return new URL(new e("ort.bundle.min.mjs",import.meta.url).href,cv).href}return import.meta.url}},ys=HS(),WF=()=>{if(ys&&!ys.startsWith("blob:"))return ys.substring(0,ys.lastIndexOf("/")+1)},nf=(e,t)=>{try{let r=t??ys;return(r?new URL(e,r):new URL(e)).origin===cv}catch{return!1}},qS=(e,t)=>{let r=t??ys;try{return(r?new URL(e,r):new URL(e)).href}catch{return}},KS=(e,t)=>`${t??"./"}${e}`,dv=async e=>{let t=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(t)},QS=async e=>(await import(e)).default,uv=(f7(),fm(RF)).default,UF=async()=>{if(!ys)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(nf(ys))return[void 0,uv()];let e=await dv(ys);return[e,uv(e)]},mv=(h7(),fm(BF)).default,GF=async(e,t,r)=>{if(!e&&!t&&mv&&ys&&nf(ys))return[void 0,mv];{let n="ort-wasm-simd-threaded.jsep.mjs",s=e??qS(n,t),a=r&&s&&!nf(s,t),o=a?await dv(s):s??KS(n,t);return[a?o:void 0,await QS(o)]}}}),pv,sf,uu,fv,XS,YS,ZS,hb,yr,Ql=Ke(()=>{fb(),sf=!1,uu=!1,fv=!1,XS=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},YS=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},ZS=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,19,1,17,0,65,1,253,15,65,2,253,15,65,3,253,15,253,147,2,11]))}catch{return!1}},hb=async e=>{if(sf)return Promise.resolve();if(uu)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(fv)throw new Error("previous call to 'initializeWebAssembly()' failed.");uu=!0;let t=e.initTimeout,r=e.numThreads;if(e.simd!==!1){if(e.simd==="relaxed"){if(!ZS())throw new Error("Relaxed WebAssembly SIMD is not supported in the current environment.")}else if(!YS())throw new Error("WebAssembly SIMD is not supported in the current environment.")}let n=XS();r>1&&!n&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+r+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=r=1);let s=e.wasmPaths,a=typeof s=="string"?s:void 0,o=s==null?void 0:s.mjs,i=(o==null?void 0:o.href)??o,l=s==null?void 0:s.wasm,d=(l==null?void 0:l.href)??l,p=e.wasmBinary,[u,m]=await GF(i,a,r>1),f=!1,h=[];if(t>0&&h.push(new Promise(_=>{setTimeout(()=>{f=!0,_()},t)})),h.push(new Promise((_,v)=>{let g={numThreads:r};if(p)g.wasmBinary=p;else if(d||a)g.locateFile=x=>d??a+x;else if(i&&i.indexOf("blob:")!==0)g.locateFile=x=>new URL(x,i).href;else if(u){let x=WF();x&&(g.locateFile=y=>x+y)}m(g).then(x=>{uu=!1,sf=!0,pv=x,_(),u&&URL.revokeObjectURL(u)},x=>{uu=!1,fv=!0,v(x)})})),await Promise.race(h),f)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},yr=()=>{if(sf&&pv)return pv;throw new Error("WebAssembly is not initialized yet.")}}),Ea,Th,fr,gb=Ke(()=>{Ql(),Ea=(e,t)=>{let r=yr(),n=r.lengthBytesUTF8(e)+1,s=r._malloc(n);return r.stringToUTF8(e,s,n),t.push(s),s},Th=(e,t,r,n)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([s,a])=>{let o=t?t+s:s;if(typeof a=="object")Th(a,o+".",r,n);else if(typeof a=="string"||typeof a=="number")n(o,a.toString());else if(typeof a=="boolean")n(o,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},fr=e=>{let t=yr(),r=t.stackSave();try{let n=t.PTR_SIZE,s=t.stackAlloc(2*n);t._OrtGetLastError(s,s+n);let a=Number(t.getValue(s,n===4?"i32":"i64")),o=t.getValue(s+n,"*"),i=o?t.UTF8ToString(o):"";throw new Error(`${e} ERROR_CODE: ${a}, ERROR_MESSAGE: ${i}`)}finally{t.stackRestore(r)}}}),HF,g7=Ke(()=>{Ql(),gb(),HF=e=>{let t=yr(),r=0,n=[],s=e||{};try{if((e==null?void 0:e.logSeverityLevel)===void 0)s.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if((e==null?void 0:e.logVerbosityLevel)===void 0)s.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);(e==null?void 0:e.terminate)===void 0&&(s.terminate=!1);let a=0;return(e==null?void 0:e.tag)!==void 0&&(a=Ea(e.tag,n)),r=t._OrtCreateRunOptions(s.logSeverityLevel,s.logVerbosityLevel,!!s.terminate,a),r===0&&fr("Can't create run options."),(e==null?void 0:e.extra)!==void 0&&Th(e.extra,"",new WeakSet,(o,i)=>{let l=Ea(o,n),d=Ea(i,n);t._OrtAddRunConfigEntry(r,l,d)!==0&&fr(`Can't set a run config entry: ${o} - ${i}.`)}),[r,n]}catch(a){throw r!==0&&t._OrtReleaseRunOptions(r),n.forEach(o=>t._free(o)),a}}}),JS,ek,tk,mu,rk,qF,_7=Ke(()=>{Ql(),gb(),JS=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},ek=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},tk=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},mu=(e,t,r,n)=>{let s=Ea(t,n),a=Ea(r,n);yr()._OrtAddSessionConfigEntry(e,s,a)!==0&&fr(`Can't set a session config entry: ${t} - ${r}.`)},rk=async(e,t,r)=>{for(let n of t){let s=typeof n=="string"?n:n.name,a=[];switch(s){case"webnn":if(s="WEBNN",typeof n!="string"){let p=n==null?void 0:n.deviceType;p&&mu(e,"deviceType",p,r)}break;case"webgpu":if(s="JS",typeof n!="string"){let p=n;if(p!=null&&p.preferredLayout){if(p.preferredLayout!=="NCHW"&&p.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${p.preferredLayout}`);mu(e,"preferredLayout",p.preferredLayout,r)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${s}`)}let o=Ea(s,r),i=a.length,l=0,d=0;if(i>0){l=yr()._malloc(i*yr().PTR_SIZE),r.push(l),d=yr()._malloc(i*yr().PTR_SIZE),r.push(d);for(let p=0;p<i;p++)yr().setValue(l+p*yr().PTR_SIZE,a[p][0],"*"),yr().setValue(d+p*yr().PTR_SIZE,a[p][1],"*")}await yr()._OrtAppendExecutionProvider(e,o,l,d,i)!==0&&fr(`Can't append execution provider: ${s}.`)}},qF=async e=>{let t=yr(),r=0,n=[],s=e||{};tk(s);try{let a=JS(s.graphOptimizationLevel??"all"),o=ek(s.executionMode??"sequential"),i=typeof s.logId=="string"?Ea(s.logId,n):0,l=s.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let d=s.logVerbosityLevel??0;if(!Number.isInteger(d)||d<0||d>4)throw new Error(`log verbosity level is not valid: ${d}`);let p=typeof s.optimizedModelFilePath=="string"?Ea(s.optimizedModelFilePath,n):0;if(r=t._OrtCreateSessionOptions(a,!!s.enableCpuMemArena,!!s.enableMemPattern,o,!!s.enableProfiling,0,i,l,d,p),r===0&&fr("Can't create session options."),s.executionProviders&&await rk(r,s.executionProviders,n),s.enableGraphCapture!==void 0){if(typeof s.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${s.enableGraphCapture}`);mu(r,"enableGraphCapture",s.enableGraphCapture.toString(),n)}if(s.freeDimensionOverrides)for(let[u,m]of Object.entries(s.freeDimensionOverrides)){if(typeof u!="string")throw new Error(`free dimension override name must be a string: ${u}`);if(typeof m!="number"||!Number.isInteger(m)||m<0)throw new Error(`free dimension override value must be a non-negative integer: ${m}`);let f=Ea(u,n);t._OrtAddFreeDimensionOverride(r,f,m)!==0&&fr(`Can't set a free dimension override: ${u} - ${m}.`)}return s.extra!==void 0&&Th(s.extra,"",new WeakSet,(u,m)=>{mu(r,u,m,n)}),[r,n]}catch(a){throw r!==0&&t._OrtReleaseSessionOptions(r)!==0&&fr("Can't release session options."),n.forEach(o=>t._free(o)),a}}}),wc,So,xl,_b,Eh,xb,vb,Ty,Nt=Ke(()=>{wc=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;case"int4":return 22;case"uint4":return 21;default:throw new Error(`unsupported data type: ${e}`)}},So=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";case 22:return"int4";case 21:return"uint4";default:throw new Error(`unsupported data type: ${e}`)}},xl=(e,t)=>{let r=[-1,4,1,1,2,2,4,8,-1,1,2,8,4,8,-1,-1,-1,-1,-1,-1,-1,.5,.5][e],n=typeof t=="number"?t:t.reduce((s,a)=>s*a,1);return r>0?Math.ceil(n*r):void 0},_b=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Eh=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},xb=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",vb=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint64"||e==="int8"||e==="uint8"||e==="bool"||e==="uint4"||e==="int4",Ty=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;case"ml-tensor":return 5;default:throw new Error(`unsupported data location: ${e}`)}}}),yb,KF=Ke(()=>{pb(),yb=async e=>{if(typeof e=="string"){let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),n=r?parseInt(r,10):0;if(n<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let s=t.body.getReader(),a;try{a=new ArrayBuffer(n)}catch(i){if(i instanceof RangeError){let l=Math.ceil(n/65536);a=new WebAssembly.Memory({initial:l,maximum:l}).buffer}else throw i}let o=0;for(;;){let{done:i,value:l}=await s.read();if(i)break;let d=l.byteLength;new Uint8Array(a,o,d).set(l),o+=d}return new Uint8Array(a,0,n)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}}),nk,sk,ak,ok,wb,ik,er,Vo=Ke(()=>{Nt(),nk=["V","I","W","E","F"],sk=(e,t)=>{console.log(`[${nk[e]},${new Date().toISOString()}]${t}`)},wb=(e,t)=>{ak=e,ok=t},ik=(e,t)=>{let r=Eh(e),n=Eh(ak);r>=n&&sk(r,typeof t=="function"?t():t)},er=(...e)=>{ok&&ik(...e)}}),lk,hd,je,Ch,QF,XF,YF,Bt=Ke(()=>{lk=class{static calcMatMulShape(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]}},hd=class{static calcShape(e,t,r=!1){let n=e.length,s=t.length;if(n===0)return t;if(s===0)return e;let a=Math.max(e.length,t.length),o=new Array(a);if(r){if(n<2||s<2)return;let i=lk.calcMatMulShape([e[n-2],e[n-1]],[t[s-2],t[s-1]]);if(i===void 0)return;[o[a-2],o[a-1]]=i}for(let i=r?3:1;i<=a;i++){let l=n-i<0?1:e[n-i],d=s-i<0?1:t[s-i];if(l!==d&&l>1&&d>1)return;let p=Math.max(l,d);if(l&&d)o[a-i]=Math.max(l,d);else{if(p>1)return;o[a-i]=0}}return o}static isValidBroadcast(e,t){let r=e.length,n=t.length;if(r>n)return!1;for(let s=1;s<=r;s++)if(e[r-s]!==1&&e[r-s]!==t[n-s])return!1;return!0}},je=class Lf{static size(t){return Lf.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let n=t.length;if(n===0)return[];let s=new Array(n),a=n-1;for(;a>=0;){if(t[a]%r===0){s[a]=t[a]/r;break}if(r%t[a]!==0)throw new Error("cannot convert shape");s[a]=1,r/=t[a],a--}for(a--;a>=0;a--)s[a]=t[a];return s}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return Lf.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return Lf.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,n){let s=1;for(let a=r;a<n;a++){if(t[a]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");s*=Number(t[a])}return s}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=t[r-1];for(let s=r-3;s>=0;--s)n[s]=n[s+1]*t[s+1];return n}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(n=>this.normalizeAxis(n,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(n=>t[n]):t.slice().reverse()}static padShape(t,r){let n=t.length;return t.map((s,a)=>s+r[a]+r[a+n])}static areEqual(t,r){return t.length!==r.length?!1:t.every((n,s)=>n===r[s])}},Ch=class Cu{static adjustPoolAttributes(t,r,n,s,a,o){if(!t&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let i=0;i<r.length-2;i++)i>=n.length?n.push(r[i+2]):n[i]=r[i+2];for(let i=0;i<n.length;i++)if(i<s.length){if(s[i]<0)throw new Error("strides should be greater than or equal to 1")}else s.push(1);for(let i=0;i<n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let i=0;i<n.length*2;i++)if(i<o.length){if(o[i]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(let i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[i]>=n[i]||o[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,n,s,a,o,i){if(i){if(a.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(s.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let l=0;l<t.length-2;l++)Cu.adjustPadAndReturnShape(t[l+(o?1:2)],r[l],n[l],s[l],a,l,l+t.length-2,i)}}static computePoolOutputShape(t,r,n,s,a,o,i){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return Cu.computeShapeHelper(t,r,l,n,s,a,o,i),l}static computeConvOutputShape(t,r,n,s,a,o,i){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[t[0],r[0]];return Cu.computeShapeHelper(!1,t,l,n,s,a,o,i),l}static computeShapeHelper(t,r,n,s,a,o,i,l){if(t)for(let d=0;d<r.length-2;d++)n.push(1);else for(let d=0;d<r.length-2;d++)n.push(Cu.adjustPadAndReturnShape(r[d+2],s[d],a[d],o[d],i,d,d+r.length-2,l))}static adjustPadAndReturnShape(t,r,n,s,a,o,i,l){let d=n*(s-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return a[o]=0,a[i]=0,Math.floor((t-d)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let p=((t+r-1)/r-1)*r+s-t;return a[o]=Math.floor(l==="SAME_LOWER"?(p+1)/2:p/2),a[i]=p-a[o],Math.floor((t+p-s)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+a[o]+a[i]-d)/r+1)}},QF=class{static getShapeOfGemmResult(e,t,r,n,s){if(e.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let a,o,i;t?(a=e[1],o=e[0]):(a=e[0],o=e[1]);let l=-1;if(n?(i=r[0],l=1):(i=r[1],l=0),r[l]!==o)throw new Error("dimension mismatch");if(a<=0||i<=0||o<=0)throw new Error("invalid shape specified");if(s&&!hd.isValidBroadcast(s,[a,i]))throw new Error("gemm: invalid bias shape for broadcast");return[a,i,o]}},XF=-34028234663852886e22,YF=34028234663852886e22}),bb,ZF=Ke(()=>{Nt(),bb=(e,t)=>new(_b(t))(e)}),Ey,hv,ck,gv,dk,_v,xv,vv,uk,JF,x7=Ke(()=>{Vo(),Ey=(e,t=!0)=>{if(e.byteLength%8!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 8 (BigInt).");let r=e.byteLength/8,n=new BigInt64Array(e.buffer,e.byteOffset,r),s=new Int32Array(r);for(let a=0;a<r;a++){let o=n[a];if(o>2147483647n||o<-2147483648n)throw new Error(`Overflow occurred when converting BigInt to Int32 at index ${a}: ${o}`);s[a]=Number(o)}return t?new Uint8Array(s.buffer):s},hv=(e,t=!0)=>{if(e.byteLength%4!==0)throw new Error("Invalid Uint8Array length - must be a multiple of 4 (Int32).");let r=e.byteLength/4,n=new Int32Array(e.buffer,e.byteOffset,r),s=BigInt64Array.from(n,BigInt);return t?new Uint8Array(s.buffer):s},ck=1,gv=()=>ck++,dk=new Map([["float32",32],["float16",16],["int32",32],["uint32",32],["int64",64],["uint64",64],["int8",8],["uint8",8],["int4",4],["uint4",4]]),_v=(e,t)=>{let r=dk.get(e);if(!r)throw new Error("Unsupported data type.");return t.length>0?Math.ceil(t.reduce((n,s)=>n*s)*r/8):0},xv=class{constructor(e){this.shouldConvertInt64toInt32=!1,this.isInt64ToInt32Converted=!1;let{sessionId:t,context:r,tensor:n,dataType:s,shape:a,shouldConvertInt64toInt32:o=!1}=e;this.sessionId=t,this.mlContext=r,this.mlTensor=n,this.dataType=s,this.tensorShape=a,this.shouldConvertInt64toInt32=o}get tensor(){return this.mlTensor}get type(){return this.dataType}get shape(){return this.tensorShape}get byteLength(){return _v(this.dataType,this.tensorShape)}destroy(){er("verbose",()=>"[WebNN] TensorWrapper.destroy"),this.mlTensor.destroy()}write(e){this.mlContext.writeTensor(this.mlTensor,e)}async read(e,t){if(e){let r=await this.mlContext.readTensor(this.mlTensor),n=hv(new Uint8Array(r));if(t){(t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).set(n);return}else return n.buffer}else return t?this.mlContext.readTensor(this.mlTensor,t):this.mlContext.readTensor(this.mlTensor)}canReuseTensor(e,t,r){return this.mlContext===e&&this.dataType===t&&this.tensorShape.length===r.length&&this.tensorShape.every((n,s)=>n===r[s])}setIsInt64ToInt32Converted(e){this.isInt64ToInt32Converted=e}},vv=class{constructor(e,t){this.tensorManager=e,this.wrapper=t}get tensorWrapper(){return this.wrapper}releaseTensor(){this.tensorWrapper&&(this.tensorManager.releaseTensor(this.tensorWrapper),this.wrapper=void 0)}async ensureTensor(e,t,r,n){let s=t,a=this.tensorManager.getMLContext(e),o=s==="int64"&&!a.opSupportLimits().input.dataTypes.includes("int64");if(o&&(s="int32",er("verbose",()=>"[WebNN] TensorIdTracker.ensureTensor: convert dataType from int64 to int32")),this.wrapper){if(this.wrapper.canReuseTensor(a,s,r))return this.wrapper.tensor;if(n){if(this.wrapper.byteLength!==_v(s,r))throw new Error("Unable to copy data to tensor with different size.");this.activeUpload=new Uint8Array(await this.wrapper.read())}this.tensorManager.releaseTensor(this.wrapper)}let i=typeof MLTensorUsage>"u"?void 0:MLTensorUsage.READ|MLTensorUsage.WRITE;return this.wrapper=await this.tensorManager.getCachedTensor(e,s,r,i,!0,!0,o),n&&this.activeUpload&&(this.wrapper.write(this.activeUpload),this.activeUpload=void 0),this.wrapper.tensor}upload(e){let t=e;if(this.wrapper)if(this.wrapper.shouldConvertInt64toInt32&&(t=Ey(e,!0),this.wrapper.setIsInt64ToInt32Converted(!0)),t.byteLength===this.wrapper.byteLength){this.wrapper.write(t);return}else er("verbose",()=>"Data size does not match tensor size. Releasing tensor."),this.releaseTensor();this.activeUpload?this.activeUpload.set(t):this.activeUpload=new Uint8Array(t)}async download(e){var t,r,n;if(this.activeUpload){let s=(t=this.wrapper)!=null&&t.isInt64ToInt32Converted?hv(this.activeUpload):this.activeUpload;if(e){e instanceof ArrayBuffer?new Uint8Array(e).set(s):new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(s);return}else return s.buffer}if(!this.wrapper)throw new Error("Tensor has not been created.");return e?this.wrapper.read((r=this.wrapper)==null?void 0:r.shouldConvertInt64toInt32,e):this.wrapper.read((n=this.wrapper)==null?void 0:n.shouldConvertInt64toInt32)}},uk=class{constructor(e){this.backend=e,this.tensorTrackersById=new Map,this.freeTensors=[],this.externalTensors=new Set}getMLContext(e){let t=this.backend.getMLContext(e);if(!t)throw new Error("MLContext not found for session.");return t}reserveTensorId(){let e=gv();return this.tensorTrackersById.set(e,new vv(this)),e}releaseTensorId(e){let t=this.tensorTrackersById.get(e);t&&(this.tensorTrackersById.delete(e),t.tensorWrapper&&this.releaseTensor(t.tensorWrapper))}async ensureTensor(e,t,r,n,s){er("verbose",()=>`[WebNN] TensorManager.ensureTensor {tensorId: ${t}, dataType: ${r}, shape: ${n}, copyOld: ${s}}`);let a=this.tensorTrackersById.get(t);if(!a)throw new Error("Tensor not found.");return a.ensureTensor(e,r,n,s)}upload(e,t){let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");r.upload(t)}async download(e,t){er("verbose",()=>`[WebNN] TensorManager.download {tensorId: ${e}, dstBuffer: ${t==null?void 0:t.byteLength}}`);let r=this.tensorTrackersById.get(e);if(!r)throw new Error("Tensor not found.");return r.download(t)}releaseTensorsForSession(e){for(let t of this.freeTensors)t.sessionId===e&&t.destroy();this.freeTensors=this.freeTensors.filter(t=>t.sessionId!==e)}registerTensor(e,t,r,n){let s=this.getMLContext(e),a=gv(),o=new xv({sessionId:e,context:s,tensor:t,dataType:r,shape:n});return this.tensorTrackersById.set(a,new vv(this,o)),this.externalTensors.add(o),a}async getCachedTensor(e,t,r,n,s,a,o=!1){let i=this.getMLContext(e);for(let[d,p]of this.freeTensors.entries())if(p.canReuseTensor(i,t,r)){er("verbose",()=>`[WebNN] Reusing tensor {dataType: ${t}, shape: ${r}}`);let u=this.freeTensors.splice(d,1)[0];return u.sessionId=e,u}er("verbose",()=>`[WebNN] MLContext.createTensor {dataType: ${t}, shape: ${r}}`);let l=await i.createTensor({dataType:t,shape:r,dimensions:r,usage:n,writable:s,readable:a});return new xv({sessionId:e,context:i,tensor:l,dataType:t,shape:r,shouldConvertInt64toInt32:o})}releaseTensor(e){this.externalTensors.has(e)&&this.externalTensors.delete(e),this.freeTensors.push(e)}},JF=(...e)=>new uk(...e)}),af,mk,eL,v7=Ke(()=>{Nt(),Ql(),ZF(),x7(),Vo(),af=new Map([[1,"float32"],[10,"float16"],[6,"int32"],[12,"uint32"],[7,"int64"],[13,"uint64"],[22,"int4"],[21,"uint4"],[3,"int8"],[2,"uint8"],[9,"uint8"]]),mk=(e,t)=>{if(e===t)return!0;if(e===void 0||t===void 0)return!1;let r=Object.keys(e).sort(),n=Object.keys(t).sort();return r.length===n.length&&r.every((s,a)=>s===n[a]&&e[s]===t[s])},eL=class{constructor(e){this.tensorManager=JF(this),this.mlContextBySessionId=new Map,this.sessionIdsByMLContext=new Map,this.mlContextCache=[],this.sessionGraphInputs=new Map,this.temporaryGraphInputs=[],this.temporarySessionTensorIds=new Map,wb(e.logLevel,!!e.debug)}get currentSessionId(){if(this.activeSessionId===void 0)throw new Error("No active session");return this.activeSessionId}onRunStart(e){er("verbose",()=>`[WebNN] onRunStart {sessionId: ${e}}`),this.activeSessionId=e}onRunEnd(e){er("verbose",()=>`[WebNN] onRunEnd {sessionId: ${e}}`);let t=this.temporarySessionTensorIds.get(e);if(t){for(let r of t)er("verbose",()=>`[WebNN] releasing temporary tensor {tensorId: ${r}}`),this.tensorManager.releaseTensorId(r);this.temporarySessionTensorIds.delete(e),this.activeSessionId=void 0}}async createMLContext(e){if(e instanceof GPUDevice){let r=this.mlContextCache.findIndex(n=>n.gpuDevice===e);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext(e);return this.mlContextCache.push({gpuDevice:e,mlContext:n}),n}}else if(e===void 0){let r=this.mlContextCache.findIndex(n=>n.options===void 0&&n.gpuDevice===void 0);if(r!==-1)return this.mlContextCache[r].mlContext;{let n=await navigator.ml.createContext();return this.mlContextCache.push({mlContext:n}),n}}let t=this.mlContextCache.findIndex(r=>mk(r.options,e));if(t!==-1)return this.mlContextCache[t].mlContext;{let r=await navigator.ml.createContext(e);return this.mlContextCache.push({options:e,mlContext:r}),r}}registerMLContext(e,t){this.mlContextBySessionId.set(e,t);let r=this.sessionIdsByMLContext.get(t);r||(r=new Set,this.sessionIdsByMLContext.set(t,r)),r.add(e),this.temporaryGraphInputs.length>0&&(this.sessionGraphInputs.set(e,this.temporaryGraphInputs),this.temporaryGraphInputs=[])}onReleaseSession(e){this.sessionGraphInputs.delete(e);let t=this.mlContextBySessionId.get(e);if(!t)return;this.tensorManager.releaseTensorsForSession(e),this.mlContextBySessionId.delete(e);let r=this.sessionIdsByMLContext.get(t);if(r.delete(e),r.size===0){this.sessionIdsByMLContext.delete(t);let n=this.mlContextCache.findIndex(s=>s.mlContext===t);n!==-1&&this.mlContextCache.splice(n,1)}}getMLContext(e){return this.mlContextBySessionId.get(e)}reserveTensorId(){return this.tensorManager.reserveTensorId()}releaseTensorId(e){er("verbose",()=>`[WebNN] releaseTensorId {tensorId: ${e}}`),this.tensorManager.releaseTensorId(e)}async ensureTensor(e,t,r,n,s){let a=af.get(r);if(!a)throw new Error(`Unsupported ONNX data type: ${r}`);return this.tensorManager.ensureTensor(e??this.currentSessionId,t,a,n,s)}async createTemporaryTensor(e,t,r){er("verbose",()=>`[WebNN] createTemporaryTensor {onnxDataType: ${t}, shape: ${r}}`);let n=af.get(t);if(!n)throw new Error(`Unsupported ONNX data type: ${t}`);let s=this.tensorManager.reserveTensorId();await this.tensorManager.ensureTensor(e,s,n,r,!1);let a=this.temporarySessionTensorIds.get(e);return a?a.push(s):this.temporarySessionTensorIds.set(e,[s]),s}uploadTensor(e,t){if(!yr().shouldTransferToMLTensor)throw new Error("Trying to upload to a MLTensor while shouldTransferToMLTensor is false");er("verbose",()=>`[WebNN] uploadTensor {tensorId: ${e}, data: ${t.byteLength}}`),this.tensorManager.upload(e,t)}async downloadTensor(e,t){return this.tensorManager.download(e,t)}createMLTensorDownloader(e,t){return async()=>{let r=await this.tensorManager.download(e);return bb(r,t)}}registerMLTensor(e,t,r,n){let s=af.get(r);if(!s)throw new Error(`Unsupported ONNX data type: ${r}`);let a=this.tensorManager.registerTensor(e,t,s,n);return er("verbose",()=>`[WebNN] registerMLTensor {tensor: ${t}, dataType: ${s}, dimensions: ${n}} -> {tensorId: ${a}}`),a}registerMLConstant(e,t,r,n,s,a,o=!1){if(!a)throw new Error("External mounted files are not available.");let i=e;e.startsWith("./")&&(i=e.substring(2));let l=a.get(i);if(!l)throw new Error(`File with name ${i} not found in preloaded files.`);if(t+r>l.byteLength)throw new Error("Out of bounds: data offset and length exceed the external file data size.");let d=l.slice(t,t+r).buffer,p;switch(s.dataType){case"float32":p=new Float32Array(d);break;case"float16":p=typeof Float16Array<"u"&&Float16Array.from?new Float16Array(d):new Uint16Array(d);break;case"int32":p=new Int32Array(d);break;case"uint32":p=new Uint32Array(d);break;case"int64":o?(p=Ey(new Uint8Array(d),!1),s.dataType="int32"):p=new BigInt64Array(d);break;case"uint64":p=new BigUint64Array(d);break;case"int8":p=new Int8Array(d);break;case"int4":case"uint4":case"uint8":p=new Uint8Array(d);break;default:throw new Error(`Unsupported data type: ${s.dataType} in creating WebNN Constant from external data.`)}return er("verbose",()=>`[WebNN] registerMLConstant {dataType: ${s.dataType}, shape: ${s.shape}}} ${o?"(Note: it was int64 data type and registered to int32 as workaround)":""}`),n.constant(s,p)}registerGraphInput(e){this.temporaryGraphInputs.push(e)}isGraphInput(e,t){let r=this.sessionGraphInputs.get(e);return r?r.includes(t):!1}isInt64Supported(e){var t;return!!((t=this.mlContextBySessionId.get(e))!=null&&t.opSupportLimits().input.dataTypes.includes("int64"))}flush(){}}}),Mb=Ke(()=>{}),yv,of,lf,pk,fk,wv,Cy,hk,tL,y7=Ke(()=>{Vo(),Mb(),yv=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),of=[],lf=e=>Math.ceil(Number(e)/16)*16,pk=e=>{for(let t=0;t<of.length;t++){let r=of[t];if(e<=r)return r}return Math.ceil(e/16)*16},fk=1,wv=()=>fk++,Cy=async(e,t,r,n)=>{let s=lf(r),a=e.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let o=e.getCommandEncoder();e.endComputePass(),o.copyBufferToBuffer(t,0,a,0,s),e.flush(),await a.mapAsync(GPUMapMode.READ);let i=a.getMappedRange();if(n){let l=n();return l.set(new Uint8Array(i,0,r)),l}else return new Uint8Array(i.slice(0,r))}finally{a.destroy()}},hk=class{constructor(e){this.backend=e,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersPending=[],this.capturedPendingBuffers=new Map;for(let[t]of yv)of.push(t),this.freeBuffers.set(t,[]),this.freeUniformBuffers.set(t,[]);this.sessionCount=0}upload(e,t){let r=t.buffer,n=t.byteOffset,s=t.byteLength,a=lf(s),o=this.storageCache.get(e);if(!o)throw new Error("gpu data for uploading does not exist");if(Number(o.originalSize)!==s)throw new Error(`inconsistent data size. gpu data size=${o.originalSize}, data size=${s}`);let i=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),l=i.getMappedRange();new Uint8Array(l).set(new Uint8Array(r,n,s)),i.unmap();let d=this.backend.device.createCommandEncoder();d.copyBufferToBuffer(i,0,o.gpuData.buffer,0,a),this.backend.device.queue.submit([d.finish()]),i.destroy(),er("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${e})`)}memcpy(e,t){let r=this.storageCache.get(e);if(!r)throw new Error("source gpu data for memcpy does not exist");let n=this.storageCache.get(t);if(!n)throw new Error("destination gpu data for memcpy does not exist");if(r.originalSize!==n.originalSize)throw new Error("inconsistent source and destination gpu data size");let s=lf(r.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(r.gpuData.buffer,0,n.gpuData.buffer,0,s)}registerExternalBuffer(e,t,r){let n;if(r){if(n=r[0],e===r[1])return er("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, buffer is the same, skip.`),n;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`)}else n=wv();return this.storageCache.set(n,{gpuData:{id:n,type:0,buffer:e},originalSize:t}),er("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${t}) => id=${n}, registered.`),n}unregisterExternalBuffer(e){e!==void 0&&(this.storageCache.delete(e),er("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${e}`))}create(e,t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let r=pk(e),n,s=(t&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(t&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(s||a){let i=(s?this.freeBuffers:this.freeUniformBuffers).get(r);i?i.length>0?n=i.pop():n=this.backend.device.createBuffer({size:r,usage:t}):n=this.backend.device.createBuffer({size:r,usage:t})}else n=this.backend.device.createBuffer({size:r,usage:t});let o={id:wv(),type:0,buffer:n};return this.storageCache.set(o.id,{gpuData:o,originalSize:Number(e)}),er("verbose",()=>`[WebGPU] GpuDataManager.create(size=${e}) => id=${o.id}`),o}get(e){var t;return(t=this.storageCache.get(e))==null?void 0:t.gpuData}release(e){let t=typeof e=="bigint"?Number(e):e,r=this.storageCache.get(t);if(!r){if(this.storageCache.size===0)return 0;throw new Error("releasing data does not exist")}return er("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(e,t){let r=this.storageCache.get(Number(e));if(!r)throw new Error("data does not exist");await Cy(this.backend,r.gpuData.buffer,r.originalSize,t)}refreshPendingBuffers(){if(this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let e of this.buffersPending){let t=yv.get(e.size);if((e.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let r=this.freeBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else if((e.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let r=this.freeUniformBuffers.get(e.size)||[];t===void 0||r.length>=t?e.destroy():r.push(e)}else e.destroy()}this.buffersPending=[]}else{let e=this.capturedPendingBuffers.get(this.backend.currentSessionId);e||(e=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,e));for(let t of this.buffersPending)e.push(t);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.freeUniformBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache.forEach(e=>{e.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(e=>{e.forEach(t=>{t.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onCreateSession(){this.sessionCount+=1}onReleaseSession(e){let t=this.capturedPendingBuffers.get(e);t&&(t.forEach(r=>{r.destroy()}),this.capturedPendingBuffers.delete(e)),this.sessionCount-=1,this.sessionCount===0&&(er("warning",()=>"[WebGPU] Clearing webgpu buffer cache"),this.storageCache.forEach(r=>{r.gpuData.buffer.destroy()}),this.storageCache=new Map)}},tL=(...e)=>new hk(...e)}),gk,ur,Xr=Ke(()=>{gk=class{constructor(e){Object.assign(this,e)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(e=>`${this[e]}`).join(";")),this.key}},ur=e=>new gk(e)}),gd,cf,Cn,Qn,wt,zr,Py,Dc,Di,xt,pu,Oe,ht,rL,Tb,_k,nL,Vt=Ke(()=>{Nt(),Bt(),gd=64,cf=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(Number(e)){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];case 22:return"i32";case 21:return"u32";default:throw new Error(`Unknown data type: ${e}`)}},Cn=(e,t=1)=>{let r=cf(e,t);return typeof r=="string"?r:r[0]},Qn=(e,t=1)=>{let r=cf(e,t);return typeof r=="string"?r:r[1]},wt=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:je.computeStrides(r)})}),t},zr=e=>e%4===0?4:e%2===0?2:1,Py=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,Dc=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,Di=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,xt=(e,t,r,n)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?n==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:n==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,pu=(e,t,r,n,s)=>{let a=typeof r=="number",o=a?r:r.length,i=[...new Array(o).keys()],l=o<2?"u32":o<=4?`vec${o}<u32>`:`array<u32, ${o}>`,d=cf(t,s),p=typeof d=="string"?d:d[1],u=typeof d=="string"?d:d[0],m={indices:l,value:p,storage:u,tensor:t},f=ae=>typeof ae=="string"?ae:`${ae}u`,h={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},_=a?"uniforms.":"",v=`${_}${e}_shape`,g=`${_}${e}_strides`,x="";for(let ae=0;ae<o-1;ae++)x+=`
    let dim${ae} = current / ${xt(g,ae,o)};
    let rest${ae} = current % ${xt(g,ae,o)};
    indices[${ae}] = dim${ae};
    current = rest${ae};
    `;x+=`indices[${o-1}] = current;`;let y=o<2?"":`
  fn o2i_${e}(offset: u32) -> ${m.indices} {
    var indices: ${m.indices};
    var current = offset;
    ${x}
    return indices;
  }`,w=ae=>(h.offsetToIndices=!0,o<2?ae:`o2i_${e}(${ae})`),b=[];if(o>=2)for(let ae=o-1;ae>=0;ae--)b.push(`${xt(g,ae,o)} * (indices[${ae}])`);let C=o<2?"":`
  fn i2o_${e}(indices: ${m.indices}) -> u32 {
    return ${b.join("+")};
  }`,E=ae=>(h.indicesToOffset=!0,o<2?ae:`i2o_${e}(${ae})`),P=(...ae)=>o===0?"0u":`${m.indices}(${ae.map(f).join(",")})`,I=(ae,G)=>o<2?`${ae}`:`${xt(ae,G,o)}`,$=(ae,G,R)=>o<2?`${ae}=${R};`:`${xt(ae,G,o)}=${R};`,z={},D=(ae,G)=>{h.broadcastedIndicesToOffset=!0;let R=`${G.name}broadcastedIndicesTo${e}Offset`;if(R in z)return`${R}(${ae})`;let Q=[];for(let ce=o-1;ce>=0;ce--){let ne=G.indicesGet("outputIndices",ce+G.rank-o);Q.push(`${I(g,ce)} * (${ne} % ${I(v,ce)})`)}return z[R]=`fn ${R}(outputIndices: ${G.type.indices}) -> u32 {
             return ${Q.length>0?Q.join("+"):"0u"};
           }`,`${R}(${ae})`},B=(ae,G)=>(()=>{if(m.storage===m.value)return`${e}[${ae}]=${G};`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`${e}[${ae}]=vec2<u32>(u32(${G}), select(0u, 0xFFFFFFFFu, ${G} < 0));`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`${e}[${ae}]=vec2<u32>(u32(${G}), 0u);`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`${e}[${ae}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${G}));`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),U=ae=>(()=>{if(m.storage===m.value)return`${e}[${ae}]`;if(m.storage==="vec2<u32>"&&m.value==="i32")return`i32(${e}[${ae}].x)`;if(m.storage==="vec2<u32>"&&m.value==="u32")return`u32(${e}[${ae}].x)`;if(m.storage==="u32"&&m.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${ae}] & 0xFFu), bool(${e}[${ae}] & 0xFF00u), bool(${e}[${ae}] & 0xFF0000u), bool(${e}[${ae}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${m.storage} and value type ${m.value} yet`)})(),q=o<2?"":`
  fn get_${e}ByIndices(indices: ${m.indices}) -> ${p} {
    return ${U(`i2o_${e}(indices)`)};
  }`,X=o<2?"":(()=>{let ae=i.map(R=>`d${R}: u32`).join(", "),G=i.map(R=>`d${R}`).join(", ");return`
  fn get_${e}(${ae}) -> ${p} {
    return get_${e}ByIndices(${P(G)});
  }`})(),Z=(...ae)=>{if(ae.length!==o)throw new Error(`indices length must be ${o}`);let G=ae.map(f).join(",");return o===0?U("0u"):o===1?U(G[0]):(h.get=!0,h.getByIndices=!0,h.indicesToOffset=!0,`get_${e}(${G})`)},K=ae=>o<2?U(ae):(h.getByIndices=!0,h.indicesToOffset=!0,`get_${e}ByIndices(${ae})`),ee=o<2?"":`
  fn set_${e}ByIndices(indices: ${m.indices}, value: ${p}) {
    ${B(`i2o_${e}(indices)`,"value")}
  }`,oe=o<2?"":(()=>{let ae=i.map(R=>`d${R}: u32`).join(", "),G=i.map(R=>`d${R}`).join(", ");return`
  fn set_${e}(${ae}, value: ${p}) {
    set_${e}ByIndices(${P(G)}, value);
  }`})();return{impl:()=>{let ae=[],G=!1;return h.offsetToIndices&&(ae.push(y),G=!0),h.indicesToOffset&&(ae.push(C),G=!0),h.broadcastedIndicesToOffset&&(Object.values(z).forEach(R=>ae.push(R)),G=!0),h.set&&(ae.push(oe),G=!0),h.setByIndices&&(ae.push(ee),G=!0),h.get&&(ae.push(X),G=!0),h.getByIndices&&(ae.push(q),G=!0),!a&&G&&ae.unshift(`const ${v} = ${m.indices}(${r.join(",")});`,`const ${g} = ${m.indices}(${je.computeStrides(r).join(",")});`),ae.join(`
`)},type:m,offsetToIndices:w,indicesToOffset:E,broadcastedIndicesToOffset:D,indices:P,indicesGet:I,indicesSet:$,set:(...ae)=>{if(ae.length!==o+1)throw new Error(`indices length must be ${o}`);let G=ae[o];if(typeof G!="string")throw new Error("value must be string");let R=ae.slice(0,o).map(f).join(",");return o===0?B("0u",G):o===1?B(R[0],G):(h.set=!0,h.setByIndices=!0,h.indicesToOffset=!0,`set_${e}(${R}, ${G})`)},setByOffset:B,setByIndices:(ae,G)=>o<2?B(ae,G):(h.setByIndices=!0,h.indicesToOffset=!0,`set_${e}ByIndices(${ae}, ${G});`),get:Z,getByOffset:U,getByIndices:K,usage:n,name:e,strides:g,shape:v,rank:o}},Oe=(e,t,r,n=1)=>pu(e,t,r,"input",n),ht=(e,t,r,n=1)=>pu(e,t,r,"output",n),rL=(e,t,r)=>pu(e,t,r,"atomicOutput",1),Tb=(e,t,r,n=1)=>pu(e,t,r,"internal",n),_k=class{constructor(e,t){this.normalizedDispatchGroup=e,this.limits=t,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(e){return`if (global_idx >= ${typeof e=="number"?`${e}u`:e}) { return; }`}mainStart(e=gd){let t=typeof e=="number"?e:e[0],r=typeof e=="number"?1:e[1],n=typeof e=="number"?1:e[2];if(t>this.limits.maxComputeWorkgroupSizeX||r>this.limits.maxComputeWorkgroupSizeY||n>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(t*r*n>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${t}, ${r}, ${n}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let s=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=s?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,o=s?`let global_idx = global_id.x;
         let workgroup_index = workgroup_id.x;`:`let workgroup_index = workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
             workgroup_id.y * num_workgroups[0] + workgroup_id.x;
         let global_idx = workgroup_index * ${t*r*n}u + local_idx;`;return`@compute @workgroup_size(${t}, ${r}, ${n})
  fn main(${a}) {
    ${o}
  `}appendVariableUniforms(e){e.rank!==0&&(e.shape.startsWith("uniforms.")&&this.uniforms.push({name:e.shape.replace("uniforms.",""),type:"u32",length:e.rank}),e.strides.startsWith("uniforms.")&&this.uniforms.push({name:e.strides.replace("uniforms.",""),type:"u32",length:e.rank}))}declareVariable(e,t){if(e.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(e),this.appendVariableUniforms(e);let r=e.usage==="input"?"read":"read_write",n=e.usage==="atomicOutput"?"atomic<i32>":e.type.storage;return`@group(0) @binding(${t}) var<storage, ${r}> ${e.name}: array<${n}>;`}declareVariables(...e){return e.map(t=>this.declareVariable(t,this.variableIndex++)).join(`
`)}registerInternalVariable(e){if(e.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(e),this.appendVariableUniforms(e)}registerInternalVariables(...e){return e.forEach(t=>this.registerInternalVariable(t)),this}registerUniform(e,t,r=1){return this.uniforms.push({name:e,type:t,length:r}),this}registerUniforms(e){return this.uniforms=this.uniforms.concat(e),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let e=[];for(let{name:t,type:r,length:n}of this.uniforms)if(n&&n>4)r==="f16"?e.push(`@align(16) ${t}:array<mat2x4<${r}>, ${Math.ceil(n/8)}>`):e.push(`${t}:array<vec4<${r}>, ${Math.ceil(n/4)}>`);else{let s=n==null||n===1?r:`vec${n}<${r}>`;e.push(`${t}:${s}`)}return`
      struct Uniforms { ${e.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(e=>e.impl()).join(`
`)+this.internalVariables.map(e=>e.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let e=t=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(t)];return this.uniforms.map(t=>[e(t.type),t.length??1])}},nL=(e,t)=>new _k(e,t)}),xk,bv,vk,yk,wk,bk,Ss,sL,aL,Gi=Ke(()=>{Nt(),Bt(),Xr(),Vt(),xk=(e,t)=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.");if(t.length!==0&&t.length!==e[0].dims.length)throw new Error(`perm size ${t.length} does not match input rank ${e[0].dims.length}`)},bv=(e,t)=>t.length!==0?t:[...new Array(e).keys()].reverse(),vk=(e,t)=>je.sortBasedOnPerm(e,bv(e.length,t)),yk=(e,t,r,n)=>{let s=`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`;for(let a=0;a<t;++a)s+=`a[${e[a]}]=i[${a}];`;return s+="return a;}"},wk=(e,t)=>{let r=[],n=[];for(let s=0;s<e.length;++s)e[s]!==1&&r.push(e[s]),e[t[s]]!==1&&n.push(t[s]);return{newShape:r,newPerm:n}},bk=(e,t)=>{let r=0;for(let n=0;n<e.length;++n)if(t[e[n]]!==1){if(e[n]<r)return!1;r=e[n]}return!0},Ss=(e,t)=>{let r=e.dataType,n=e.dims.length,s=bv(n,t),a=vk(e.dims,s),o=e.dims,i=a,l=n<2||bk(s,e.dims),d;if(l)return d=h=>{let _=Oe("input",r,o,4),v=ht("output",r,i,4);return`
  ${h.registerUniform("output_size","u32").declareVariables(_,v)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    output[global_idx] = input[global_idx];
  }`},{name:"TransposeCopy",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let h=je.size(a);return{outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(h/4)}]}},getShaderSource:d};let{newShape:p,newPerm:u}=wk(e.dims,s),m=je.areEqual(u,[2,3,1]),f=je.areEqual(u,[3,1,2]);if(p.length===2||m||f){o=m?[p[0],p[1]*p[2]]:f?[p[0]*p[1],p[2]]:p,i=[o[1],o[0]];let h=16;return d=_=>{let v=Oe("a",r,o.length),g=ht("output",r,i.length);return`
  ${_.registerUniform("output_size","u32").declareVariables(v,g)}
  var<workgroup> tile : array<array<${g.type.value}, ${h+1}>, ${h}>;
  ${_.mainStart([h,h,1])}
    let stride = (uniforms.output_shape[1] - 1) / ${h} + 1;
    let workgroup_id_x = workgroup_index % stride;
    let workgroup_id_y = workgroup_index / stride;
    let input_col = workgroup_id_y * ${h}u + local_id.x;
    let input_row = workgroup_id_x * ${h}u + local_id.y;
    if (input_row < uniforms.a_shape[0] && input_col < uniforms.a_shape[1]) {
      tile[local_id.y][local_id.x] = ${v.getByIndices(`${v.type.indices}(input_row, input_col)`)};
    }
    workgroupBarrier();

    let output_col = workgroup_id_x * ${h}u + local_id.x;
    let output_row = workgroup_id_y * ${h}u + local_id.y;
    if (output_row < uniforms.output_shape[0] && output_col < uniforms.output_shape[1]) {
      ${g.setByIndices(`${g.type.indices}(output_row, output_col)`,"tile[local_id.x][local_id.y]")}
    }
  }`},{name:"TransposeShared",shaderCache:{inputDependencies:["type"]},getRunData:()=>{let _=je.size(a);return{outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(i[1]/h),y:Math.ceil(i[0]/h)},programUniforms:[{type:12,data:_},...wt(o,i)]}},getShaderSource:d}}return d=h=>{let _=Oe("a",r,o.length),v=ht("output",r,i.length);return`
  ${h.registerUniform("output_size","u32").declareVariables(_,v)}

  ${yk(s,n,_,v)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${v.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${v.setByOffset("global_idx",_.getByIndices("aIndices"))}
  }`},{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:()=>{let h=je.size(a);return{outputs:[{dims:a,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},...wt(o,i)]}},getShaderSource:d}},sL=(e,t)=>{xk(e.inputs,t.perm),e.compute(Ss(e.inputs[0],t.perm))},aL=e=>ur({perm:e.perm})}),Mk,Tk,Ek,Ck,Pk,Sk,kk,jk,Ak,Ik,pa,oL,iL,lL,cL,dL,uL,mL,pL,fL,hL,w7=Ke(()=>{Nt(),Bt(),Vt(),Eb(),Gi(),Mk={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Tk={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ek={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Ck={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Pk=(e,t)=>{let r=[];for(let n=t-e;n<t;++n)r.push(n);return r},Sk=(e,t)=>{let r=[],n=e.length;for(let a=0;a<n;a++)t.indexOf(a)===-1&&r.push(e[a]);let s=t.map(a=>e[a]);return[r,s]},kk=(e,t)=>{let r=e.length+t.length,n=[],s=0;for(let a=0;a<r;a++)t.indexOf(a)===-1?n.push(e[s++]):n.push(1);return n},jk=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ak=(e,t)=>{let r=[];if(!jk(e,t)){for(let n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);e.forEach(n=>r.push(n))}return r},Ik=(e,t,r,n,s,a,o)=>{let i=r[0].dims,l=je.size(a),d=je.size(o),p=Oe("_A",r[0].dataType,i),u=ht("output",s,a),m=64;l===1&&(m=256);let f=`
          var<workgroup> aBestValues : array<f32, ${m}>;
       `,h=_=>`
        ${_.registerUniform("reduceSize","u32").declareVariables(p,u)}
        ${f}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${_.mainStart(m)}

          let outputIndex = global_idx / ${m};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${Ek[n]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${m}) {
           let candidate = f32(${p.getByOffset("offset + k")});
           bestValue = ${Mk[n]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${m}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Tk[n]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${u.setByOffset("outputIndex",`${n==="mean"?`${u.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${u.type.storage}(${Ck[n]})`}`)};
         }
        }`;return{name:e,shaderCache:{hint:`${t};${m}`,inputDependencies:["type"]},getShaderSource:h,getRunData:()=>({outputs:[{dims:a,dataType:s}],dispatchGroup:{x:l},programUniforms:[{type:12,data:d}]})}},pa=(e,t,r,n)=>{let s=e.inputs.length===1?r:Sy(e.inputs,r),a=s.axes;a.length===0&&!s.noopWithEmptyAxes&&(a=e.inputs[0].dims.map((f,h)=>h));let o=je.normalizeAxes(a,e.inputs[0].dims.length),i=o,l=e.inputs[0],d=Ak(i,e.inputs[0].dims.length);d.length>0&&(l=e.compute(Ss(e.inputs[0],d),{inputs:[0],outputs:[-1]})[0],i=Pk(i.length,l.dims.length));let[p,u]=Sk(l.dims,i),m=p;s.keepDims&&(m=kk(p,o)),e.compute(Ik(t,s.cacheKey,[l],n,e.inputs[0].dataType,m,u),{inputs:[l]})},oL=(e,t)=>{pa(e,"ReduceMeanShared",t,"mean")},iL=(e,t)=>{pa(e,"ReduceL1Shared",t,"l1")},lL=(e,t)=>{pa(e,"ReduceL2Shared",t,"l2")},cL=(e,t)=>{pa(e,"ReduceLogSumExpShared",t,"logSumExp")},dL=(e,t)=>{pa(e,"ReduceMaxShared",t,"max")},uL=(e,t)=>{pa(e,"ReduceMinShared",t,"min")},mL=(e,t)=>{pa(e,"ReduceProdShared",t,"prod")},pL=(e,t)=>{pa(e,"ReduceSumShared",t,"sum")},fL=(e,t)=>{pa(e,"ReduceSumSquareShared",t,"sumSquare")},hL=(e,t)=>{pa(e,"ReduceLogSumShared",t,"logSum")}}),fa,Nk,Ph,Sy,ha,$k,Dk,Ok,Fk,Lk,Rk,zk,Bk,Vk,Wk,ga,gL,_L,xL,vL,yL,wL,bL,ML,TL,EL,Eb=Ke(()=>{Nt(),Bt(),Xr(),Vt(),w7(),fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Nk=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Ph=(e,t,r,n,s,a,o=!1,i=!1)=>{let l=[],d=r[0].dims,p=d.length,u=je.normalizeAxes(s,p),m=!i&&u.length===0;d.forEach((_,v)=>{m||u.indexOf(v)>=0?o&&l.push(1):l.push(_)});let f=l.length,h=je.size(l);return{name:e,shaderCache:t,getShaderSource:_=>{let v=[],g=Oe("_A",r[0].dataType,p),x=ht("output",a,f),y=n(g,x,u),w=y[2];for(let b=0,C=0;b<p;b++)m||u.indexOf(b)>=0?(o&&C++,w=`for(var j${b}: u32 = 0; j${b} < ${d[b]}; j${b}++) {
                  ${y[2].includes("last_index")?`let last_index = j${b};`:""}
                  ${g.indicesSet("input_indices",b,`j${b}`)}
                  ${w}
                }`):(v.push(`${g.indicesSet("input_indices",b,x.indicesGet("output_indices",C))};`),C++);return`

        ${_.registerUniform("output_size","u32").declareVariables(g,x)}

        ${_.mainStart()}
          ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${g.type.indices};
          let output_indices = ${x.offsetToIndices("global_idx")};

          ${v.join(`
`)}
          ${y[0]}       // init ops for reduce max/min
          ${y[1]}
          ${w}
          ${y[3]}
          ${y.length===4?x.setByOffset("global_idx","value"):y.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:l,dataType:a}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:[{type:12,data:h},...wt(d,l)]})}},Sy=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(n=>r.push(Number(n))),ur({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},ha=(e,t,r,n)=>{let s=e.inputs,a=s.length===1?r:Sy(s,r);e.compute(Ph(t,{hint:a.cacheKey,inputDependencies:["rank"]},[s[0]],a.noopWithEmptyAxes&&a.axes.length===0?Nk:n,a.axes,s[0].dataType,a.keepDims,a.noopWithEmptyAxes),{inputs:[0]})},$k=(e,t)=>{fa(e.inputs),ha(e,"ReduceLogSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,"value = log(value);"])},Dk=(e,t)=>{fa(e.inputs),ha(e,"ReduceL1",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += abs(${r.getByIndices("input_indices")});`,""])},Ok=(e,t)=>{fa(e.inputs),ha(e,"ReduceL2",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Fk=(e,t)=>{fa(e.inputs),ha(e,"ReduceLogSumExp",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += exp(${r.getByIndices("input_indices")});`,"value = log(value);"])},Lk=(e,t)=>{fa(e.inputs),ha(e,"ReduceMax",t,(r,n,s)=>{let a=[];for(let o=0;o<r.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(r.indicesSet("input_indices",o,0));return[`${a.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = max(value, ${r.getByIndices("input_indices")});`,""]})},Rk=(e,t)=>{fa(e.inputs),ha(e,"ReduceMean",t,(r,n,s)=>{let a=1;for(let o=0;o<r.rank;o++)(s.indexOf(o)>=0||s.length===0)&&(a*=e.inputs[0].dims[o]);return["var sum = f32(0);","",`sum += f32(${r.getByIndices("input_indices")});`,`let value = ${n.type.value}(sum / ${a});`]})},zk=(e,t)=>{fa(e.inputs),ha(e,"ReduceMin",t,(r,n,s)=>{let a=[];for(let o=0;o<r.rank;o++)(s.indexOf(o)>=0||s.length===0)&&a.push(`input_indices[${o}] = 0;`);return[`${a.join(`
`)}`,`var value = ${r.getByIndices("input_indices")};`,`value = min(value, ${r.getByIndices("input_indices")});`,""]})},Bk=(e,t)=>{fa(e.inputs),ha(e,"ReduceProd",t,(r,n)=>[`var value = ${n.type.storage}(1);`,"",`value *= ${r.getByIndices("input_indices")};`,""])},Vk=(e,t)=>{fa(e.inputs),ha(e,"ReduceSum",t,(r,n)=>[`var value = ${n.type.storage}(0);`,"",`value += ${r.getByIndices("input_indices")};`,""])},Wk=(e,t)=>{fa(e.inputs),ha(e,"ReduceSumSquare",t,(r,n)=>[`var t = ${n.type.value}(0); var value = ${n.type.value}(0);`,"",`t = ${r.getByIndices("input_indices")}; value += t * t;`,""])},ga=(e,t,r)=>{if(t.length===0)return r;let n=1,s=1;for(let a=0;a<t.length;a++)t.indexOf(a)===-1?n*=e[a]:s*=e[a];return s<32&&n>1024},gL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Rk(e,t):oL(e,t)},_L=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Dk(e,t):iL(e,t)},xL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ok(e,t):lL(e,t)},vL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fk(e,t):cL(e,t)},yL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Lk(e,t):dL(e,t)},wL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?zk(e,t):uL(e,t)},bL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Bk(e,t):mL(e,t)},ML=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Vk(e,t):pL(e,t)},TL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Wk(e,t):fL(e,t)},EL=(e,t)=>{ga(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?$k(e,t):hL(e,t)}}),Mv,CL,PL,ky,b7=Ke(()=>{Nt(),Xr(),Eb(),Mv=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},CL=(e,t)=>{Mv(e.inputs);let r=(n,s,a)=>{let o=[];for(let i=0;i<n.rank;i++)(a.indexOf(i)>=0||a.length===0)&&o.push(`input_indices[${i}] = 0;`);return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",s.setByOffset("global_idx","best_index")]};e.compute(Ph("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},PL=(e,t)=>{Mv(e.inputs);let r=(n,s,a)=>{let o=[];for(let i=0;i<n.rank;i++)(a.indexOf(i)>=0||a.length===0)&&o.push(`input_indices[${i}] = 0;`);return[`${o.join(`
`)}`,`var value = ${n.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${n.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {
         value = ${n.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",s.setByOffset("global_idx","best_index")]};e.compute(Ph("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ky=e=>ur(e)}),Uk,df,Gk,Hk,qk,gm,Kk,SL,Cb=Ke(()=>{Nt(),Bt(),Mb(),Vt(),Uk=(e,t)=>{let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4],i=e[5];if(o&&i)throw new Error("Attention cannot have both past and attention_bias");if(r.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let l=r.dims[0],d=r.dims[1],p=r.dims[2];if(s.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(n.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(n.dims[0]!==p)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(s.dims[0]!==n.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let u=s.dims[0]/3,m=u,f=m;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let y of t.qkvHiddenSizes)if(y%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");u=t.qkvHiddenSizes[0],m=t.qkvHiddenSizes[1],f=t.qkvHiddenSizes[2]}let h=d;if(u!==m)throw new Error("qkv_hidden_sizes first element should be same as the second");if(s.dims[0]!==u+m+f)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let _=0;if(o){if(m!==f)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(o.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(o.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(o.dims[1]!==l)throw new Error('Input "past" second dimension must be batch_size');if(o.dims[2]!==t.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(o.dims[4]!==m/t.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');t.pastPresentShareBuffer||(_=o.dims[3])}let v=h+_,g=-1,x=0;if(a)throw new Error("Mask not supported");if(o)throw new Error("past is not supported");if(i){if(i.dims.length!==4)throw new Error('Input "attention_bias" must have 4 dimensions');if(i.dims[0]!==l||i.dims[1]!==t.numHeads||i.dims[2]!==d||i.dims[3]!==v)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:l,sequenceLength:d,pastSequenceLength:_,kvSequenceLength:h,totalSequenceLength:v,maxSequenceLength:g,inputHiddenSize:p,hiddenSize:u,vHiddenSize:f,headSize:Math.floor(u/t.numHeads),vHeadSize:Math.floor(f/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},df=(e,t,r)=>t&&e?`
      let total_sequence_length_input = u32(${t.getByOffset("0")});
      let present_sequence_length = max(total_sequence_length_input, uniforms.past_sequence_length);
      let is_subsequent_prompt: bool = sequence_length > 1 && sequence_length != total_sequence_length_input;
      let is_first_prompt: bool = is_subsequent_prompt == false && sequence_length == total_sequence_length_input;
      total_sequence_length = u32(${e==null?void 0:e.getByOffset("batchIdx")}) + 1;
      var past_sequence_length: u32 = 0;
      if (is_first_prompt == false) {
        past_sequence_length = total_sequence_length - sequence_length;
      }
       `:`
    ${r?"let past_sequence_length = uniforms.past_sequence_length":""};
    let present_sequence_length = total_sequence_length;
    `,Gk=(e,t,r,n,s,a,o,i)=>{let l=zr(o?1:a),d=64,p=a/l;p<d&&(d=32);let u=Math.ceil(a/l/d),m=[{type:12,data:t},{type:12,data:r},{type:12,data:n},{type:12,data:s},{type:12,data:p},{type:12,data:u}],f=Cn(e.dataType,l),h=Qn(1,l),_=["type"];o&&_.push("type"),i&&_.push("type");let v=g=>{let x=ht("x",e.dataType,e.dims,l),y=[x],w=o?Oe("seq_lens",o.dataType,o.dims):void 0;w&&y.push(w);let b=i?Oe("total_sequence_length_input",i.dataType,i.dims):void 0;b&&y.push(b);let C=Qn(e.dataType),E=[{name:"batch_size",type:"u32"},{name:"num_heads",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"sequence_length",type:"u32"},{name:"total_sequence_length",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${d}>;
  var<workgroup> thread_sum: array<f32, ${d}>;
  ${g.registerUniforms(E).declareVariables(...y)}
  ${g.mainStart([d,1,1])}
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let sequence_length = uniforms.sequence_length;
    var total_sequence_length = uniforms.total_sequence_length;
    ${df(w,b,!1)}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = (global_idx / ${d}) * uniforms.total_sequence_length + local_offset;
    let seq_causal_length = ${o?"u32(past_sequence_length + workgroup_id.y + 1)":"total_sequence_length"};
    var thread_max_vector = ${h}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      thread_max_vector = max(${h}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(l){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${d}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${h}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
      sum_vector += exp(${h}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(l){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${l}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${d}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        x[offset + i] = ${x.type.value}(${C}(1.0) / ${C}(seq_causal_length));
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < seq_causal_length; i++) {
        var f32input = ${h}(x[offset + i]);
        x[offset + i] = ${x.type.value}(exp(f32input - max_value) / sum);
      }
    }
      ${o?`
        for (var total_seq_id: u32 = seq_causal_length; total_seq_id + local_offset < uniforms.total_sequence_length; total_seq_id++) {
          x[offset + total_seq_id] = ${x.type.value}(${C}(0));
        }`:""};
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${d};${f};${l}`,inputDependencies:_},getShaderSource:v,getRunData:()=>({outputs:[],dispatchGroup:{x:1,y:s,z:t*r},programUniforms:m})}},Hk=(e,t,r,n,s,a,o,i,l)=>{let d=o+a.kvSequenceLength,p=[a.batchSize,a.numHeads,a.sequenceLength,d],u=e>1&&n,m=a.kvNumHeads?a.kvNumHeads:a.numHeads,f=u?[a.batchSize,m,d,a.headSize]:void 0,h=a.nReps?a.nReps:1,_=a.scale===0?1/Math.sqrt(a.headSize):a.scale,v=zr(a.headSize),g=a.headSize/v,x=12,y={x:Math.ceil(d/x),y:Math.ceil(a.sequenceLength/x),z:a.batchSize*a.numHeads},w=[{type:12,data:a.sequenceLength},{type:12,data:g},{type:12,data:d},{type:12,data:a.numHeads},{type:12,data:a.headSize},{type:1,data:_},{type:12,data:o},{type:12,data:a.kvSequenceLength},{type:12,data:h}],b=u&&n&&je.size(n.dims)>0,C=["type","type"];b&&C.push("type"),s&&C.push("type"),i&&C.push("type"),l&&C.push("type");let E=[{dims:p,dataType:t.dataType,gpuDataType:0}];u&&E.push({dims:f,dataType:t.dataType,gpuDataType:0});let P=I=>{let $=Oe("q",t.dataType,t.dims,v),z=Oe("key",r.dataType,r.dims,v),D=[$,z];if(b){let ee=Oe("past_key",n.dataType,n.dims,v);D.push(ee)}s&&D.push(Oe("attention_bias",s.dataType,s.dims));let B=i?Oe("seq_lens",i.dataType,i.dims):void 0;B&&D.push(B);let U=l?Oe("total_sequence_length_input",l.dataType,l.dims):void 0;U&&D.push(U);let q=ht("output",t.dataType,p),X=[q];u&&X.push(ht("present_key",t.dataType,f,v));let Z=Qn(1,v),K=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"alpha",type:"f32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${x}u;

  var<workgroup> tileQ: array<${$.type.storage}, ${x*x}>;
  var<workgroup> tileK: array<${$.type.storage}, ${x*x}>;
  ${I.registerUniforms(K).declareVariables(...D,...X)}
  ${I.mainStart([x,x,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z % uniforms.num_heads;
    let kvHeadIdx = ${h===1?"headIdx":"headIdx / uniforms.n_reps"};
    let kv_num_heads = ${h===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
    let batchIdx = workgroup_id.z / uniforms.num_heads;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let sequence_length = uniforms.M;
    var total_sequence_length = uniforms.N;
    ${df(B,U,!0)}
    let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx;
    let qOffset = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
    ${b&&u?"let pastKeyOffset = absKvHeadIdx * uniforms.past_sequence_length * uniforms.K;":""};
    let kOffset = absKvHeadIdx * uniforms.kv_sequence_length * uniforms.K;
    ${u?"let presentKeyOffset = absKvHeadIdx * uniforms.N * uniforms.K;":""}
    var value = ${Z}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
      ${b&&u?`
              if (n + local_id.y < past_sequence_length) {
                tileK[idx] = past_key[pastKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
              } else if (n + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
                tileK[idx] = key[kOffset + (n + local_id.y - past_sequence_length) * uniforms.K + w + local_id.x];
              }`:`
          if (n + local_id.y < uniforms.kv_sequence_length) {
            tileK[idx] = key[kOffset + (n + local_id.y) * uniforms.K + w + local_id.x];
          }`}
      ${u?`if (n + local_id.y < present_sequence_length) {
        present_key[presentKeyOffset + (n + local_id.y) * uniforms.K + w + local_id.x] = tileK[idx];
      }`:""}
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
          value += ${Z}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    if (global_id.y < uniforms.M && global_id.x < total_sequence_length) {
      let headOffset = workgroup_id.z * uniforms.M * uniforms.N;
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(v){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${v}`)}})()};
        output[outputIdx] = ${q.type.value} (sum * uniforms.alpha) + ${s?"attention_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${v};${s!==void 0};${n!==void 0};${e}`,inputDependencies:C},getRunData:()=>({outputs:E,dispatchGroup:y,programUniforms:w}),getShaderSource:P}},qk=(e,t,r,n,s,a,o=void 0,i=void 0)=>{let l=a+s.kvSequenceLength,d=s.nReps?s.nReps:1,p=s.vHiddenSize*d,u=e>1&&n,m=s.kvNumHeads?s.kvNumHeads:s.numHeads,f=u?[s.batchSize,m,l,s.headSize]:void 0,h=[s.batchSize,s.sequenceLength,p],_=12,v={x:Math.ceil(s.vHeadSize/_),y:Math.ceil(s.sequenceLength/_),z:s.batchSize*s.numHeads},g=[{type:12,data:s.sequenceLength},{type:12,data:l},{type:12,data:s.vHeadSize},{type:12,data:s.numHeads},{type:12,data:s.headSize},{type:12,data:p},{type:12,data:a},{type:12,data:s.kvSequenceLength},{type:12,data:d}],x=u&&n&&je.size(n.dims)>0,y=["type","type"];x&&y.push("type"),o&&y.push("type"),i&&y.push("type");let w=[{dims:h,dataType:t.dataType,gpuDataType:0}];u&&w.push({dims:f,dataType:t.dataType,gpuDataType:0});let b=C=>{let E=Oe("probs",t.dataType,t.dims),P=Oe("v",r.dataType,r.dims),I=[E,P];x&&I.push(Oe("past_value",n.dataType,n.dims));let $=o?Oe("seq_lens",o.dataType,o.dims):void 0;o&&I.push($);let z=i?Oe("total_sequence_length_input",i.dataType,i.dims):void 0;i&&I.push(z);let D=[ht("output",t.dataType,h)];u&&D.push(ht("present_value",t.dataType,f));let B=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"v_hidden_size",type:"u32"},{name:"past_sequence_length",type:"u32"},{name:"kv_sequence_length",type:"u32"},{name:"n_reps",type:"u32"}];return`
  const TILE_SIZE = ${_}u;
  var<workgroup> tileQ: array<${E.type.value}, ${_*_}>;
  var<workgroup> tileV: array<${E.type.value}, ${_*_}>;
  ${C.registerUniforms(B).declareVariables(...I,...D)}
  ${C.mainStart([_,_,1])}
   let headIdx = workgroup_id.z % uniforms.num_heads;
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let kvHeadIdx = ${d===1?"headIdx":"headIdx / uniforms.n_reps"};
   let kv_num_heads = ${d===1?"uniforms.num_heads":"uniforms.num_heads / uniforms.n_reps"};
   let m = global_id.y;
   let n = global_id.x;
   let sequence_length = uniforms.M;
   var total_sequence_length = uniforms.K;
   ${df($,z,!0)}
   let offsetA = workgroup_id.z * uniforms.M * uniforms.K + m * uniforms.K;
   let absKvHeadIdx = batchIdx * kv_num_heads + kvHeadIdx; // kvHeadIdx is relative to the batch
   ${x&&u?"let pastValueOffset = absKvHeadIdx * uniforms.N * uniforms.past_sequence_length + n;":""};
   let vOffset = absKvHeadIdx * uniforms.N * uniforms.kv_sequence_length + n;
   ${u?"let presentValueOffset = absKvHeadIdx * uniforms.N * uniforms.K + n;":""}
   var value = ${E.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        var idx = TILE_SIZE * local_id.y + local_id.x;
        ${x&&u?`
        if (w + local_id.y < past_sequence_length) {
          tileV[idx] = past_value[pastValueOffset + (w + local_id.y) * uniforms.N];
        } else if (w + local_id.y - past_sequence_length < uniforms.kv_sequence_length) {
          tileV[idx] = v[vOffset + (w + local_id.y - past_sequence_length) * uniforms.N];
        }
      `:`
            if (w + local_id.y < uniforms.kv_sequence_length) {
              tileV[idx] = v[vOffset + (w + local_id.y) * uniforms.N];
            }`}
        ${u?`
            if (w + local_id.y < present_sequence_length) {
          present_value[presentValueOffset + (w + local_id.y) * uniforms.N] = tileV[idx];
        }`:""}
      }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < total_sequence_length; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileV[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + headIdx * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`};return{name:"AttentionScore",shaderCache:{hint:`${n!==void 0};${e}`,inputDependencies:y},getRunData:()=>({outputs:w,dispatchGroup:v,programUniforms:g}),getShaderSource:b}},gm=(e,t,r,n,s,a,o,i,l,d,p=void 0,u=void 0)=>{let m=Math.min(e.outputCount,1+(o?1:0)+(i?1:0)),f=m>1?d.pastSequenceLength:0,h=f+d.kvSequenceLength,_=l&&je.size(l.dims)>0?l:void 0,v=[t,r];m>1&&o&&je.size(o.dims)>0&&v.push(o),_&&v.push(_),p&&v.push(p),u&&v.push(u);let g=e.compute(Hk(m,t,r,o,_,d,f,p,u),{inputs:v,outputs:m>1?[-1,1]:[-1]})[0];e.compute(Gk(g,d.batchSize,d.numHeads,f,d.sequenceLength,h,p,u),{inputs:p&&u?[g,p,u]:[g],outputs:[]});let x=[g,n];m>1&&i&&je.size(i.dims)>0&&x.push(i),p&&x.push(p),u&&x.push(u),e.compute(qk(m,g,n,i,d,f,p,u),{inputs:x,outputs:m>1?[0,2]:[0]})},Kk=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],n=t.sequenceLength,s=t.inputHiddenSize,a=t.headSize,o=12,i={x:Math.ceil(t.headSize/o),y:Math.ceil(t.sequenceLength/o),z:t.batchSize*t.numHeads},l=[e.inputs[0],e.inputs[1],e.inputs[2]],d=[{type:12,data:n},{type:12,data:s},{type:12,data:a},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],p=u=>{let m=ht("output_q",l[0].dataType,r),f=ht("output_k",l[0].dataType,r),h=ht("output_v",l[0].dataType,r),_=Oe("input",l[0].dataType,l[0].dims),v=Oe("weight",l[1].dataType,l[1].dims),g=Oe("bias",l[2].dataType,l[2].dims),x=_.type.storage,y=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${o}u;
  var<workgroup> tileInput: array<${x}, ${o*o}>;
  var<workgroup> tileWeightQ: array<${x}, ${o*o}>;
  var<workgroup> tileWeightK: array<${x}, ${o*o}>;
  var<workgroup> tileWeightV: array<${x}, ${o*o}>;
  ${u.registerUniforms(y).declareVariables(_,v,g,m,f,h)}
  ${u.mainStart([o,o,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${x}(0);
    var valueK = ${x}(0);
    var valueV = ${x}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:i,programUniforms:d}),getShaderSource:p},{inputs:l,outputs:[-1,-1,-1]})},SL=(e,t)=>{let r=Uk(e.inputs,t),[n,s,a]=Kk(e,r);return gm(e,n,s,a,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r)}}),Qk,Xk,Yk,kL,M7=Ke(()=>{Oa(),Nt(),Bt(),Xr(),Vt(),Qk=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(n,s,a)=>{let o=s.length;if(o!==n.length)throw new Error(`${a}: num dimensions != ${o}`);s.forEach((i,l)=>{if(i!==n[l])throw new Error(`${a}: dim[${l}] do not match`)})};if(e[0].dims.length>1){let n=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,n,"Invalid input scale"),r(e[2].dims,n,"Invalid input B"),r(e[3].dims,n,"Invalid input mean"),r(e[4].dims,n,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},Xk=(e,t)=>{let{epsilon:r,spatial:n,format:s}=t,a=e[0].dims,o=n?zr(a[a.length-1]):1,i=s==="NHWC"&&a.length>1?o:1,l=je.size(a)/o,d=n,p=d?a.length:a,u=Oe("x",e[0].dataType,e[0].dims,o),m=Oe("scale",e[1].dataType,e[1].dims,i),f=Oe("bias",e[2].dataType,e[2].dims,i),h=Oe("inputMean",e[3].dataType,e[3].dims,i),_=Oe("inputVar",e[4].dataType,e[4].dims,i),v=ht("y",e[0].dataType,p,o),g=()=>{let y="";if(n)y=`let cOffset = ${a.length===1?"0u":s==="NHWC"?`outputIndices[${a.length-1}] / ${o}`:"outputIndices[1]"};`;else if(s==="NCHW")y=`
            ${v.indicesSet("outputIndices","0","0")}
            let cOffset = ${v.indicesToOffset("outputIndices")};`;else{y=`var cIndices = ${m.type.indices}(0);
                       cIndices[0] = outputIndices[${a.length-1}];`;for(let w=1;w<m.rank;w++)y+=`cIndices[${w}] = outputIndices[${w}];`;y+=`let cOffset = ${m.indicesToOffset("cIndices")};`}return y},x=y=>`
  const epsilon = ${r};
  ${y.registerUniform("outputSize","u32").declareVariables(u,m,f,h,_,v)}
  ${y.mainStart()}
  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${v.offsetToIndices(`global_idx * ${o}`)};
    ${g()}
    let scale = ${m.getByOffset("cOffset")};
    let bias = ${f.getByOffset("cOffset")};
    let inputMean = ${h.getByOffset("cOffset")};
    let inputVar = ${_.getByOffset("cOffset")};
    let x = ${u.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${v.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${n}_${o}`,inputDependencies:d?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d?[{type:12,data:l},...wt(a)]:[{type:12,data:l}]})}},Yk=e=>ur(e),kL=(e,t)=>{let{inputs:r,outputCount:n}=e,s=Yk({...t,outputCount:n});if(Er.webgpu.validateInputContent&&Qk(r,s),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(Xk(r,s))}}),Zk,Jk,jL,T7=Ke(()=>{Bt(),Vt(),Zk=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},Jk=e=>{let t=e[0].dims,r=e[0].dims[2],n=je.size(t)/4,s=e[0].dataType,a=Oe("input",s,t,4),o=Oe("bias",s,[r],4),i=Oe("residual",s,t,4),l=ht("output",s,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(n/64)}}),getShaderSource:d=>`
  const channels = ${r}u / 4;
  ${d.declareVariables(a,o,i,l)}

  ${d.mainStart()}
    ${d.guardAgainstOutOfBoundsWorkgroupSizes(n)}
    let value = ${a.getByOffset("global_idx")}
      + ${o.getByOffset("global_idx % channels")} + ${i.getByOffset("global_idx")};
    ${l.setByOffset("global_idx","value")}
  }`}},jL=e=>{Zk(e.inputs),e.compute(Jk(e.inputs))}}),ej,or,AL,IL,NL,$L,DL,OL,FL,LL,RL,tj,zL,BL,VL,WL,Pu,UL,Rf,GL,HL,qL,KL,QL,XL,YL,ZL,JL,eR,tR,rR,nR,sR,aR,oR,Tv,iR,jy,Ay,lR,cR,dR,rj,nj,uR,Pb=Ke(()=>{Nt(),Bt(),Xr(),Vt(),ej=(e,t,r,n,s,a,o)=>{let i=Math.ceil(t/4),l="";typeof s=="string"?l=`${s}(a)`:l=s("a");let d=Oe("inputData",r,[i],4),p=ht("outputData",n,[i],4),u=[{name:"vec_size",type:"u32"}];return o&&u.push(...o),`
      ${e.registerUniforms(u).declareVariables(d,p)}

  ${a??""}

  ${e.mainStart()}
    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${d.getByOffset("global_idx")};
    ${p.setByOffset("global_idx",l)}
  }`},or=(e,t,r,n,s,a=e.dataType,o,i)=>{let l=[{type:12,data:Math.ceil(je.size(e.dims)/4)}];return o&&l.push(...o),{name:t,shaderCache:{hint:s,inputDependencies:["type"]},getShaderSource:d=>ej(d,je.size(e.dims),e.dataType,a,r,n,i),getRunData:d=>({outputs:[{dims:e.dims,dataType:a}],dispatchGroup:{x:Math.ceil(je.size(d[0].dims)/64/4)},programUniforms:l})}},AL=e=>{e.compute(or(e.inputs[0],"Abs","abs"))},IL=e=>{e.compute(or(e.inputs[0],"Acos","acos"))},NL=e=>{e.compute(or(e.inputs[0],"Acosh","acosh"))},$L=e=>{e.compute(or(e.inputs[0],"Asin","asin"))},DL=e=>{e.compute(or(e.inputs[0],"Asinh","asinh"))},OL=e=>{e.compute(or(e.inputs[0],"Atan","atan"))},FL=e=>{e.compute(or(e.inputs[0],"Atanh","atanh"))},LL=e=>ur(e),RL=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${t.to}`)}e.compute(or(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},tj=e=>{let t,r,n=e.length>=2&&e[1].data!==0,s=e.length>=3&&e[2].data!==0;switch(e[0].dataType){case 1:t=n?e[1].getFloat32Array()[0]:-34028234663852886e22,r=s?e[2].getFloat32Array()[0]:34028234663852886e22;break;case 10:t=n?e[1].getUint16Array()[0]:64511,r=s?e[2].getUint16Array()[0]:31743;break;default:throw new Error("Unsupport data type")}return ur({min:t,max:r})},zL=(e,t)=>{let r=t||tj(e.inputs),n=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"Clip",s=>`clamp(${s}, vec4<${n}>(uniforms.min), vec4<${n}>(uniforms.max))`,void 0,r.cacheKey,void 0,[{type:e.inputs[0].dataType,data:r.min},{type:e.inputs[0].dataType,data:r.max}],[{name:"min",type:n},{name:"max",type:n}]),{inputs:[0]})},BL=e=>{e.compute(or(e.inputs[0],"Ceil","ceil"))},VL=e=>{e.compute(or(e.inputs[0],"Cos","cos"))},WL=e=>{e.compute(or(e.inputs[0],"Cosh","cosh"))},Pu=e=>ur(e),UL=(e,t)=>{let r=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"Elu",n=>`elu_vf32(${n})`,`
  const elu_alpha_ = ${r}(${t.alpha});

  fn elu_f32(a: ${r}) -> ${r} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,t.cacheKey))},Rf=(e="f32")=>`
const r0: ${e} = 0.3275911;
const r1: ${e} = 0.254829592;
const r2: ${e} = -0.284496736;
const r3: ${e} = 1.421413741;
const r4: ${e} = -1.453152027;
const r5: ${e} = 1.061405429;

fn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,GL=e=>{let t=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,Rf(t)))},HL=e=>{e.compute(or(e.inputs[0],"Exp","exp"))},qL=e=>{e.compute(or(e.inputs[0],"Floor","floor"))},KL=e=>{let t=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,Rf(t)))},QL=(e,t)=>{let r=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"LeakyRelu",n=>`select(leaky_relu_alpha_ * ${n}, ${n}, ${n} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},XL=e=>{e.compute(or(e.inputs[0],"Not",t=>`!${t}`))},YL=e=>{e.compute(or(e.inputs[0],"Neg",t=>`-${t}`))},ZL=e=>{e.compute(or(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},JL=e=>{let t=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},eR=e=>{e.compute(or(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},tR=e=>ur(e),rR=(e,t)=>{let r=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"HardSigmoid",n=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${n} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},nR=e=>{e.compute(or(e.inputs[0],"Sin","sin"))},sR=e=>{e.compute(or(e.inputs[0],"Sinh","sinh"))},aR=e=>{e.compute(or(e.inputs[0],"Sqrt","sqrt"))},oR=e=>{e.compute(or(e.inputs[0],"Tan","tan"))},Tv=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,iR=e=>{e.compute(or(e.inputs[0],"Tanh",Tv))},jy=(e="f32")=>`
const fast_gelu_a: ${e} = 0.5;
const fast_gelu_b: ${e} = 0.7978845608028654;
const fast_gelu_c: ${e} = 0.035677408136300125;

fn tanh_v(v: vec4<${e}>) -> vec4<${e}> {
  return ${Tv("v")};
}
`,Ay=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,lR=e=>{let t=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"FastGelu",Ay,jy(t),void 0,e.inputs[0].dataType))},cR=(e,t)=>{let r=Qn(e.inputs[0].dataType);return e.compute(or(e.inputs[0],"ThresholdedRelu",n=>`select(vec4<${r}>(0.0), ${n}, ${n} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},dR=e=>{e.compute(or(e.inputs[0],"Log","log"))},rj=(e,t)=>`
const alpha = vec4<${e}>(${t});
const one = ${e}(1.0);
const zero = ${e}(0.0);

fn quick_gelu_impl(x: vec4<${e}>) -> vec4<${e}> {
  let v = x *alpha;
  var x1 : vec4<${e}>;
  for (var i = 0; i < 4; i = i + 1) {
    if (v[i] >= zero) {
      x1[i] = one / (one + exp(-v[i]));
    } else {
      x1[i] = one - one / (one + exp(v[i]));
    }
  }
  return x * x1;
}
`,nj=e=>`quick_gelu_impl(${e})`,uR=(e,t)=>{let r=Qn(e.inputs[0].dataType);e.compute(or(e.inputs[0],"QuickGelu",nj,rj(r,t.alpha),t.cacheKey,e.inputs[0].dataType))}}),sj,aj,mR,E7=Ke(()=>{Bt(),Vt(),Pb(),sj=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},aj=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=Oe("input",e[0].dataType,e[0].dims,4),n=Oe("bias",e[0].dataType,[e[0].dims[2]],4),s=ht("output",e[0].dataType,t,4),a=je.size(t)/4,o=Cn(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)}}),getShaderSource:i=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${e[0].dims[2]/4/2}u;

  ${i.declareVariables(r,n,s)}

  ${Rf(o)}

  ${i.mainStart()}
    ${i.guardAgainstOutOfBoundsWorkgroupSizes(a)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${s.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},mR=e=>{sj(e.inputs),e.compute(aj(e.inputs))}}),oj,ij,_a,pR,fR,hR,gR,_R,xR,vR,yR,wR,bR,C7=Ke(()=>{Nt(),Bt(),Vt(),oj=(e,t,r,n,s,a,o,i,l,d,p,u)=>{let m,f;typeof i=="string"?m=f=(x,y)=>`${i}((${x}),(${y}))`:typeof i=="function"?m=f=i:(m=i.scalar,f=i.vector);let h=ht("outputData",p,n.length,4),_=Oe("aData",l,t.length,4),v=Oe("bData",d,r.length,4),g;if(s)if(a){let x=je.size(t)===1,y=je.size(r)===1,w=t.length>0&&t[t.length-1]%4===0,b=r.length>0&&r[r.length-1]%4===0;x||y?g=h.setByOffset("global_idx",f(x?`${_.type.value}(${_.getByOffset("0")}.x)`:_.getByOffset("global_idx"),y?`${v.type.value}(${v.getByOffset("0")}.x)`:v.getByOffset("global_idx"))):g=`
            let outputIndices = ${h.offsetToIndices("global_idx * 4u")};
            let offsetA = ${_.broadcastedIndicesToOffset("outputIndices",h)};
            let offsetB = ${v.broadcastedIndicesToOffset("outputIndices",h)};
            ${h.setByOffset("global_idx",f(o||w?_.getByOffset("offsetA / 4u"):`${_.type.value}(${_.getByOffset("offsetA / 4u")}[offsetA % 4u])`,o||b?v.getByOffset("offsetB / 4u"):`${v.type.value}(${v.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else g=h.setByOffset("global_idx",f(_.getByOffset("global_idx"),v.getByOffset("global_idx")));else{if(!a)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(y,w,b="")=>{let C=`aData[indexA${w}][componentA${w}]`,E=`bData[indexB${w}][componentB${w}]`;return`
            let outputIndices${w} = ${h.offsetToIndices(`global_idx * 4u + ${w}u`)};
            let offsetA${w} = ${_.broadcastedIndicesToOffset(`outputIndices${w}`,h)};
            let offsetB${w} = ${v.broadcastedIndicesToOffset(`outputIndices${w}`,h)};
            let indexA${w} = offsetA${w} / 4u;
            let indexB${w} = offsetB${w} / 4u;
            let componentA${w} = offsetA${w} % 4u;
            let componentB${w} = offsetB${w} % 4u;
            ${y}[${w}] = ${b}(${m(C,E)});
          `};p===9?g=`
            var data = vec4<u32>(0);
            ${x("data",0,"u32")}
            ${x("data",1,"u32")}
            ${x("data",2,"u32")}
            ${x("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:g=`
            ${x("outputData[global_idx]",0)}
            ${x("outputData[global_idx]",1)}
            ${x("outputData[global_idx]",2)}
            ${x("outputData[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(_,v,h)}

        ${u??""}

        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${g}
      }`},ij=(e,t,r,n,s,a,o=r.dataType)=>{let i=r.dims.map(_=>Number(_)??1),l=n.dims.map(_=>Number(_)??1),d=!je.areEqual(i,l),p=i,u=je.size(i),m=!1,f=!1,h=[d];if(d){let _=hd.calcShape(i,l,!1);if(!_)throw new Error("Can't perform binary op on the given tensors");p=_.slice(),u=je.size(p);let v=je.size(i)===1,g=je.size(l)===1,x=i.length>0&&i[i.length-1]%4===0,y=l.length>0&&l[l.length-1]%4===0;h.push(v),h.push(g),h.push(x),h.push(y);let w=1;for(let b=1;b<p.length;b++){let C=i[i.length-b],E=l[l.length-b];if(C===E)w*=C;else break}w%4===0?(f=!0,m=!0):(v||g||x||y)&&(m=!0)}else m=!0;return h.push(m),{name:e,shaderCache:{hint:t+h.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>oj(_,i,l,p,m,d,f,s,r.dataType,n.dataType,o,a),getRunData:()=>({outputs:[{dims:p,dataType:o}],dispatchGroup:{x:Math.ceil(u/64/4)},programUniforms:[{type:12,data:Math.ceil(je.size(p)/4)},...wt(i,l,p)]})}},_a=(e,t,r,n,s,a)=>{e.compute(ij(t,s??"",e.inputs[0],e.inputs[1],r,n,a))},pR=e=>{_a(e,"Add",(t,r)=>`${t}+${r}`)},fR=e=>{_a(e,"Div",(t,r)=>`${t}/${r}`)},hR=e=>{_a(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},gR=e=>{_a(e,"Mul",(t,r)=>`${t}*${r}`)},_R=e=>{let t=Oe("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;_a(e,"Pow",{scalar:(r,n)=>`pow_custom(${r},${n})`,vector:(r,n)=>`pow_vector_custom(${r},${n})`},`
    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {
      if (b == ${t}(0.0)) {
        return ${t}(1.0);
      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {
        return ${t}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {
      // TODO: implement vectorized pow
      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},xR=e=>{_a(e,"Sub",(t,r)=>`${t}-${r}`)},vR=e=>{_a(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},yR=e=>{_a(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},wR=e=>{_a(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},bR=e=>{_a(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}}),lj,cj,dj,uj,MR,TR,P7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),lj=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,n=e[r],s=n.dataType,a=n.dims.length;e.forEach((o,i)=>{if(i!==r){if(o.dataType!==s)throw new Error("input tensors should be one type");if(o.dims.length!==a)throw new Error("input tensors should have the same shape");o.dims.forEach((l,d)=>{if(d!==t&&l!==n.dims[d])throw new Error("non concat dimensions must match")})}})},cj=(e,t)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${e}u>(${t});
    for (var i: u32 = 0u; i < ${e}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${e}u;
  }`,dj=(e,t)=>{let r=e.length,n=[];for(let s=0;s<r;++s){let a=t.setByOffset("global_idx",e[s].getByIndices("indices"));r===1?n.push(a):s===0?n.push(`if (inputIndex == ${s}u) { ${a} }`):s===r-1?n.push(`else { ${a} }`):n.push(`else if (inputIndex == ${s}) { ${a} }`)}return n.join(`
`)},uj=(e,t,r,n)=>{let s=je.size(r),a=new Array(e.length),o=new Array(e.length),i=0,l=[],d=[],p=[{type:12,data:s}];for(let _=0;_<e.length;++_)i+=e[_].dims[t],a[_]=i,d.push(e[_].dims.length),o[_]=Oe(`input${_}`,n,d[_]),l.push("rank"),p.push({type:12,data:a[_]});for(let _=0;_<e.length;++_)p.push(...wt(e[_].dims));p.push(...wt(r));let u=ht("output",n,r.length),m=u.indicesGet("indices",t),f=Array.from(Array(a.length).keys()).map(_=>`uniforms.sizeInConcatAxis${_}`).join(","),h=_=>`

  ${(()=>{_.registerUniform("outputSize","u32");for(let v=0;v<e.length;v++)_.registerUniform(`sizeInConcatAxis${v}`,"u32");return _.declareVariables(...o,u)})()}

  ${cj(a.length,f)}

  ${_.mainStart()}
    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${u.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${m});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${a.length}u>(${f});
      ${m} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${dj(o,u)}
  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:l},getRunData:()=>({outputs:[{dims:r,dataType:n}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:p}),getShaderSource:h}},MR=(e,t)=>{let r=e.inputs,n=r[0].dims,s=je.normalizeAxis(t.axis,n.length);lj(r,s);let a=n.slice();a[s]=r.reduce((i,l)=>i+(l.dims.length>s?l.dims[s]:0),0);let o=r.filter(i=>je.size(i.dims)>0);e.compute(uj(o,s,a,r[0].dataType),{inputs:o})},TR=e=>ur({axis:e.axis})}),zl,Bl,Vl,Sb,Xl=Ke(()=>{Nt(),Bt(),zl=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"Tanh":return`let e2x = exp(-2.0 * abs(value));
              value = sign(value) * (1.0 - e2x) / (1.0 + e2x);
        `;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},Bl=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Vl=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Sb=e=>{let t=(e==null?void 0:e.activation)||"";if(t==="HardSigmoid"){let[r,n]=(e==null?void 0:e.activation_params)||[.2,.5];return{activation:t,alpha:r,beta:n}}else if(t==="Clip"){let[r,n]=(e==null?void 0:e.activation_params)||[XF,YF];return{activation:t,clipMax:n,clipMin:r}}else if(t==="LeakyRelu"){let[r]=(e==null?void 0:e.activation_params)||[.01];return{activation:t,alpha:r}}return{activation:t}}}),jn,ER,kb=Ke(()=>{jn=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},ER=e=>`
      ${e?"value = value + getBiasByOutputCoords(coords);":""}
      `}),CR,S7=Ke(()=>{CR=e=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));
}
`}),zu,jb,Ab=Ke(()=>{Nt(),Bt(),Vt(),Xl(),zu=(e,t,r,n,s)=>{let a=n-r;return`
      ${Array.from({length:r}).map((o,i)=>`
      if (${xt(t.shape,i,t.rank)} != 1) {
        ${t.indicesSet(e,i,xt(s,i+a,n))}
      } else {
        ${t.indicesSet(e,i,0)}
      }`).join("")}
`},jb=(e,t,r,n,s=!1,a)=>{let o=e[0].dims,i=e[1].dims,l=o[o.length-2],d=i[i.length-1],p=o[o.length-1],u=zr(d),m=zr(p),f=zr(l),h=je.size(r)/u/f,_=e.length>2,v=n?n.slice(0,-2):r.slice(0,-2),g=[je.size(v),l,d],x=[{type:12,data:h},{type:12,data:l},{type:12,data:d},{type:12,data:p}];Bl(t,x),x.push(...wt(v,o,i)),_&&x.push(...wt(e[2].dims)),x.push(...wt(g));let y=w=>{let b=Tb("batch_dims",e[0].dataType,v.length),C=Oe("a",e[0].dataType,o.length,m),E=Oe("b",e[1].dataType,i.length,u),P=ht("output",e[0].dataType,g.length,u),I=Cn(P.type.tensor),$=zl(t,P.type.value,I),z=[C,E],D="";if(_){let q=s?u:1;z.push(Oe("bias",e[2].dataType,e[2].dims.length,q)),D=`${s?`value += bias[col / ${q}];`:`value += ${P.type.value}(bias[row + i]);`}`}let B=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Vl(t,B);let U=()=>{let q=`var a_data: ${C.type.value};`;for(let X=0;X<m;X++)q+=`
              let b_data${X} = b[(b_offset + (k + ${X}) * uniforms.N + col) / ${u}];`;for(let X=0;X<f;X++){q+=`a_data = a[(a_offset + (row + ${X}) * uniforms.K + k) / ${m}];`;for(let Z=0;Z<m;Z++)q+=`
            values[${X}] = fma(${E.type.value}(a_data${m===1?"":`[${Z}]`}), b_data${Z}, values[${X}]);
`}return q};return`
  ${w.registerUniforms(B).registerInternalVariables(b).declareVariables(...z,P)}
  ${w.mainStart()}
    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${u})) * ${u};
    var index1 = global_idx / (uniforms.N / ${u});
    let stride1 = uniforms.M / ${f};
    let row = (index1 % stride1) * ${f};
    let batch = index1 / stride1;

    ${r.length===2?"":`let batch_indices = ${b.offsetToIndices("batch")};`}

    var a_indices: ${C.type.indices};
    ${zu("a_indices",C,C.rank-2,b.rank,"batch_indices")}
    ${C.indicesSet("a_indices",C.rank-2,0)}
    ${C.indicesSet("a_indices",C.rank-1,0)}
    let a_offset = ${C.indicesToOffset("a_indices")};

    var b_indices: ${E.type.indices};
    ${zu("b_indices",E,E.rank-2,b.rank,"batch_indices")}
    ${E.indicesSet("b_indices",E.rank-2,0)}
    ${E.indicesSet("b_indices",E.rank-1,0)}
    let b_offset = ${E.indicesToOffset("b_indices")};
    var values: array<${P.type.value}, ${f}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${m}) {
      ${U()}
    }
    for (var i = 0u; i < ${f}u; i++) {
      var value = values[i];
      ${D}
      ${$}
      let cur_indices = ${P.type.indices}(batch, row + i, col);
      let offset = ${P.indicesToOffset("cur_indices")};
      ${P.setByOffset(`offset / ${u}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${u};${m};${f};${s}`,inputDependencies:_?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:a?a(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:x}),getShaderSource:y}}}),mj,pj,Iy,Ev,fj,Ny,hj,Sh,Ib=Ke(()=>{Nt(),Bt(),Vt(),Xl(),Ab(),kb(),mj=(e,t)=>e?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${t?", batchIndices":""});
        `,pj=(e,t)=>e?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,Iy=(e,t,r="f32",n,s=!1,a=32,o=!1,i=32)=>{let l=t[1]*e[1],d=t[0]*e[0],p=s?l:a,u=s?a:l,m=p/t[0],f=a/t[1];if(!((s&&m===4&&e[1]===4||!s&&(m===3||m===4))&&p%t[0]===0&&a%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${s} is true, innerElementSize ${m} and workPerThread[1] ${e[1]} must be 4.
      Otherwise, innerElementSize ${m} must be 3 or 4.
  tileAWidth ${p} must be divisible by workgroupSize[0]${t[0]}. tileInner ${a} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${m}<${r}>, ${p/m}>, ${u}>;
var<workgroup> mm_Bsub: array<array<vec4<${r}>, ${d/e[0]}>, ${a}>;

const rowPerThread = ${e[1]};
const colPerThread = ${e[0]};
const innerElementSize = ${m};
const tileInner = ${a};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${o?"0":"i32(globalId.z)"};
  ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${l};

  let num_tiles = ${o?`${Math.ceil(i/a)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${o?`i32(globalId.z) * ${i}`:"0"};

  var acc: array<vec4<${r}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${f};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${mj(s,n)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${f}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${n?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${m===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${pj(s,m)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Ev=(e,t)=>e?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${t?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${t?", batchIndices":""});
            `,fj=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Ny=(e,t,r="f32",n,s=!1,a=32,o=!1,i=32,l=!1)=>{let d=e[1]*t[1],p=e[0]*t[0],u=s?d:a,m=s?a:d;if(!(m%t[1]===0&&u%t[0]===0&&a%t[1]===0))throw new Error(`tileAHight ${m} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${u} must be divisible by workgroupSize[0]${t[0]}, tileInner ${a} must be divisible by workgroupSize[1]${t[1]}`);let f=m/t[1],h=u/t[0],_=a/t[1],v=l?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${d};
    let globalColStart = i32(workgroupId.x) * ${p};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${m}; inputRow = inputRow + ${t[1]}) {
        for (var inputCol = localCol; inputCol < ${u}; inputCol = inputCol + ${t[0]}) {
          ${Ev(s,n)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${a}; inputRow = inputRow + ${t[1]}) {
            for (var inputCol = localCol; inputCol < ${p}; inputCol = inputCol + ${t[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${n?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${r}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${s?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${t[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${t[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${d};

let tileRowA = i32(localId.y) * ${f};
let tileColA = i32(localId.x) * ${h};
let tileRowB = i32(localId.y) * ${_};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${f}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${h}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Ev(s,n)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${n?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${r}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${fj(s)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${r}, ${u}>, ${m}>;
  var<workgroup> mm_Bsub : array<array<${r}, ${p}>, ${a}>;
  const rowPerThread = ${e[1]};
  const colPerThread = ${e[0]};
  const tileInner = ${a};

@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${o?"0":"i32(globalId.z)"};
    ${n?`let batchIndices = ${n.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${o?`${Math.ceil(i/a)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${o?`i32(globalId.z) * ${i}`:"0"};

    var acc : array<array<${r}, colPerThread>, rowPerThread>;
    ${v}
  }
`},hj=(e,t,r,n,s=!1)=>{let[a,o,i,l]=n,d=Cn(n[0].type.tensor);return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${a.type.indices}) -> ${jn(e,d)} {
      var value = ${jn(e,d)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        var aIndices: ${o.type.indices};
        ${zu("aIndices",o,o.rank-2,a.rank,"batchIndices")}
        ${o.indicesSet("aIndices",o.rank-2,"u32(row)")}
        ${o.indicesSet("aIndices",o.rank-1,"u32(colIn)")}
        value = ${o.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${a.type.indices}) -> ${jn(e,d)} {
      var value = ${jn(e,d)}(0.0);
      let col = colIn * ${e};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        var bIndices: ${i.type.indices};
        ${zu("bIndices",i,i.rank-2,a.rank,"batchIndices")}
        ${i.indicesSet("bIndices",i.rank-2,"u32(row)")}
        ${i.indicesSet("bIndices",i.rank-1,"u32(colIn)")}
        value = ${i.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${jn(e,d)}) {
      let col = colIn * ${e};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${t?`value = value + ${s?"bias[colIn]":`${jn(e,d)}(bias[row])`};`:""}
        ${r}
        ${l.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},Sh=(e,t,r,n,s=!1,a)=>{let o=e[0].dims,i=e[1].dims,l=o.slice(0,-2),d=i.slice(0,-2),p=n?n.slice(0,-2):r.slice(0,-2),u=je.size(p),m=o[o.length-2],f=o[o.length-1],h=i[i.length-1],_=f%4===0&&h%4===0,v=m<=8?[4,1,1]:[4,4,1],g=[8,8,1],x=[Math.ceil(h/g[0]/v[0]),Math.ceil(m/g[1]/v[1]),Math.ceil(u/g[2]/v[2])],y=_?4:1,w=[...l,m,f/y],b=w.length,C=[...d,f,h/y],E=C.length,P=[u,m,h/y],I=[{type:6,data:m},{type:6,data:h},{type:6,data:f}];Bl(t,I),I.push(...wt(p,w,C));let $=["rank","rank"],z=e.length>2;z&&(I.push(...wt(e[2].dims)),$.push("rank")),I.push(...wt(P));let D=B=>{let U=p.length,q=Tb("batchDims",e[0].dataType,U,1),X=Cn(e[0].dataType),Z=Oe("a",e[0].dataType,b,y),K=Oe("b",e[1].dataType,E,y),ee=ht("result",e[0].dataType,P.length,y),oe=[Z,K];if(z){let ce=s?y:1;oe.push(Oe("bias",e[2].dataType,e[2].dims.length,ce))}let ae=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Vl(t,ae);let G=Cn(ee.type.tensor),R=zl(t,ee.type.value,G),Q=hj(y,z,R,[q,Z,K,ee],s);return`
  ${B.registerUniforms(ae).registerInternalVariables(q).declareVariables(...oe,ee)}
  ${Q}
  ${_?Iy(v,g,X,q):Ny(v,g,X,q)}
                   `};return{name:"MatMul",shaderCache:{hint:`${v};${t.activation};${_};${s}`,inputDependencies:$},getRunData:()=>({outputs:[{dims:a?a(r):r,dataType:e[0].dataType}],dispatchGroup:{x:x[0],y:x[1],z:x[2]},programUniforms:I}),getShaderSource:D}}}),gj,PR,k7=Ke(()=>{Nt(),Vo(),Vt(),Xl(),kb(),S7(),Ib(),gj=(e,t,r,n,s=!1,a,o=4,i=4,l=4,d="f32")=>{let p=I=>{switch(I){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${d}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${I} is not supported.`)}},u=I=>{switch(I){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${I} is not supported.`)}},m=e?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,f=e?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,h=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",_=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",v=e?"row":"col",g=e?"col":"row",x=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${v} / outWidth;
    let outCol = ${v} % outWidth;

    let WRow = ${g} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${g} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${g} % inChannels;
    var resData = ${jn(o,d)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${h} && xCol >= 0 && xCol < ${_}) {
      ${m}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${p(o)}
    }
    return resData;`,y=e?t&&n?`
    let col = colIn * ${o};
    ${x}`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${x}
    }
    return ${jn(o,d)}(0.0);`:n&&r?`
    let col = colIn * ${o};
    ${x}`:`
    let col = colIn * ${o};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${x}
    }
    return ${jn(o,d)}(0.0);`,w=e?n&&r?u(i):`
    let col = colIn * ${i};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${u(i)}
    }
    return ${jn(i,d)}(0.0);`:`
    let col = colIn * ${i};
    if (row < uniforms.dim_inner && col < uniforms.dim_a_outer) {
      ${u(i)}
    }
    return ${jn(i,d)}(0.0);`,b=jn(l,d),C=jn(e?o:i,d),E=jn(e?i:o,d),P=zl(a,b,d);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${C} {
      ${e?y:w}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${E} {
      ${e?w:y}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${b}) {
      let col = colIn * ${l};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${f}
      ${ER(s)}
      ${P}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},PR=(e,t,r,n,s,a,o,i,l)=>{let d=t.format==="NHWC",p=d?e[0].dims[3]:e[0].dims[1],u=r[0],m=d?r[2]:r[3],f=d?r[1]:r[2],h=d?r[3]:r[1],_=d&&(p%4===0||p%3===0)&&h%4===0,v=d?h:m*f,g=d?m*f:h,x=[8,8,1],y=n<=8?[4,1,1]:[4,4,1],w=[Math.ceil(v/x[0]/y[0]),Math.ceil(g/x[1]/y[1]),Math.ceil(u/x[2]/y[2])];er("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${w}`);let b=_?d&&p%4!==0?3:4:1,C=x[1]*y[1],E=x[0]*y[0],P=Math.max(x[0]*b,x[1]),I=n%C===0,$=s%E===0,z=a%P===0,D=_?[b,4,4]:[1,1,1],B=[{type:6,data:n},{type:6,data:s},{type:6,data:a},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];Bl(t,B),B.push(...wt(e[0].dims,e[1].dims));let U=["rank","rank"];o&&(B.push(...wt(e[2].dims)),U.push("rank")),B.push(...wt(r));let q=X=>{let Z=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Vl(t,Z);let K=_?4:1,ee=Cn(e[0].dataType),oe=`
      fn setOutputAtIndex(flatIndex : i32, value : ${_?`vec4<${ee}>`:ee}) {
        result[flatIndex] = ${_?`vec4<${ee}>`:ee}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${_?`vec4<${ee}>`:ee}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${_?"/ 4":""}, value);
      }`,ae=Oe("x",e[0].dataType,e[0].dims.length,b===3?1:b),G=Oe("w",e[1].dataType,e[1].dims.length,K),R=[ae,G],Q=ht("result",e[0].dataType,r.length,K);if(o){let ce=Oe("bias",e[2].dataType,e[2].dims.length,K);R.push(ce),oe+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${_?`vec4<${ee}>`:ee} {
          return bias[coords.${d?"w":"y"}${_?"/ 4":""}];
        }`}return`
        ${CR("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${X.registerUniforms(Z).declareVariables(...R,Q)}
        ${oe}
        ${gj(d,I,$,z,o,t,D[0],D[1],D[2],ee)}
        ${_?Iy(y,x,ee,void 0,!d,P):Ny(y,x,ee,void 0,!d,P,!1,void 0,i)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${b};${_};${I};${$};${z};${C};${E};${P}`,inputDependencies:U},getRunData:()=>({outputs:[{dims:l?l(r):r,dataType:e[0].dataType}],dispatchGroup:{x:w[0],y:w[1],z:w[2]},programUniforms:B}),getShaderSource:q}}}),_j,Cv,fu,xj,Pv,vj,SR,kR,j7=Ke(()=>{Nt(),Vo(),Bt(),Vt(),Xl(),kb(),_j=e=>{let t=1;for(let r=0;r<e.length;r++)t*=e[r];return t},Cv=e=>typeof e=="number"?[e,e,e]:e,fu=(e,t)=>t<=1?e:e+(e-1)*(t-1),xj=(e,t,r,n=1)=>{let s=fu(t,n);return Math.floor((e[0]*(r-1)-r+s)/2)},Pv=(e,t,r,n,s)=>{s==null&&(s=xj(e,t[0],n[0]));let a=[0,0,0,r];for(let o=0;o<3;o++)e[o]+2*s>=t[o]&&(a[o]=Math.trunc((e[o]-t[o]+2*s)/n[o]+1));return a},vj=(e,t,r,n,s,a,o,i,l,d)=>{let p,u,m,f;if(e==="VALID"&&(e=0),typeof e=="number"){p={top:e,bottom:e,left:e,right:e,front:e,back:e};let h=Pv([t,r,n,1],[i,l,d],1,[s,a,o],e);u=h[0],m=h[1],f=h[2]}else if(Array.isArray(e)){if(!e.every((_,v,g)=>_===g[0]))throw Error(`Unsupported padding parameter: ${e}`);p={top:e[0],bottom:e[1],left:e[2],right:e[3],front:e[4],back:e[5]};let h=Pv([t,r,n,1],[i,l,d],1,[s,a,o],e[0]);u=h[0],m=h[1],f=h[2]}else if(e==="SAME_UPPER"){u=Math.ceil(t/s),m=Math.ceil(r/a),f=Math.ceil(n/o);let h=(u-1)*s+i-t,_=(m-1)*a+l-r,v=(f-1)*o+d-n,g=Math.floor(h/2),x=h-g,y=Math.floor(_/2),w=_-y,b=Math.floor(v/2),C=v-b;p={top:y,bottom:w,left:b,right:C,front:g,back:x}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:p,outDepth:u,outHeight:m,outWidth:f}},SR=(e,t,r,n,s,a=!1,o="channelsLast")=>{let i,l,d,p,u;if(o==="channelsLast")[i,l,d,p,u]=e;else if(o==="channelsFirst")[i,u,l,d,p]=e;else throw new Error(`Unknown dataFormat ${o}`);let[m,,f,h,_]=t,[v,g,x]=Cv(r),[y,w,b]=Cv(n),C=fu(f,y),E=fu(h,w),P=fu(_,b),{padInfo:I,outDepth:$,outHeight:z,outWidth:D}=vj(s,l,d,p,v,g,x,C,E,P),B=a?m*u:m,U=[0,0,0,0,0];return o==="channelsFirst"?U=[i,B,$,z,D]:o==="channelsLast"&&(U=[i,$,z,D,B]),{batchSize:i,dataFormat:o,inDepth:l,inHeight:d,inWidth:p,inChannels:u,outDepth:$,outHeight:z,outWidth:D,outChannels:B,padInfo:I,strideDepth:v,strideHeight:g,strideWidth:x,filterDepth:f,filterHeight:h,filterWidth:_,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:P,dilationDepth:y,dilationHeight:w,dilationWidth:b,inShape:e,outShape:U,filterShape:t}},kR=(e,t,r,n,s,a)=>{let o=a==="channelsLast";o?e[0].dims[3]:e[0].dims[1];let i=[64,1,1],l={x:r.map((v,g)=>g)},d=[Math.ceil(_j(l.x.map(v=>r[v]))/i[0]),1,1];er("verbose",()=>`[conv3d_naive_webgpu] dispatch = ${d}`);let p=1,u=je.size(r),m=[{type:12,data:u},{type:12,data:n},{type:12,data:s},{type:12,data:t.strides},{type:12,data:t.dilations}];Bl(t,m),m.push(...wt(e[0].dims,e[1].dims));let f=["rank","rank"],h=e.length===3;h&&(m.push(...wt(e[2].dims)),f.push("rank")),m.push(...wt(r));let _=v=>{let g=[{name:"output_size",type:"u32"},{name:"filter_dims",type:"u32",length:n.length},{name:"pads",type:"u32",length:s.length},{name:"strides",type:"u32",length:t.strides.length},{name:"dilations",type:"u32",length:t.dilations.length}];Vl(t,g);let x=1,y=Cn(e[0].dataType),w=Oe("x",e[0].dataType,e[0].dims.length,p),b=Oe("W",e[1].dataType,e[1].dims.length,x),C=[w,b],E=ht("result",e[0].dataType,r.length,x),P="";if(h){let z=Oe("bias",e[2].dataType,e[2].dims.length,x);C.push(z),P+=`
        fn getBiasByOutputCoords(coords : array<u32, 5>) -> ${y} {
          return bias[${o?xt("coords",4,5):xt("coords",1,5)}];
        }`}let I=jn(p,y),$=zl(t,I,y);return`
            ${P}
            fn getX(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${w.getByIndices("aIndices")};
            }
            fn getW(d0 : u32, d1 : u32, d2 : u32, d3 : u32, d4 : u32) -> f32 {
              let aIndices = array<u32, 5>(d0, d1, d2, d3, d4);
              return ${b.getByIndices("aIndices")};
            }
          ${v.registerUniforms(g).declareVariables(...C,E)}
          ${v.mainStart()}
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
              let coords = ${E.offsetToIndices("global_idx")};
              let batch = ${xt("coords",0,w.rank)};
              let d2 = ${o?xt("coords",w.rank-1,w.rank):xt("coords",1,w.rank)};
              let xFRCCorner = vec3<u32>(${o?xt("coords",1,w.rank):xt("coords",2,w.rank)},
              ${o?xt("coords",2,w.rank):xt("coords",3,w.rank)},
              ${o?xt("coords",3,w.rank):xt("coords",4,w.rank)}) * uniforms.strides - uniforms.pads;
              let xFCorner = xFRCCorner.x;
              let xRCorner = xFRCCorner.y;
              let xCCorner = xFRCCorner.z;
              let xShapeY = ${o?xt("uniforms.x_shape",1,w.rank):xt("uniforms.x_shape",2,w.rank)};
              let xShapeZ = ${o?xt("uniforms.x_shape",2,w.rank):xt("uniforms.x_shape",3,w.rank)};
              let xShapeW = ${o?xt("uniforms.x_shape",3,w.rank):xt("uniforms.x_shape",4,w.rank)};
              let xShapeU = ${o?xt("uniforms.x_shape",4,w.rank):xt("uniforms.x_shape",1,w.rank)};
              let inputDepthNearestVec4 = (xShapeU / 4) * 4;
              let inputDepthVec4Remainder = xShapeU % 4;

              var value = 0.0;
              for (var wF = 0u; wF < uniforms.filter_dims[0]; wF++) {
                let xF = xFCorner + wF * uniforms.dilations[0];
                if (xF < 0 || xF >= xShapeY) {
                  continue;
                }

                for (var wR = 0u; wR < uniforms.filter_dims[1]; wR++) {
                  let xR = xRCorner + wR * uniforms.dilations[1];
                  if (xR < 0 || xR >= xShapeZ) {
                    continue;
                  }

                  for (var wC = 0u; wC < uniforms.filter_dims[2]; wC++) {
                    let xC = xCCorner + wC * uniforms.dilations[2];
                    if (xC < 0 || xC >= xShapeW) {
                      continue;
                    }

                    for (var d1 = 0u; d1 < inputDepthNearestVec4; d1 += 4) {
                      ${o?`let xValues = vec4<f32>(
                               getX(batch, xF, xR, xC, d1),
                               getX(batch, xF, xR, xC, d1 + 1),
                               getX(batch, xF, xR, xC, d1 + 2),
                               getX(batch, xF, xR, xC, d1 + 3));
                            `:`let xValues = vec4<f32>(
                               getX(batch, d1, xF, xR, xC),
                               getX(batch, d1 + 1, xF, xR, xC),
                               getX(batch, d1 + 2, xF, xR, xC),
                               getX(batch, d1 + 3, xF, xR, xC));
                            `}
                            let wValues = vec4<f32>(
                              getW(d2, d1, wF, wR, wC),
                              getW(d2, d1 + 1, wF, wR, wC),
                              getW(d2, d1 + 2, wF, wR, wC),
                              getW(d2, d1 + 3, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                    if (inputDepthVec4Remainder == 1) {
                        ${o?`value += getX(batch, xF, xR, xC, inputDepthNearestVec4)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`:`value += getX(batch, inputDepthNearestVec4, xF, xR, xC)
                          * getW(d2, inputDepthNearestVec4, wF, wR, wC);`}
                    } else if (inputDepthVec4Remainder == 2) {
                      ${o?`let xValues = vec2<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1));
                      `:`let xValues = vec2<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC));
                    `}
                    let wValues = vec2<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC));
                      value += dot(xValues, wValues);
                    } else if (inputDepthVec4Remainder == 3) {
                      ${o?`let xValues = vec3<f32>(
                        getX(batch, xF, xR, xC, inputDepthNearestVec4),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),
                        getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2));
                      `:`let xValues = vec3<f32>(
                        getX(batch, inputDepthNearestVec4, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 1, xF, xR, xC),
                        getX(batch, inputDepthNearestVec4 + 2, xF, xR, xC));
                    `}
                    let wValues = vec3<f32>(
                      getW(d2, inputDepthNearestVec4, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 1, wF, wR, wC),
                      getW(d2, inputDepthNearestVec4 + 2, wF, wR, wC));
                      value += dot(xValues, wValues);
                    }
                  }
                }
              }
              ${h?"value = value + getBiasByOutputCoords(coords)":""};
              ${$}
              result[global_idx] = f32(value);
          }`};return{name:"Conv3DNaive",shaderCache:{hint:`${t.cacheKey};${o};${p};${h}`,inputDependencies:f},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:d[0],y:d[1],z:d[2]},programUniforms:m}),getShaderSource:_}}}),jR,AR,A7=Ke(()=>{Nt(),Bt(),Vt(),Xl(),jR=(e,t,r,n)=>{let s=e.length>2,a=s?"value += b[output_channel];":"",o=e[0].dims,i=e[1].dims,l=t.format==="NHWC",d=l?r[3]:r[1],p=d/t.group,u=l&&p>=4?zr(d):1,m=je.size(r)/u,f=[{type:12,data:m},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:p}];Bl(t,f),f.push(...wt(o,[i[0],i[1],i[2],i[3]/u]));let h=s?["rank","rank","rank"]:["rank","rank"];f.push(...wt([r[0],r[1],r[2],r[3]/u]));let _=v=>{let g=ht("output",e[0].dataType,r.length,u),x=Cn(g.type.tensor),y=zl(t,g.type.value,x),w=Oe("x",e[0].dataType,o.length),b=Oe("w",e[1].dataType,i.length,u),C=[w,b];s&&C.push(Oe("b",e[2].dataType,e[2].dims,u));let E=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];Vl(t,E);let P=l?`
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[0]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[1]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[1]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[2]; wInChannel++) {
            let input_channel = in_channel_offset + wInChannel;
            let xVal = ${w.get("batch","xHeight","xWidth","input_channel")};
            let wVal = ${b.get("wHeight","wWidth","wInChannel","output_channel")};
            value += xVal * wVal;
          }
        }
      }
      `:`
      for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
        let input_channel = in_channel_offset + wInChannel;
        for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
          let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

          if (xHeight < 0u || xHeight >= uniforms.x_shape[2]) {
            continue;
          }

          for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
            let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
            if (xWidth < 0u || xWidth >= uniforms.x_shape[3]) {
              continue;
            }

            let xVal = ${w.get("batch","input_channel","xHeight","xWidth")};
            let wVal = ${b.get("output_channel","wInChannel","wHeight","wWidth")};
            value += xVal * wVal;
          }
        }
      }
      `;return`
  ${v.registerUniforms(E).declareVariables(...C,g)}

  ${v.mainStart()}
    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${g.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${l?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${l?1:2}], outputIndices[${l?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel * ${u} / uniforms.output_channels_per_group;
    var in_channel_offset = group_id * uniforms.w_shape[${l?2:1}];

    var value: ${g.type.value} = ${g.type.value}(0);
    ${P}
    ${a}
    ${y}
    ${g.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:`${t.cacheKey}_${u}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:f}),getShaderSource:_}},AR=(e,t,r,n)=>{let s=e.length>2,a=zr(r[3]),o=zr(r[2]),i=je.size(r)/a/o,l=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/a],d=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/a],p=[r[0],r[1],r[2],r[3]/a],u=[{type:12,data:i},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];Bl(t,u),u.push(...wt(l,d,p));let m=(o-1)*t.strides[1]+d[1],f=h=>{let _=ht("output",e[0].dataType,p.length,a),v=Cn(_.type.tensor),g=zl(t,_.type.value,v),x=Oe("x",e[0].dataType,l.length,a),y=Oe("w",e[1].dataType,d.length,a),w=[x,y];s&&w.push(Oe("b",e[2].dataType,e[2].dims,a));let b=s?"value += b[output_channel];":"",C=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Vl(t,C),`
  ${h.registerUniforms(C).declareVariables(...w,_)}
  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${o}u;
    let col = (index1 % width1) * ${o}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${x.type.value}, ${m}>;
    var values: array<${_.type.value}, ${o}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${d[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${m}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${x.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${x.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${d[1]}; w_width++) {
          let w_val = ${y.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${o}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${o}u; i++) {
      var value = values[i];
      ${b}
      ${g}
      ${_.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${a};${o};${m};${d[0]};${d[1]}`,inputDependencies:s?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:n?n(r):r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:u}),getShaderSource:f}}}),yj,uf,wj,mf,$y,Sv,bj,Mj,Dy,I7=Ke(()=>{Bt(),k7(),j7(),Ib(),A7(),Xl(),Ab(),Gi(),yj=(e,t,r,n,s,a)=>{let o=e[0],i=e.slice(a?1:2,a?3:4),l=i.length,d=t[0],p=t.slice(2).map((m,f)=>m+(m-1)*(r[f]-1)),u=i.map((m,f)=>m+n[f]+n[f+l]).map((m,f)=>Math.floor((m-p[f]+s[f])/s[f]));return u.splice(0,0,o),u.splice(a?3:1,0,d),u},uf=[2,3,1,0],wj=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length>5)throw new Error("greater than 5D is not supported");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[1]*t.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let s=e[0].dims.length-2;if(t.dilations.length!==s)throw new Error(`dilations should be ${s}D`);if(t.strides.length!==s)throw new Error(`strides should be ${s}D`);if(t.pads.length!==s*2)throw new Error(`pads should be ${s*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},mf=(e,t)=>{let r=e.kernelShape.slice();r.length<t[1].dims.length-2&&r.push(...Array(t[1].dims.length-2-r.length).fill(0));for(let a=2;a<t[1].dims.length;++a)r[a-2]===0&&(r[a-2]=t[1].dims[a]);let n=e.pads.slice();Ch.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,n,e.format==="NHWC",e.autoPad);let s=Object.assign({},e);return Object.assign(s,{kernelShape:r,pads:n}),s},$y=e=>{let t=Sb(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],s=e.dilations,a=e.group,o=e.kernel_shape,i=e.pads,l=e.strides,d=e.w_is_const();return{autoPad:n,format:r,dilations:s,group:a,kernelShape:o,pads:i,strides:l,wIsConst:d,...t,cacheKey:`${e.format};${t.activation};`}},Sv=(e,t,r,n)=>{let s=r.format==="NHWC",a=yj(t[0].dims,t[1].dims,r.dilations,r.pads,r.strides,s);if(r.group!==1){let C=[t[0]];if(s){let E=e.kernelCustomData.wT??e.compute(Ss(t[1],uf),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=E),C.push(E)}else C.push(t[1]);t.length===3&&C.push(t[2]),!e.adapterInfo.isArchitecture("ampere")&&s&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1?e.compute(AR(C,r,a,n),{inputs:C}):e.compute(jR(C,r,a,n),{inputs:C});return}let o=t.length===3,i=t[0].dims[s?1:2],l=t[0].dims[s?2:3],d=t[0].dims[s?3:1],p=t[1].dims[2],u=t[1].dims[3],m=a[s?1:2],f=a[s?2:3],h=a[s?3:1],_=s&&p===i&&u===l&&r.pads[0]===0&&r.pads[1]===0;if(_||p===1&&u===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let C=a[0],E,P,I,$=[];if(s){let B=e.kernelCustomData.wT??e.compute(Ss(t[1],uf),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=B),_){let U=i*l*d;E=t[0].reshape([1,C,U]),P=B.reshape([1,U,h]),I=[1,C,h]}else E=t[0].reshape([C,i*l,d]),P=B.reshape([1,d,h]),I=[C,m*f,h];$.push(E),$.push(P)}else E=t[0].reshape([C,d,i*l]),P=t[1].reshape([1,h,d]),I=[C,h,m*f],$.push(P),$.push(E);o&&$.push(t[2]);let z=I[2],D=$[0].dims[$[0].dims.length-1];z<8&&D<8?e.compute(jb($,r,a,I,s,n),{inputs:$}):e.compute(Sh($,r,a,I,s,n),{inputs:$});return}let v=!0,g=e.kernelCustomData.wT??e.compute(Ss(t[1],uf),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=g);let x=[t[0],g];o&&x.push(t[2]);let y=s?m*f:h,w=s?h:m*f,b=p*u*d;e.compute(PR(x,r,a,y,w,b,o,v,n),{inputs:x})},bj=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let s=[0,t.pads[0],0,t.pads[1]],a=[1].concat(t.strides),o=[1].concat(t.dilations),i=[1].concat(t.kernelShape),l=mf({...t,pads:s,strides:a,dilations:o,kernelShape:i},n);Sv(e,n,l,d=>r?[d[0],d[2],d[3]]:[d[0],d[1],d[3]])},Mj=(e,t,r)=>{let n=r.format==="NHWC"?"channelsLast":"channelsFirst",s=mf(r,t),a=r.autoPad==="NOTSET"?r.pads:r.autoPad,o=SR(t[0].dims,t[1].dims,r.strides,r.dilations,a,!1,n);e.compute(kR(t,s,o.outShape,[o.filterDepth,o.filterHeight,o.filterWidth],[o.padInfo.front,o.padInfo.top,o.padInfo.left],n))},Dy=(e,t)=>{if(wj(e.inputs,t),e.inputs[0].dims.length===3)bj(e,t);else if(e.inputs[0].dims.length===5)Mj(e,e.inputs,t);else{let r=mf(t,e.inputs);Sv(e,e.inputs,r)}}}),IR,N7=Ke(()=>{Nt(),Vo(),Bt(),Vt(),IR=(e,t,r)=>{let n=e.length>2,s=t.outputShape,a=t.format==="NHWC",o=t.group,i=e[1].dims,l=i[2]/o,d=i[3],p=a?zr(l):1,u=a&&d===1&&l>=4,m=u?Math.floor(l/4)*4:Math.floor(l/p)*p,f=l-m,h=a?zr(d):1,_=a?d===1?p:h:1,v=je.size(s)/h,g=[Math.ceil(v/64),1,1];er("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${g}`);let x=["rank","rank"],y=[t.strides[0],t.strides[1]],w=[t.kernelShape[a?1:2],t.kernelShape[a?2:3]],b=[t.dilations[0],t.dilations[1]],C=[w[0]+(t.dilations[0]<=1?0:(t.kernelShape[a?1:2]-1)*(t.dilations[0]-1)),w[1]+(t.dilations[1]<=1?0:(t.kernelShape[a?2:3]-1)*(t.dilations[1]-1))],E=[C[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),C[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],P=[{type:12,data:v},{type:12,data:y},{type:12,data:w},{type:12,data:b},{type:12,data:C},{type:6,data:E},{type:12,data:m},{type:12,data:l},{type:12,data:d},...wt(e[0].dims,e[1].dims)];n&&(P.push(...wt(e[2].dims)),x.push("rank")),P.push(...wt(s));let I=$=>{let z=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:y.length},{name:"filter_dims",type:"u32",length:w.length},{name:"dilations",type:"u32",length:w.length},{name:"effective_filter_dims",type:"u32",length:C.length},{name:"pads",type:"i32",length:E.length},{name:"input_channels_per_group_int",type:"u32"},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],D=Cn(e[0].dataType),B=a?1:2,U=a?2:3,q=a?3:1,X=Oe("W",e[1].dataType,e[1].dims.length,_),Z=Oe("Dy",e[0].dataType,e[0].dims.length,p),K=[Z,X];n&&K.push(Oe("bias",e[2].dataType,[s[q]].length,h));let ee=ht("result",e[0].dataType,s.length,h),oe=()=>{let R="";if(u)p===4?R+=`
        let xValue = ${Z.getByOffset("x_offset")};
        let wValue = ${X.getByOffset("w_offset")};
        dotProd = dotProd + dot(xValue, wValue);
        x_offset += 1u;
        w_offset += 1u;`:p===2?R+=`
          dotProd = dotProd + dot(vec4<${D}>(${Z.getByOffset("x_offset")}, ${Z.getByOffset("x_offset + 1u")}), vec4<${D}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}));
          x_offset += 2u;
          w_offset += 2u;`:p===1&&(R+=`
          dotProd = dotProd + dot(vec4<${D}>(${Z.getByOffset("x_offset")}, ${Z.getByOffset("x_offset + 1u")}, ${Z.getByOffset("x_offset + 2u")}, ${Z.getByOffset("x_offset + 3u")}), vec4<${D}>(${X.getByOffset("w_offset")}, ${X.getByOffset("w_offset + 1u")}, ${X.getByOffset("w_offset + 2u")}, ${X.getByOffset("w_offset + 3u")}));
          x_offset += 4u;
          w_offset += 4u;`);else if(R+=`
                  let xValue = ${a?Z.getByOffset(`${Z.indicesToOffset(`${Z.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${p}`):Z.get("batch","inputChannel","idyR","idyC")};
        `,p===1)R+=`
          let w_offset = ${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel, wOutChannel)`)};
          let wValue = ${X.getByOffset(`w_offset / ${_}`)};
          dotProd = dotProd + xValue * wValue;`;else for(let Q=0;Q<p;Q++)R+=`
            let wValue${Q} = ${X.getByOffset(`${X.indicesToOffset(`${X.type.indices}(u32(wRPerm), u32(wCPerm), inputChannel + ${Q}, wOutChannel)`)} / ${_}`)};
            dotProd = dotProd + xValue[${Q}] * wValue${Q};`;return R},ae=()=>{if(f===0)return"";if(!u)throw new Error(`packInputAs4 ${u} is not true.`);let R="";if(p===1){R+="dotProd = dotProd";for(let Q=0;Q<f;Q++)R+=`
            + ${Z.getByOffset(`x_offset + ${Q}`)} * ${X.getByOffset(`w_offset + ${Q}`)}`;R+=";"}else if(p===2){if(f!==2)throw new Error(`Invalid inputChannelsRemainder ${f}.`);R+=`
          let xValue = ${Z.getByOffset("x_offset")};
          let wValue = ${X.getByOffset("w_offset")};
          dotProd = dotProd + dot(xValue, wValue);`}return R},G=`
            let outputIndices = ${ee.offsetToIndices(`global_idx * ${h}`)};
            let batch = ${ee.indicesGet("outputIndices",0)};
            let d1 = ${ee.indicesGet("outputIndices",q)};
            let r = ${ee.indicesGet("outputIndices",B)};
            let c = ${ee.indicesGet("outputIndices",U)};
            let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
            let dyRCorner = dyCorner.x;
            let dyCCorner = dyCorner.y;
            let groupId = d1 / uniforms.output_channels_per_group;
            let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
            // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
            // ? = to be determined. : = across all values in that axis.
            var dotProd = ${ee.type.value}(0.0);
            var wR: u32 = 0;
            if (uniforms.dilations.x == 1) {
              // Minimum wR >= 0 that satisfies (dyRCorner + wR) % (uniforms.strides.x) == 0
              wR = u32(((dyRCorner + i32(uniforms.strides.x) - 1) / i32(uniforms.strides.x)) * i32(uniforms.strides.x) - dyRCorner);
            }
            for (; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
              if (wR % uniforms.dilations.x != 0) {
                continue;
              }
              let dyR = (${D}(dyRCorner) + ${D}(wR)) / ${D}(uniforms.strides[0]);
              let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
              if (dyR < 0.0 || dyR >= ${D}(uniforms.Dy_shape[${B}]) || fract(dyR) > 0.0 ||
                  wRPerm < 0) {
                continue;
              }
              let idyR: u32 = u32(dyR);
              var wC: u32 = 0;
              if (uniforms.dilations.y == 1) {
                // Minimum wC >= 0 that satisfies (dyCCorner + wC) % (uniforms.strides.y) == 0
                wC = u32(((dyCCorner + i32(uniforms.strides.y) - 1) / i32(uniforms.strides.y)) * i32(uniforms.strides.y) - dyCCorner);
              }
              for (; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
                if (wC % uniforms.dilations.y != 0) {
                  continue;
                }
                let dyC = (${D}(dyCCorner) + ${D}(wC)) / ${D}(uniforms.strides.y);
                let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
                if (dyC < 0.0 || dyC >= ${D}(uniforms.Dy_shape[${U}]) ||
                    fract(dyC) > 0.0 || wCPerm < 0) {
                  continue;
                }
                let idyC: u32 = u32(dyC);
                var inputChannel = groupId * uniforms.input_channels_per_group;
                ${u?`
                var x_offset = ${Z.indicesToOffset(`${Z.type.indices}(batch, idyR, idyC, inputChannel)`)} / ${p};
                var w_offset = ${X.indicesToOffset(`${X.type.indices}(wRPerm, wCPerm, inputChannel, wOutChannel)`)} / ${_};
                  `:""}
                for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group_int; d2 = d2 + ${u?4:p}) {
                  ${oe()}
                  inputChannel = inputChannel + ${u?4:p};
                }
                ${ae()}
                wC = wC + uniforms.strides.y - 1;
              }
              wR = wR + uniforms.strides[0] - 1;
            }
            let value = dotProd${n?` + bias[d1 / ${h}]`:""};
            ${ee.setByOffset("global_idx","value")};
          `;return`
    ${$.registerUniforms(z).declareVariables(...K,ee)}
      ${$.mainStart()}
      ${$.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
    ${G}}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};${p}${_}${h}${u}${f}`,inputDependencies:x},getRunData:()=>({dispatchGroup:{x:g[0],y:g[1],z:g[2]},outputs:[{dims:r?r(s):s,dataType:e[0].dataType}],programUniforms:P}),getShaderSource:I}}}),Tj,Ej,Cj,kv,NR,Pj,jv,Sj,$R,$7=Ke(()=>{N7(),Xl(),Gi(),Tj=(e,t,r,n,s,a)=>(e-1)*t+r+(n-1)*s+1-a,Ej=(e,t,r,n,s)=>{let a=Math.floor(e/2);t==="SAME_UPPER"?(r[n]=a,r[s]=e-a):t==="SAME_LOWER"&&(r[n]=e-a,r[s]=a)},Cj=(e,t,r,n,s,a,o,i,l,d)=>{let p=e.length-2,u=d.length===0;l.length<p&&l.push(...Array(p-l.length).fill(0));let m=e[0],f=t[i?3:1]*s;for(let h=0,_=e.length-p-(i?1:0);h<p;++h,++_){let v=e[_],g=u?v*o[h]:d[h],x=Tj(v,o[h],a[h],t[_],r[h],g);Ej(x,n,a,h,h+p),u&&d.push(o[h]*(v-1)+l[h]+(t[_]-1)*r[h]+1-a[h]-a[h+p])}d.splice(0,0,m),d.splice(i?3:1,0,f)},kv=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((u,m)=>u*m,1)===0){r.length=0;for(let u=2;u<t[1].dims.length;++u)r.push(t[1].dims[u])}let n=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(n?3:1,0,t[1].dims[1]);let s=e.pads.slice(),a=e.outputShape.slice(),o=e.outputPadding.slice(),i=t[0].dims,l=e.dilations.slice();if(l.reduce((u,m)=>u+m,0)===0){let u=t[0].dims.length-2;l=new Array(u).fill(1)}let d=e.strides.slice();if(d.reduce((u,m)=>u+m,0)===0){let u=t[0].dims.length-2;d=new Array(u).fill(1)}Cj(i,r,l,e.autoPad,e.group,s,d,n,o,a);let p=Object.assign({},e);return Object.assign(p,{kernelShape:r,pads:s,outputPadding:o,outputShape:a,dilations:l,strides:d}),p},NR=e=>{let t=Sb(e),r=e.format,n=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],s=e.dilations,a=e.group,o=e.kernelShape,i=e.pads,l=e.strides,d=e.wIsConst(),p=e.outputPadding,u=e.outputShape;return{autoPad:n,format:r,dilations:s,group:a,kernelShape:o,outputPadding:p,outputShape:u,pads:i,strides:l,wIsConst:d,...t,cacheKey:`${e.format};${t.activation};`}},Pj=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],n=e[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let s=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==s))throw new Error("invalid bias");let a=e[0].dims.length-2;if(t.dilations.reduce((o,i)=>o+i,0)>0&&t.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(t.strides.reduce((o,i)=>o+i,0)>0&&t.strides.length!==a)throw new Error(`strides should be ${a}D`);if(t.pads.reduce((o,i)=>o+i,0)>0&&t.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(t.outputPadding.length!==a&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${a}D`);if(t.kernelShape.reduce((o,i)=>o+i,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},jv=(e,t,r,n)=>{let s=e.kernelCustomData.wT??e.compute(Ss(t[1],[2,3,0,1]),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=s);let a=[t[0],s];t.length===3&&a.push(t[2]),e.compute(IR(a,r,n),{inputs:a})},Sj=(e,t)=>{let r=t.format==="NHWC",n=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&n.push(e.inputs[2]);let s=t.kernelShape;(s.length===0||s[0]===0)&&(s=[e.inputs[1].dims[2]]);let a=t.dilations;(a.length===0||a[0]===0)&&(a=[1]);let o=t.strides;(o.length===0||o[0]===0)&&(o=[1]);let i=t.pads;i.length===0&&(i=[0,0]),i=[0,i[0],0,i[1]],o=[1].concat(o),a=[1].concat(a),s=[1].concat(s);let l=t.outputPadding;l=[0].concat(l);let d=kv({...t,pads:i,strides:o,dilations:a,kernelShape:s,outputPadding:l},n);jv(e,n,d,p=>r?[p[0],p[2],p[3]]:[p[0],p[1],p[3]])},$R=(e,t)=>{if(Pj(e.inputs,t),e.inputs[0].dims.length===3)Sj(e,t);else{let r=kv(t,e.inputs);jv(e,e.inputs,r)}}}),kj,DR,OR,D7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),kj=(e,t,r,n)=>{let s=je.size(t),a=t.length,o=Oe("input",e,a),i=ht("output",e,a),l=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),d=je.normalizeAxis(l,a),p=u=>{let m=` i32(${o.indicesGet("inputIndices","uniforms.axis")}) `,f=xt("uniforms.input_shape","uniforms.axis",a),h=n.reverse?m+(n.exclusive?" + 1":""):"0",_=n.reverse?f:m+(n.exclusive?"":" + 1");return`
                ${u.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(o,i)}
                ${u.mainStart()}
                  ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${i.offsetToIndices("global_idx")};
                  var sum = ${i.type.value}(0);
                  let first : i32 = ${h};
                  let last : i32 = ${_};
                  for (var i : i32 = first; i < last; i++) {
                    ${o.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${o.getByIndices("inputIndices")};
                  }
                  ${i.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:n.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(s/64)},programUniforms:[{type:12,data:s},{type:12,data:d},...wt(t,t)]}),getShaderSource:p}},DR=(e,t)=>{let r=e.inputs[0].dims,n=e.inputs[0].dataType,s=e.inputs[1];e.compute(kj(n,r,s,t),{inputs:[0]})},OR=e=>{let t=e.exclusive===1,r=e.reverse===1;return ur({exclusive:t,reverse:r})}}),jj,Aj,Ij,FR,LR,O7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),jj=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Aj=(e,t,r,n)=>{let s=[];s.push(`fn perm(i: ${n.type.indices}) -> ${r.type.indices} {
    var a: ${r.type.indices};`);for(let a=0;a<t;++a)s.push(r.indicesSet("a",e[a],`i[${a}]`));return s.push("return a;}"),s.join(`
`)},Ij=(e,t)=>{let r,n,s,a,o,i,l=t.format==="NHWC",d=t.blocksize,p=t.mode==="DCR";l?([r,n,s,a]=e.dims,o=p?[r,n,s,d,d,a/d**2]:[r,n,s,a/d**2,d,d],i=p?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,n,s,a]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],o=p?[r,d,d,a/d**2,n,s]:[r,a/d**2,d,d,n,s],i=p?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let u=e.reshape(o),m=u.dims.length,f=e.dataType,h=Oe("a",f,m),_=ht("output",f,m),v=g=>`
  ${g.registerUniform("output_size","u32").declareVariables(h,_)}

  ${Aj(i,m,h,_)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${_.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${_.setByOffset("global_idx",h.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:g=>{let x=l?[r,n*d,s*d,a/d**2]:[r,a/d**2,n*d,s*d],y=je.size(x),w=u.dims,b=je.sortBasedOnPerm(w,i);return{outputs:[{dims:x,dataType:g[0].dataType}],dispatchGroup:{x:Math.ceil(y/64)},programUniforms:[{type:12,data:y},...wt(w,b)]}},getShaderSource:v}},FR=(e,t)=>{jj(e.inputs),e.compute(Ij(e.inputs[0],t))},LR=e=>ur({blocksize:e.blocksize,mode:e.mode,format:e.format})}),pf,hu,Av,Nj,$j,Dj,Oj,Iv,Fj,RR,zR,F7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),pf="[a-zA-Z]|\\.\\.\\.",hu="("+pf+")+",Av="^"+hu+"$",Nj="("+hu+",)*"+hu,$j="^"+Nj+"$",Dj=class{constructor(e=-1){this.symbolToIndices=new Map,this.inputIndex=e}addSymbol(e,t){let r=this.symbolToIndices.get(e);r===void 0?r=[t]:r.push(t),this.symbolToIndices.set(e,r)}},Oj=class{constructor(e,t){var s;this.equation=t,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[r,n]=t.includes("->")?t.split("->",2):[t,""];if(!r.match(RegExp($j)))throw new Error("Invalid LHS term");if(r.split(",").forEach((a,o)=>{let i=e[o].dims.slice();if(!a.match(RegExp(Av)))throw new Error("Invalid LHS term");let l=this.processTerm(a,!0,i,o);this.lhs.push(l)}),n==="")n+=[...this.symbolToInfo.entries()].filter(([a,o])=>o.count===1||a==="...").map(([a])=>a).join("");else if(!n.match(RegExp(hu)))throw new Error("Invalid RHS");(s=n.match(RegExp(pf,"g")))==null||s.forEach(a=>{if(a==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let o=this.symbolToInfo.get(a);if(o===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(o.dimValue)}}),this.rhs=this.processTerm(n,!1,this.outputDims)}addSymbol(e,t,r){let n=this.symbolToInfo.get(e);if(n!==void 0){if(n.dimValue!==t&&n.count!==1)throw new Error("Dimension mismatch");n.count++,n.inputIndices.push(r)}else n={count:1,dimValue:t,inputIndices:[r]};this.symbolToInfo.set(e,n)}processTerm(e,t,r,n=-1){let s=r.length,a=!1,o=[],i=0;if(!e.match(RegExp(Av))&&!t&&e!=="")throw new Error("Invalid LHS term");let l=e.match(RegExp(pf,"g")),d=new Dj(n);return l==null||l.forEach((p,u)=>{if(p==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let m=s-l.length+1;if(m<0)throw new Error("Ellipsis out of bounds");if(o=r.slice(i,i+m),this.hasEllipsis){if(this.ellipsisDims.length!==o.length||this.ellipsisDims.toString()!==o.toString())throw new Error("Ellipsis dimensions mismatch")}else if(t)this.hasEllipsis=!0,this.ellipsisDims=o;else throw new Error("Ellipsis must be specified in the LHS");for(let f=0;f<o.length;f++){let h=String.fromCharCode(48+f);d.addSymbol(h,u+f),this.addSymbol(h,r[i++],n)}}else d.addSymbol(p,u+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(p,r[i++],n)}),d}},Iv=e=>e+"_max",Fj=(e,t,r,n)=>{let s=e.map(d=>d.length).map((d,p)=>Oe(`input${p}`,t,d)),a=je.size(n),o=ht("output",t,n.length),i=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),l=d=>{let p=[],u="var prod = 1.0;",m="var sum = 0.0;",f="sum += prod;",h=[],_=[],v=[],g=[],x=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((w,b)=>{var C;if(r.rhs.symbolToIndices.has(b)){let E=(C=r.rhs.symbolToIndices.get(b))==null?void 0:C[0];E!==void 0&&r.lhs.forEach((P,I)=>{if(w.inputIndices.includes(I)){let $=P.symbolToIndices.get(b);if($===void 0)throw new Error("Invalid symbol error");$.forEach(z=>{p.push(`${s[I].indicesSet(`input${I}Indices`,z,o.indicesGet("outputIndices",E))}`)})}})}else r.lhs.forEach((E,P)=>{if(w.inputIndices.includes(P)){let I=E.symbolToIndices.get(b);if(I===void 0)throw new Error("Invalid symbol error");I.forEach($=>{h.push(`${s[P].indicesSet(`input${P}Indices`,$,`${b}`)}`)}),g.push(`prod *= ${s[P].getByIndices(`input${P}Indices`)};`)}}),_.push(`for(var ${b}: u32 = 0; ${b} < uniforms.${Iv(b)}; ${b}++) {`),v.push("}")});let y=x?[...p,`let sum = ${s.map((w,b)=>w.getByIndices(`input${b}Indices`)).join(" * ")};`]:[...p,m,..._,...h,u,...g,f,...v];return`
            ${d.registerUniforms(i.map(w=>({name:`${Iv(w)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...s,o)}

            ${d.mainStart()}
            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${o.offsetToIndices("global_idx")};
            ${s.map((w,b)=>`var input${b}Indices: ${s[b].type.indices};`).join(`
`)}
            ${y.join(`
`)};
            ${o.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=i.filter(u=>r.symbolToInfo.has(u)).map(u=>{var m;return{type:12,data:((m=r.symbolToInfo.get(u))==null?void 0:m.dimValue)||0}});d.push({type:12,data:a});let p=e.map((u,m)=>[...wt(u)]).reduce((u,m)=>u.concat(m),d);return p.push(...wt(n)),{outputs:[{dims:n,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p}},getShaderSource:l}},RR=(e,t)=>{let r=new Oj(e.inputs,t.equation),n=r.outputDims,s=e.inputs.map((a,o)=>a.dims);e.compute(Fj(s,e.inputs[0].dataType,r,n))},zR=e=>{let t=e.equation.replace(/\s+/g,"");return ur({equation:t})}}),Lj,Nv,Rj,zj,BR,L7=Ke(()=>{Nt(),Bt(),Vt(),Lj=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=r.length<t.length?0:r.length-t.length,s=t.length<r.length?0:t.length-r.length;for(;n<r.length&&s<t.length;++n,++s)if(r[n]!==t[s]&&r[n]!==1&&t[s]!==1)throw new Error("Expand requires shape to be broadcastable to input")},Nv=(e,t)=>{let r=e.length-t.length,n=[];for(let s=0;s<r;++s)n.push(e[s]);for(let s=0;s<t.length;++s)n.push(t[s]===1?e[s+r]:t[s]);return n},Rj=(e,t)=>e.length>t.length?Nv(e,t):Nv(t,e),zj=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),n=Rj(t,r),s=e[0].dataType,a=s===9||je.size(t)===1,o=s===9||t.length>0&&t[t.length-1]%4===0?4:1,i=a||n.length>0&&n[n.length-1]%4===0?4:1,l=Math.ceil(je.size(n)/i),d=u=>{let m=Oe("input",s,t.length,o),f=ht("output",s,n.length,i),h;if(s===9){let _=(v,g,x="")=>`
          let outputIndices${g} = ${f.offsetToIndices(`outputOffset + ${g}u`)};
          let offset${g} = ${m.broadcastedIndicesToOffset(`outputIndices${g}`,f)};
          let index${g} = offset${g} / 4u;
          let component${g} = offset${g} % 4u;
          ${v}[${g}] = ${x}(${m.getByOffset(`index${g}`)}[component${g}]);
        `;h=`
        let outputOffset = global_idx * ${i};
        var data = vec4<u32>(0);
        ${_("data",0,"u32")}
        ${_("data",1,"u32")}
        ${_("data",2,"u32")}
        ${_("data",3,"u32")}
        ${f.setByOffset("global_idx","data")}
      }`}else h=`
        let outputIndices = ${f.offsetToIndices(`global_idx * ${i}`)};
        let inputOffset = ${m.broadcastedIndicesToOffset("outputIndices",f)};
        let data = ${f.type.value}(${m.getByOffset(`inputOffset / ${o}`)});
        ${f.setByOffset("global_idx","data")}
      }`;return`
    ${u.registerUniform("vec_size","u32").declareVariables(m,f)}
    ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${h}`},p=[{type:12,data:l},...wt(t,n)];return{name:"Expand",shaderCache:{hint:`${n.length};${o}${i}`,inputDependencies:["rank"]},getShaderSource:d,getRunData:()=>({outputs:[{dims:n,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:p})}},BR=e=>{Lj(e.inputs),e.compute(zj(e.inputs),{inputs:[0]})}}),Bj,VR,R7=Ke(()=>{Nt(),Bt(),Vt(),Pb(),Bj=e=>{let t=e[0].dataType,r=je.size(e[0].dims),n=je.size(e[1].dims),s=n%4===0,a=o=>{let i=Oe("x",t,[1],4),l=Oe("bias",t,[1],4),d=ht("y",t,[1],4),p=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],u=f=>`
      let bias${f}_offset: u32 = (global_idx * 4 + ${f}) % uniforms.bias_size;
      let bias${f} = ${l.getByOffset(`bias${f}_offset / 4`)}[bias${f}_offset % 4];`,m=s?`
      let bias = ${l.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${u(0)}${u(1)}${u(2)}${u(3)}
      let bias = ${i.type.value}(bias0, bias1, bias2, bias3);`;return`${o.registerUniforms(p).declareVariables(i,l,d)}

    ${jy(Qn(t))}

    ${o.mainStart(gd)}
      ${o.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${i.getByOffset("global_idx")};
      ${m}
      let x_in = x + bias;
      ${d.setByOffset("global_idx",Ay("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${s}`,inputDependencies:["type","type"]},getShaderSource:a,getRunData:o=>({outputs:[{dims:o[0].dims,dataType:o[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:n}],dispatchGroup:{x:Math.ceil(r/gd/4)}})}},VR=e=>{e.inputs.length<2||je.size(e.inputs[1].dims)===0?lR(e):e.compute(Bj(e.inputs))}}),Vj,Wj,WR,UR,z7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),Vj=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},Wj=(e,t)=>{let r=e[0].dims,n=e[1].dims,s=r.length,a=je.normalizeAxis(t.axis,s),o=r.slice(0);o.splice(a,1,...n);let i=r[a],l=e[0].dataType===9?4:1,d=Math.ceil(je.size(o)/l),p=[{type:12,data:d},{type:6,data:i},{type:12,data:a},...wt(e[0].dims,e[1].dims,o)],u=m=>{let f=Oe("data",e[0].dataType,e[0].dims.length,l),h=Oe("inputIndices",e[1].dataType,e[1].dims.length),_=ht("output",e[0].dataType,o.length,l),v=x=>{let y=n.length,w=`var indicesIndices${x}  = ${h.type.indices}(0);`;for(let b=0;b<y;b++)w+=`${y>1?`indicesIndices${x}[${b}]`:`indicesIndices${x}`} = ${o.length>1?`outputIndices${x}[uniforms.axis + ${b}]`:`outputIndices${x}`};`;w+=`
          var idx${x} = ${h.getByIndices(`indicesIndices${x}`)};
          if (idx${x} < 0) {
            idx${x} = idx${x} + uniforms.axisDimLimit;
          }
          var dataIndices${x} : ${f.type.indices};
        `;for(let b=0,C=0;b<s;b++)b===a?(w+=`${s>1?`dataIndices${x}[${b}]`:`dataIndices${x}`} = u32(idx${x});`,C+=y):(w+=`${s>1?`dataIndices${x}[${b}]`:`dataIndices${x}`} = ${o.length>1?`outputIndices${x}[${C}]`:`outputIndices${x}`};`,C++);return w},g;if(e[0].dataType===9){let x=(y,w,b="")=>`
          let outputIndices${w} = ${_.offsetToIndices(`outputOffset + ${w}u`)};
          ${v(w)};
          let offset${w} = ${f.indicesToOffset(`dataIndices${w}`)};
          let index${w} = offset${w} / 4u;
          let component${w} = offset${w} % 4u;
          ${y}[${w}] = ${b}(${f.getByOffset(`index${w}`)}[component${w}]);
        `;g=`
        let outputOffset = global_idx * ${l};
        var value = vec4<u32>(0);
        ${x("value",0,"u32")}
        ${x("value",1,"u32")}
        ${x("value",2,"u32")}
        ${x("value",3,"u32")}
        ${_.setByOffset("global_idx","value")}
      `}else g=`
      let outputIndices = ${_.offsetToIndices("global_idx")};
      ${v("")};
      let value = ${f.getByIndices("dataIndices")};
      ${_.setByOffset("global_idx","value")};
      `;return`
      ${m.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(f,h,_)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${g}
      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:p}),getShaderSource:u}},WR=e=>ur({axis:e.axis}),UR=(e,t)=>{let r=e.inputs;Vj(r),e.compute(Wj(e.inputs,t))}}),Uj,GR,HR,B7=Ke(()=>{Nt(),Bt(),Vt(),Uj=(e,t,r,n,s,a,o,i,l)=>{let d=[{type:12,data:a},{type:12,data:n},{type:12,data:s},{type:12,data:r},{type:12,data:o},{type:12,data:i},{type:12,data:l}],p=[a];d.push(...wt(t.dims,p));let u=m=>{let f=Oe("indices_data",t.dataType,t.dims.length),h=ht("input_slice_offsets_data",12,1,1),_=[f,h],v=[{name:"output_size",type:"u32"},{name:"batch_dims",type:"u32"},{name:"input_dims",type:"u32",length:s.length},{name:"sizes_from_slice_dims_data",type:"u32",length:r.length},{name:"num_slices_per_batch",type:"u32"},{name:"input_batch_stride",type:"u32"},{name:"num_slice_dims",type:"u32"}];return`
  ${m.registerUniforms(v).declareVariables(..._)}
  ${m.mainStart()}
    ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let batch_idx = global_idx / uniforms.num_slices_per_batch;
    let base_offset = batch_idx * uniforms.input_batch_stride;

    let slice_indices_base_offset = global_idx * uniforms.num_slice_dims;
    var relative_slice_offset = 0;
    for (var dim_idx = 0u; dim_idx < uniforms.num_slice_dims; dim_idx ++) {
      var index = i32(indices_data[dim_idx + slice_indices_base_offset].x);
      let input_dim_idx = uniforms.batch_dims + dim_idx;
      if (index < 0) {
        ${s.length===1?"index += i32(uniforms.input_dims);":"index += i32(uniforms.input_dims[input_dim_idx]);"}
      }
      ${r.length===1?"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data);":"relative_slice_offset += index * i32(uniforms.sizes_from_slice_dims_data[dim_idx]);"}
    }

    input_slice_offsets_data[global_idx] =  base_offset + u32(relative_slice_offset);
  }`};return e.compute({name:"computeSliceOffsets",shaderCache:{hint:`${s.length}_${r.length}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:p,dataType:e.inputs[1].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:u},{inputs:[t],outputs:[-1]})[0]},GR=(e,t)=>{let r=e.inputs,n=r[0].dims,s=r[0].dataType,a=r[1].dims,o=a[a.length-1],i=je.sizeToDimension(a,a.length-1),l=je.sizeFromDimension(n,t.batchDims+o),d=je.sizeToDimension(n,t.batchDims),p=je.sizeFromDimension(n,t.batchDims),u=i/d,m=new Array(o),f=l;for(let w=0;w<o;++w)m[o-1-w]=f,f*=n[t.batchDims+o-1-w];let h=Uj(e,r[1],m,t.batchDims,n,i,u,p,o),_=t.batchDims+o;if(_>n.length)throw new Error("last dimension of indices must not be larger than rank of input tensor");let v=a.slice(0,-1).concat(n.slice(_)),g=je.size(v),x=[{type:12,data:g},{type:12,data:l},...wt(r[0].dims,h.dims,v)],y=w=>{let b=Oe("data",r[0].dataType,r[0].dims.length),C=Oe("slice_offsets",12,h.dims.length),E=ht("output",r[0].dataType,v.length);return`
          ${w.registerUniform("output_size","u32").registerUniform("slice_size","u32").declareVariables(b,C,E)}
            ${w.mainStart()}
            ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let slice_offset = slice_offsets[global_idx / uniforms.slice_size];
          output[global_idx] = data[u32(slice_offset) + global_idx % uniforms.slice_size];
        }`};e.compute({name:"GatherND",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:v,dataType:s}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:x}),getShaderSource:y},{inputs:[r[0],h]})},HR=e=>({batchDims:e.batch_dims,cacheKey:""})}),Gj,Hj,qR,KR,V7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),Gj=(e,t)=>{if(e.length<3||e.length>4)throw new Error("GatherBlockQuantized requires 3 or 4 inputs.");let r=je.normalizeAxis(t.quantizeAxis,e[0].dims.length),n=t.blockSize,s=e[0],a=e[2],o=e.length===4?e[3]:void 0;if(a.dims.length!==s.dims.length||!s.dims.map((i,l)=>l===r?Math.ceil(i/n)===a.dims[l]:i===a.dims[l]).reduce((i,l)=>i&&l,!0))throw new Error("Scales must have the same rank as the input tensor and the dims should match except on gatherAxis.");if(o){if(o.dataType!==s.dataType)throw new Error("Zero point must have the same data type as the input tensor.");if(o.dims.length!==a.dims.length||!o.dims.map((i,l)=>i===a.dims[l]).reduce((i,l)=>i&&l,!0))throw new Error("Zero point must have the same rank as the input tensor and the dims should match except on quantizeAxis.")}},Hj=(e,t)=>{let r=e[0].dims,n=e[1].dims,s=r.length,a=je.normalizeAxis(t.gatherAxis,s),o=je.normalizeAxis(t.quantizeAxis,s),i=r.slice(0);i.splice(a,1,...n);let l=je.size(i),d=e[2].dataType,p=e[0].dataType===22,u=[{type:12,data:l},{type:12,data:o},{type:12,data:a},{type:12,data:t.blockSize},...wt(...e.map((f,h)=>f.dims),i)],m=f=>{let h=Oe("data",e[0].dataType,e[0].dims.length),_=Oe("inputIndices",e[1].dataType,e[1].dims.length),v=Oe("scales",e[2].dataType,e[2].dims.length),g=e.length>3?Oe("zeroPoint",e[3].dataType,e[3].dims.length):void 0,x=ht("output",d,i.length),y=[h,_,v];g&&y.push(g);let w=[{name:"output_size",type:"u32"},{name:"quantize_axis",type:"u32"},{name:"gather_axis",type:"u32"},{name:"block_size",type:"u32"}];return`
        ${f.registerUniforms(w).declareVariables(...y,x)}
        ${f.mainStart()}
        let output_indices = ${x.offsetToIndices("global_idx")};
        var indices_indices = ${_.type.indices}(0);
        ${n.length>1?`
          for (var i: u32 = 0; i < ${n.length}; i++) {
            let index = ${x.indicesGet("output_indices","uniforms.gather_axis + i")};
            ${_.indicesSet("indices_indices","i","index")};
          }`:`indices_indices = ${x.indicesGet("output_indices","uniforms.gather_axis")};`};
        var data_indices = ${h.type.indices}(0);
        for (var i: u32 = 0; i < uniforms.gather_axis; i++) {
          let index = ${x.indicesGet("output_indices","i")};
          ${h.indicesSet("data_indices","i","index")};
        }
        var index_from_indices = ${_.getByIndices("indices_indices")};
        if (index_from_indices < 0) {
          index_from_indices += ${r[a]};
        }
        ${h.indicesSet("data_indices","uniforms.gather_axis","u32(index_from_indices)")};
        for (var i = uniforms.gather_axis + 1; i < ${i.length}; i++) {
          let index = ${x.indicesGet("output_indices",`i + ${n.length} - 1`)};
          ${h.indicesSet("data_indices","i","index")};
        }
        let data_offset = ${h.indicesToOffset("data_indices")};
        let data_index = data_offset % 8;
        // Convert 4-bit packed data to 8-bit packed data.
        let packed_4bit_quantized_data = ${h.getByOffset("data_offset / 8")};
        let packed_8bit_quantized_data = (packed_4bit_quantized_data >> (4 * (data_index % 2))) & 0x0f0f0f0f;
        let quantized_data_vec = ${p?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_quantized_data));
        let quantized_data = quantized_data_vec[data_index / 2];
        var scale_indices = data_indices;
        let quantize_axis_index = ${v.indicesGet("data_indices","uniforms.quantize_axis")} / uniforms.block_size;
        ${v.indicesSet("scale_indices","uniforms.quantize_axis","quantize_axis_index")};
        var scale = ${v.getByIndices("scale_indices")};
        ${g?`
              let zero_point_indices = scale_indices;
              let zero_point_offset = ${g.indicesToOffset("zero_point_indices")};
              let zero_point_index = zero_point_offset % 8;
              let packed_4bit_zero_points = ${g.getByOffset("zero_point_offset / 8")};
              let packed_8bit_zero_points = (packed_4bit_zero_points >> (4 * (zero_point_index % 2))) & 0x0f0f0f0f;
              let zero_point_vec = ${p?"unpack4xI8":"unpack4xU8"}(u32(packed_8bit_zero_points));
              let zero_point = zero_point_vec[zero_point_index / 2];`:"var zero_point = 0"};
        let dequantized_data = ${Qn(d)}(quantized_data - zero_point) * scale;
        ${x.setByOffset("global_idx","dequantized_data")};
    }`};return{name:"GatherBlockQuantized",shaderCache:{hint:`${t.cacheKey};${e.filter((f,h)=>h!==1).map(f=>f.dims.join("_")).join(";")}`,inputDependencies:Array.from({length:e.length},(f,h)=>"rank")},getRunData:()=>({outputs:[{dims:i,dataType:d}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:u}),getShaderSource:m}},qR=(e,t)=>{let r=e.inputs;Gj(r,t),e.compute(Hj(e.inputs,t))},KR=e=>ur({blockSize:e.blockSize,gatherAxis:e.gatherAxis,quantizeAxis:e.quantizeAxis})}),qj,Kj,QR,XR,W7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),qj=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Kj=(e,t)=>{let r=e[0].dims,n=e[0].dataType,s=r.length,a=e[1].dims,o=e[1].dataType,i=je.normalizeAxis(t.axis,s),l=r[i],d=a.slice(0),p=je.size(d),u=Oe("input",n,s),m=Oe("indicesInput",o,a.length),f=ht("output",n,d.length),h=[{type:12,data:p},{type:6,data:l},{type:12,data:i}];return h.push(...wt(r,a,d)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:d,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:_=>`
      ${_.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(u,m,f)}
      ${_.mainStart()}
      ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${f.offsetToIndices("global_idx")};

      var idx = ${m.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${u.type.indices}(outputIndices);
      ${u.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${u.getByIndices("inputIndices")};

      ${f.setByOffset("global_idx","value")};
  }`}},QR=e=>ur({axis:e.axis}),XR=(e,t)=>{let r=e.inputs;qj(r),e.compute(Kj(e.inputs,t))}}),Qj,Xj,YR,ZR,U7=Ke(()=>{Nt(),Bt(),Vt(),Qj=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xj=(e,t)=>{let r=e[0].dims.slice(),n=e[1].dims.slice(),[s,a,o]=QF.getShapeOfGemmResult(r,t.transA,n,t.transB,e.length===3?e[2].dims:void 0),i=[s,a];if(!i)throw new Error("Can't use gemm on the given tensors");let l=16,d=Math.ceil(a/l),p=Math.ceil(s/l),u=!0,m=je.size(i),f=[{type:12,data:u?d:m},{type:12,data:s},{type:12,data:a},{type:12,data:o},{type:1,data:t.alpha},{type:1,data:t.beta}],h=["type","type"];e.length===3&&(f.push(...wt(e[2].dims)),h.push("rank")),f.push(...wt(i));let _=g=>{let x="";t.transA&&t.transB?x="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?x="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?x="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(x="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let y=t.alpha===1?"":"value *= uniforms.alpha;",w=Oe("a",e[0].dataType,e[0].dims),b=Oe("b",e[1].dataType,e[1].dims),C=w.type.value,E=null,P=[w,b];e.length===3&&(E=Oe("c",e[2].dataType,e[2].dims.length),P.push(E));let I=ht("output",e[0].dataType,i.length);P.push(I);let $=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${g.registerUniforms($).declareVariables(...P)}

  ${g.mainStart()}
    ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${C}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${x}
    }

    ${y}
    ${E!=null?`let cOffset = ${E.broadcastedIndicesToOffset("vec2(m, n)",I)}; value += ${C}(uniforms.beta) * ${E.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`},v=g=>{let x=Oe("a",e[0].dataType,e[0].dims),y=Oe("b",e[1].dataType,e[1].dims),w=null,b=[x,y];e.length===3&&(w=Oe("c",e[2].dataType,e[2].dims.length),b.push(w));let C=ht("output",e[0].dataType,i.length);b.push(C);let E=[{name:"num_tile_n",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}],P="",I="";t.transA&&t.transB?(I=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${x.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${y.type.value}(0);
      }
      `,P="value += tile_a[k][local_id.y] * tile_b[local_id.x][k];"):t.transA&&!t.transB?(I=`
      var col = tile_row_start + local_id.x;
      var row = k_start + local_id.y;
      if (col < uniforms.M && row < uniforms.K) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.M + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${x.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${y.type.value}(0);
      }
      `,P="value += tile_a[k][local_id.y] * tile_b[k][local_id.x];"):!t.transA&&t.transB?(I=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${x.type.value}(0);
      }

      col = k_start + local_id.x;
      row = tile_col_start + local_id.y;
      if (col < uniforms.K && row < uniforms.N) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.K + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${y.type.value}(0);
      }
      `,P="value += tile_a[local_id.y][k] * tile_b[local_id.x][k];"):!t.transA&&!t.transB&&(I=`
      var col = k_start + local_id.x;
      var row = tile_row_start + local_id.y;
      if (col < uniforms.K && row < uniforms.M) {
        tile_a[local_id.y][local_id.x] = a[row * uniforms.K + col];
      } else {
        tile_a[local_id.y][local_id.x] = ${x.type.value}(0);
      }

      col = tile_col_start + local_id.x;
      row = k_start + local_id.y;
      if (col < uniforms.N && row < uniforms.K) {
        tile_b[local_id.y][local_id.x] = b[row * uniforms.N + col];
      } else {
        tile_b[local_id.y][local_id.x] = ${y.type.value}(0);
      }
      `,P="value += tile_a[local_id.y][k] * tile_b[k][local_id.x];");let $=t.alpha===1?"":"value *= uniforms.alpha;";return`
  ${g.registerUniforms(E).declareVariables(...b)}
  var<workgroup> tile_a: array<array<${x.type.storage}, ${l}>, ${l}>;
  var<workgroup> tile_b: array<array<${y.type.storage}, ${l}>, ${l}>;
  ${g.mainStart([l,l,1])}
    let tile_col_start = (workgroup_index % uniforms.num_tile_n) * ${l};
    let tile_row_start = (workgroup_index / uniforms.num_tile_n) * ${l};
    let num_tiles = (uniforms.K - 1) / ${l} + 1;
    var k_start = 0u;
    var value = ${C.type.value}(0);
    for (var t: u32 = 0u; t < num_tiles; t++) {
      ${I}
      k_start = k_start + ${l};
      workgroupBarrier();

      for (var k: u32 = 0u; k < ${l}; k++) {
        ${P}
      }
      workgroupBarrier();
    }

    ${$}
    let m = tile_row_start + local_id.y;
    let n = tile_col_start + local_id.x;
    ${w!=null?`let cOffset = ${w.broadcastedIndicesToOffset("vec2(m, n)",C)}; value += ${C.type.value}(uniforms.beta) * ${w.getByOffset("cOffset")};`:""}
    if (m < uniforms.M && n < uniforms.N) {
      output[m * uniforms.N + n] = value;
    }
  }`};return u?{name:"GemmShared",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:d*p},programUniforms:f}),getShaderSource:v}:{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:i,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:f}),getShaderSource:_}},YR=e=>{let t=e.transA,r=e.transB,n=e.alpha,s=e.beta;return{transA:t,transB:r,alpha:n,beta:s,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},ZR=(e,t)=>{Qj(e.inputs),e.compute(Xj(e.inputs,t))}}),Wa,yo,cl,dl,Yj,Zj,Jj,eA,tA,rA,nA,sA,JR,e4,G7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),[Wa,yo,cl,dl]=[0,1,2,3],Yj=e=>{if(e[0].dims.length!==4)throw new Error("only 4-D tensor is supported.");if(e[0].dims.length!==e[1].dims.length)throw new Error("input dimensions must be equal to grid dimensions");if(e[0].dims.length-2!==e[1].dims[e[1].dims.length-1])throw new Error(`last dimension of grid must be equal to ${e[0].dims.length-2}`);if(e[0].dims[0]!==e[1].dims[0])throw new Error("grid batch size must match input batch size")},Zj=`
  fn gs_get_cubic_coeffs(x: f32) -> vec4<f32> {
    let cubic_alpha = -0.75f;
    let x_abs = abs(x);
    var coeffs: vec4<f32>;
    coeffs[0] = (((cubic_alpha * (x_abs + 1) - 5 * cubic_alpha) * (x_abs + 1) + 8 * cubic_alpha) * (x_abs + 1) - 4 * cubic_alpha);
    coeffs[1] = (((cubic_alpha + 2) * x_abs - (cubic_alpha + 3)) * x_abs * x_abs + 1);
    coeffs[2] = (((cubic_alpha + 2) * (1 - x_abs) - (cubic_alpha + 3)) * (1 - x_abs) * (1 - x_abs) + 1);
    coeffs[3] = (((cubic_alpha * (2 - x_abs) - 5 * cubic_alpha) * (2 - x_abs) + 8 * cubic_alpha) * (2 - x_abs) - 4 * cubic_alpha);
    return coeffs;
  }
`,Jj=e=>`
  fn gs_bicubic_interpolate(p: mat4x4<${e}>, x: f32, y: f32) -> ${e} {
    var v: vec4<f32>;
    var coeffs = gs_get_cubic_coeffs(x);
    for (var i = 0; i < 4; i++) {
      v[i] = coeffs[0] * p[i][0] + coeffs[1] * p[i][1] + coeffs[2] * p[i][2] + coeffs[3] * p[i][3];
    }
    coeffs = gs_get_cubic_coeffs(y);
    let pixel = ${e}(coeffs[0] * v[0] + coeffs[1] * v[1] + coeffs[2] * v[2] + coeffs[3] * v[3]);
    return pixel;
  }
`,eA=e=>`
  fn gs_denormalize(n: f32, length: i32) -> f32 {
    ${e.alignCorners===0?`
    // alignCorners: false => [-1, 1] to [-0.5, length - 0.5]
    return ((n + 1.0) * f32(length) - 1.0) / 2.0;
    `:`
    // alignCorners: true => [-1, 1] to [0, length - 1]
    return (n + 1.0) / 2.0 * (f32(length - 1));
    `}
  }
`,tA=e=>`
  ${e.paddingMode==="reflection"?`
      fn gs_reflect(x: i32, x_min: f32, x_max: f32) -> u32 {
        var dx = 0.0;
        var fx = f32(x);
        let range = x_max - x_min;
        if (fx < x_min) {
          dx = x_min - fx;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_min + r;
          } else {
            fx = x_max - r;
          }
        } else if (fx > x_max) {
          dx = fx - x_max;
          let n = u32(dx / range);
          let r = dx - f32(n) * range;
          if (n % 2 == 0) {
            fx = x_max - r;
          } else {
            fx = x_min + r;
          }
        }
        return u32(fx);
      }`:""}
`,rA=(e,t,r)=>`
  fn pixel_at_grid(r: i32, c: i32, H: i32, W: i32, batch: u32, channel: u32, border: vec4<f32>) -> ${t} {
     var pixel = ${t}(0);
     var indices = vec4<u32>(0);
     indices[${Wa}] = batch;
     indices[${yo}] = channel;`+(()=>{switch(r.paddingMode){case"zeros":return`
          if (r >= 0 && r < H && c >=0 && c < W) {
            indices[${cl}] = u32(r);
            indices[${dl}] = u32(c);
          } else {
            return ${t}(0);
          }
        `;case"border":return`
          indices[${cl}] = u32(clamp(r, 0, H - 1));
          indices[${dl}] = u32(clamp(c, 0, W - 1));
        `;case"reflection":return`
          indices[${cl}] = gs_reflect(r, border[1], border[3]);
          indices[${dl}] = gs_reflect(c, border[0], border[2]);
        `;default:throw new Error(`padding mode ${r.paddingMode} is not supported`)}})()+`
    return ${e.getByIndices("indices")};
  }
`,nA=(e,t,r)=>(()=>{switch(r.mode){case"nearest":return`
          let result = pixel_at_grid(i32(round(y)), i32(round(x)), H_in, W_in, indices[${Wa}], indices[${yo}], border);
        `;case"bilinear":return`
          let x1 = i32(floor(x));
          let y1 = i32(floor(y));
          let x2 = x1 + 1;
          let y2 = y1 + 1;

          let p11 = pixel_at_grid(y1, x1, H_in, W_in, indices[${Wa}], indices[${yo}], border);
          let p12 = pixel_at_grid(y1, x2, H_in, W_in, indices[${Wa}], indices[${yo}], border);
          let p21 = pixel_at_grid(y2, x1, H_in, W_in, indices[${Wa}], indices[${yo}], border);
          let p22 = pixel_at_grid(y2, x2, H_in, W_in, indices[${Wa}], indices[${yo}], border);

          let dx2 = ${t}(f32(x2) - x);
          let dx1 = ${t}(x - f32(x1));
          let dy2 = ${t}(f32(y2) - y);
          let dy1 = ${t}(y - f32(y1));
          let result = dy2 * (dx2 * p11 + dx1 * p12) + dy1 * (dx2 * p21 + dx1 * p22);
        `;case"bicubic":return`
          let x0 = i32(floor(x)) - 1;
          let y0 = i32(floor(y)) - 1;
          var p: mat4x4<${t}>;
          for (var h = 0; h < 4; h++) {
            for (var w = 0; w < 4; w++) {
              p[h][w] = pixel_at_grid(h + y0, w + x0, H_in, W_in, indices[${Wa}], indices[${yo}], border);
            }
          }

          let dx = x - f32(x0 + 1);
          let dy = y - f32(y0 + 1);
          let result = gs_bicubic_interpolate(p, dx, dy);
        `;default:throw new Error(`mode ${r.mode} is not supported`)}})()+`${e.setByOffset("global_idx","result")}`,sA=(e,t)=>{let r=Oe("x",e[0].dataType,e[0].dims.length),n=[e[1].dims[0],e[1].dims[1],e[1].dims[2]],s=Oe("grid",e[1].dataType,n.length,2),a=[e[0].dims[0],e[0].dims[1],e[1].dims[1],e[1].dims[2]];t.format==="NHWC"&&(a=[e[0].dims[0],e[1].dims[1],e[1].dims[2],e[0].dims[3]],[Wa,yo,cl,dl]=[0,3,1,2]);let o=ht("output",e[0].dataType,a.length),i=r.type.value,l=je.size(a),d=[{type:12,data:l},...wt(e[0].dims,n,a)],p=u=>`
  ${u.registerUniform("output_size","u32").declareVariables(r,s,o)}
  ${Zj}
  ${Jj(i)}
  ${eA(t)}
  ${tA(t)}
  ${rA(r,i,t)}

  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let H_in = i32(uniforms.x_shape[${cl}]);
      let W_in = i32(uniforms.x_shape[${dl}]);

      ${t.alignCorners===0?`
      let x_min = -0.5;
      let x_max = f32(W_in) - 0.5;
      let y_min = -0.5;
      let y_max = f32(H_in) - 0.5;
      `:`
      let x_min = 0.0;
      let x_max = f32(W_in) - 1.0;
      let y_min = 0.0;
      let y_max = f32(H_in) - 1.0;
      `};
      let border = vec4<f32>(x_min, y_min, x_max, y_max);

      let indices = ${o.offsetToIndices("global_idx")};
      var grid_indices = vec3<u32>(indices[${Wa}], indices[${cl}], indices[${dl}]);
      let nxy = ${s.getByIndices("grid_indices")};
      var x = gs_denormalize(f32(nxy[0]), W_in);
      var y = gs_denormalize(f32(nxy[1]), H_in);

      ${nA(o,i,t)}
  }`;return{name:"GridSample",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:["type","type"]},getRunData:u=>{let m=je.size(a);return{outputs:[{dims:a,dataType:u[0].dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:d}},getShaderSource:p}},JR=(e,t)=>{Yj(e.inputs),e.compute(sA(e.inputs,t))},e4=e=>ur({alignCorners:e.align_corners,mode:e.mode,paddingMode:e.padding_mode,format:e.format})}),ts,aA,t4,$v,oA,Su,r4,n4=Ke(()=>{Nt(),Bt(),Xr(),Mb(),Cb(),Vt(),Gi(),ts=(e,t)=>e.length>t&&e[t].dims.length>0?e[t]:void 0,aA=(e,t)=>{let r=e[0],n=ts(e,1),s=ts(e,2),a=ts(e,3),o=ts(e,4),i=ts(e,5),l=ts(e,6),d=ts(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let p=r.dims[0],u=r.dims[1],m=r.dims.length===3?r.dims[2]:t.numHeads*r.dims[4],f=u,h=0,_=0,v=Math.floor(m/t.numHeads);if(l&&d&&je.size(l.dims)&&je.size(d.dims)){if(l.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(l.dims[0]!==p||l.dims[1]!==t.numHeads||l.dims[3]!==v)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(d.dims[0]!==p||d.dims[1]!==t.numHeads||d.dims[3]!==v)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if(l.dims[2]!==d.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(d.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');h=l.dims[2],_=l.dims[2]}else if(l&&je.size(l.dims)||d&&je.size(d.dims))throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let g;if(n&&je.size(n.dims)>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(n.dims[2]!==r.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');g=2,f=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==v)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(s)throw new Error('Expect "value" be none when "key" has packed kv format.');g=5,f=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==v)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');g=0,f=n.dims[2]}}else{if(r.dims.length!==5)throw new Error('Input "query" is expected to have 5 dimensions when key is empty');if(r.dims[2]!==t.numHeads||r.dims[3]!==3)throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');g=3}if(a&&je.size(a.dims)>0){if(a.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(n&&n.dims.length===5&&n.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let x=h+f,y=0;if(o&&je.size(o.dims)>0){y=8;let E=o.dims;throw E.length===1?E[0]===p?y=1:E[0]===3*p+2&&(y=3):E.length===2&&E[0]===p&&E[1]===x&&(y=5),y===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, total_sequence_length)'):new Error("Mask not supported")}let w=!1,b=m;if(s&&je.size(s.dims)>0){if(s.dims.length!==3&&s.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==s.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(s.dims.length===3){if(f!==s.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');b=s.dims[2]}else{if(f!==s.dims[2])throw new Error('Input "key" and "value" shall have the same dim 2 (kv_sequence_length)');b=s.dims[1]*s.dims[3],w=!0}}let C=!1;if(o&&je.size(o.dims)>0)throw new Error("Key padding mask is not supported");if(i&&je.size(i.dims)>0){if(i.dims.length!==4)throw new Error('Input "attention_bias" is expected to have 4 dimensions');if(i.dims[0]!==p||i.dims[1]!==t.numHeads||i.dims[2]!==u||i.dims[3]!==x)throw new Error('Expect "attention_bias" shape (batch_size, num_heads, sequence_length, total_sequence_length)')}return{batchSize:p,sequenceLength:u,pastSequenceLength:h,kvSequenceLength:f,totalSequenceLength:x,maxSequenceLength:_,inputHiddenSize:0,hiddenSize:m,vHiddenSize:b,headSize:v,vHeadSize:Math.floor(b/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:y,scale:t.scale,broadcastResPosBias:C,passPastInKv:w,qkvFormat:g}},t4=e=>ur({...e}),$v=ur({perm:[0,2,1,3]}),oA=(e,t,r,n,s,a,o)=>{let i=[n,s,a],l=je.size(i),d=[{type:12,data:l},{type:12,data:o},{type:12,data:a}],p=u=>{let m=ht("qkv_with_bias",t.dataType,i),f=Oe("qkv",t.dataType,i),h=Oe("bias",r.dataType,i),_=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${u.registerUniforms(_).declareVariables(f,h,m)}
  ${u.mainStart()}
    ${u.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:i,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(l/64)},programUniforms:d}),getShaderSource:p},{inputs:[t,r],outputs:[-1]})[0]},Su=(e,t,r,n,s,a,o,i)=>{let l=a;if(o&&je.size(o.dims)>0){if(n===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return l=oA(e,a,o,t,n,r*s,i),l=l.reshape([t,n,r,s]),r===1||n===1?l:e.compute(Ss(l,$v.perm),{inputs:[l],outputs:[-1]})[0]}else return a.dims.length===3&&(l=a.reshape([t,n,r,s])),r===1||n===1?l:e.compute(Ss(l,$v.perm),{inputs:[l],outputs:[-1]})[0]},r4=(e,t)=>{let r=aA(e.inputs,t),n=e.inputs[0],s=ts(e.inputs,1),a=ts(e.inputs,2),o=ts(e.inputs,3),i=ts(e.inputs,4),l=ts(e.inputs,5),d=ts(e.inputs,6),p=ts(e.inputs,7);if(n.dims.length===5)throw new Error("Packed QKV is not implemented");if((s==null?void 0:s.dims.length)===5)throw new Error("Packed KV is not implemented");let u=s&&a&&s.dims.length===4&&a.dims.length===4,m=Su(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,n,o,0);if(u)return gm(e,m,s,a,i,void 0,d,p,l,r);if(!s||!a)throw new Error("key and value must be provided");let f=Su(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,s,o,r.hiddenSize),h=Su(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,a,o,2*r.hiddenSize);gm(e,m,f,h,i,void 0,d,p,l,r)}}),iA,lA,cA,dA,Oy,s4,a4,o4=Ke(()=>{Nt(),Bt(),Xr(),Vt(),iA=e=>{if(!e||e.length<1)throw new Error("too few inputs")},lA=(e,t)=>{let r=[],n=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(s=>r.push(Number(s))),n=r.length),ur({numOutputs:n,axis:t.axis,splitSizes:r})},cA=e=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {
    if (index < ${xt("uniforms.size_in_split_axis","i",e)}) {
        return i;
    }
    }
    return ${e}u;
}`,dA=e=>{let t=e.length,r=[];for(let n=0;n<t;++n){let s=e[n].setByIndices("indices","input[global_idx]");t===1?r.push(s):n===0?r.push(`if (output_number == ${n}u) { ${s} }`):n===t-1?r.push(`else { ${s} }`):r.push(`else if (output_number == ${n}) { ${s} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {
        ${r.join(`
`)}
      }`},Oy=(e,t)=>{let r=e[0].dims,n=je.size(r),s=e[0].dataType,a=je.normalizeAxis(t.axis,r.length),o=new Array(t.numOutputs),i=Oe("input",s,r.length),l=new Array(t.numOutputs),d=[],p=[],u=0,m=[{type:12,data:n}];for(let h=0;h<t.numOutputs;h++){u+=t.splitSizes[h],l[h]=u;let _=r.slice();_[a]=t.splitSizes[h],p.push(_),o[h]=ht(`output${h}`,s,_.length),d.push({dims:p[h],dataType:e[0].dataType})}m.push({type:12,data:l},...wt(r,...p));let f=h=>`
  ${h.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",l.length).declareVariables(i,...o)}
  ${cA(l.length)}
  ${dA(o)}

  ${h.mainStart()}
    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${i.offsetToIndices("global_idx")};
    var index = ${i.indicesGet("indices",a)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${xt("uniforms.size_in_split_axis","output_number - 1u",l.length)};
      ${i.indicesSet("indices",a,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:f,getRunData:()=>({outputs:d,dispatchGroup:{x:Math.ceil(n/64)},programUniforms:m})}},s4=(e,t)=>{iA(e.inputs);let r=e.inputs.length===1?t:lA(e.inputs,t);e.compute(Oy(e.inputs,r),{inputs:[0]})},a4=e=>{let t=e.axis,r=e.splitSizes,n=e.numOutputs<0?r.length:e.numOutputs;if(n!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ur({axis:t,numOutputs:n,splitSizes:r})}}),uA,kh,i4,l4=Ke(()=>{Nt(),Bt(),Xr(),Vt(),uA=(e,t)=>{let[r,n,s,a]=e,{numHeads:o,rotaryEmbeddingDim:i}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!je.areEqual(n.dims,[])&&!je.areEqual(n.dims,[1])&&n.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${n.dims.length}`);if(s.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${s.dims.length}`);if(a.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${a.dims.length}`);if(!je.areEqual(s.dims,a.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(i>0&&o===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let l=r.dims[0],d=r.dims[r.dims.length-2],p=s.dims[0],u=je.sizeFromDimension(r.dims,1)/d,m=i===0?s.dims[1]*2:u/o;if(i>m)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(n.dims.length===2){if(l!==n.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${n.dims[0]}`);if(d!==n.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${n.dims[1]}`)}if(m/2!==s.dims[1]&&i/2!==s.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${s.dims[1]}`);if(d>p)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},kh=(e,t)=>{let{interleaved:r,numHeads:n,rotaryEmbeddingDim:s,scale:a}=t,o=e[0].dims[0],i=je.sizeFromDimension(e[0].dims,1),l=e[0].dims[e[0].dims.length-2],d=i/l,p=e[2].dims[1],u=s===0?p*2:d/n,m=new Array(o,l,d/u,u-p),f=je.computeStrides(m),h=[{type:1,data:a},{type:12,data:m},{type:12,data:f},...e[0].dims.length===3?new Array({type:12,data:[i,d,u,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[i,u,l*u,1]}):[],...wt(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],_=v=>{let g=Oe("input",e[0].dataType,e[0].dims.length),x=Oe("position_ids",e[1].dataType,e[1].dims.length),y=Oe("cos_cache",e[2].dataType,e[2].dims.length),w=Oe("sin_cache",e[3].dataType,e[3].dims.length),b=ht("output",e[0].dataType,e[0].dims.length);return v.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:m.length},{name:"global_strides",type:"u32",length:f.length},{name:"input_output_strides",type:"u32",length:f.length}]),`
        ${v.declareVariables(g,x,y,w,b)}

        ${v.mainStart(gd)}
          let half_rotary_emb_dim = uniforms.${y.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${v.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${x.broadcastedIndicesToOffset("bsnh.xy",ht("",x.type.tensor,2))};
            let position_id =
                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});
            let j = i + select(half_rotary_emb_dim, 1, ${r});
            let re = ${g.getByOffset("i")} * ${y.get("position_id","bsnh[3]")} -
                ${g.getByOffset("j")} * ${w.get("position_id","bsnh[3]")};
            ${b.setByOffset("i","re")}
            let im = ${g.getByOffset("i")} * ${w.get("position_id","bsnh[3]")} +
                ${g.getByOffset("j")} * ${y.get("position_id","bsnh[3]")};
            ${b.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${b.setByOffset("k",g.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ur({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:_,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(je.size(m)/gd)},programUniforms:h})}},i4=(e,t)=>{uA(e.inputs,t),e.compute(kh(e.inputs,t))}}),mA,pA,Dv,fA,c4,H7=Ke(()=>{Xr(),Nt(),Cb(),n4(),o4(),Gi(),l4(),Vt(),mA=(e,t)=>{if(t.doRotary&&e.length<=7)throw new Error("cos_cache and sin_cache inputs are required if do_rotary is specified");let r=e[0],n=e[1],s=e[2],a=e[3],o=e[4];if(t.doRotary!==0&&e.length<=7)throw new Error("cos_cast and sin_cache are expected if do_rotary attribute is non-zero");if(t.localWindowSize!==-1)throw new Error("Local attention is not supported");if(t.softcap!==0)throw new Error("Softcap is not supported");if(t.rotaryInterleaved!==0)throw new Error("Rotary interleaved is not supported");if(t.smoothSoftmax)throw new Error("Smooth softmax is not supported");if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let i=!1,l=r.dims[0],d=r.dims[1],p=r.dims.length===3?i?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],u=d,m=0,f=!n||n.dims.length===0,h=Math.floor(f?p/(t.numHeads+2*t.kvNumHeads):p/t.numHeads);f&&(p=h*t.numHeads);let _=a&&a.dims.length!==0,v=o&&o.dims.length!==0;if(_&&a.dims.length===4&&a.dims[0]===l&&a.dims[1]!==t.kvNumHeads&&a.dims[2]===t.kvNumHeads&&a.dims[3]===h)throw new Error("BSNH pastKey/pastValue is not supported");if(_&&v){if(a.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if(o.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');m=a.dims[2]}else if(_||v)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let g=1;if(n&&n.dims.length>0){if(r.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(n.dims.length<3||n.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(r.dims[0]!==n.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(n.dims.length===3){if(r.dims[2]%n.dims[2]!==0)throw new Error('Dimension 2 of "query" should be a multiple of "key"');u=n.dims[1]}else if(n.dims.length===5){if(n.dims[2]!==t.numHeads||n.dims[3]!==2||n.dims[4]!==h)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(s)throw new Error('Expect "value" be none when "key" has packed kv format.');u=n.dims[1]}else{if(n.dims[1]!==t.numHeads||n.dims[3]!==h)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');u=n.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');g=3}let x=0,y=!1,w=t.kvNumHeads?h*t.kvNumHeads:p;if(s&&s.dims.length>0){if(s.dims.length!==3&&s.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(r.dims[0]!==s.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(s.dims.length===3){if(u!==s.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');w=s.dims[2]}else{if(u!==s.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');w=s.dims[1]*s.dims[3],y=!0}}let b=e.length>4?e[5]:void 0;if(b&&b.dims.length!==1&&b.dims[0]!==l)throw new Error('Input "seqlens" is expected to have 1 dimension and the same dim 0 as batch_size');return{batchSize:l,sequenceLength:d,pastSequenceLength:m,kvSequenceLength:u,totalSequenceLength:-1,maxSequenceLength:-1,inputHiddenSize:0,hiddenSize:p,vHiddenSize:w,headSize:h,vHeadSize:Math.floor(w/t.kvNumHeads),numHeads:t.numHeads,kvNumHeads:t.kvNumHeads,nReps:t.numHeads/t.kvNumHeads,pastPresentShareBuffer:!1,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:y,qkvFormat:g}},pA=ur({perm:[0,2,1,3]}),Dv=(e,t,r)=>{let n=t,s=r.kvNumHeads;return t.dims.length===3&&r.kvSequenceLength!==0&&(n=t.reshape([r.batchSize,r.kvSequenceLength,s,r.headSize]),n=e.compute(Ss(n,pA.perm),{inputs:[n],outputs:[-1]})[0]),n},fA=(e,t,r,n)=>{let s=7,a=["type","type"],o=[e*t],i=e*t,l=[{type:12,data:i},{type:12,data:t},{type:12,data:e}],d=p=>{let u=Oe("seq_lens",r.dataType,r.dims),m=Oe("total_seq_lens",n.dataType,n.dims),f=ht("pos_ids",s,o),h=[{name:"output_size",type:"u32"},{name:"sequence_length",type:"u32"},{name:"batch_size",type:"u32"}];return`
  ${p.registerUniforms(h).declareVariables(u,m,f)}
  ${p.mainStart()}
    ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let total_sequence_length = u32(${m.getByOffset("0")});
    let is_subsequent_prompt = uniforms.sequence_length > 1 && uniforms.sequence_length != total_sequence_length;
    let is_first_prompt = !is_subsequent_prompt && uniforms.sequence_length == total_sequence_length;
    let batch_idx = global_idx / uniforms.sequence_length;
    let sequence_idx = i32(global_idx % uniforms.sequence_length);
    var pos_id: i32 = 0;
    let seqlen = ${u.getByOffset("batch_idx")};
    let total_seqlen = seqlen + 1;
    if (is_first_prompt) {
      if (sequence_idx < total_seqlen) {
        pos_id = sequence_idx;
      } else {
        pos_id = 1;
      }
      ${f.setByOffset("global_idx","pos_id")}
    } else if (is_subsequent_prompt) {
      let past_seqlen = total_seqlen - i32(uniforms.sequence_length);
      if (past_seqlen + sequence_idx < total_seqlen) {
        pos_id = past_seqlen + sequence_idx;
      } else {
        pos_id = 1;
      }
      ${f.setByOffset("global_idx","pos_id")}
    } else if (global_idx < uniforms.batch_size) {
      ${f.setByOffset("global_idx","seqlen")}
    };
  }
  `};return{name:"GeneratePositionIds",shaderCache:{hint:`${e};${t}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:o,dataType:s}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:l}),getShaderSource:d}},c4=(e,t)=>{var w;let r=mA(e.inputs,t);if(e.inputs[0].dims.length===5)throw new Error("Packed QKV is not implemented");if(((w=e.inputs[1])==null?void 0:w.dims.length)===5)throw new Error("Packed KV is not implemented");let n=e.inputs[0],s=e.inputs[1]&&e.inputs[1].dims.length>0?e.inputs[1]:void 0,a=e.inputs[2]&&e.inputs[2].dims.length>0?e.inputs[2]:void 0,o=e.inputs[3]&&e.inputs[3].dims.length!==0?e.inputs[3]:void 0,i=e.inputs[4]&&e.inputs[4].dims.length!==0?e.inputs[4]:void 0,l=e.inputs.length>4?e.inputs[5]:void 0,d=e.inputs.length>5?e.inputs[6]:void 0,p=r.kvNumHeads?r.kvNumHeads:r.numHeads,u=ur({axis:2,numOutputs:3,splitSizes:[r.numHeads*r.headSize,p*r.headSize,p*r.headSize]}),[m,f,h]=!s&&!a?e.compute(Oy([n],u),{inputs:[n],outputs:[-1,-1,-1]}):[n,s,a],_,v;if(t.doRotary){let b=e.compute(fA(r.batchSize,r.sequenceLength,l,d),{inputs:[l,d],outputs:[-1]})[0],C=e.inputs[7],E=e.inputs[8],P=ur({interleaved:t.rotaryInterleaved!==0,numHeads:r.numHeads,rotaryEmbeddingDim:0,scale:t.scale}),I=[m,b,C,E],$=[-1];_=e.compute(kh(I,P),{inputs:I,outputs:$})[0],I.splice(0,1,f);let z=ur({interleaved:t.rotaryInterleaved!==0,numHeads:r.kvNumHeads,rotaryEmbeddingDim:0,scale:t.scale});v=e.compute(kh(I,z),{inputs:I,outputs:$})[0]}let g=Su(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,t.doRotary?_:m,void 0,0),x=Dv(e,t.doRotary?v:f,r),y=Dv(e,h,r);gm(e,g,x,y,void 0,void 0,o,i,void 0,r,l,d)}}),Ov,hA,gA,d4,q7=Ke(()=>{Nt(),Bt(),Gi(),Vt(),Ov=(e,t,r,n,s,a,o,i)=>{let l=zr(a),d=l===1?"f32":`vec${l}f`,p=l===1?"vec2f":`mat2x${l}f`,u=s*o,m=64;u===1&&(m=256);let f=[s,o,a/l],h=[s,o,2],_=["rank","type","type"],v=[];v.push(...wt(f,h));let g=x=>{let y=Oe("x",t.dataType,3,l),w=Oe("scale",r.dataType,r.dims),b=Oe("bias",n.dataType,n.dims),C=ht("output",1,3,2),E=[y,w,b,C];return`
  var<workgroup> workgroup_shared : array<${p}, ${m}>;
  const workgroup_size = ${m}u;
  ${x.declareVariables(...E)}
  ${x.mainStart(m)}
    let batch = workgroup_index / uniforms.x_shape[1];
    let channel = workgroup_index % uniforms.x_shape[1];
    let hight = uniforms.x_shape[2];
    // initialize workgroup memory
    var sum = ${d}(0);
    var squared_sum = ${d}(0);
    for (var h = local_idx; h < hight; h += workgroup_size) {
      let value = ${d}(${y.get("batch","channel","h")});
      sum += value;
      squared_sum += value * value;
    }
    workgroup_shared[local_idx] = ${p}(sum, squared_sum);
    workgroupBarrier();

    for (var currSize = workgroup_size >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (local_idx < currSize) {
        workgroup_shared[local_idx] = workgroup_shared[local_idx] + workgroup_shared[local_idx + currSize];
      }
      workgroupBarrier();
    }
    if (local_idx == 0) {
      let sum_final = ${Di("workgroup_shared[0][0]",l)} / f32(hight * ${l});
      let squared_sum_final = ${Di("workgroup_shared[0][1]",l)} / f32(hight * ${l});

      let inv_std_dev = inverseSqrt(squared_sum_final - sum_final * sum_final + f32(${i}));
      let channel_scale = inv_std_dev * f32(scale[channel]);
      let channel_shift = f32(bias[channel]) - sum_final * channel_scale;
      output[workgroup_index] = vec2f(channel_scale, channel_shift);
    }
  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${l};${i};${m}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:h,dataType:1}],dispatchGroup:{x:u},programUniforms:v}),getShaderSource:g},{inputs:[t,r,n],outputs:[-1]})[0]},hA=(e,t,r)=>{let n=t[0].dims,s=n,a=2,o=n[0],i=n[1],l=je.sizeFromDimension(n,a),d=zr(l),p=je.size(s)/d,u=Ov(e,t[0],t[1],t[2],o,l,i,r.epsilon),m=[o,i,l/d],f=[o,i],h=["type","none"],_=v=>{let g=Oe("x",t[0].dataType,m.length,d),x=Oe("scale_shift",1,f.length,2),y=ht("output",t[0].dataType,m.length,d),w=[g,x,y];return`
  ${v.registerUniform("output_size","u32").declareVariables(...w)}
  ${v.mainStart()}
  ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let outputIndices = ${y.offsetToIndices("global_idx")};
      let batch = outputIndices[0];
      let channel = outputIndices[1];
      let scale_shift = ${x.getByIndices("vec2<u32>(batch, channel)")};
      let value = ${g.getByOffset("global_idx")} * ${y.type.value}(scale_shift.x) + ${y.type.value}(scale_shift.y);
      ${y.setByOffset("global_idx","value")};
  }`};e.compute({name:"InstanceNormalization",shaderCache:{hint:`${d}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:s,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:[{type:12,data:p},...wt(m,f,m)]}),getShaderSource:_},{inputs:[t[0],u]})},gA=(e,t,r)=>{let n=t[0].dims,s=n,a=n[0],o=n[n.length-1],i=je.sizeFromDimension(n,1)/o,l=zr(o),d=je.size(s)/l,p=[{type:12,data:i},{type:12,data:Math.floor(o/l)}],u=["type","type"],m=!1,f=[0,n.length-1];for(let g=0;g<n.length-2;g++)m=m||n[g+1]!==1,f.push(g+1);m=m&&n[n.length-1]!==1;let h=m?e.compute(Ss(e.inputs[0],f),{inputs:[e.inputs[0]],outputs:[-1]})[0]:e.inputs[0].reshape(Array.from({length:n.length},(g,x)=>n[f[x]])),_=Ov(e,h,t[1],t[2],a,i,o,r.epsilon),v=g=>{let x=Cn(t[0].dataType),y=l===1?"vec2f":`mat${l}x2f`,w=E=>{let P=E===0?"x":"y",I=l===1?"f32":`vec${l}f`;switch(l){case 1:return`${x}(${I}(scale.${P}))`;case 2:return`vec2<${x}>(${I}(scale[0].${P}, scale[1].${P}))`;case 4:return`vec4<${x}>(${I}(scale[0].${P}, scale[1].${P}, scale[2].${P}, scale[3].${P}))`;default:throw new Error(`Not supported compoents ${l}`)}},b=Oe("input",t[0].dataType,t[0].dims,l),C=ht("output",t[0].dataType,s,l);return`
  @group(0) @binding(0) var<storage, read> input : array<${b.type.storage}>;
  @group(0) @binding(1) var<storage, read> scale_input : array<${y}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${C.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${g.mainStart()}
    let current_image_number = global_idx / (uniforms.C * uniforms.H);
    let current_channel_number = global_idx % uniforms.C;

    let scale_offset = current_image_number * uniforms.C + current_channel_number;
    let scale = scale_input[scale_offset];
    output[global_idx] = fma(input[global_idx], ${w(0)}, ${w(1)});
  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${l}`,inputDependencies:u},getRunData:()=>({outputs:[{dims:s,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:p}),getShaderSource:v},{inputs:[t[0],_]})},d4=(e,t)=>{t.format==="NHWC"?gA(e,e.inputs,t):hA(e,e.inputs,t)}}),_A,xA,u4,K7=Ke(()=>{Nt(),Bt(),Vt(),_A=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},xA=(e,t,r)=>{let n=t.simplified,s=e[0].dims,a=e[1],o=!n&&e[2],i=s,l=je.normalizeAxis(t.axis,s.length),d=je.sizeToDimension(s,l),p=je.sizeFromDimension(s,l),u=je.size(a.dims),m=o?je.size(o.dims):0;if(u!==p||o&&m!==p)throw new Error(`Size of X.shape()[axis:] == ${p}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${u} and bias size of ${m}`);let f=[];for(let b=0;b<s.length;++b)b<l?f.push(s[b]):f.push(1);let h=zr(p),_=["type","type"],v=[{type:12,data:d},{type:1,data:p},{type:12,data:Math.floor(p/h)},{type:1,data:t.epsilon}];o&&_.push("type");let g=r>1,x=r>2,y=b=>{let C=Cn(e[0].dataType),E=[Oe("x",e[0].dataType,e[0].dims,h),Oe("scale",a.dataType,a.dims,h)];o&&E.push(Oe("bias",o.dataType,o.dims,h)),E.push(ht("output",e[0].dataType,i,h)),g&&E.push(ht("mean_data_output",1,f)),x&&E.push(ht("inv_std_output",1,f));let P=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${b.registerUniforms(P).declareVariables(...E)}
  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${Py("f32",h)};
    var mean_square_vector = ${Py("f32",h)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${Dc(C,h,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Di("mean_vector",h)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Di("mean_square_vector",h)} / uniforms.norm_size ${n?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${Dc(C,h,"x[j + offset]")};
      let f32scale = ${Dc(C,h,"scale[j]")};
      output[j + offset] = ${E[0].type.value}((f32input ${n?"":"- mean"}) * inv_std_dev * f32scale
        ${o?`+ ${Dc(C,h,"bias[j]")}`:""}
      );
    }

    ${g?"mean_data_output[global_idx] = mean":""};
    ${x?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},w=[{dims:i,dataType:e[0].dataType}];return g&&w.push({dims:f,dataType:1}),x&&w.push({dims:f,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${h};${r};${n}`,inputDependencies:_},getRunData:()=>({outputs:w,dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:y}},u4=(e,t)=>{_A(e.inputs),e.compute(xA(e.inputs,t,e.outputCount))}}),vA,m4,Q7=Ke(()=>{Bt(),Ab(),Ib(),vA=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},m4=e=>{vA(e.inputs);let t=hd.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can't use matmul on the given tensors");let r=t[t.length-1],n=e.inputs[0].dims[e.inputs[0].dims.length-1];if(r<8&&n<8)e.compute(jb(e.inputs,{activation:""},t));else{let s=t[t.length-2],a=je.size(e.inputs[0].dims.slice(0,-2)),o=je.size(e.inputs[1].dims.slice(0,-2));if(a!==1&&s===1&&o===1){let i=e.inputs[0].reshape([1,a,n]),l=e.inputs[1].reshape([1,n,r]),d=[1,a,r],p=[i,l];e.compute(Sh(p,{activation:""},t,d),{inputs:p})}else e.compute(Sh(e.inputs,{activation:""},t))}}}),yA,wA,bA,p4,f4,X7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),yA=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],n=r.dims.length;if(r.dims[n-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let s=Math.floor((t.k+t.blockSize-1)/t.blockSize),a=t.blockSize/8*t.bits,o=e[1];if(!je.areEqual(o.dims,[t.n,s,a]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let i=e[2].dims;if(je.size(i)!==t.n*s)throw new Error("scales input size error.");if(e.length===4){let l=e[3].dims,d=t.bits>4?t.n*s:t.n*Math.floor((s+1)/2);if(je.size(l)!==d)throw new Error("zeroPoints input size error.")}},wA=(e,t)=>{let r=e[0].dims,n=r.length,s=r[n-2],a=t.k,o=t.n,i=r.slice(0,n-2),l=je.size(i),d=e[1].dims[2]/4,p=e[0].dataType,u=zr(t.k),m=zr(d),f=zr(o),h=i.concat([s,o]),_=s>1&&o/f%2===0?2:1,v=je.size(h)/f/_,g=64,x=[],y=[l,s,a/u],w=je.convertShape(e[1].dims).slice();w.splice(-1,1,d/m),x.push(...wt(y)),x.push(...wt(w)),x.push(...wt(e[2].dims)),e.length===4&&x.push(...wt(je.convertShape(e[3].dims)));let b=[l,s,o/f];x.push(...wt(b));let C=E=>{let P=y.length,I=Oe("a",e[0].dataType,P,u),$=Oe("b",12,w.length,m),z=Oe("scales",e[2].dataType,e[2].dims.length),D=[I,$,z],B=e.length===4?Oe("zero_points",12,e[3].dims.length):void 0;B&&D.push(B);let U=b.length,q=ht("output",e[0].dataType,U,f),X=Cn(e[0].dataType),Z=(()=>{switch(u){case 1:return`array<${X}, 8>`;case 2:return`mat4x2<${X}>`;case 4:return`mat2x4<${X}>`;default:throw new Error(`${u}-component is not supported.`)}})(),K=()=>{let ae=`
          // reuse a data
            var input_offset = ${I.indicesToOffset(`${I.type.indices}(batch, row, word_offset)`)};
            var a_data: ${Z};
            for (var j: u32 = 0; j < ${8/u}; j++) {
              a_data[j] = ${I.getByOffset("input_offset")};
              input_offset++;
            }
          `;for(let G=0;G<f*_;G++)ae+=`
            b_value = ${m===1?`b${G}_data`:`b${G}_data[i]`};
            b_value_lower = unpack4xU8(b_value & b_mask);
            b_value_upper = unpack4xU8((b_value >> 4) & b_mask);
            b_quantized_values = ${Z}(${Array.from({length:4},(R,Q)=>`${X}(b_value_lower[${Q}]), ${X}(b_value_upper[${Q}])`).join(", ")});
            b_dequantized_values = ${u===1?`${Z}(${Array.from({length:8},(R,Q)=>`(b_quantized_values[${Q}] - ${B?`zero_point${G}`:"zero_point"}) * scale${G}`).join(", ")});`:`(b_quantized_values - ${Z}(${Array(8).fill(`${B?`zero_point${G}`:"zero_point"}`).join(",")})) * scale${G};`};
            workgroup_shared[local_id.x * ${_} + ${Math.floor(G/f)}]${f>1?`[${G%f}]`:""} += ${Array.from({length:8/u},(R,Q)=>`${u===1?`a_data[${Q}] * b_dequantized_values[${Q}]`:`dot(a_data[${Q}], b_dequantized_values[${Q}])`}`).join(" + ")};
          `;return ae},ee=()=>{let ae=`
            var col_index = col * ${f};
            ${B?`
            let zero_point_bytes_per_col = (nBlocksPerCol + 1) / 2;
            var zero_point_byte_count: u32;
            var zero_point_word_index: u32;
            var zero_point_byte_offset: u32;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32;
            var zero_point_word: u32;`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${X}(8);`}
            `;for(let G=0;G<f*_;G++)ae+=`
            let scale${G} = ${z.getByOffset("col_index * nBlocksPerCol + block")};
            ${B?`
            zero_point_byte_count = col_index * zero_point_bytes_per_col + (block >> 0x1u);
            zero_point_word_index = zero_point_byte_count >> 0x2u;
            zero_point_byte_offset = zero_point_byte_count & 0x3u;
            zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            zero_point_word = ${B.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point${G} = ${X}((zero_point_word) & 0xFu);`:""}
            col_index += 1;`;return ae},oe=()=>{let ae=`col_index = col * ${f};`;for(let G=0;G<f*_;G++)ae+=`
            let b${G}_data = ${$.getByIndices(`${$.type.indices}(col_index, block, word)`)};
            col_index += 1;`;return ae+=`
            var b_value: u32;
            let b_mask: u32 = 0x0F0F0F0Fu;
            var b_value_lower: vec4<u32>;
            var b_value_upper: vec4<u32>;
            var b_quantized_values: ${Z};
            var b_dequantized_values: ${Z};`,ae};return`
        var<workgroup> workgroup_shared: array<${q.type.value}, ${_*g}>;
        ${E.declareVariables(...D,q)}
        ${E.mainStart([g,1,1])}
          let output_indices = ${q.offsetToIndices(`(global_idx / ${g}) * ${_}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let nBlocksPerCol = uniforms.b_shape[1];

          for (var block = local_id.x; block < nBlocksPerCol; block += ${g}) {
            //process one block
            var word_offset: u32 = block * ${t.blockSize/u};
            ${ee()}
            for (var word: u32 = 0; word < ${d}; word += ${m}) {
              ${oe()}
              for (var i: u32 = 0; i < ${m}; i++) {
                ${K()}
                word_offset += ${8/u};
              }
            }
          }
          workgroupBarrier();

          if (local_id.x < ${_}) {
            var output_value: ${q.type.value} = ${q.type.value}(0);
            var workgroup_shared_offset: u32 = local_id.x;
            for (var b: u32 = 0u; b < ${g}u; b++) {
              output_value += workgroup_shared[workgroup_shared_offset];
              workgroup_shared_offset += ${_};
            }
            ${q.setByIndices(`${q.type.indices}(batch, row, col + local_id.x)`,"output_value")};
          }
        }`};return{name:"MatMulNBits",shaderCache:{hint:`${t.blockSize};${t.bits};${u};${m};${f};${_};${g}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:h,dataType:p}],dispatchGroup:{x:v},programUniforms:x}),getShaderSource:C}},bA=(e,t)=>{let r=e[0].dims,n=r.length,s=r[n-2],a=t.k,o=t.n,i=r.slice(0,n-2),l=je.size(i),d=e[1].dims[2]/4,p=e[0].dataType,u=zr(t.k),m=zr(d),f=i.concat([s,o]),h=128,_=o%8===0?8:o%4===0?4:1,v=h/_,g=v*m*8,x=g/u,y=g/t.blockSize,w=je.size(f)/_,b=[],C=[l,s,a/u],E=je.convertShape(e[1].dims).slice();E.splice(-1,1,d/m),b.push(...wt(C)),b.push(...wt(E)),b.push(...wt(e[2].dims)),e.length===4&&b.push(...wt(je.convertShape(e[3].dims)));let P=[l,s,o];b.push(...wt(P));let I=$=>{let z=C.length,D=Oe("a",e[0].dataType,z,u),B=Oe("b",12,E.length,m),U=Oe("scales",e[2].dataType,e[2].dims.length),q=[D,B,U],X=e.length===4?Oe("zero_points",12,e[3].dims.length):void 0;X&&q.push(X);let Z=P.length,K=ht("output",e[0].dataType,Z),ee=Cn(e[0].dataType),oe=()=>{switch(u){case 1:return`
          let a_data0 = vec4<${ee}>(sub_a[word_offset], sub_a[word_offset + 1], sub_a[word_offset + 2], sub_a[word_offset + 3]);
          let a_data1 = vec4<${ee}>(sub_a[word_offset + 4], sub_a[word_offset + 5], sub_a[word_offset + 6], sub_a[word_offset + 7]);`;case 2:return`
          let a_data0 = vec4<${ee}>(sub_a[word_offset], sub_a[word_offset + 1]);
          let a_data1 = vec4<${ee}>(sub_a[word_offset + 2], sub_a[word_offset + 3]);`;case 4:return`
          let a_data0 = sub_a[word_offset];
          let a_data1 = sub_a[word_offset + 1];`;default:throw new Error(`${u}-component is not supported.`)}};return`
        var<workgroup> sub_a: array<${D.type.value}, ${x}>;
        var<workgroup> inter_results: array<array<${K.type.value}, ${v}>, ${_}>;
        ${$.declareVariables(...q,K)}
        ${$.mainStart([v,_,1])}
          let output_indices = ${K.offsetToIndices(`workgroup_index * ${_}`)};
          let col = output_indices[2];
          let row = output_indices[1];
          let batch = output_indices[0];
          let n_blocks_per_col = uniforms.b_shape[1];
          let num_tiles =  (n_blocks_per_col - 1) / ${y} + 1;

          // Loop over shared dimension.
          for (var tile: u32 = 0; tile < num_tiles; tile += 1) {
            let a_col_start = tile * ${x};
            // load one tile A data into shared memory.
            for (var a_offset = local_idx; a_offset < ${x}; a_offset += ${h})
            {
              let a_col = a_col_start + a_offset;
              if (a_col < uniforms.a_shape[2])
              {
                sub_a[a_offset] = ${D.getByIndices(`${D.type.indices}(batch, row, a_col)`)};
              } else {
                sub_a[a_offset] = ${D.type.value}(0);
              }
            }
            workgroupBarrier();

            // each thread process one block
            let b_row = col + local_id.y;
            let block = tile * ${y} + local_id.x;
            ${X?`
            let zero_point_bytes_per_col = (n_blocks_per_col + 1) / 2;
            let zero_point_byte_count = b_row * zero_point_bytes_per_col + (block >> 0x1u);
            let zero_point_word_index = zero_point_byte_count >> 0x2u;
            let zero_point_byte_offset = zero_point_byte_count & 0x3u;
            let zero_point_nibble_offset: u32 = block & 0x1u;
            let zero_point_bits_offset = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            let zero_point_word = ${X.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;
            let zero_point = ${ee}((zero_point_word) & 0xFu);`:`
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${ee}(8);`}
            let scale = ${U.getByOffset("b_row * n_blocks_per_col + block")};
            let b_data = ${B.getByIndices(`${B.type.indices}(b_row, block, 0)`)};
            var word_offset = local_id.x * ${t.blockSize/u};
            for (var i: u32 = 0; i < ${m}; i++) {
              ${oe()}
              let b_value = ${m===1?"b_data":"b_data[i]"};
              let b_value_lower = unpack4xU8(b_value & 0x0F0F0F0Fu);
              let b_value_upper = unpack4xU8((b_value >> 4) & 0x0F0F0F0Fu);
              let b_quantized_values = mat2x4<${ee}>(${Array.from({length:4},(ae,G)=>`${ee}(b_value_lower[${G}]), ${ee}(b_value_upper[${G}])`).join(", ")});
              let b_dequantized_values = (b_quantized_values - mat2x4<${ee}>(${Array(8).fill("zero_point").join(",")})) * scale;
              inter_results[local_id.y][local_id.x] += ${Array.from({length:2},(ae,G)=>`${`dot(a_data${G}, b_dequantized_values[${G}])`}`).join(" + ")};
              word_offset += ${8/u};
            }
            workgroupBarrier();
          }

          if (local_idx < ${_}) {
            var output_value: ${K.type.value} = ${K.type.value}(0);
            for (var b = 0u; b < ${v}; b++) {
              output_value += inter_results[local_idx][b];
            }
            if (col + local_idx < uniforms.output_shape[2])
            {
              ${K.setByIndices(`${K.type.indices}(batch, row, col + local_idx)`,"output_value")}
            }
          }
        }`};return{name:"BlockwiseMatMulNBits32",shaderCache:{hint:`${t.blockSize};${u};${m};${v};${_}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:f,dataType:p}],dispatchGroup:{x:w},programUniforms:b}),getShaderSource:I}},p4=(e,t)=>{yA(e.inputs,t),t.blockSize===32&&e.adapterInfo.isVendor("intel")&&e.adapterInfo.isArchitecture("gen-12lp")?e.compute(bA(e.inputs,t)):e.compute(wA(e.inputs,t))},f4=e=>ur(e)}),MA,TA,EA,CA,PA,SA,kA,jA,h4,Y7=Ke(()=>{Nt(),Bt(),Vt(),MA=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},TA=(e,t,r)=>{let n="";for(let s=t-1;s>=0;--s)n+=`
            k = i32(${e.indicesGet("indices",s)}) - ${xt("uniforms.pads",s,r)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${xt("uniforms.x_shape",s,t)})) {
              break;
            }
            offset += k * i32(${xt("uniforms.x_strides",s,t)});
        `;return`
          value = ${e.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${n}
            value = x[offset];
          }
      `},EA=(e,t,r)=>{let n="";for(let s=t-1;s>=0;--s)n+=`
                k = i32(${e.indicesGet("indices",s)}) - ${xt("uniforms.pads",s,r)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${xt("uniforms.x_shape",s,t)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${xt("uniforms.x_shape",s,t)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${xt("uniforms.x_strides",s,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},CA=(e,t,r)=>{let n="";for(let s=t-1;s>=0;--s)n+=`
                k = i32(${e.indicesGet("indices",s)}) - ${xt("uniforms.pads",s,r)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${xt("uniforms.x_shape",s,t)})) {
                  k = i32(${xt("uniforms.x_shape",s,t)}) - 1;
                }
                offset += k * i32(${xt("uniforms.x_strides",s,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},PA=(e,t,r)=>{let n="";for(let s=t-1;s>=0;--s)n+=`
                k = i32(${e.indicesGet("indices",s)}) - ${xt("uniforms.pads",s,r)};
                if (k < 0)  {
                  k += i32(${xt("uniforms.x_shape",s,t)}]);
                }
                if (k >= i32(${xt("uniforms.x_shape",s,t)})) {
                  k -= i32(${xt("uniforms.x_shape",s,t)});
                }
                offset += k * i32(${xt("uniforms.x_strides",s,t)});
            `;return`
              var offset = 0;
              var k = 0;
              ${n}
              value = x[offset];
          `},SA=(e,t,r)=>{switch(r.mode){case 0:return TA(e,t,r.pads.length);case 1:return EA(e,t,r.pads.length);case 2:return CA(e,t,r.pads.length);case 3:return PA(e,t,r.pads.length);default:throw new Error("Invalid mode")}},kA=(e,t)=>{let r=je.padShape(e[0].dims.slice(),t.pads),n=e[0].dims,s=je.size(r),a=[{type:12,data:s},{type:6,data:t.pads}],o=e.length>=3&&e[2].data;t.mode===0&&a.push({type:o?e[2].dataType:1,data:t.value}),a.push(...wt(e[0].dims,r));let i=["rank"],l=d=>{let p=ht("output",e[0].dataType,r.length),u=Oe("x",e[0].dataType,n.length),m=u.type.value,f=SA(p,n.length,t),h=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&h.push({name:"constant_value",type:o?m:"f32"}),`
            ${d.registerUniforms(h).declareVariables(u,p)}
            ${d.mainStart()}
            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${p.offsetToIndices("global_idx")};

            var value = ${m}(0);
            ${f}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}${o}`,inputDependencies:i},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(je.size(r)/64)},programUniforms:a}),getShaderSource:l}},jA=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),n=e.length>=3&&e[2].data?e[2].dataType===10?e[2].getUint16Array()[0]:e[2].getFloat32Array()[0]:0,s=e[0].dims.length,a=new Int32Array(2*s).fill(0);if(e.length>=4){let i=e[3].getBigInt64Array();for(let l=0;l<i.length;l++)a[Number(i[l])]=Number(r[l]),a[Number(i[l])+s]=Number(r[l+i.length])}else r.forEach((i,l)=>a[Number(l)]=Number(i));let o=[];return a.forEach(i=>o.push(i)),{mode:t.mode,value:n,pads:o}}else return t},h4=(e,t)=>{MA(e.inputs);let r=jA(e.inputs,t);e.compute(kA(e.inputs,r),{inputs:[0]})}}),gu,Fv,Lv,Rv,zv,AA,IA,Bv,Vv,g4,_4,Wv,x4,v4,Uv,y4,w4,b4,M4,Z7=Ke(()=>{Oa(),Nt(),Bt(),Vt(),gu=e=>{if(Er.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Fv=(e,t,r)=>{let n=t.format==="NHWC",s=e.dims.slice();n&&s.splice(1,0,s.pop());let a=Object.hasOwnProperty.call(t,"dilations"),o=t.kernelShape.slice(),i=t.strides.slice(),l=a?t.dilations.slice():[],d=t.pads.slice();Ch.adjustPoolAttributes(r,s,o,i,l,d);let p=Ch.computePoolOutputShape(r,s,i,l,o,d,t.autoPad),u=Object.assign({},t);a?Object.assign(u,{kernelShape:o,strides:i,pads:d,dilations:l,cacheKey:t.cacheKey}):Object.assign(u,{kernelShape:o,strides:i,pads:d,cacheKey:t.cacheKey});let m=p.slice();return m.push(m.splice(1,1)[0]),[u,n?m:p]},Lv=(e,t)=>{let r=t.format==="NHWC",n=je.size(e),s=je.size(t.kernelShape),a=[{type:12,data:n},{type:12,data:s}],o=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let i=t.kernelShape[t.kernelShape.length-1],l=t.strides[t.strides.length-1],d=t.pads[t.pads.length/2-1],p=t.pads[t.pads.length-1],u=!!(d+p);a.push({type:12,data:i},{type:12,data:l},{type:12,data:d},{type:12,data:p}),o.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let m=!1;if(t.kernelShape.length===2){let f=t.kernelShape[t.kernelShape.length-2],h=t.strides[t.strides.length-2],_=t.pads[t.pads.length/2-2],v=t.pads[t.pads.length-2];m=!!(_+v),a.push({type:12,data:f},{type:12,data:h},{type:12,data:_},{type:12,data:v}),o.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[a,o,!0,u,m]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let i=je.computeStrides(t.kernelShape);a.push({type:12,data:i},{type:12,data:t.pads},{type:12,data:t.strides}),o.push({name:"kernelStrides",type:"u32",length:i.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let l=t.pads.reduce((d,p)=>d+p);return[a,o,!!l,!1,!1]}},Rv=(e,t,r,n,s,a,o,i,l,d,p,u)=>{let m=s.format==="NHWC",f=t.type.value,h=ht("output",t.type.tensor,n);if(s.kernelShape.length<=2){let _="",v="",g="",x=r-(m?2:1);if(p?_=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${x}] < 0 || xIndices[${x}]
                      >= uniforms.x_shape[${x}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${a}
                }`:_=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${t.indicesToOffset("xIndices")}];
                  ${a}
                }`,s.kernelShape.length===2){let y=r-(m?3:2);u?v=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${y}] = indices[${y}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${y}] < 0 || xIndices[${y}] >= uniforms.x_shape[${y}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:v=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${y}] = indices[${y}] * uniforms.sh - uniforms.phStart + j;
                `,g=`
              }
            `}return`
            ${e.registerUniforms(l).declareVariables(t,h)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${h.offsetToIndices("global_idx")};
              var xIndices = ${h.offsetToIndices("global_idx")};

              var value = ${f}(${i});
              var pad = 0;
              ${v}
              ${_}
              ${g}
              ${o}

              output[global_idx] = value;
            }`}else{if(m)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let _=s.kernelShape.length,v=s.pads.length,g="";return d?g=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${t.indicesToOffset("xIndices")}];
                ${a}
              }`:g=`
              }
              let x_val = x[${t.indicesToOffset("xIndices")}];
              ${a}
            `,`
            ${e.registerUniforms(l).declareVariables(t,h)}

            ${e.mainStart()}
              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${h.offsetToIndices("global_idx")};
              var xIndices = ${h.offsetToIndices("global_idx")};

              var offsets: array<u32, ${_}>;

              var value = ${f}(${i});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${_-1}u; j++) {
                  offsets[j] = offset / ${xt("uniforms.kernelStrides","j",_)};
                  offset -= offsets[j] * ${xt("uniforms.kernelStrides","j",_)};
                }
                offsets[${_-1}] = offset;

                isPad = false;
                for (var j = ${r-_}u; j < ${r}u; j++) {
                  xIndices[j] = indices[j] * ${xt("uniforms.strides",`j - ${r-_}u`,_)}
                    + offsets[j - ${r-_}u] - ${xt("uniforms.pads","j - 2u",v)};
                  ${g}
              }
              ${o}

              output[global_idx] = value;
            }`}},zv=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,AA=e=>`${zv(e)};${e.countIncludePad}`,IA=e=>`${zv(e)};${e.storageOrder};${e.dilations}`,Bv=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),Vv=(e,t,r,n)=>{let[s,a]=Fv(t,n,r),o=Oe("x",t.dataType,t.dims.length),i=o.type.value,l="value += x_val;",d="";s.countIncludePad?d+=`value /= ${i}(uniforms.kernelSize);`:d+=`value /= ${i}(i32(uniforms.kernelSize) - pad);`;let[p,u,m,f,h]=Lv(a,s);p.push(...wt(t.dims,a));let _=["rank"];return{name:e,shaderCache:{hint:`${n.cacheKey};${m};${f};${h}`,inputDependencies:_},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(je.size(a)/64)},programUniforms:p}),getShaderSource:v=>Rv(v,o,t.dims.length,a.length,s,l,d,0,u,m,f,h)}},g4=e=>{let t=e.count_include_pad!==0,r=Bv(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let n={countIncludePad:t,...r,cacheKey:""};return{...n,cacheKey:AA(n)}},_4=(e,t)=>{gu(e.inputs),e.compute(Vv("AveragePool",e.inputs[0],!1,t))},Wv={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},x4=e=>{let t=e.format;return{format:t,...Wv,cacheKey:t}},v4=(e,t)=>{gu(e.inputs),e.compute(Vv("GlobalAveragePool",e.inputs[0],!0,t))},Uv=(e,t,r,n)=>{let[s,a]=Fv(t,n,r),o=`
      value = max(x_val, value);
    `,i="",l=Oe("x",t.dataType,t.dims.length),d=["rank"],[p,u,m,f,h]=Lv(a,s);return p.push(...wt(t.dims,a)),{name:e,shaderCache:{hint:`${n.cacheKey};${m};${f};${h}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(je.size(a)/64)},programUniforms:p}),getShaderSource:_=>Rv(_,l,t.dims.length,a.length,s,o,i,t.dataType===10?-65504:-1e5,u,m,f,h)}},y4=(e,t)=>{gu(e.inputs),e.compute(Uv("MaxPool",e.inputs[0],!1,t))},w4=e=>{let t=e.storage_order,r=e.dilations,n=Bv(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(n.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let s={storageOrder:t,dilations:r,...n,cacheKey:""};return{...s,cacheKey:IA(s)}},b4=e=>{let t=e.format;return{format:t,...Wv,cacheKey:t}},M4=(e,t)=>{gu(e.inputs),e.compute(Uv("GlobalMaxPool",e.inputs[0],!0,t))}}),NA,$A,T4,E4,J7=Ke(()=>{Nt(),Bt(),Xr(),Vt(),NA=(e,t)=>{if(e.length<2||e.length>3)throw new Error("DequantizeLinear requires 2 or 3 inputs.");if(e.length===3&&e[1].dims===e[2].dims)throw new Error("x-scale and x-zero-point must have the same shape.");if(e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[0].dataType===6&&e.length>2)throw new Error("In the case of dequantizing int32 there is no zero point.");if(e[1].dims.length!==0&&e[1].dims.length!==1&&e[1].dims.length!==e[0].dims.length)throw new Error("scale input must be a scalar, a 1D tensor, or have the same rank as the input tensor.");if(e.length>2){if(e[0].dataType!==e[2].dataType)throw new Error("x and x-zero-point must have the same data type.");if(e[1].dims.length!==e[2].dims.length)throw new Error("scale and zero-point inputs must have the same rank.");if(!e[1].dims.map((r,n)=>r===e[2].dims[n]).reduce((r,n)=>r&&n,!0))throw new Error("scale and zero-point inputs must have the same shape.")}if(t.blockSize>0){if(e[1].dims.length===0||e[1].dims.length===1&&e[1].dims[0]===1)throw new Error("blockSize must be set only for block quantization.");if(!e[1].dims.map((s,a)=>a===t.axis||s===e[0].dims[a]).reduce((s,a)=>s&&a,!0))throw new Error("For block qunatization, scale input shape to match the input shape except for the axis");if(e[1].dims.length!==e[0].dims.length)throw new Error("For block qunatization the scale input rank must be the same as the x rank.");let r=e[0].dims[t.axis],n=e[1].dims[t.axis];if(t.blockSize<Math.ceil(r/n)||t.blockSize>Math.ceil(r/(n-1)-1))throw new Error("blockSize must be with in the range [ceil(dI / Si), ceil(dI / (Si - 1) - 1)].")}},$A=(e,t)=>{let r=je.normalizeAxis(t.axis,e[0].dims.length),n=e[0].dataType,s=n===3,a=e[0].dims,o=e[1].dataType,i=je.size(a),l=n===3||n===2,d=l?[Math.ceil(je.size(e[0].dims)/4)]:e[0].dims,p=e[1].dims,u=e.length>2?e[2]:void 0,m=u?l?[Math.ceil(je.size(u.dims)/4)]:u.dims:void 0,f=p.length===0||p.length===1&&p[0]===1,h=f===!1&&p.length===1,_=zr(i),v=f&&(!l||_===4),g=v?_:1,x=v&&!l?_:1,y=Oe("input",l?12:n,d.length,x),w=Oe("scale",o,p.length),b=u?Oe("zero_point",l?12:n,m.length):void 0,C=ht("output",o,a.length,g),E=[y,w];b&&E.push(b);let P=[d,p];u&&P.push(m);let I=[{type:12,data:i/g},{type:12,data:r},{type:12,data:t.blockSize},...wt(...P,a)],$=z=>{let D=[{name:"output_size",type:"u32"},{name:"axis",type:"u32"},{name:"block_size",type:"u32"}];return`
      ${z.registerUniforms(D).declareVariables(...E,C)}
      ${z.mainStart()}
          ${z.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          let output_indices = ${C.offsetToIndices("global_idx")};

          // Set input x
          ${l?`
            let input = ${y.getByOffset("global_idx / 4")};
            let x_vec = ${s?"unpack4xI8(input)":"unpack4xU8(input)"};
            let x_value = ${g===1?"x_vec[global_idx % 4]":"x_vec"};`:`let x_value = ${y.getByOffset("global_idx")};`};

          // Set scale input
          ${f?`let scale_value= ${w.getByOffset("0")}`:h?`
            let scale_index = ${C.indicesGet("output_indices","uniforms.axis")};
            let scale_value= ${w.getByOffset("scale_index")};`:`
            var scale_indices: ${w.type.indices} = output_indices;
            let index = ${w.indicesGet("scale_indices","uniforms.axis")} / uniforms.block_size;
            ${w.indicesSet("scale_indices","uniforms.axis","index")};
            let scale_value= ${w.getByIndices("scale_indices")};`};

          // Set zero-point input
          ${b?f?l?`
                let zero_point_input = ${b.getByOffset("0")};
                let zero_point_vec =  ${s?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value= zero_point_vec[0]`:`let zero_point_value = ${b.getByOffset("0")}`:h?l?`
                let zero_point_index = ${C.indicesGet("output_indices","uniforms.axis")};
                let zero_point_input = ${b.getByOffset("zero_point_index / 4")};
                let zero_point_vec =  ${s?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_index % 4]`:`
                let zero_point_index = ${C.indicesGet("output_indices","uniforms.axis")};
                let zero_point_value = ${b.getByOffset("zero_point_index")};`:l?`
                let zero_point_offset = ${w.indicesToOffset("scale_indices")};
                let zero_point_input = ${b.getByOffset("zero_point_offset / 4")};
                let zero_point_vec = ${s?"unpack4xI8(zero_point_input)":"unpack4xU8(zero_point_input)"};
                let zero_point_value = zero_point_vec[zero_point_offset % 4];`:`let zero_point_value = ${b.getByIndices("scale_indices")};`:`let zero_point_value = ${l?s?"i32":"u32":y.type.value}(0);`};
      // Compute and write output
      ${C.setByOffset("global_idx",`${C.type.value}(x_value - zero_point_value) * scale_value`)};
      }`};return{name:"DequantizeLinear",shaderCache:{hint:t.cacheKey,inputDependencies:b?["rank","rank","rank"]:["rank","rank"]},getShaderSource:$,getRunData:()=>({outputs:[{dims:a,dataType:o}],dispatchGroup:{x:Math.ceil(i/g/64),y:1,z:1},programUniforms:I})}},T4=(e,t)=>{NA(e.inputs,t),e.compute($A(e.inputs,t))},E4=e=>ur({axis:e.axis,blockSize:e.blockSize})}),DA,OA,C4,eQ=Ke(()=>{Oa(),Nt(),Vt(),DA=(e,t,r)=>{let n=e===t,s=e<t&&r<0,a=e>t&&r>0;if(n||s||a)throw new Error("Range these inputs' contents are invalid.")},OA=(e,t,r,n)=>{let s=Math.abs(Math.ceil((t-e)/r)),a=[s],o=s,i=[{type:12,data:o},{type:n,data:e},{type:n,data:r},...wt(a)],l=d=>{let p=ht("output",n,a.length),u=p.type.value,m=[{name:"outputSize",type:"u32"},{name:"start",type:u},{name:"delta",type:u}];return`
        ${d.registerUniforms(m).declareVariables(p)}
        ${d.mainStart()}
        ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${u}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${n}`},getShaderSource:l,getRunData:()=>({outputs:[{dims:a,dataType:n}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:i})}},C4=e=>{let t=0,r=0,n=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],n=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],n=e.inputs[2].getFloat32Array()[0]),Er.webgpu.validateInputContent&&DA(t,r,n),e.compute(OA(t,r,n,e.inputs[0].dataType),{inputs:[]})}}),FA,Gv,Hv,LA,P4,S4,tQ=Ke(()=>{Nt(),Bt(),Xr(),Vt(),FA=(e,t,r,n)=>{if(e!=="none"&&n!=="i32"&&n!=="u32"&&n!=="f32")throw new Error(`Input ${n} is not supported with reduction ${e}.`);let s=`{
                var oldValue = 0;
                loop {
                  let newValueF32 =`,a=`;
                  let newValue = bitcast<i32>(newValueF32);
                  let res = atomicCompareExchangeWeak(&${t}, oldValue, newValue);
                  if res.exchanged {
                    break;
                  }
                  oldValue = res.old_value;
                }
              }`;switch(e){case"none":return`${t}=${r};`;case"add":return n==="i32"||n==="u32"?`atomicAdd(&${t}, bitcast<${n}>(${r}));`:`
              ${s}bitcast<${n}>(oldValue) + (${r})${a}`;case"max":return n==="i32"||n==="u32"?`atomicMax(&${t}, bitcast<${n}>(${r}));`:`
                ${s}max(bitcast<f32>(oldValue), (${r}))${a}`;case"min":return n==="i32"||n==="u32"?`atomicMin(&${t}, bitcast<${n}>(${r}));`:`${s}min(bitcast<${n}>(oldValue), (${r}))${a}`;case"mul":return`${s}(bitcast<${n}>(oldValue) * (${r}))${a}`;default:throw new Error(`Reduction ${e} is not supported.`)}},Gv=(e,t)=>`${e===1?`
    let element_count_dim = uniforms.output_strides;
    let dim_value = uniforms.output_shape;`:`
    let element_count_dim = uniforms.output_strides[${t?"i - indices_start":"i"}];
    let dim_value = uniforms.output_shape[${t?"i - indices_start":"i"} + uniforms.last_index_dimension];`}
    
    if (index >= 0) {
      if (index >= i32(dim_value)) {
        index = i32(dim_value - 1);
      }
    } else {
      if (index < -i32(dim_value)) {
        index = 0;
      } else {
        index += i32(dim_value);
      }
    }
    data_offset += u32((u32(index) * element_count_dim));`,Hv=(e,t,r)=>`for (var i = 0u; i < uniforms.num_updates_elements; i++) {
        let value = updates[uniforms.num_updates_elements * ${r?"global_idx":"idx"} + i];
        ${FA(e.reduction,"output[data_offset + i]","value",t)}
      }`,LA=(e,t)=>{let r=e[0].dims,n=e[1].dims,s=r,a=1,o=Math.ceil(je.size(n)/a),i=n[n.length-1],l=je.sizeFromDimension(r,i),d=je.sizeFromDimension(n,0)/i,p=[{type:12,data:o},{type:12,data:i},{type:12,data:l},...wt(e[1].dims,e[2].dims,s)],u=m=>{let f=Oe("indices",e[1].dataType,e[1].dims.length),h=Oe("updates",e[2].dataType,e[2].dims.length,a),_=t.reduction!=="none"&&t.reduction!==""?rL("output",e[0].dataType,s.length):ht("output",e[0].dataType,s.length,a);return`
      ${m.registerUniform("output_size","u32").registerUniform("last_index_dimension","u32").registerUniform("num_updates_elements","u32").declareVariables(f,h,_)}
      ${m.mainStart()}
        ${m.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
  var hasDuplicates = false;
  if (${t.reduction==="none"}) {
    for (var i = 0; i < ${d}; i = i + 1) {
      for (var j = i + 1; j < ${d}; j = j + 1) {
        var index_i = i32(indices[i].x);
        var index_j = i32(indices[j].x);
        if (index_i == index_j) {
          hasDuplicates = true;
          break;
        }
      }
      if (hasDuplicates) {
        break;
      }
    }
  }

  if (${t.reduction==="none"} && hasDuplicates) {
    if (global_idx != 0u) {
      return;
    }
    // Process each index-update pair individually when duplicates exist
    for (var idx = 0u; idx < ${d}u; idx++) {
      var data_offset = 0u;
      for (var i = 0u; i < uniforms.last_index_dimension; i++) {
        var index = i32(indices[idx * uniforms.last_index_dimension + i].x);
        ${Gv(r.length,!1)}
      }
      ${Hv(t,_.type.value,!1)}
    }
    return;
  }

  var data_offset = 0u;
  var indices_start = uniforms.last_index_dimension * global_idx;
  var indices_end = indices_start + uniforms.last_index_dimension;
  for (var i = indices_start; i < indices_end; i++) {
    var index = i32(indices[i].x);
    ${Gv(r.length,!0)}
  }
  ${Hv(t,_.type.value,!0)}
  }`};return{name:"ScatterND",shaderCache:{hint:`${t.cacheKey}_${t.reduction}`,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:s,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:p}),getShaderSource:u}},P4=e=>ur({reduction:e.reduction}),S4=(e,t)=>{e.compute(LA(e.inputs,t),{inputs:[e.inputs[1],e.inputs[2]],outputs:[]})}}),RA,zA,BA,qv,VA,WA,UA,GA,HA,qA,KA,QA,Kv,XA,YA,ZA,JA,eI,k4,j4,rQ=Ke(()=>{Nt(),Bt(),Xr(),Vt(),RA=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},zA=(e,t,r)=>{t.every(s=>s>=0&&s<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let n=new Array(r).fill(1);return t.forEach((s,a)=>n[s]=e[a]),n},BA=(e,t,r,n,s,a)=>{let[o,i,l]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],d=e[0].dims.length;if(o>0&&e.length>o&&e[o].dims.length>0)e[o].getFloat32Array().forEach(p=>a.push(p));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(i>0&&e.length>i&&e[i].dims.length===1&&e[i].dims[0]>0){if(e[i].getFloat32Array().forEach(p=>n.push(p)),n.length!==0&&n.length!==d&&r>=18&&n.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");RA(n,t),t.axes.length>0&&zA(n,t.axes,d).forEach((p,u)=>n[u]=p)}if(l>0&&e.length>l&&e[l].dims.length===1&&e[l].dims[0]>0&&(e[l].getBigInt64Array().forEach(p=>s.push(Number(p))),s.length!==0&&s.length!==d&&r>=18&&s.length!==t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(n.length!==0&&n.length!==t.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(s.length!==0&&s.length!==t.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof n<"u"&&typeof s<"u"&&n.length>0&&s.length>d)throw new Error("Resize requires only of scales or sizes to be specified")},qv=(e,t,r,n)=>`
  // The whole part and the fractional part are calculated separately due to inaccuracy of floating
  // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
  // offset-by-one error later in floor().
  let big = (${e}) * (${t});
  let whole = ${n}(big / (${r}));
  let fract = ${n}(big % (${r})) / ${n}(${r});
  return whole + fract;
`,VA=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`
          if (xScale < 1.0 || floor(xScale) != xScale) {
            return ${t}(xResized) / ${t}(xScale);
          } else {
            ${qv("xResized","lengthOriginal","lengthResized",t)}
          }
        `;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    ${qv("xResized","lengthOriginal - 1","lengthResized - 1",t)}
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +
                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /
                        ${t}(lengthResized - 1);
                  } else {
                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);
                  const adjustment = ${t}(lengthResized) / outputWidth;
                  const center = ${t}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",WA=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",UA=(e,t,r)=>{let n=new Array(r).fill(0).concat(new Array(r).fill(1)),s=e.length===0?n:e.slice();return t.length>0?(t.forEach((a,o)=>{n[a]=s[o],n[o+r]=s[t.length+o]}),n):s},GA=(e,t,r,n)=>{let s=[];if(r.length>0)if(n.length>0){if(e.forEach(a=>s.push(a)),Math.max(...n)>e.length)throw new Error("axes is out of bound");n.forEach((a,o)=>s[a]=r[o])}else r.forEach(a=>s.push(a));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");s=e.map((a,o)=>Math.round(a*t[o]))}return s},HA=(e,t,r)=>{let n=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(a=>t[a]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(a=>t[a]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let s=e.slice();return r.axes.length>0?(r.axes.forEach(a=>t[a]=n),r.axes.forEach(a=>s[a]=Math.round(e[a]*t[a]))):(t.fill(n,0,t.length),s.forEach((a,o)=>s[o]=Math.round(a*t[o]))),s},qA=(e,t,r,n,s)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {
      var original_indices: array<${e.type.value}, ${r.length}>;
      for (var i:u32 = 0; i < ${r.length}; i++) {
        var output_index = ${e.indicesGet("output_indices","i")};
        var scale = ${xt("uniforms.scales","i",n)};
        var roi_low = ${xt("uniforms.roi","i",s)};
        var roi_hi = ${xt("uniforms.roi",`i + ${t.length}`,s)};
        if (scale == 1.0) {
          original_indices[i] = ${e.type.value}(output_index);
        } else {
          var input_shape_i = ${xt("uniforms.input_shape","i",t.length)};
          var output_shape_i = ${xt("uniforms.output_shape","i",r.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,KA=(e,t,r,n,s,a,o)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
      var input_indices: ${e.type.indices};
      for (var i:u32 = 0; i < ${n.length}; i++) {
        var output_index = ${t.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${xt("uniforms.scales","i",s)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${xt("uniforms.roi","i",a)};
          var roi_hi = ${xt("uniforms.roi",`i + ${r.length}`,a)};
          var input_shape_i = ${xt("uniforms.input_shape","i",r.length)};
          var output_shape_i = ${xt("uniforms.output_shape","i",n.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${o} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${e.indicesSet("input_indices","i","input_index")}
      }
      return input_indices;
    }`,QA=(e,t)=>`
    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${t.length}; i++) {
        var input_index = ${e.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${xt("uniforms.input_shape","i",t.length)}) {
          return false;
        }
      }
      return true;
    }`,Kv=(e,t,r,n)=>e.rank>n?`
    ${e.indicesSet("input_indices",t,"channel")};
    ${e.indicesSet("input_indices",r,"batch")};
`:"",XA=(e,t,r,n,s)=>{let[a,o,i,l]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",o,`max(0, min(row, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",i,`max(0, min(col, ${r[i]} - 1))`)};
      ${Kv(e,l,a,2)}
      return ${e.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${d} = originalIndices[${o}];
      var col:${d} = originalIndices[${i}];
      ${n?`if (row < 0 || row > (${r[o]} - 1) || col < 0 || col > (${r[i]} - 1)) {
        return ${s};
      }`:""};
      row = max(0, min(row, ${r[o]} - 1));
      col = max(0, min(col, ${r[i]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${r.length>2?`u32(originalIndices[${l}])`:"0"};
      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};
      var x11: ${d} = getInputValue(batch, channel, row1, col1);
      var x12: ${d} = getInputValue(batch, channel, row1, col2);
      var x21: ${d} = getInputValue(batch, channel, row2, col1);
      var x22: ${d} = getInputValue(batch, channel, row2, col2);
      var dx1: ${d} = abs(row - ${d}(row1));
      var dx2: ${d} = abs(${d}(row2) - row);
      var dy1: ${d} = abs(col - ${d}(col1));
      var dy2: ${d} = abs(${d}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},YA=(e,t,r,n,s,a,o,i,l,d)=>{let p=r.length===2,[u,m]=p?[0,1]:[2,3],f=e.type.value,h=_=>{let v=_===u?"row":"col";return`
      fn ${v}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${f} {
        var output_index = ${t.indicesGet("output_indices",_)};
        var originalIdx: ${f} = getOriginalCoordinateFromResizedCoordinate(output_index, ${s[_]},
        ${n[_]}, ${r[_]}, ${a[_]}, ${a[_]} + ${r.length});
        var fractOriginalIdx: ${f} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${i} && (originalIdx < 0 || originalIdx > (${r[_]} - 1))) {
          return ${l};
        }
        var data: array<${f}, 4> = array<${f}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${v}: ${f} = originalIdx + ${f}(i);
          if (${v} < 0 || ${v} >= ${r[_]}) {
            ${d?`coefs[i + 1] = 0.0;
                        continue;`:i?`return ${l};`:`${v} = max(0, min(${v}, ${r[_]} - 1));`};
          }
        var input_indices_copy: ${e.type.indices} = input_indices;
          ${e.indicesSet("input_indices_copy",_,`u32(${v})`)};
          data[i + 1] = ${_===u?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${h(u)};
    ${h(m)};
  fn getCubicInterpolationCoefs(s: ${f}) -> array<${f}, 4> {
    var absS = abs(s);
    var coeffs: array<${f}, 4> = array<${f}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${f} = 1.0 - absS;
    var twoMinusAbsS: ${f} = 2.0 - absS;
    var onePlusAbsS: ${f} = 1.0 + absS;
    coeffs[0] = ((${o} * onePlusAbsS - 5 * ${o}) * onePlusAbsS + 8 * ${o}) * onePlusAbsS - 4 * ${o};
    coeffs[1] = ((${o} + 2) * absS - (${o} + 3)) * absS * absS + 1;
    coeffs[2] = ((${o} + 2) * oneMinusAbsS - (${o} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${o} * twoMinusAbsS - 5 * ${o}) * twoMinusAbsS + 8 * ${o}) * twoMinusAbsS - 4 * ${o};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${f}, 4>, coefs: array<${f}, 4>) -> ${f} {
    var coefsSum: ${f} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${f} {
    var input_indices: ${e.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},ZA=(e,t,r,n,s)=>{let[a,o,i,l,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],p=e.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${p} {
      var input_indices: ${e.type.indices};
      ${e.indicesSet("input_indices",o,`max(0, min(depth, ${r[o]} - 1))`)};
      ${e.indicesSet("input_indices",i,`max(0, min(height, ${r[i]} - 1))`)};
      ${e.indicesSet("input_indices",l,`max(0, min(width, ${r[l]} - 1))`)};
      ${Kv(e,d,a,3)}
      return ${e.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${p} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${p} = originalIndices[${o}];
      var height:${p} = originalIndices[${i}];
      var width:${p} = originalIndices[${l}];
      ${n?`if (depth < 0 || depth > (${r[o]} - 1) || height < 0 || height > (${r[i]} - 1) || width < 0 || (width > ${r[l]} - 1)) {
      return ${s};
        }`:""};

    depth = max(0, min(depth, ${r[o]} - 1));
      height = max(0, min(height, ${r[i]} - 1));
      width = max(0, min(width, ${r[l]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};
      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};

      var x111: ${p} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${p} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${p} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${p} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${p} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${p} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${p} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${p} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${p} = abs(depth - ${p}(depth1));
      var dx2: ${p} = abs(${p}(depth2) - depth);
      var dy1: ${p} = abs(height - ${p}(height1));
      var dy2: ${p} = abs(${p}(height2) - height);
      var dz1: ${p} = abs(width - ${p}(width1));
      var dz2: ${p} = abs(${p}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},JA=(e,t,r,n,s,a)=>{let o=e.dims,i=UA(a,t.axes,o.length),l=GA(o,n,s,t.axes),d=n.slice();n.length===0&&(d=o.map((x,y)=>x===0?1:l[y]/x),t.keepAspectRatioPolicy!=="stretch"&&(l=HA(o,d,t)));let p=ht("output",e.dataType,l.length),u=Oe("input",e.dataType,o.length),m=je.size(l),f=o.length===l.length&&o.every((x,y)=>x===l[y]),h=t.coordinateTransformMode==="tf_crop_and_resize",_=t.extrapolationValue,v=u.type.value,g=x=>`
      ${f?"":`
      ${VA(t.coordinateTransformMode,v)};
      ${(()=>{switch(t.mode){case"nearest":return`
              ${QA(u,o)};
              ${WA(t.nearestMode,r,v)};
              ${KA(u,p,o,l,d.length,i.length,h)};
              `;case"linear":return`
              ${qA(p,o,l,d.length,i.length)};
              ${(()=>{if(o.length===2||o.length===4)return`${XA(u,p,o,h,_)}`;if(o.length===3||o.length===5)return`${ZA(u,p,o,h,_)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(o.length===2||o.length===4)return`${YA(u,p,o,l,d,i,t.cubicCoeffA,h,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",d.length).registerUniform("roi","f32",i.length).declareVariables(u,p)}
      ${x.mainStart()}
        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${f?"output[global_idx] = input[global_idx];":`
        let output_indices = ${p.offsetToIndices("global_idx")};
        var input_indices: ${u.type.indices};
        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${u.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${t.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${o.length===2||o.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${d.length>0?t.mode==="cubic"?d:d.length:""}|${s.length>0?s:""}|${i.length>0?i:""}|${f}|${t.mode==="nearest"?o.length:o}`,inputDependencies:["rank"]},getShaderSource:g,getRunData:()=>({outputs:[{dims:l,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(m/64)},programUniforms:[{type:12,data:m},{type:1,data:d},{type:1,data:i},...wt(o,l)]})}},eI=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},k4=(e,t)=>{let r=[],n=[],s=[],a=eI(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");BA(e.inputs,t,a,r,n,s),e.compute(JA(e.inputs[0],t,a,r,n,s),{inputs:[0]})},j4=e=>{let t=e.antialias,r=e.axes,n=e.coordinateTransformMode,s=e.cubicCoeffA,a=e.excludeOutside!==0,o=e.extrapolationValue,i=e.keepAspectRatioPolicy,l=e.mode,d=e.nearestMode===""?"simple":e.nearestMode;return ur({antialias:t,axes:r,coordinateTransformMode:n,cubicCoeffA:s,excludeOutside:a,extrapolationValue:o,keepAspectRatioPolicy:i,mode:l,nearestMode:d})}}),tI,rI,A4,nQ=Ke(()=>{Nt(),Bt(),Vt(),tI=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],n=e[2];if(t.dataType!==r.dataType||t.dataType!==n.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let s=t.dims[t.dims.length-1],a=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==s)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==a)throw new Error("Skip must have the same sequence length as input");if(n.dims.length!==1)throw new Error("Gamma must be 1D");if(n.dims[n.dims.length-1]!==s)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let o=e[3];if(o.dims.length!==1)throw new Error("Beta must be 1D");if(o.dims[o.dims.length-1]!==s)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let o=e[4];if(o.dims.length!==1)throw new Error("Bias must be 1D");if(o.dims[o.dims.length-1]!==s)throw new Error("Bias must have the same hidden size as input")}},rI=(e,t,r,n)=>{let s=t.simplified,a=e[0].dims,o=je.size(a),i=a,l=o,d=a.slice(-1)[0],p=n?a.slice(0,-1).concat(1):[],u=!s&&e.length>3,m=e.length>4,f=n&&r>1,h=n&&r>2,_=r>3,v=64,g=zr(d),x=[{type:12,data:l},{type:12,data:g},{type:12,data:d},{type:1,data:t.epsilon}],y=b=>{let C=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],E=[Oe("x",e[0].dataType,e[0].dims,g),Oe("skip",e[1].dataType,e[1].dims,g),Oe("gamma",e[2].dataType,e[2].dims,g)];u&&E.push(Oe("beta",e[3].dataType,e[3].dims,g)),m&&E.push(Oe("bias",e[4].dataType,e[4].dims,g)),E.push(ht("output",e[0].dataType,i,g)),f&&E.push(ht("mean_output",1,p)),h&&E.push(ht("inv_std_output",1,p)),_&&E.push(ht("input_skip_bias_sum",e[0].dataType,i,g));let P=Cn(e[0].dataType),I=Cn(1,g);return`

      ${b.registerUniforms(C).declareVariables(...E)}
      var<workgroup> sum_shared : array<${I}, ${v}>;
      var<workgroup> sum_squared_shared : array<${I}, ${v}>;

      ${b.mainStart([v,1,1])}
        let ix = local_id.x;
        let iy = global_id.x / ${v};

        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        var stride = hidden_size_vectorized / ${v};
        let offset = ix * stride + iy * hidden_size_vectorized;
        let offset1d = stride * ix;
        if (ix == ${v-1}) {
          stride = hidden_size_vectorized - stride * ix;
        }
        for (var i: u32 = 0; i < stride; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${m?"bias[offset1d + i]":P+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${_?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${Dc(P,g,"value")};
          sum_shared[ix] += f32_value;
          sum_squared_shared[ix] += f32_value * f32_value;
        }
        workgroupBarrier();

        var reduce_size : u32 = ${v};
        for (var curr_size = reduce_size >> 1;  curr_size > 0; curr_size = reduce_size >> 1) {
          reduce_size = curr_size + (reduce_size & 1);
          if (ix < curr_size) {
            sum_shared[ix] += sum_shared[ix + reduce_size];
            sum_squared_shared[ix] += sum_squared_shared[ix + reduce_size];
          }
          workgroupBarrier();
        }

        let sum = sum_shared[0];
        let square_sum = sum_squared_shared[0];
        let mean = ${Di("sum",g)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Di("square_sum",g)} / f32(uniforms.hidden_size) ${s?"":"- mean * mean"} + uniforms.epsilon);
        ${f?"mean_output[global_idx] = mean;":""}
        ${h?"inv_std_output[global_idx] = inv_std_dev;":""}

        for (var i: u32 = 0; i < stride; i++) {
          output[offset + i] = (output[offset + i] ${s?"":`- ${P}(mean)`}) *
            ${P}(inv_std_dev) * gamma[offset1d + i]
            ${u?"+ beta[offset1d + i]":""};
        }
      }`},w=[{dims:i,dataType:e[0].dataType}];return r>1&&w.push({dims:p,dataType:1}),r>2&&w.push({dims:p,dataType:1}),r>3&&w.push({dims:a,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${g};${f};${h};${_}`,inputDependencies:e.map((b,C)=>"type")},getShaderSource:y,getRunData:()=>({outputs:w,dispatchGroup:{x:Math.ceil(l/d)},programUniforms:x})}},A4=(e,t)=>{tI(e.inputs);let r=[0];e.outputCount>1&&r.push(-3),e.outputCount>2&&r.push(-3),e.outputCount>3&&r.push(3),e.compute(rI(e.inputs,t,e.outputCount,!1),{outputs:r})}}),nI,_u,sI,Qv,aI,oI,I4,N4,sQ=Ke(()=>{Nt(),Bt(),Xr(),Vt(),nI=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,n)=>{if(e[n+1].dataType!==6&&e[n+1].dataType!==7)throw new Error(`Input ${n} must be an array of int32 or int64`)})},_u=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(n=>r.push(Number(n)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(n=>r.push(Number(n)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},sI=(e,t)=>{if(e.length>1){let r=_u(e,1),n=_u(e,2),s=_u(e,3);return s.length===0&&(s=[...Array(e[0].dims.length).keys()]),ur({starts:r,ends:n,axes:s})}else return t},Qv=(e,t,r,n,s)=>{let a=e;return e<0&&(a+=r[n[t]]),s[t]<0?Math.max(0,Math.min(a,r[n[t]]-1)):Math.max(0,Math.min(a,r[n[t]]))},aI=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {
          var input_indices: ${e.type.indices};
          var carry = 0u;
          for (var i = ${r.length}; i >= 0; i--) {
            let input_shape_i = ${xt("uniforms.input_shape","i",r.length)};
            let steps_i = ${xt("uniforms.steps","i",r.length)};
            let signs_i = ${xt("uniforms.signs","i",r.length)};
            let starts_i = ${xt("uniforms.starts","i",r.length)};
            var output_index = ${t.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${e.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,oI=(e,t)=>{let r=e[0].dims,n=je.size(r),s=t.axes.length>0?je.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],a=_u(e,4);a.forEach(g=>g!==0||(()=>{throw new Error("step cannot be 0")})),a.length===0&&(a=Array(s.length).fill(1));let o=t.starts.map((g,x)=>Qv(g,x,r,s,a)),i=t.ends.map((g,x)=>Qv(g,x,r,s,a));if(s.length!==o.length||s.length!==i.length)throw new Error("start, ends and axes should have the same number of elements");if(s.length!==r.length)for(let g=0;g<r.length;++g)s.includes(g)||(o.splice(g,0,0),i.splice(g,0,r[g]),a.splice(g,0,1));let l=a.map(g=>Math.sign(g));a.forEach((g,x,y)=>{if(g<0){let w=(i[x]-o[x])/g,b=o[x],C=b+w*a[x];o[x]=C,i[x]=b,y[x]=-g}});let d=r.slice(0);s.forEach((g,x)=>{d[g]=Math.ceil((i[g]-o[g])/a[g])});let p={dims:d,dataType:e[0].dataType},u=ht("output",e[0].dataType,d.length),m=Oe("input",e[0].dataType,e[0].dims.length),f=je.size(d),h=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:o.length},{name:"signs",type:"i32",length:l.length},{name:"steps",type:"u32",length:a.length}],_=[{type:12,data:f},{type:12,data:o},{type:6,data:l},{type:12,data:a},...wt(e[0].dims,d)],v=g=>`
      ${g.registerUniforms(h).declareVariables(m,u)}
        ${aI(m,u,r)}
        ${g.mainStart()}
          ${g.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${u.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${u.setByOffset("global_idx",m.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${l.length}_${o.length}_${a.length}`,inputDependencies:["rank"]},getShaderSource:v,getRunData:()=>({outputs:[p],dispatchGroup:{x:Math.ceil(n/64)},programUniforms:_})}},I4=(e,t)=>{nI(e.inputs,t);let r=sI(e.inputs,t);e.compute(oI(e.inputs,r),{inputs:[0]})},N4=e=>{let t=e.starts,r=e.ends,n=e.axes;return ur({starts:t,ends:r,axes:n})}}),iI,lI,$4,D4,aQ=Ke(()=>{Nt(),Bt(),Xr(),Gi(),Vt(),iI=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},lI=(e,t)=>{let r=e.inputs[0],n=r.dims,s=je.size(n),a=n.length,o=je.normalizeAxis(t.axis,a),i=o<n.length-1,l,d=[];i?(d=Array.from({length:a},(E,P)=>P),d[o]=a-1,d[a-1]=o,l=e.compute(Ss(r,d),{inputs:[r],outputs:[-1]})[0]):l=r;let p=l.dims,u=p[a-1],m=s/u,f=zr(u),h=u/f,_=64;m===1&&(_=256);let v=(E,P)=>P===4?`max(max(${E}.x, ${E}.y), max(${E}.z, ${E}.w))`:P===2?`max(${E}.x, ${E}.y)`:P===3?`max(max(${E}.x, ${E}.y), ${E}.z)`:E,g=Oe("x",l.dataType,l.dims,f),x=ht("result",l.dataType,l.dims,f),y=g.type.value,w=Cn(l.dataType)==="f32"?`var threadMax = ${y}(-3.402823e+38f);`:`var threadMax = ${y}(-65504.0h);`,b=E=>`
      var<workgroup> rowMaxShared : ${y};
      var<workgroup> rowSumShared : ${y};
      var<workgroup> threadShared : array<${y}, ${_}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${y} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${y}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${E.registerUniform("packedCols","i32").declareVariables(g,x)}
      ${E.mainStart(_)}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${_};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${w}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${y}(${v("threadShared[0]",f)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${y}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${y}(${Di("threadShared[0]",f)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`,C=e.compute({name:"Softmax",shaderCache:{hint:`${f};${_}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:p,dataType:l.dataType}],dispatchGroup:{x:m},programUniforms:[{type:6,data:h}]}),getShaderSource:b},{inputs:[l],outputs:[i?-1:0]})[0];i&&e.compute(Ss(C,d),{inputs:[C]})},$4=(e,t)=>{iI(e.inputs),lI(e,t)},D4=e=>ur({axis:e.axis})}),Xv,cI,dI,uI,O4,oQ=Ke(()=>{Nt(),Bt(),Vt(),Xv=e=>Array.from(e.getBigInt64Array(),Number),cI=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==10&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, float16, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Xv(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},dI=(e,t)=>{let r=[];for(let n=0;n<e.length;++n)r.push(e[n]*t[n]);return r},uI=(e,t)=>{let r=e[0].dims,n=t??Xv(e[1]),s=dI(r,n),a=je.size(s),o=e[0].dataType,i=Oe("input",o,r.length),l=ht("output",o,s.length),d=p=>`
      const inputShape = ${i.indices(...r)};
      ${p.registerUniform("output_size","u32").declareVariables(i,l)}
      ${p.mainStart()}
      ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${l.offsetToIndices("global_idx")};
      var input_indices: ${i.type.indices};
      for (var i = 0; i < ${r.length}; i++) {
        let input_dim_i = ${i.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${l.indicesGet("output_indices","i")}  % input_dim_i;

        ${i.indicesSet("input_indices","i","input_dim_value")}
      }
      ${l.setByOffset("global_idx",i.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${n}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:s,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:[{type:12,data:a},...wt(e[0].dims,s)]}),getShaderSource:d}},O4=e=>{cI(e.inputs),e.compute(uI(e.inputs),{inputs:[0]})}}),mI,pI,F4,iQ=Ke(()=>{Nt(),Bt(),Vt(),mI=(e,t,r,n,s)=>{let a=ht("output_data",s,r.length,4),o=Oe("a_data",t[1].dataType,t[1].dims.length,4),i=Oe("b_data",t[2].dataType,t[2].dims.length,4),l=Oe("c_data",t[0].dataType,t[0].dims.length,4),d,p=(u,m,f)=>`select(${m}, ${u}, ${f})`;if(!n)d=a.setByOffset("global_idx",p(o.getByOffset("global_idx"),i.getByOffset("global_idx"),l.getByOffset("global_idx")));else{let u=(m,f,h="")=>{let _=`a_data[index_a${f}][component_a${f}]`,v=`b_data[index_b${f}][component_b${f}]`,g=`bool(c_data[index_c${f}] & (0xffu << (component_c${f} * 8)))`;return`
            let output_indices${f} = ${a.offsetToIndices(`global_idx * 4u + ${f}u`)};
            let offset_a${f} = ${o.broadcastedIndicesToOffset(`output_indices${f}`,a)};
            let offset_b${f} = ${i.broadcastedIndicesToOffset(`output_indices${f}`,a)};
            let offset_c${f} = ${l.broadcastedIndicesToOffset(`output_indices${f}`,a)};
            let index_a${f} = offset_a${f} / 4u;
            let index_b${f} = offset_b${f} / 4u;
            let index_c${f} = offset_c${f} / 4u;
            let component_a${f} = offset_a${f} % 4u;
            let component_b${f} = offset_b${f} % 4u;
            let component_c${f} = offset_c${f} % 4u;
            ${m}[${f}] = ${h}(${p(_,v,g)});
          `};s===9?d=`
            var data = vec4<u32>(0);
            ${u("data",0,"u32")}
            ${u("data",1,"u32")}
            ${u("data",2,"u32")}
            ${u("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:d=`
            ${u("output_data[global_idx]",0)}
            ${u("output_data[global_idx]",1)}
            ${u("output_data[global_idx]",2)}
            ${u("output_data[global_idx]",3)}
          `}return`
        ${e.registerUniform("vec_size","u32").declareVariables(l,o,i,a)}
        ${e.mainStart()}
        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${d}
      }`},pI=e=>{let t=e[1].dims,r=e[2].dims,n=e[0].dims,s=e[1].dataType,a=!(je.areEqual(t,r)&&je.areEqual(r,n)),o=t,i=je.size(t);if(a){let d=hd.calcShape(hd.calcShape(t,r,!1),n,!1);if(!d)throw new Error("Can't perform where op on the given tensors");o=d,i=je.size(o)}let l=Math.ceil(i/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:d=>mI(d,e,o,a,s),getRunData:()=>({outputs:[{dims:o,dataType:s}],dispatchGroup:{x:Math.ceil(i/64/4)},programUniforms:[{type:12,data:l},...wt(n,t,r,o)]})}},F4=e=>{e.compute(pI(e.inputs))}}),L4,lQ=Ke(()=>{b7(),Cb(),M7(),T7(),E7(),C7(),P7(),I7(),$7(),D7(),O7(),F7(),L7(),R7(),z7(),B7(),V7(),W7(),U7(),G7(),H7(),q7(),K7(),Q7(),X7(),n4(),Y7(),Z7(),J7(),eQ(),tQ(),Eb(),rQ(),l4(),nQ(),sQ(),aQ(),o4(),oQ(),Gi(),Pb(),iQ(),L4=new Map([["Abs",[AL]],["Acos",[IL]],["Acosh",[NL]],["Add",[pR]],["ArgMax",[PL,ky]],["ArgMin",[CL,ky]],["Asin",[$L]],["Asinh",[DL]],["Atan",[OL]],["Atanh",[FL]],["Attention",[SL]],["AveragePool",[_4,g4]],["BatchNormalization",[kL]],["BiasAdd",[jL]],["BiasSplitGelu",[mR]],["Cast",[RL,LL]],["Ceil",[BL]],["Clip",[zL]],["Concat",[MR,TR]],["Conv",[Dy,$y]],["ConvTranspose",[$R,NR]],["Cos",[VL]],["Cosh",[WL]],["CumSum",[DR,OR]],["DepthToSpace",[FR,LR]],["DequantizeLinear",[T4,E4]],["Div",[fR]],["Einsum",[RR,zR]],["Elu",[UL,Pu]],["Equal",[hR]],["Erf",[GL]],["Exp",[HL]],["Expand",[BR]],["FastGelu",[VR]],["Floor",[qL]],["FusedConv",[Dy,$y]],["Gather",[UR,WR]],["GatherElements",[XR,QR]],["GatherBlockQuantized",[qR,KR]],["GatherND",[GR,HR]],["Gelu",[KL]],["Gemm",[ZR,YR]],["GlobalAveragePool",[v4,x4]],["GlobalMaxPool",[M4,b4]],["Greater",[vR]],["GreaterOrEqual",[wR]],["GridSample",[JR,e4]],["GroupQueryAttention",[c4]],["HardSigmoid",[rR,tR]],["InstanceNormalization",[d4]],["LayerNormalization",[u4]],["LeakyRelu",[QL,Pu]],["Less",[yR]],["LessOrEqual",[bR]],["Log",[dR]],["MatMul",[m4]],["MatMulNBits",[p4,f4]],["MaxPool",[y4,w4]],["Mul",[gR]],["MultiHeadAttention",[r4,t4]],["Neg",[YL]],["Not",[XL]],["Pad",[h4]],["Pow",[_R]],["QuickGelu",[uR,Pu]],["Range",[C4]],["Reciprocal",[ZL]],["ReduceMin",[wL]],["ReduceMean",[gL]],["ReduceMax",[yL]],["ReduceSum",[ML]],["ReduceProd",[bL]],["ReduceL1",[_L]],["ReduceL2",[xL]],["ReduceLogSum",[EL]],["ReduceLogSumExp",[vL]],["ReduceSumSquare",[TL]],["Relu",[JL]],["Resize",[k4,j4]],["RotaryEmbedding",[i4]],["ScatterND",[S4,P4]],["Sigmoid",[eR]],["Sin",[nR]],["Sinh",[sR]],["Slice",[I4,N4]],["SkipLayerNormalization",[A4]],["Split",[s4,a4]],["Sqrt",[aR]],["Softmax",[$4,D4]],["Sub",[xR]],["Tan",[oR]],["Tanh",[iR]],["ThresholdedRelu",[cR,Pu]],["Tile",[O4]],["Transpose",[sL,aL]],["Where",[F4]]])}),R4,cQ=Ke(()=>{Oa(),Vo(),Vt(),R4=class{constructor(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}getArtifact(e){return this.repo.get(e)}setArtifact(e,t){this.repo.set(e,t)}run(e,t,r,n,s){Da(e.programInfo.name);let a=this.backend.device,o=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let i=[];for(let d of t)i.push({binding:i.length,resource:{buffer:d.buffer}});for(let d of r)i.push({binding:i.length,resource:{buffer:d.buffer}});s&&i.push({binding:i.length,resource:s});let l=a.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:i,label:e.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:e.computePipeline,bindGroup:l,dispatchGroup:n};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}o.setPipeline(e.computePipeline),o.setBindGroup(0,l),o.dispatchWorkgroups(...n),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ea(e.programInfo.name)}dispose(){}build(e,t){Da(e.name);let r=this.backend.device,n=[];[{feature:"shader-f16",extension:"f16"},{feature:"subgroups",extension:"subgroups"}].forEach(d=>{r.features.has(d.feature)&&n.push(`enable ${d.extension};`)});let s=nL(t,this.backend.device.limits),a=e.getShaderSource(s),o=`${n.join(`
`)}
${s.additionalImplementations}
${a}`,i=r.createShaderModule({code:o,label:e.name});er("verbose",()=>`[WebGPU] ${e.name} shader code: ${o}`);let l=r.createComputePipeline({compute:{module:i,entryPoint:"main"},layout:"auto",label:e.name});return ea(e.name),{programInfo:e,computePipeline:l,uniformVariablesInfo:s.variablesInfo}}normalizeDispatchGroupSize(e){let t=typeof e=="number"?e:e.x,r=typeof e=="number"?1:e.y||1,n=typeof e=="number"?1:e.z||1,s=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=s&&r<=s&&n<=s)return[t,r,n];let a=t*r*n,o=Math.ceil(Math.sqrt(a));if(o>s){if(o=Math.ceil(Math.cbrt(a)),o>s)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[o,o,o]}else return[o,o,1]}}}),z4={};Sd(z4,{WebGpuBackend:()=>B4});var fI,hI,gI,B4,dQ=Ke(()=>{Oa(),Nt(),Vo(),ZF(),y7(),lQ(),cQ(),fI=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let n=0;n<e.length;++n){let s=e[n].dataType;switch(t[n]){case"none":{r.push("");break}case"type":{r.push(`${s}`);break}case"rank":{let a=e[n].dims.length;r.push(`${s};${a}`);break}case"dims":{let a=e[n].dims.join(",");r.push(`${s};${a}`);break}default:throw new Error(`unsupported input dependency: ${t[n]}`)}}return r.join("|")},hI=(e,t,r)=>{var s,a;let n=e.name;return(s=e.shaderCache)!=null&&s.hint&&(n+="["+e.shaderCache.hint+"]"),n+=":"+r+`:${fI(t,((a=e.shaderCache)==null?void 0:a.inputDependencies)??new Array(t.length).fill("dims"))}`,n},gI=class{constructor(e){e&&(this.architecture=e.architecture,this.vendor=e.vendor)}isArchitecture(e){return this.architecture===e}isVendor(e){return this.vendor===e}},B4=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e}async initialize(e,t){this.env=e;let r=[],n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize,maxBufferSize:t.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:t.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:t.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:t.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:t.limits.maxComputeWorkgroupSizeZ},requiredFeatures:r},s=a=>t.features.has(a)&&r.push(a)&&!0;s("chromium-experimental-timestamp-query-inside-passes")||s("timestamp-query"),s("shader-f16"),s("subgroups"),this.device=await t.requestDevice(n),this.adapterInfo=new gI(t.info||await t.requestAdapterInfo()),this.gpuDataManager=tL(this),this.programManager=new R4(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,wb(e.logLevel,!!e.debug),this.device.onuncapturederror=a=>{a.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${a.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:t,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let e=this.getCommandEncoder(),t={};this.queryType==="at-passes"&&(t.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=e.beginComputePass(t)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;Da(),this.endComputePass();let e;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),e=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(e,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,e,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&e.mapAsync(GPUMapMode.READ).then(()=>{var n;let t=new BigUint64Array(e.getMappedRange()),r=this.pendingQueries.get(e);for(let s=0;s<t.length/2;s++){let a=r[s],o=a.kernelId,i=this.kernels.get(o),l=i.kernelType,d=i.kernelName,p=a.programName,u=a.inputTensorViews,m=a.outputTensorViews,f=t[s*2],h=t[s*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=f);let _=Number(f-this.queryTimeBase),v=Number(h-this.queryTimeBase);if(!Number.isSafeInteger(_)||!Number.isSafeInteger(v))throw new RangeError("incorrect timestamp range");if((n=this.env.webgpu.profiling)!=null&&n.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:u.map(g=>({dims:g.dims,dataType:So(g.dataType)})),outputsMetadata:m.map(g=>({dims:g.dims,dataType:So(g.dataType)})),kernelId:o,kernelType:l,kernelName:d,programName:p,startTime:_,endTime:v});else{let g="";u.forEach((y,w)=>{g+=`input[${w}]: [${y.dims}] | ${So(y.dataType)}, `});let x="";m.forEach((y,w)=>{x+=`output[${w}]: [${y.dims}] | ${So(y.dataType)}, `}),console.log(`[profiling] kernel "${o}|${l}|${d}|${p}" ${g}${x}execution time: ${v-_} ns`)}hm("GPU",`${p}::${f}::${h}`)}e.unmap(),this.pendingQueries.delete(e)}),ea()}run(e,t,r,n,s,a){Da(e.name);let o=[];for(let x=0;x<t.length;++x){let y=t[x].data;if(y===0)continue;let w=this.gpuDataManager.get(y);if(!w)throw new Error(`no GPU data for input: ${y}`);o.push(w)}let{outputs:i,dispatchGroup:l,programUniforms:d}=e.getRunData(t),p=r.length===0?i.map((x,y)=>y):r;if(p.length!==i.length)throw new Error(`Output size ${p.length} must be equal to ${i.length}.`);let u=[],m=[];for(let x=0;x<i.length;++x){if(!Number.isInteger(p[x])||p[x]<-3||p[x]>=a)throw new Error(`Invalid output index: ${p[x]}`);if(p[x]===-3)continue;let y=p[x]===-1,w=p[x]===-2,b=y||w?s(i[x].dataType,i[x].dims):n(p[x],i[x].dataType,i[x].dims);if(u.push(b),b.data===0)continue;let C=this.gpuDataManager.get(b.data);if(!C)throw new Error(`no GPU data for output: ${b.data}`);if(y&&this.temporaryData.push(C),w){let E=this.kernelPersistentData.get(this.currentKernelId);E||(E=[],this.kernelPersistentData.set(this.currentKernelId,E)),E.push(C)}m.push(C)}if(o.length!==t.length||m.length!==u.length){if(m.length===0)return ea(e.name),u;throw new Error(`Program ${e.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let f;if(d){let x=0,y=[];d.forEach(E=>{let P=typeof E.data=="number"?[E.data]:E.data;if(P.length===0)return;let I=E.type===10?2:4,$,z;E.type===10?(z=P.length>4?16:P.length>2?8:P.length*I,$=P.length>4?16:I*P.length):(z=P.length<=2?P.length*I:16,$=16),x=Math.ceil(x/z)*z,y.push(x);let D=E.type===10?8:4;x+=P.length>4?Math.ceil(P.length/D)*$:P.length*I});let w=16;x=Math.ceil(x/w)*w;let b=new ArrayBuffer(x);d.forEach((E,P)=>{let I=y[P],$=typeof E.data=="number"?[E.data]:E.data;if(E.type===6)new Int32Array(b,I,$.length).set($);else if(E.type===12)new Uint32Array(b,I,$.length).set($);else if(E.type===10)new Uint16Array(b,I,$.length).set($);else if(E.type===1)new Float32Array(b,I,$.length).set($);else throw new Error(`Unsupported uniform type: ${So(E.type)}`)});let C=this.gpuDataManager.create(x,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(C.buffer,0,b,0,x),this.gpuDataManager.release(C.id),f={offset:0,size:x,buffer:C.buffer}}let h=this.programManager.normalizeDispatchGroupSize(l),_=h[1]===1&&h[2]===1,v=hI(e,t,_),g=this.programManager.getArtifact(v);if(g||(g=this.programManager.build(e,h),this.programManager.setArtifact(v,g),er("info",()=>`[artifact] key: ${v}, programName: ${e.name}`)),d&&g.uniformVariablesInfo){if(d.length!==g.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${g.uniformVariablesInfo.length}, got ${d.length} in program "${g.programInfo.name}".`);for(let x=0;x<d.length;x++){let y=d[x],w=y.type,b=typeof y.data=="number"?1:y.data.length,[C,E]=g.uniformVariablesInfo[x];if(w!==C||b!==E)throw new Error(`Uniform variable ${x} mismatch: expect type ${C} with size ${E}, got type ${w} with size ${b} in program "${g.programInfo.name}".`)}}if(er("info",()=>`[ProgramManager] run "${e.name}" (key=${v}) with ${h[0]}x${h[1]}x${h[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let x={kernelId:this.currentKernelId,programName:g.programInfo.name,inputTensorViews:t,outputTensorViews:u};this.pendingKernels.push(x),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(x)}return this.programManager.run(g,o,m,h,f),ea(e.name),u}upload(e,t){this.gpuDataManager.upload(e,t)}memcpy(e,t){this.gpuDataManager.memcpy(e,t)}async download(e,t){await this.gpuDataManager.download(e,t)}alloc(e){return this.gpuDataManager.create(e).id}free(e){return this.gpuDataManager.release(e)}createKernel(e,t,r,n){let s=L4.get(e);if(!s)throw new Error(`kernel not implemented: ${e}`);let a={kernelType:e,kernelName:n,kernelEntry:s[0],attributes:[s[1],r]};this.kernels.set(t,a)}releaseKernel(e){let t=this.kernelPersistentData.get(e);if(t){for(let r of t)this.gpuDataManager.release(r.id);this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)}computeKernel(e,t,r){let n=this.kernels.get(e);if(!n)throw new Error(`kernel not created: ${e}`);let s=n.kernelType,a=n.kernelName,o=n.kernelEntry,i=n.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${s}] ${a}" is not allowed to be called recursively`);this.currentKernelId=e,i[0]&&(i[1]=i[0](i[1]),i[0]=void 0),er("info",()=>`[WebGPU] Start to run kernel "[${s}] ${a}"...`);let l=this.env.debug;this.temporaryData=[];try{return l&&this.device.pushErrorScope("validation"),o(t,i[1]),0}catch(d){return r.push(Promise.resolve(`[WebGPU] Kernel "[${s}] ${a}" failed. ${d}`)),1}finally{l&&r.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${s}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(e,t,r,n){let s=this.sessionExternalDataMapping.get(e);s||(s=new Map,this.sessionExternalDataMapping.set(e,s));let a=s.get(t),o=this.gpuDataManager.registerExternalBuffer(r,n,a);return s.set(t,[o,r]),o}unregisterBuffers(e){let t=this.sessionExternalDataMapping.get(e);t&&(t.forEach(r=>this.gpuDataManager.unregisterExternalBuffer(r[0])),this.sessionExternalDataMapping.delete(e))}getBuffer(e){let t=this.gpuDataManager.get(e);if(!t)throw new Error(`no GPU data for buffer: ${e}`);return t.buffer}createDownloader(e,t,r){return async()=>{let n=await Cy(this,e,t);return bb(n.buffer,r)}}writeTimestamp(e){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,e)}setQueryType(){var e;this.queryType="none",(((e=this.env.webgpu.profiling)==null?void 0:e.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){er("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){er("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){er("info","replay"),this.sessionStatus="replaying";let e=this.capturedCommandList.get(this.currentSessionId),t=this.capturedPendingKernels.get(this.currentSessionId),r=e.length;this.pendingKernels=[];for(let n=0;n<r;n++){let s=this.getComputePassEncoder(),a=e[n];this.writeTimestamp(this.pendingDispatchNumber*2),s.setPipeline(a.computePipeline),s.setBindGroup(0,a.bindGroup),s.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(t[n]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onCreateSession(){this.gpuDataManager.onCreateSession()}onReleaseSession(e){this.unregisterBuffers(e),this.capturedCommandList.has(e)&&this.capturedCommandList.delete(e),this.capturedPendingKernels.has(e)&&this.capturedPendingKernels.delete(e),this.gpuDataManager.onReleaseSession(e)}onRunStart(e){this.currentSessionId=e,this.setQueryType()}}}),V4={};Sd(V4,{init:()=>W4});var ff,_I,W4,uQ=Ke(()=>{Nt(),Vo(),Bt(),v7(),ff=class U4{constructor(t,r,n,s){this.module=t,this.dataType=r,this.data=n,this.dims=s}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=je.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=je.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=je.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}getUint16Array(){if(this.dataType!==10&&this.dataType!==4)throw new Error("Invalid data type");let t=je.size(this.dims);return t===0?new Uint16Array:new Uint16Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(je.size(t)!==je.size(this.dims))throw new Error("Invalid new shape");return new U4(this.module,this.dataType,this.data,t)}},_I=class{constructor(e,t,r){this.module=e,this.backend=t,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=t.adapterInfo;let n=e.PTR_SIZE,s=r/e.PTR_SIZE,a=n===4?"i32":"i64";this.opKernelContext=Number(e.getValue(n*s++,a));let o=Number(e.getValue(n*s++,a));this.outputCount=Number(e.getValue(n*s++,a)),this.customDataOffset=Number(e.getValue(n*s++,"*")),this.customDataSize=Number(e.getValue(n*s++,a));let i=[];for(let l=0;l<o;l++){let d=Number(e.getValue(n*s++,a)),p=Number(e.getValue(n*s++,"*")),u=Number(e.getValue(n*s++,a)),m=[];for(let f=0;f<u;f++)m.push(Number(e.getValue(n*s++,a)));i.push(new ff(e,d,p,m))}this.inputs=i}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}compute(e,t){var o;let r=((o=t==null?void 0:t.inputs)==null?void 0:o.map(i=>typeof i=="number"?this.inputs[i]:i))??this.inputs,n=(t==null?void 0:t.outputs)??[],s=(i,l,d)=>new ff(this.module,l,this.output(i,d),d),a=(i,l)=>{let d=xl(i,l);if(!d)throw new Error(`Unsupported data type: ${i}`);let p=d>0?this.backend.gpuDataManager.create(d).id:0;return new ff(this.module,i,p,l)};return this.backend.run(e,r,n,s,a,this.outputCount)}output(e,t){let r=this.module.stackSave();try{let n=this.module.PTR_SIZE,s=n===4?"i32":"i64",a=this.module.stackAlloc((1+t.length)*n);this.module.setValue(a,t.length,s);for(let o=0;o<t.length;o++)this.module.setValue(a+n*(o+1),t[o],s);return this.module._JsepOutput(this.opKernelContext,e,a)}catch(n){throw new Error(`Failed to generate kernel's output[${e}] with dims [${t}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${n}`)}finally{this.module.stackRestore(r)}}},W4=async(e,t,r,n)=>{let s=t.jsepInit;if(!s)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let a=(dQ(),fm(z4)).WebGpuBackend,o=new a;await o.initialize(r,n),s("webgpu",[o,i=>o.alloc(Number(i)),i=>o.free(i),(i,l,d,p=!1)=>{if(p)er("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${Number(i)}, dst=${Number(l)}, size=${Number(d)}`),o.memcpy(Number(i),Number(l));else{er("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${Number(i)}, gpuDataId=${Number(l)}, size=${Number(d)}`);let u=t.HEAPU8.subarray(Number(i>>>0),Number(i>>>0)+Number(d));o.upload(Number(l),u)}},async(i,l,d)=>{er("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${i}, dataOffset=${l}, size=${d}`),await o.download(Number(i),()=>t.HEAPU8.subarray(Number(l)>>>0,Number(l+d)>>>0))},(i,l,d)=>o.createKernel(i,Number(l),d,t.UTF8ToString(t._JsepGetNodeName(Number(l)))),i=>o.releaseKernel(i),(i,l,d,p)=>{er("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${d}, kernel=${i}, contextDataOffset=${l}`);let u=new _I(t,o,Number(l));return o.computeKernel(Number(i),u,p)},()=>o.captureBegin(),()=>o.captureEnd(),()=>o.replay()])}else{let a=new eL(r);s("webnn",[a,()=>a.reserveTensorId(),o=>a.releaseTensorId(o),async(o,i,l,d,p)=>a.ensureTensor(o,i,l,d,p),(o,i)=>{a.uploadTensor(o,i)},async(o,i)=>a.downloadTensor(o,i)])}}}),xI,Nb,$b,ti,vI,Yv,jh,Db,Ob,Zv,Fb,Lb,Rb,G4=Ke(()=>{g7(),_7(),Nt(),Ql(),gb(),KF(),xI=(e,t)=>{yr()._OrtInit(e,t)!==0&&fr("Can't initialize onnxruntime.")},Nb=async e=>{xI(e.wasm.numThreads,Eh(e.logLevel))},$b=async(e,t)=>{var r,n;(n=(r=yr()).asyncInit)==null||n.call(r);{let s=(uQ(),fm(V4)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let a=e.webgpu.adapter;if(a){if(typeof a.limits!="object"||typeof a.features!="object"||typeof a.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let o=e.webgpu.powerPreference;if(o!==void 0&&o!=="low-power"&&o!=="high-performance")throw new Error(`Invalid powerPreference setting: "${o}"`);let i=e.webgpu.forceFallbackAdapter;if(i!==void 0&&typeof i!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${i}"`);if(a=await navigator.gpu.requestAdapter({powerPreference:o,forceFallbackAdapter:i}),!a)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}await s("webgpu",yr(),e,a)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await s("webnn",yr(),e)}}},ti=new Map,vI=e=>{let t=yr(),r=t.stackSave();try{let n=t.PTR_SIZE,s=t.stackAlloc(2*n);t._OrtGetInputOutputCount(e,s,s+n)!==0&&fr("Can't get session input/output count.");let a=n===4?"i32":"i64";return[Number(t.getValue(s,a)),Number(t.getValue(s+n,a))]}finally{t.stackRestore(r)}},Yv=(e,t)=>{let r=yr(),n=r.stackSave(),s=0;try{let a=r.PTR_SIZE,o=r.stackAlloc(2*a);r._OrtGetInputOutputMetadata(e,t,o,o+a)!==0&&fr("Can't get session input/output metadata.");let i=Number(r.getValue(o,"*"));s=Number(r.getValue(o+a,"*"));let l=r.HEAP32[s/4];if(l===0)return[i,0];let d=r.HEAPU32[s/4+1],p=[];for(let u=0;u<d;u++){let m=Number(r.getValue(s+8+u*a,"*"));p.push(m!==0?r.UTF8ToString(m):Number(r.getValue(s+8+(u+d)*a,"*")))}return[i,l,p]}finally{r.stackRestore(n),s!==0&&r._OrtFree(s)}},jh=e=>{let t=yr(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},Db=async(e,t)=>{var u,m,f,h;let r,n,s=yr();Array.isArray(e)?[r,n]=e:e.buffer===s.HEAPU8.buffer?[r,n]=[e.byteOffset,e.byteLength]:[r,n]=jh(e);let a=0,o=0,i=0,l=[],d=[],p=[];try{if([o,l]=await qF(t),(t==null?void 0:t.externalData)&&s.mountExternalData){let P=[];for(let I of t.externalData){let $=typeof I=="string"?I:I.path;P.push(yb(typeof I=="string"?I:I.data).then(z=>{s.mountExternalData($,z)}))}await Promise.all(P)}for(let P of(t==null?void 0:t.executionProviders)??[])if((typeof P=="string"?P:P.name)==="webnn"){if(s.shouldTransferToMLTensor=!1,typeof P!="string"){let I=P,$=I==null?void 0:I.context,z=I==null?void 0:I.gpuDevice,D=I==null?void 0:I.deviceType,B=I==null?void 0:I.powerPreference;$?s.currentContext=$:z?s.currentContext=await s.webnnCreateMLContext(z):s.currentContext=await s.webnnCreateMLContext({deviceType:D,powerPreference:B})}else s.currentContext=await s.webnnCreateMLContext();break}a=await s._OrtCreateSession(r,n,o),(u=s.webgpuOnCreateSession)==null||u.call(s,a),a===0&&fr("Can't create a session."),(m=s.jsepOnCreateSession)==null||m.call(s),s.currentContext&&(s.webnnRegisterMLContext(a,s.currentContext),s.currentContext=void 0,s.shouldTransferToMLTensor=!0);let[_,v]=vI(a),g=!!(t!=null&&t.enableGraphCapture),x=[],y=[],w=[],b=[],C=[];for(let P=0;P<_;P++){let[I,$,z]=Yv(a,P);I===0&&fr("Can't get an input name."),d.push(I);let D=s.UTF8ToString(I);x.push(D),w.push($===0?{name:D,isTensor:!1}:{name:D,isTensor:!0,type:So($),shape:z})}for(let P=0;P<v;P++){let[I,$,z]=Yv(a,P+_);I===0&&fr("Can't get an output name."),p.push(I);let D=s.UTF8ToString(I);y.push(D),b.push($===0?{name:D,isTensor:!1}:{name:D,isTensor:!0,type:So($),shape:z});{if(g&&(t==null?void 0:t.preferredOutputLocation)===void 0){C.push("gpu-buffer");continue}let B=typeof(t==null?void 0:t.preferredOutputLocation)=="string"?t.preferredOutputLocation:((f=t==null?void 0:t.preferredOutputLocation)==null?void 0:f[D])??"cpu";if(B!=="cpu"&&B!=="cpu-pinned"&&B!=="gpu-buffer"&&B!=="ml-tensor")throw new Error(`Not supported preferred output location: ${B}.`);if(g&&B!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${B}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);C.push(B)}}let E=null;return C.some(P=>P==="gpu-buffer"||P==="ml-tensor")&&(i=s._OrtCreateBinding(a),i===0&&fr("Can't create IO binding."),E={handle:i,outputPreferredLocations:C,outputPreferredLocationsEncoded:C.map(P=>Ty(P))}),ti.set(a,[a,d,p,E,g,!1]),[a,x,y,w,b]}catch(_){throw d.forEach(v=>s._OrtFree(v)),p.forEach(v=>s._OrtFree(v)),i!==0&&s._OrtReleaseBinding(i)!==0&&fr("Can't release IO binding."),a!==0&&s._OrtReleaseSession(a)!==0&&fr("Can't release session."),_}finally{s._free(r),o!==0&&s._OrtReleaseSessionOptions(o)!==0&&fr("Can't release session options."),l.forEach(_=>s._free(_)),(h=s.unmountExternalData)==null||h.call(s)}},Ob=e=>{var l,d,p;let t=yr(),r=ti.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[n,s,a,o,i]=r;o&&(i&&t._OrtClearBoundOutputs(o.handle)!==0&&fr("Can't clear bound outputs."),t._OrtReleaseBinding(o.handle)!==0&&fr("Can't release IO binding.")),(l=t.jsepOnReleaseSession)==null||l.call(t,e),(d=t.webnnOnReleaseSession)==null||d.call(t,e),(p=t.webgpuOnReleaseSession)==null||p.call(t,e),s.forEach(u=>t._OrtFree(u)),a.forEach(u=>t._OrtFree(u)),t._OrtReleaseSession(n)!==0&&fr("Can't release session."),ti.delete(e)},Zv=async(e,t,r,n,s,a,o=!1)=>{if(!e){t.push(0);return}let i=yr(),l=i.PTR_SIZE,d=e[0],p=e[1],u=e[3],m=u,f,h;if(d==="string"&&(u==="gpu-buffer"||u==="ml-tensor"))throw new Error("String tensor is not supported on GPU.");if(o&&u!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${a} when enableGraphCapture is true.`);if(u==="gpu-buffer"){let g=e[2].gpuBuffer;h=xl(wc(d),p);{let x=i.jsepRegisterBuffer;if(!x)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');f=x(n,a,g,h)}}else if(u==="ml-tensor"){let g=e[2].mlTensor;h=xl(wc(d),p);let x=i.webnnRegisterMLTensor;if(!x)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');f=x(n,g,wc(d),p)}else{let g=e[2];if(Array.isArray(g)){h=l*g.length,f=i._malloc(h),r.push(f);for(let x=0;x<g.length;x++){if(typeof g[x]!="string")throw new TypeError(`tensor data at index ${x} is not a string`);i.setValue(f+x*l,Ea(g[x],r),"*")}}else{let x=i.webnnIsGraphInput;if(d!=="string"&&x){let y=i.UTF8ToString(s);if(x(n,y)){let w=wc(d);h=xl(w,p),m="ml-tensor";let b=i.webnnCreateTemporaryTensor,C=i.webnnUploadTensor;if(!b||!C)throw new Error('Tensor location "ml-tensor" is not supported without using WebNN.');let E=await b(n,w,p);C(E,new Uint8Array(g.buffer,g.byteOffset,g.byteLength)),f=E}else h=g.byteLength,f=i._malloc(h),r.push(f),i.HEAPU8.set(new Uint8Array(g.buffer,g.byteOffset,h),f)}else h=g.byteLength,f=i._malloc(h),r.push(f),i.HEAPU8.set(new Uint8Array(g.buffer,g.byteOffset,h),f)}}let _=i.stackSave(),v=i.stackAlloc(4*p.length);try{p.forEach((x,y)=>i.setValue(v+y*l,x,l===4?"i32":"i64"));let g=i._OrtCreateTensor(wc(d),f,h,v,p.length,Ty(m));g===0&&fr(`Can't create tensor for input/output. session=${n}, index=${a}.`),t.push(g)}finally{i.stackRestore(_)}},Fb=async(e,t,r,n,s,a)=>{var z,D,B,U;let o=yr(),i=o.PTR_SIZE,l=ti.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let d=l[0],p=l[1],u=l[2],m=l[3],f=l[4],h=l[5],_=t.length,v=n.length,g=0,x=[],y=[],w=[],b=[],C=o.stackSave(),E=o.stackAlloc(_*i),P=o.stackAlloc(_*i),I=o.stackAlloc(v*i),$=o.stackAlloc(v*i);try{[g,x]=HF(a);for(let Z=0;Z<_;Z++)await Zv(r[Z],y,b,e,p[t[Z]],t[Z],f);for(let Z=0;Z<v;Z++)await Zv(s[Z],w,b,e,u[n[Z]],_+n[Z],f);for(let Z=0;Z<_;Z++)o.setValue(E+Z*i,y[Z],"*"),o.setValue(P+Z*i,p[t[Z]],"*");for(let Z=0;Z<v;Z++)o.setValue(I+Z*i,w[Z],"*"),o.setValue($+Z*i,u[n[Z]],"*");if(m&&!h){let{handle:Z,outputPreferredLocations:K,outputPreferredLocationsEncoded:ee}=m;if(p.length!==_)throw new Error(`input count from feeds (${_}) is expected to be always equal to model's input count (${p.length}).`);for(let oe=0;oe<_;oe++){let ae=t[oe];await o._OrtBindInput(Z,p[ae],y[oe])!==0&&fr(`Can't bind input[${oe}] for session=${e}.`)}for(let oe=0;oe<v;oe++){let ae=n[oe];(z=s[oe])!=null&&z[3]?o._OrtBindOutput(Z,u[ae],w[oe],0)!==0&&fr(`Can't bind pre-allocated output[${oe}] for session=${e}.`):o._OrtBindOutput(Z,u[ae],0,ee[ae])!==0&&fr(`Can't bind output[${oe}] to ${K[oe]} for session=${e}.`)}ti.set(e,[d,p,u,m,f,!0])}(D=o.jsepOnRunStart)==null||D.call(o,d),(B=o.webnnOnRunStart)==null||B.call(o,d);let q;m?q=await o._OrtRunWithBinding(d,m.handle,v,I,g):q=await o._OrtRun(d,P,E,_,$,v,I,g),q!==0&&fr("failed to call OrtRun().");let X=[];for(let Z=0;Z<v;Z++){let K=Number(o.getValue(I+Z*i,"*"));if(K===w[Z]){X.push(s[Z]);continue}let ee=o.stackSave(),oe=o.stackAlloc(4*i),ae=!1,G,R=0;try{o._OrtGetTensorData(K,oe,oe+i,oe+2*i,oe+3*i)!==0&&fr(`Can't access output tensor data on index ${Z}.`);let Q=i===4?"i32":"i64",ce=Number(o.getValue(oe,Q));R=o.getValue(oe+i,"*");let ne=o.getValue(oe+i*2,"*"),me=Number(o.getValue(oe+i*3,Q)),we=[];for(let te=0;te<me;te++)we.push(Number(o.getValue(ne+te*i,Q)));o._OrtFree(ne)!==0&&fr("Can't free memory for tensor dims.");let Ne=we.reduce((te,F)=>te*F,1);G=So(ce);let Me=m==null?void 0:m.outputPreferredLocations[n[Z]];if(G==="string"){if(Me==="gpu-buffer"||Me==="ml-tensor")throw new Error("String tensor is not supported on GPU.");let te=[];for(let F=0;F<Ne;F++){let ue=o.getValue(R+F*i,"*"),xe=o.getValue(R+(F+1)*i,"*"),be=F===Ne-1?void 0:xe-ue;te.push(o.UTF8ToString(ue,be))}X.push([G,we,te,"cpu"])}else if(Me==="gpu-buffer"&&Ne>0){let te=o.jsepGetBuffer;if(!te)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let F=te(R),ue=xl(ce,Ne);if(ue===void 0||!xb(G))throw new Error(`Unsupported data type: ${G}`);ae=!0,X.push([G,we,{gpuBuffer:F,download:o.jsepCreateDownloader(F,ue,G),dispose:()=>{o._OrtReleaseTensor(K)!==0&&fr("Can't release tensor.")}},"gpu-buffer"])}else if(Me==="ml-tensor"&&Ne>0){let te=o.webnnEnsureTensor,F=o.webnnIsInt64Supported;if(!te||!F)throw new Error('preferredLocation "ml-tensor" is not supported without using WebNN.');if(xl(ce,Ne)===void 0||!vb(G))throw new Error(`Unsupported data type: ${G}`);if(G==="int64"&&!F(e))throw new Error('preferredLocation "ml-tensor" for int64 output is not supported by current WebNN Context.');let ue=await te(e,R,ce,we,!1);ae=!0,X.push([G,we,{mlTensor:ue,download:o.webnnCreateMLTensorDownloader(R,G),dispose:()=>{o.webnnReleaseTensorId(R),o._OrtReleaseTensor(K)}},"ml-tensor"])}else{let te=_b(G),F=new te(Ne);new Uint8Array(F.buffer,F.byteOffset,F.byteLength).set(o.HEAPU8.subarray(R,R+F.byteLength)),X.push([G,we,F,"cpu"])}}finally{o.stackRestore(ee),G==="string"&&R&&o._free(R),ae||o._OrtReleaseTensor(K),(U=o.webnnOnRunEnd)==null||U.call(o,d)}}return m&&!f&&(o._OrtClearBoundOutputs(m.handle)!==0&&fr("Can't clear bound outputs."),ti.set(e,[d,p,u,m,f,!1])),X}finally{o.stackRestore(C),y.forEach(q=>o._OrtReleaseTensor(q)),w.forEach(q=>o._OrtReleaseTensor(q)),b.forEach(q=>o._free(q)),g!==0&&o._OrtReleaseRunOptions(g),x.forEach(q=>o._free(q))}},Lb=e=>{let t=yr(),r=ti.get(e);if(!r)throw new Error("invalid session id");let n=r[0],s=t._OrtEndProfiling(n);s===0&&fr("Can't get an profile file name."),t._OrtFree(s)},Rb=e=>{let t=[];for(let r of e){let n=r[2];!Array.isArray(n)&&"buffer"in n&&t.push(n.buffer)}return t}}),ri,ds,_c,xu,vu,hf,Jv,gf,ul,ml,yI,H4,q4,K4,Q4,X4,Y4,Z4,J4=Ke(()=>{Oa(),G4(),Ql(),fb(),ri=()=>!!Er.wasm.proxy&&typeof document<"u",_c=!1,xu=!1,vu=!1,gf=new Map,ul=(e,t)=>{let r=gf.get(e);r?r.push(t):gf.set(e,[t])},ml=()=>{if(_c||!xu||vu||!ds)throw new Error("worker not ready")},yI=e=>{switch(e.data.type){case"init-wasm":_c=!1,e.data.err?(vu=!0,Jv[1](e.data.err)):(xu=!0,Jv[0]()),hf&&(URL.revokeObjectURL(hf),hf=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let t=gf.get(e.data.type);e.data.err?t.shift()[1](e.data.err):t.shift()[0](e.data.out);break}}},H4=async()=>{if(!xu){if(_c)throw new Error("multiple calls to 'initWasm()' detected.");if(vu)throw new Error("previous call to 'initWasm()' failed.");if(_c=!0,ri())return new Promise((e,t)=>{ds==null||ds.terminate(),UF().then(([r,n])=>{try{ds=n,ds.onerror=a=>t(a),ds.onmessage=yI,Jv=[e,t];let s={type:"init-wasm",in:Er};!s.in.wasm.wasmPaths&&(r||My)&&(s.in.wasm.wasmPaths={wasm:new URL("/assets/ort-wasm-simd-threaded.jsep-B0T3yYHD.wasm",import.meta.url).href}),ds.postMessage(s),hf=r}catch(s){t(s)}},t)});try{await hb(Er.wasm),await Nb(Er),xu=!0}catch(e){throw vu=!0,e}finally{_c=!1}}},q4=async e=>{if(ri())return ml(),new Promise((t,r)=>{ul("init-ep",[t,r]);let n={type:"init-ep",in:{epName:e,env:Er}};ds.postMessage(n)});await $b(Er,e)},K4=async e=>ri()?(ml(),new Promise((t,r)=>{ul("copy-from",[t,r]);let n={type:"copy-from",in:{buffer:e}};ds.postMessage(n,[e.buffer])})):jh(e),Q4=async(e,t)=>{if(ri()){if(t!=null&&t.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ml(),new Promise((r,n)=>{ul("create",[r,n]);let s={type:"create",in:{model:e,options:{...t}}},a=[];e instanceof Uint8Array&&a.push(e.buffer),ds.postMessage(s,a)})}else return Db(e,t)},X4=async e=>{if(ri())return ml(),new Promise((t,r)=>{ul("release",[t,r]);let n={type:"release",in:e};ds.postMessage(n)});Ob(e)},Y4=async(e,t,r,n,s,a)=>{if(ri()){if(r.some(o=>o[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(s.some(o=>o))throw new Error("pre-allocated output tensor is not supported for proxy.");return ml(),new Promise((o,i)=>{ul("run",[o,i]);let l=r,d={type:"run",in:{sessionId:e,inputIndices:t,inputs:l,outputIndices:n,options:a}};ds.postMessage(d,Rb(l))})}else return Fb(e,t,r,n,s,a)},Z4=async e=>{if(ri())return ml(),new Promise((t,r)=>{ul("end-profiling",[t,r]);let n={type:"end-profiling",in:e};ds.postMessage(n)});Lb(e)}}),e0,wI,ez,mQ=Ke(()=>{Oa(),J4(),Nt(),pb(),KF(),e0=(e,t)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];case"ml-tensor":return[e.type,e.dims,{mlTensor:e.mlTensor},"ml-tensor"];default:throw new Error(`invalid data location: ${e.location} for ${t()}`)}},wI=e=>{switch(e[3]){case"cpu":return new Ca(e[0],e[2],e[1]);case"gpu-buffer":{let t=e[0];if(!xb(t))throw new Error(`not supported data type: ${t} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:s}=e[2];return Ca.fromGpuBuffer(r,{dataType:t,dims:e[1],download:n,dispose:s})}case"ml-tensor":{let t=e[0];if(!vb(t))throw new Error(`not supported data type: ${t} for deserializing MLTensor tensor`);let{mlTensor:r,download:n,dispose:s}=e[2];return Ca.fromMLTensor(r,{dataType:t,dims:e[1],download:n,dispose:s})}default:throw new Error(`invalid data location: ${e[3]}`)}},ez=class{async fetchModelAndCopyToWasmMemory(e){return K4(await yb(e))}async loadModel(e,t){Da();let r;typeof e=="string"?r=await this.fetchModelAndCopyToWasmMemory(e):r=e,[this.sessionId,this.inputNames,this.outputNames,this.inputMetadata,this.outputMetadata]=await Q4(r,t),ea()}async dispose(){return X4(this.sessionId)}async run(e,t,r){Da();let n=[],s=[];Object.entries(e).forEach(u=>{let m=u[0],f=u[1],h=this.inputNames.indexOf(m);if(h===-1)throw new Error(`invalid input '${m}'`);n.push(f),s.push(h)});let a=[],o=[];Object.entries(t).forEach(u=>{let m=u[0],f=u[1],h=this.outputNames.indexOf(m);if(h===-1)throw new Error(`invalid output '${m}'`);a.push(f),o.push(h)});let i=n.map((u,m)=>e0(u,()=>`input "${this.inputNames[s[m]]}"`)),l=a.map((u,m)=>u?e0(u,()=>`output "${this.outputNames[o[m]]}"`):null),d=await Y4(this.sessionId,s,i,o,l,r),p={};for(let u=0;u<d.length;u++)p[this.outputNames[o[u]]]=a[u]??wI(d[u]);return ea(),p}startProfiling(){}endProfiling(){Z4(this.sessionId)}}}),tz={};Sd(tz,{OnnxruntimeWebAssemblyBackend:()=>Ly,initializeFlags:()=>Fy,wasmBackend:()=>rz});var Fy,Ly,rz,pQ=Ke(()=>{Oa(),J4(),mQ(),Fy=()=>{(typeof Er.wasm.initTimeout!="number"||Er.wasm.initTimeout<0)&&(Er.wasm.initTimeout=0);let e=Er.wasm.simd;if(typeof e!="boolean"&&e!==void 0&&e!=="fixed"&&e!=="relaxed"&&(console.warn(`Property "env.wasm.simd" is set to unknown value "${e}". Reset it to \`false\` and ignore SIMD feature checking.`),Er.wasm.simd=!1),typeof Er.wasm.proxy!="boolean"&&(Er.wasm.proxy=!1),typeof Er.wasm.trace!="boolean"&&(Er.wasm.trace=!1),typeof Er.wasm.numThreads!="number"||!Number.isInteger(Er.wasm.numThreads)||Er.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)Er.wasm.numThreads=1;else{let t=typeof navigator>"u"?J9("node:os").cpus().length:navigator.hardwareConcurrency;Er.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Ly=class{async init(e){Fy(),await H4(),await q4(e)}async createInferenceSessionHandler(e,t){let r=new ez;return await r.loadModel(e,t),r}},rz=new Ly});Oa();Oa();Oa();var fQ="1.22.0-dev.20250409-89f8206ba4",hQ=LF;{let e=(pQ(),fm(tz)).wasmBackend;bl("webgpu",e,5),bl("webnn",e,5),bl("cpu",e,10),bl("wasm",e,10)}Object.defineProperty(Er.versions,"web",{value:fQ,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gQ=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return mb},get TRACE(){return hm},get TRACE_FUNC_BEGIN(){return Da},get TRACE_FUNC_END(){return ea},get Tensor(){return Ca},default:hQ,get env(){return Er},get registerBackend(){return bl}},Symbol.toStringTag,{value:"Module"}));var wo={},_Q={"onnxruntime-common":e=>{e.exports=Q9},"onnxruntime-web":e=>{e.exports=gQ},"?2ce3":()=>{},"?7992":()=>{},"?5af5":()=>{},"?2b25":()=>{},"?db59":()=>{},"?383f":()=>{},"?fa4b":()=>{},"./node_modules/@huggingface/jinja/dist/index.js":(e,t,r)=>{r.r(t),r.d(t,{Environment:()=>Re,Interpreter:()=>Pt,Template:()=>Kt,parse:()=>ne,tokenize:()=>p});var n=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Comment:"Comment"}),s=class{constructor(N,se){this.value=N,this.type=se}};function a(N){return/\w/.test(N)}function o(N){return/[0-9]/.test(N)}var i=[["{%",n.OpenStatement],["%}",n.CloseStatement],["{{",n.OpenExpression],["}}",n.CloseExpression],["(",n.OpenParen],[")",n.CloseParen],["{",n.OpenCurlyBracket],["}",n.CloseCurlyBracket],["[",n.OpenSquareBracket],["]",n.CloseSquareBracket],[",",n.Comma],[".",n.Dot],[":",n.Colon],["|",n.Pipe],["<=",n.ComparisonBinaryOperator],[">=",n.ComparisonBinaryOperator],["==",n.ComparisonBinaryOperator],["!=",n.ComparisonBinaryOperator],["<",n.ComparisonBinaryOperator],[">",n.ComparisonBinaryOperator],["+",n.AdditiveBinaryOperator],["-",n.AdditiveBinaryOperator],["~",n.AdditiveBinaryOperator],["*",n.MultiplicativeBinaryOperator],["/",n.MultiplicativeBinaryOperator],["%",n.MultiplicativeBinaryOperator],["=",n.Equals]],l=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function d(N,se={}){return N.endsWith(`
`)&&(N=N.slice(0,-1)),se.lstrip_blocks&&(N=N.replace(/^[ \t]*({[#%-])/gm,"$1")),se.trim_blocks&&(N=N.replace(/([#%-]})\n/g,"$1")),N.replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{").replace(/-#}\s*/g,"#}").replace(/\s*{#-/g,"{#").replace(/{%\s*(end)?generation\s*%}/gs,"")}function p(N,se={}){var pt,It;const H=[],re=d(N,se);let de=0,Pe=0;const Fe=St=>{let Ot="";for(;St(re[de]);){if(re[de]==="\\"){if(++de,de>=re.length)throw new SyntaxError("Unexpected end of input");const dt=re[de++],Yt=l.get(dt);if(Yt===void 0)throw new SyntaxError(`Unexpected escaped character: ${dt}`);Ot+=Yt;continue}if(Ot+=re[de++],de>=re.length)throw new SyntaxError("Unexpected end of input")}return Ot};e:for(;de<re.length;){const St=(pt=H.at(-1))==null?void 0:pt.type;if(St===void 0||St===n.CloseStatement||St===n.CloseExpression||St===n.Comment){let dt="";for(;de<re.length&&!(re[de]==="{"&&(re[de+1]==="%"||re[de+1]==="{"||re[de+1]==="#"));)dt+=re[de++];if(dt.length>0){H.push(new s(dt,n.Text));continue}}if(re[de]==="{"&&re[de+1]==="#"){de+=2;let dt="";for(;re[de]!=="#"||re[de+1]!=="}";){if(de+2>=re.length)throw new SyntaxError("Missing end of comment tag");dt+=re[de++]}H.push(new s(dt,n.Comment)),de+=2;continue}Fe(dt=>/\s/.test(dt));const Ot=re[de];if(Ot==="-"||Ot==="+"){const dt=(It=H.at(-1))==null?void 0:It.type;if(dt===n.Text||dt===void 0)throw new SyntaxError(`Unexpected character: ${Ot}`);switch(dt){case n.Identifier:case n.NumericLiteral:case n.StringLiteral:case n.CloseParen:case n.CloseSquareBracket:break;default:{++de;const Yt=Fe(o);H.push(new s(`${Ot}${Yt}`,Yt.length>0?n.NumericLiteral:n.UnaryOperator));continue}}}for(const[dt,Yt]of i){if(dt==="}}"&&Pe>0)continue;if(re.slice(de,de+dt.length)===dt){H.push(new s(dt,Yt)),Yt===n.OpenExpression?Pe=0:Yt===n.OpenCurlyBracket?++Pe:Yt===n.CloseCurlyBracket&&--Pe,de+=dt.length;continue e}}if(Ot==="'"||Ot==='"'){++de;const dt=Fe(Yt=>Yt!==Ot);H.push(new s(dt,n.StringLiteral)),++de;continue}if(o(Ot)){let dt=Fe(o);if(re[de]==="."&&o(re[de+1])){++de;const Yt=Fe(o);dt=`${dt}.${Yt}`}H.push(new s(dt,n.NumericLiteral));continue}if(a(Ot)){const dt=Fe(a);H.push(new s(dt,n.Identifier));continue}throw new SyntaxError(`Unexpected character: ${Ot}`)}return H}var u=class{constructor(){le(this,"type","Statement")}},m=class extends u{constructor(se){super();le(this,"type","Program");this.body=se}},f=class extends u{constructor(se,H,re){super();le(this,"type","If");this.test=se,this.body=H,this.alternate=re}},h=class extends u{constructor(se,H,re,de){super();le(this,"type","For");this.loopvar=se,this.iterable=H,this.body=re,this.defaultBlock=de}},_=class extends u{constructor(){super(...arguments);le(this,"type","Break")}},v=class extends u{constructor(){super(...arguments);le(this,"type","Continue")}},g=class extends u{constructor(se,H,re){super();le(this,"type","Set");this.assignee=se,this.value=H,this.body=re}},x=class extends u{constructor(se,H,re){super();le(this,"type","Macro");this.name=se,this.args=H,this.body=re}},y=class extends u{constructor(se){super();le(this,"type","Comment");this.value=se}},w=class extends u{constructor(){super(...arguments);le(this,"type","Expression")}},b=class extends w{constructor(se,H,re){super();le(this,"type","MemberExpression");this.object=se,this.property=H,this.computed=re}},C=class extends w{constructor(se,H){super();le(this,"type","CallExpression");this.callee=se,this.args=H}},E=class extends w{constructor(se){super();le(this,"type","Identifier");this.value=se}},P=class extends w{constructor(se){super();le(this,"type","Literal");this.value=se}},I=class extends P{constructor(){super(...arguments);le(this,"type","IntegerLiteral")}},$=class extends P{constructor(){super(...arguments);le(this,"type","FloatLiteral")}},z=class extends P{constructor(){super(...arguments);le(this,"type","StringLiteral")}},D=class extends P{constructor(){super(...arguments);le(this,"type","ArrayLiteral")}},B=class extends P{constructor(){super(...arguments);le(this,"type","TupleLiteral")}},U=class extends P{constructor(){super(...arguments);le(this,"type","ObjectLiteral")}},q=class extends w{constructor(se,H,re){super();le(this,"type","BinaryExpression");this.operator=se,this.left=H,this.right=re}},X=class extends w{constructor(se,H){super();le(this,"type","FilterExpression");this.operand=se,this.filter=H}},Z=class extends u{constructor(se,H){super();le(this,"type","FilterStatement");this.filter=se,this.body=H}},K=class extends w{constructor(se,H){super();le(this,"type","SelectExpression");this.lhs=se,this.test=H}},ee=class extends w{constructor(se,H,re){super();le(this,"type","TestExpression");this.operand=se,this.negate=H,this.test=re}},oe=class extends w{constructor(se,H){super();le(this,"type","UnaryExpression");this.operator=se,this.argument=H}},ae=class extends w{constructor(se=void 0,H=void 0,re=void 0){super();le(this,"type","SliceExpression");this.start=se,this.stop=H,this.step=re}},G=class extends w{constructor(se,H){super();le(this,"type","KeywordArgumentExpression");this.key=se,this.value=H}},R=class extends w{constructor(se){super();le(this,"type","SpreadExpression");this.argument=se}},Q=class extends u{constructor(se,H,re){super();le(this,"type","CallStatement");this.call=se,this.callerArgs=H,this.body=re}},ce=class extends w{constructor(se,H,re){super();le(this,"type","Ternary");this.condition=se,this.trueExpr=H,this.falseExpr=re}};function ne(N){const se=new m([]);let H=0;function re(Ue,Ge){const ut=N[H++];if(!ut||ut.type!==Ue)throw new Error(`Parser Error: ${Ge}. ${ut.type} !== ${Ue}.`);return ut}function de(Ue){if(!It(Ue))throw new SyntaxError(`Expected ${Ue}`);++H}function Pe(){switch(N[H].type){case n.Comment:return new y(N[H++].value);case n.Text:return St();case n.OpenStatement:return Ot();case n.OpenExpression:return dt();default:throw new SyntaxError(`Unexpected token type: ${N[H].type}`)}}function Fe(...Ue){return H+Ue.length<=N.length&&Ue.every((Ge,ut)=>Ge===N[H+ut].type)}function pt(...Ue){var Ge,ut,gr;return((Ge=N[H])==null?void 0:Ge.type)===n.OpenStatement&&((ut=N[H+1])==null?void 0:ut.type)===n.Identifier&&Ue.includes((gr=N[H+1])==null?void 0:gr.value)}function It(...Ue){return H+Ue.length<=N.length&&Ue.every((Ge,ut)=>N[H+ut].type==="Identifier"&&Ge===N[H+ut].value)}function St(){return new z(re(n.Text,"Expected text token").value)}function Ot(){if(re(n.OpenStatement,"Expected opening statement token"),N[H].type!==n.Identifier)throw new SyntaxError(`Unknown statement, got ${N[H].type}`);const Ue=N[H].value;let Ge;switch(Ue){case"set":++H,Ge=Yt();break;case"if":++H,Ge=hr(),re(n.OpenStatement,"Expected {% token"),de("endif"),re(n.CloseStatement,"Expected %} token");break;case"macro":++H,Ge=Bn(),re(n.OpenStatement,"Expected {% token"),de("endmacro"),re(n.CloseStatement,"Expected %} token");break;case"for":++H,Ge=Vr(),re(n.OpenStatement,"Expected {% token"),de("endfor"),re(n.CloseStatement,"Expected %} token");break;case"call":{++H;let ut=null;Fe(n.OpenParen)&&(ut=cs());const gr=Vn();if(gr.type!=="Identifier")throw new SyntaxError("Expected identifier following call statement");const go=cs();re(n.CloseStatement,"Expected closing statement token");const ia=[];for(;!pt("endcall");)ia.push(Pe());re(n.OpenStatement,"Expected '{%'"),de("endcall"),re(n.CloseStatement,"Expected closing statement token");const _s=new C(gr,go);Ge=new Q(_s,ut,ia);break}case"break":++H,re(n.CloseStatement,"Expected closing statement token"),Ge=new _;break;case"continue":++H,re(n.CloseStatement,"Expected closing statement token"),Ge=new v;break;case"filter":{++H;let ut=Vn();ut instanceof E&&Fe(n.OpenParen)&&(ut=Rs(ut)),re(n.CloseStatement,"Expected closing statement token");const gr=[];for(;!pt("endfilter");)gr.push(Pe());re(n.OpenStatement,"Expected '{%'"),de("endfilter"),re(n.CloseStatement,"Expected '%}'"),Ge=new Z(ut,gr);break}default:throw new SyntaxError(`Unknown statement type: ${Ue}`)}return Ge}function dt(){re(n.OpenExpression,"Expected opening expression token");const Ue=on();return re(n.CloseExpression,"Expected closing expression token"),Ue}function Yt(){const Ue=Zn();let Ge=null;const ut=[];if(Fe(n.Equals))++H,Ge=Zn();else{for(re(n.CloseStatement,"Expected %} token");!pt("endset");)ut.push(Pe());re(n.OpenStatement,"Expected {% token"),de("endset")}return re(n.CloseStatement,"Expected closing statement token"),new g(Ue,Ge,ut)}function hr(){const Ue=on();re(n.CloseStatement,"Expected closing statement token");const Ge=[],ut=[];for(;!pt("elif","else","endif");)Ge.push(Pe());if(pt("elif")){++H,++H;const gr=hr();ut.push(gr)}else if(pt("else"))for(++H,++H,re(n.CloseStatement,"Expected closing statement token");!pt("endif");)ut.push(Pe());return new f(Ue,Ge,ut)}function Bn(){const Ue=Vn();if(Ue.type!=="Identifier")throw new SyntaxError("Expected identifier following macro statement");const Ge=cs();re(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!pt("endmacro");)ut.push(Pe());return new x(Ue,Ge,ut)}function Zn(Ue=!1){const Ge=Ue?Vn:on,ut=[Ge()],gr=Fe(n.Comma);for(;gr&&(++H,ut.push(Ge()),!!Fe(n.Comma)););return gr?new B(ut):ut[0]}function Vr(){const Ue=Zn(!0);if(!(Ue instanceof E||Ue instanceof B))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Ue.type} instead`);if(!It("in"))throw new SyntaxError("Expected `in` keyword following loop variable");++H;const Ge=on();re(n.CloseStatement,"Expected closing statement token");const ut=[];for(;!pt("endfor","else");)ut.push(Pe());const gr=[];if(pt("else"))for(++H,++H,re(n.CloseStatement,"Expected closing statement token");!pt("endfor");)gr.push(Pe());return new h(Ue,Ge,ut,gr)}function on(){return Wr()}function Wr(){const Ue=Fs();if(It("if")){++H;const Ge=Fs();if(It("else")){++H;const ut=Wr();return new ce(Ge,Ue,ut)}else return new K(Ue,Ge)}return Ue}function Fs(){let Ue=Ls();for(;It("or");){const Ge=N[H];++H;const ut=Ls();Ue=new q(Ge,Ue,ut)}return Ue}function Ls(){let Ue=yn();for(;It("and");){const Ge=N[H];++H;const ut=yn();Ue=new q(Ge,Ue,ut)}return Ue}function yn(){let Ue;for(;It("not");){const Ge=N[H];++H;const ut=yn();Ue=new oe(Ge,ut)}return Ue??Ra()}function Ra(){let Ue=za();for(;;){let Ge;if(It("not","in"))Ge=new s("not in",n.Identifier),H+=2;else if(It("in"))Ge=N[H++];else if(Fe(n.ComparisonBinaryOperator))Ge=N[H++];else break;const ut=za();Ue=new q(Ge,Ue,ut)}return Ue}function za(){let Ue=Or();for(;Fe(n.AdditiveBinaryOperator);){const Ge=N[H];++H;const ut=Or();Ue=new q(Ge,Ue,ut)}return Ue}function mn(){const Ue=Jr(Vn());return Fe(n.OpenParen)?Rs(Ue):Ue}function Rs(Ue){let Ge=new C(Ue,cs());return Ge=Jr(Ge),Fe(n.OpenParen)&&(Ge=Rs(Ge)),Ge}function cs(){re(n.OpenParen,"Expected opening parenthesis for arguments list");const Ue=Dn();return re(n.CloseParen,"Expected closing parenthesis for arguments list"),Ue}function Dn(){const Ue=[];for(;!Fe(n.CloseParen);){let Ge;if(N[H].type===n.MultiplicativeBinaryOperator&&N[H].value==="*"){++H;const ut=on();Ge=new R(ut)}else if(Ge=on(),Fe(n.Equals)){if(++H,!(Ge instanceof E))throw new SyntaxError("Expected identifier for keyword argument");const ut=on();Ge=new G(Ge,ut)}Ue.push(Ge),Fe(n.Comma)&&++H}return Ue}function zs(){const Ue=[];let Ge=!1;for(;!Fe(n.CloseSquareBracket);)Fe(n.Colon)?(Ue.push(void 0),++H,Ge=!0):(Ue.push(on()),Fe(n.Colon)&&(++H,Ge=!0));if(Ue.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Ge){if(Ue.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new ae(...Ue)}return Ue[0]}function Jr(Ue){for(;Fe(n.Dot)||Fe(n.OpenSquareBracket);){const Ge=N[H];++H;let ut;const gr=Ge.type===n.OpenSquareBracket;if(gr)ut=zs(),re(n.CloseSquareBracket,"Expected closing square bracket");else if(ut=Vn(),ut.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Ue=new b(Ue,ut,gr)}return Ue}function Or(){let Ue=Bs();for(;Fe(n.MultiplicativeBinaryOperator);){const Ge=N[H++],ut=Bs();Ue=new q(Ge,Ue,ut)}return Ue}function Bs(){let Ue=ho();for(;It("is");){++H;const Ge=It("not");Ge&&++H;const ut=Vn();if(!(ut instanceof E))throw new SyntaxError("Expected identifier for the test");Ue=new ee(Ue,Ge,ut)}return Ue}function ho(){let Ue=mn();for(;Fe(n.Pipe);){++H;let Ge=Vn();if(!(Ge instanceof E))throw new SyntaxError("Expected identifier for the filter");Fe(n.OpenParen)&&(Ge=Rs(Ge)),Ue=new X(Ue,Ge)}return Ue}function Vn(){const Ue=N[H++];switch(Ue.type){case n.NumericLiteral:{const Ge=Ue.value;return Ge.includes(".")?new $(Number(Ge)):new I(Number(Ge))}case n.StringLiteral:{let Ge=Ue.value;for(;Fe(n.StringLiteral);)Ge+=N[H++].value;return new z(Ge)}case n.Identifier:return new E(Ue.value);case n.OpenParen:{const Ge=Zn();return re(n.CloseParen,"Expected closing parenthesis, got ${tokens[current].type} instead."),Ge}case n.OpenSquareBracket:{const Ge=[];for(;!Fe(n.CloseSquareBracket);)Ge.push(on()),Fe(n.Comma)&&++H;return++H,new D(Ge)}case n.OpenCurlyBracket:{const Ge=new Map;for(;!Fe(n.CloseCurlyBracket);){const ut=on();re(n.Colon,"Expected colon between key and value in object literal");const gr=on();Ge.set(ut,gr),Fe(n.Comma)&&++H}return++H,new U(Ge)}default:throw new SyntaxError(`Unexpected token: ${Ue.type}`)}}for(;H<N.length;)se.body.push(Pe());return se}function me(N,se,H=1){se===void 0&&(se=N,N=0);const re=[];for(let de=N;de<se;de+=H)re.push(de);return re}function we(N,se,H,re=1){const de=Math.sign(re);de>=0?(se=(se??(se=0))<0?Math.max(N.length+se,0):Math.min(se,N.length),H=(H??(H=N.length))<0?Math.max(N.length+H,0):Math.min(H,N.length)):(se=(se??(se=N.length-1))<0?Math.max(N.length+se,-1):Math.min(se,N.length-1),H=(H??(H=-1))<-1?Math.max(N.length+H,-1):Math.min(H,N.length-1));const Pe=[];for(let Fe=se;de*Fe<de*H;Fe+=re)Pe.push(N[Fe]);return Pe}function Ne(N){return N.replace(/\b\w/g,se=>se.toUpperCase())}function Me(N){return te(new Date,N)}function te(N,se){const H=new Intl.DateTimeFormat(void 0,{month:"long"}),re=new Intl.DateTimeFormat(void 0,{month:"short"}),de=Pe=>Pe<10?"0"+Pe:Pe.toString();return se.replace(/%[YmdbBHM%]/g,Pe=>{switch(Pe){case"%Y":return N.getFullYear().toString();case"%m":return de(N.getMonth()+1);case"%d":return de(N.getDate());case"%b":return re.format(N);case"%B":return H.format(N);case"%H":return de(N.getHours());case"%M":return de(N.getMinutes());case"%%":return"%";default:return Pe}})}function F(N){return N.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ue(N,se,H,re){if(re===0)return N;let de=re==null||re<0?1/0:re;const Pe=se.length===0?new RegExp("(?=)","gu"):new RegExp(F(se),"gu");return N.replaceAll(Pe,Fe=>de>0?(--de,H):Fe)}var xe=class extends Error{},be=class extends Error{},Ee=class{constructor(N=void 0){le(this,"type","RuntimeValue");le(this,"value");le(this,"builtins",new Map);this.value=N}__bool__(){return new De(!!this.value)}toString(){return String(this.value)}},ye=class extends Ee{constructor(){super(...arguments);le(this,"type","IntegerValue")}},Ae=class extends Ee{constructor(){super(...arguments);le(this,"type","FloatValue")}toString(){return this.value%1===0?this.value.toFixed(1):this.value.toString()}},Ce=class extends Ee{constructor(){super(...arguments);le(this,"type","StringValue");le(this,"builtins",new Map([["upper",new et(()=>new Ce(this.value.toUpperCase()))],["lower",new et(()=>new Ce(this.value.toLowerCase()))],["strip",new et(()=>new Ce(this.value.trim()))],["title",new et(()=>new Ce(Ne(this.value)))],["capitalize",new et(()=>new Ce(this.value.charAt(0).toUpperCase()+this.value.slice(1)))],["length",new ye(this.value.length)],["rstrip",new et(()=>new Ce(this.value.trimEnd()))],["lstrip",new et(()=>new Ce(this.value.trimStart()))],["startswith",new et(se=>{if(se.length===0)throw new Error("startswith() requires at least one argument");const H=se[0];if(H instanceof Ce)return new De(this.value.startsWith(H.value));if(H instanceof Se){for(const re of H.value){if(!(re instanceof Ce))throw new Error("startswith() tuple elements must be strings");if(this.value.startsWith(re.value))return new De(!0)}return new De(!1)}throw new Error("startswith() argument must be a string or tuple of strings")})],["endswith",new et(se=>{if(se.length===0)throw new Error("endswith() requires at least one argument");const H=se[0];if(H instanceof Ce)return new De(this.value.endsWith(H.value));if(H instanceof Se){for(const re of H.value){if(!(re instanceof Ce))throw new Error("endswith() tuple elements must be strings");if(this.value.endsWith(re.value))return new De(!0)}return new De(!1)}throw new Error("endswith() argument must be a string or tuple of strings")})],["split",new et(se=>{const H=se[0]??new lt;if(!(H instanceof Ce||H instanceof lt))throw new Error("sep argument must be a string or null");const re=se[1]??new ye(-1);if(!(re instanceof ye))throw new Error("maxsplit argument must be a number");let de=[];if(H instanceof lt){const Pe=this.value.trimStart();for(const{0:Fe,index:pt}of Pe.matchAll(/\S+/g)){if(re.value!==-1&&de.length>=re.value&&pt!==void 0){de.push(Fe+Pe.slice(pt+Fe.length));break}de.push(Fe)}}else{if(H.value==="")throw new Error("empty separator");de=this.value.split(H.value),re.value!==-1&&de.length>re.value&&de.push(de.splice(re.value).join(H.value))}return new Se(de.map(Pe=>new Ce(Pe)))})],["replace",new et(se=>{if(se.length<2)throw new Error("replace() requires at least two arguments");const H=se[0],re=se[1];if(!(H instanceof Ce&&re instanceof Ce))throw new Error("replace() arguments must be strings");let de;if(se.length>2?se[2].type==="KeywordArgumentsValue"?de=se[2].value.get("count")??new lt:de=se[2]:de=new lt,!(de instanceof ye||de instanceof lt))throw new Error("replace() count argument must be a number or null");return new Ce(ue(this.value,H.value,re.value,de.value))})]]))}},De=class extends Ee{constructor(){super(...arguments);le(this,"type","BooleanValue")}},Be=class extends Ee{constructor(){super(...arguments);le(this,"type","ObjectValue");le(this,"builtins",new Map([["get",new et(([se,H])=>{if(!(se instanceof Ce))throw new Error(`Object key must be a string: got ${se.type}`);return this.value.get(se.value)??H??new lt})],["items",new et(()=>this.items())],["keys",new et(()=>this.keys())],["values",new et(()=>this.values())]]))}__bool__(){return new De(this.value.size>0)}items(){return new Se(Array.from(this.value.entries()).map(([se,H])=>new Se([new Ce(se),H])))}keys(){return new Se(Array.from(this.value.keys()).map(se=>new Ce(se)))}values(){return new Se(Array.from(this.value.values()))}},Ze=class extends Be{constructor(){super(...arguments);le(this,"type","KeywordArgumentsValue")}},Se=class extends Ee{constructor(){super(...arguments);le(this,"type","ArrayValue");le(this,"builtins",new Map([["length",new ye(this.value.length)]]))}__bool__(){return new De(this.value.length>0)}},it=class extends Se{constructor(){super(...arguments);le(this,"type","TupleValue")}},et=class extends Ee{constructor(){super(...arguments);le(this,"type","FunctionValue")}},lt=class extends Ee{constructor(){super(...arguments);le(this,"type","NullValue")}},st=class extends Ee{constructor(){super(...arguments);le(this,"type","UndefinedValue")}},Re=class{constructor(N){le(this,"variables",new Map([["namespace",new et(N=>{if(N.length===0)return new Be(new Map);if(N.length!==1||!(N[0]instanceof Be))throw new Error("`namespace` expects either zero arguments or a single object argument");return N[0]})]]));le(this,"tests",new Map([["boolean",N=>N.type==="BooleanValue"],["callable",N=>N instanceof et],["odd",N=>{if(!(N instanceof ye))throw new Error(`cannot odd on ${N.type}`);return N.value%2!==0}],["even",N=>{if(!(N instanceof ye))throw new Error(`cannot even on ${N.type}`);return N.value%2===0}],["false",N=>N.type==="BooleanValue"&&!N.value],["true",N=>N.type==="BooleanValue"&&N.value],["none",N=>N.type==="NullValue"],["string",N=>N.type==="StringValue"],["number",N=>N instanceof ye||N instanceof Ae],["integer",N=>N instanceof ye],["iterable",N=>N.type==="ArrayValue"||N.type==="StringValue"],["mapping",N=>N.type==="ObjectValue"],["lower",N=>{const se=N.value;return N.type==="StringValue"&&se===se.toLowerCase()}],["upper",N=>{const se=N.value;return N.type==="StringValue"&&se===se.toUpperCase()}],["none",N=>N.type==="NullValue"],["defined",N=>N.type!=="UndefinedValue"],["undefined",N=>N.type==="UndefinedValue"],["equalto",(N,se)=>N.value===se.value],["eq",(N,se)=>N.value===se.value]]));this.parent=N}set(N,se){return this.declareVariable(N,Mt(se))}declareVariable(N,se){if(this.variables.has(N))throw new SyntaxError(`Variable already declared: ${N}`);return this.variables.set(N,se),se}setVariable(N,se){return this.variables.set(N,se),se}resolve(N){if(this.variables.has(N))return this;if(this.parent)return this.parent.resolve(N);throw new Error(`Unknown variable: ${N}`)}lookupVariable(N){try{return this.resolve(N).variables.get(N)??new st}catch{return new st}}};function Qe(N){N.set("false",!1),N.set("true",!0),N.set("none",null),N.set("raise_exception",se=>{throw new Error(se)}),N.set("range",me),N.set("strftime_now",Me),N.set("True",!0),N.set("False",!1),N.set("None",null)}var Pt=class{constructor(N){le(this,"global");this.global=N??new Re}run(N){return this.evaluate(N,this.global)}evaluateBinaryExpression(N,se){const H=this.evaluate(N.left,se);switch(N.operator.value){case"and":return H.__bool__().value?this.evaluate(N.right,se):H;case"or":return H.__bool__().value?H:this.evaluate(N.right,se)}const re=this.evaluate(N.right,se);switch(N.operator.value){case"==":return new De(H.value==re.value);case"!=":return new De(H.value!=re.value)}if(H instanceof st||re instanceof st){if(re instanceof st&&["in","not in"].includes(N.operator.value))return new De(N.operator.value==="not in");throw new Error(`Cannot perform operation ${N.operator.value} on undefined values`)}else{if(H instanceof lt||re instanceof lt)throw new Error("Cannot perform operation on null values");if(N.operator.value==="~")return new Ce(H.value.toString()+re.value.toString());if((H instanceof ye||H instanceof Ae)&&(re instanceof ye||re instanceof Ae)){const de=H.value,Pe=re.value;switch(N.operator.value){case"+":case"-":case"*":{const Fe=N.operator.value==="+"?de+Pe:N.operator.value==="-"?de-Pe:de*Pe;return H instanceof Ae||re instanceof Ae?new Ae(Fe):new ye(Fe)}case"/":return new Ae(de/Pe);case"%":{const Fe=de%Pe;return H instanceof Ae||re instanceof Ae?new Ae(Fe):new ye(Fe)}case"<":return new De(de<Pe);case">":return new De(de>Pe);case">=":return new De(de>=Pe);case"<=":return new De(de<=Pe)}}else if(H instanceof Se&&re instanceof Se)switch(N.operator.value){case"+":return new Se(H.value.concat(re.value))}else if(re instanceof Se){const de=re.value.find(Pe=>Pe.value===H.value)!==void 0;switch(N.operator.value){case"in":return new De(de);case"not in":return new De(!de)}}}if(H instanceof Ce||re instanceof Ce)switch(N.operator.value){case"+":return new Ce(H.value.toString()+re.value.toString())}if(H instanceof Ce&&re instanceof Ce)switch(N.operator.value){case"in":return new De(re.value.includes(H.value));case"not in":return new De(!re.value.includes(H.value))}if(H instanceof Ce&&re instanceof Be)switch(N.operator.value){case"in":return new De(re.value.has(H.value));case"not in":return new De(!re.value.has(H.value))}throw new SyntaxError(`Unknown operator "${N.operator.value}" between ${H.type} and ${re.type}`)}evaluateArguments(N,se){const H=[],re=new Map;for(const de of N)if(de.type==="SpreadExpression"){const Pe=de,Fe=this.evaluate(Pe.argument,se);if(!(Fe instanceof Se))throw new Error(`Cannot unpack non-iterable type: ${Fe.type}`);for(const pt of Fe.value)H.push(pt)}else if(de.type==="KeywordArgumentExpression"){const Pe=de;re.set(Pe.key.value,this.evaluate(Pe.value,se))}else{if(re.size>0)throw new Error("Positional arguments must come before keyword arguments");H.push(this.evaluate(de,se))}return[H,re]}applyFilter(N,se,H){if(se.type==="Identifier"){const re=se;if(re.value==="tojson")return new Ce(Wt(N));if(N instanceof Se)switch(re.value){case"list":return N;case"first":return N.value[0];case"last":return N.value[N.value.length-1];case"length":return new ye(N.value.length);case"reverse":return new Se(N.value.reverse());case"sort":return new Se(N.value.sort((de,Pe)=>{if(de.type!==Pe.type)throw new Error(`Cannot compare different types: ${de.type} and ${Pe.type}`);switch(de.type){case"IntegerValue":case"FloatValue":return de.value-Pe.value;case"StringValue":return de.value.localeCompare(Pe.value);default:throw new Error(`Cannot compare type: ${de.type}`)}}));case"join":return new Ce(N.value.map(de=>de.value).join(""));case"string":return new Ce(Wt(N));case"unique":{const de=new Set,Pe=[];for(const Fe of N.value)de.has(Fe.value)||(de.add(Fe.value),Pe.push(Fe));return new Se(Pe)}default:throw new Error(`Unknown ArrayValue filter: ${re.value}`)}else if(N instanceof Ce)switch(re.value){case"length":case"upper":case"lower":case"title":case"capitalize":{const de=N.builtins.get(re.value);if(de instanceof et)return de.value([],H);if(de instanceof ye)return de;throw new Error(`Unknown StringValue filter: ${re.value}`)}case"trim":return new Ce(N.value.trim());case"indent":return new Ce(N.value.split(`
`).map((de,Pe)=>Pe===0||de.length===0?de:"    "+de).join(`
`));case"join":case"string":return N;case"int":{const de=parseInt(N.value,10);return new ye(isNaN(de)?0:de)}case"float":{const de=parseFloat(N.value);return new Ae(isNaN(de)?0:de)}default:throw new Error(`Unknown StringValue filter: ${re.value}`)}else if(N instanceof ye||N instanceof Ae)switch(re.value){case"abs":return N instanceof ye?new ye(Math.abs(N.value)):new Ae(Math.abs(N.value));case"int":return new ye(Math.floor(N.value));case"float":return new Ae(N.value);default:throw new Error(`Unknown NumericValue filter: ${re.value}`)}else if(N instanceof Be)switch(re.value){case"items":return new Se(Array.from(N.value.entries()).map(([de,Pe])=>new Se([new Ce(de),Pe])));case"length":return new ye(N.value.size);default:throw new Error(`Unknown ObjectValue filter: ${re.value}`)}else if(N instanceof De)switch(re.value){case"bool":return new De(N.value);case"int":return new ye(N.value?1:0);case"float":return new Ae(N.value?1:0);case"string":return new Ce(N.value?"true":"false");default:throw new Error(`Unknown BooleanValue filter: ${re.value}`)}throw new Error(`Cannot apply filter "${re.value}" to type: ${N.type}`)}else if(se.type==="CallExpression"){const re=se;if(re.callee.type!=="Identifier")throw new Error(`Unknown filter: ${re.callee.type}`);const de=re.callee.value;if(de==="tojson"){const[,Pe]=this.evaluateArguments(re.args,H),Fe=Pe.get("indent")??new lt;if(!(Fe instanceof ye||Fe instanceof lt))throw new Error("If set, indent must be a number");return new Ce(Wt(N,Fe.value))}else if(de==="join"){let Pe;if(N instanceof Ce)Pe=Array.from(N.value);else if(N instanceof Se)Pe=N.value.map(St=>St.value);else throw new Error(`Cannot apply filter "${de}" to type: ${N.type}`);const[Fe,pt]=this.evaluateArguments(re.args,H),It=Fe.at(0)??pt.get("separator")??new Ce("");if(!(It instanceof Ce))throw new Error("separator must be a string");return new Ce(Pe.join(It.value))}else if(de==="int"||de==="float"){const[Pe,Fe]=this.evaluateArguments(re.args,H),pt=Pe.at(0)??Fe.get("default")??(de==="int"?new ye(0):new Ae(0));if(N instanceof Ce){const It=de==="int"?parseInt(N.value,10):parseFloat(N.value);return isNaN(It)?pt:de==="int"?new ye(It):new Ae(It)}else{if(N instanceof ye||N instanceof Ae)return N;if(N instanceof De)return de==="int"?new ye(N.value?1:0):new Ae(N.value?1:0);throw new Error(`Cannot apply filter "${de}" to type: ${N.type}`)}}else if(de==="default"){const[Pe,Fe]=this.evaluateArguments(re.args,H),pt=Pe[0]??new Ce(""),It=Pe[1]??Fe.get("boolean")??new De(!1);if(!(It instanceof De))throw new Error("`default` filter flag must be a boolean");return N instanceof st||It.value&&!N.__bool__().value?pt:N}if(N instanceof Se){switch(de){case"selectattr":case"rejectattr":{const Pe=de==="selectattr";if(N.value.some(dt=>!(dt instanceof Be)))throw new Error(`\`${de}\` can only be applied to array of objects`);if(re.args.some(dt=>dt.type!=="StringLiteral"))throw new Error(`arguments of \`${de}\` must be strings`);const[Fe,pt,It]=re.args.map(dt=>this.evaluate(dt,H));let St;if(pt){const dt=H.tests.get(pt.value);if(!dt)throw new Error(`Unknown test: ${pt.value}`);St=dt}else St=(...dt)=>dt[0].__bool__().value;const Ot=N.value.filter(dt=>{const Yt=dt.value.get(Fe.value),hr=Yt?St(Yt,It):!1;return Pe?hr:!hr});return new Se(Ot)}case"map":{const[,Pe]=this.evaluateArguments(re.args,H);if(Pe.has("attribute")){const Fe=Pe.get("attribute");if(!(Fe instanceof Ce))throw new Error("attribute must be a string");const pt=Pe.get("default"),It=N.value.map(St=>{if(!(St instanceof Be))throw new Error("items in map must be an object");return St.value.get(Fe.value)??pt??new st});return new Se(It)}else throw new Error("`map` expressions without `attribute` set are not currently supported.")}}throw new Error(`Unknown ArrayValue filter: ${de}`)}else if(N instanceof Ce){switch(de){case"indent":{const[Pe,Fe]=this.evaluateArguments(re.args,H),pt=Pe.at(0)??Fe.get("width")??new ye(4);if(!(pt instanceof ye))throw new Error("width must be a number");const It=Pe.at(1)??Fe.get("first")??new De(!1),St=Pe.at(2)??Fe.get("blank")??new De(!1),Ot=N.value.split(`
`),dt=" ".repeat(pt.value),Yt=Ot.map((hr,Bn)=>!It.value&&Bn===0||!St.value&&hr.length===0?hr:dt+hr);return new Ce(Yt.join(`
`))}case"replace":{const Pe=N.builtins.get("replace");if(!(Pe instanceof et))throw new Error("replace filter not available");const[Fe,pt]=this.evaluateArguments(re.args,H);return Pe.value([...Fe,new Ze(pt)],H)}}throw new Error(`Unknown StringValue filter: ${de}`)}else throw new Error(`Cannot apply filter "${de}" to type: ${N.type}`)}throw new Error(`Unknown filter: ${se.type}`)}evaluateFilterExpression(N,se){const H=this.evaluate(N.operand,se);return this.applyFilter(H,N.filter,se)}evaluateTestExpression(N,se){const H=this.evaluate(N.operand,se),re=se.tests.get(N.test.value);if(!re)throw new Error(`Unknown test: ${N.test.value}`);const de=re(H);return new De(N.negate?!de:de)}evaluateSelectExpression(N,se){return this.evaluate(N.test,se).__bool__().value?this.evaluate(N.lhs,se):new st}evaluateUnaryExpression(N,se){const H=this.evaluate(N.argument,se);switch(N.operator.value){case"not":return new De(!H.value);default:throw new SyntaxError(`Unknown operator: ${N.operator.value}`)}}evaluateTernaryExpression(N,se){return this.evaluate(N.condition,se).__bool__().value?this.evaluate(N.trueExpr,se):this.evaluate(N.falseExpr,se)}evalProgram(N,se){return this.evaluateBlock(N.body,se)}evaluateBlock(N,se){let H="";for(const re of N){const de=this.evaluate(re,se);de.type!=="NullValue"&&de.type!=="UndefinedValue"&&(H+=de.toString())}return new Ce(H)}evaluateIdentifier(N,se){return se.lookupVariable(N.value)}evaluateCallExpression(N,se){const[H,re]=this.evaluateArguments(N.args,se);re.size>0&&H.push(new Ze(re));const de=this.evaluate(N.callee,se);if(de.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${de.type}`);return de.value(H,se)}evaluateSliceExpression(N,se,H){if(!(N instanceof Se||N instanceof Ce))throw new Error("Slice object must be an array or string");const re=this.evaluate(se.start,H),de=this.evaluate(se.stop,H),Pe=this.evaluate(se.step,H);if(!(re instanceof ye||re instanceof st))throw new Error("Slice start must be numeric or undefined");if(!(de instanceof ye||de instanceof st))throw new Error("Slice stop must be numeric or undefined");if(!(Pe instanceof ye||Pe instanceof st))throw new Error("Slice step must be numeric or undefined");return N instanceof Se?new Se(we(N.value,re.value,de.value,Pe.value)):new Ce(we(Array.from(N.value),re.value,de.value,Pe.value).join(""))}evaluateMemberExpression(N,se){const H=this.evaluate(N.object,se);let re;if(N.computed){if(N.property.type==="SliceExpression")return this.evaluateSliceExpression(H,N.property,se);re=this.evaluate(N.property,se)}else re=new Ce(N.property.value);let de;if(H instanceof Be){if(!(re instanceof Ce))throw new Error(`Cannot access property with non-string: got ${re.type}`);de=H.value.get(re.value)??H.builtins.get(re.value)}else if(H instanceof Se||H instanceof Ce)if(re instanceof ye)de=H.value.at(re.value),H instanceof Ce&&(de=new Ce(H.value.at(re.value)));else if(re instanceof Ce)de=H.builtins.get(re.value);else throw new Error(`Cannot access property with non-string/non-number: got ${re.type}`);else{if(!(re instanceof Ce))throw new Error(`Cannot access property with non-string: got ${re.type}`);de=H.builtins.get(re.value)}return de instanceof Ee?de:new st}evaluateSet(N,se){const H=N.value?this.evaluate(N.value,se):this.evaluateBlock(N.body,se);if(N.assignee.type==="Identifier"){const re=N.assignee.value;se.setVariable(re,H)}else if(N.assignee.type==="TupleLiteral"){const re=N.assignee;if(!(H instanceof Se))throw new Error(`Cannot unpack non-iterable type in set: ${H.type}`);const de=H.value;if(de.length!==re.value.length)throw new Error(`Too ${re.value.length>de.length?"few":"many"} items to unpack in set`);for(let Pe=0;Pe<re.value.length;++Pe){const Fe=re.value[Pe];if(Fe.type!=="Identifier")throw new Error(`Cannot unpack to non-identifier in set: ${Fe.type}`);se.setVariable(Fe.value,de[Pe])}}else if(N.assignee.type==="MemberExpression"){const re=N.assignee,de=this.evaluate(re.object,se);if(!(de instanceof Be))throw new Error("Cannot assign to member of non-object");if(re.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");de.value.set(re.property.value,H)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(N.assignee)}`);return new lt}evaluateIf(N,se){const H=this.evaluate(N.test,se);return this.evaluateBlock(H.__bool__().value?N.body:N.alternate,se)}evaluateFor(N,se){const H=new Re(se);let re,de;if(N.iterable.type==="SelectExpression"){const St=N.iterable;de=this.evaluate(St.lhs,H),re=St.test}else de=this.evaluate(N.iterable,H);if(!(de instanceof Se||de instanceof Be))throw new Error(`Expected iterable or object type in for loop: got ${de.type}`);de instanceof Be&&(de=de.keys());const Pe=[],Fe=[];for(let St=0;St<de.value.length;++St){const Ot=new Re(H),dt=de.value[St];let Yt;if(N.loopvar.type==="Identifier")Yt=hr=>hr.setVariable(N.loopvar.value,dt);else if(N.loopvar.type==="TupleLiteral"){const hr=N.loopvar;if(dt.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${dt.type}`);const Bn=dt;if(hr.value.length!==Bn.value.length)throw new Error(`Too ${hr.value.length>Bn.value.length?"few":"many"} items to unpack`);Yt=Zn=>{for(let Vr=0;Vr<hr.value.length;++Vr){if(hr.value[Vr].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${hr.value[Vr].type}`);Zn.setVariable(hr.value[Vr].value,Bn.value[Vr])}}}else throw new Error(`Invalid loop variable(s): ${N.loopvar.type}`);re&&(Yt(Ot),!this.evaluate(re,Ot).__bool__().value)||(Pe.push(dt),Fe.push(Yt))}let pt="",It=!0;for(let St=0;St<Pe.length;++St){const Ot=new Map([["index",new ye(St+1)],["index0",new ye(St)],["revindex",new ye(Pe.length-St)],["revindex0",new ye(Pe.length-St-1)],["first",new De(St===0)],["last",new De(St===Pe.length-1)],["length",new ye(Pe.length)],["previtem",St>0?Pe[St-1]:new st],["nextitem",St<Pe.length-1?Pe[St+1]:new st]]);H.setVariable("loop",new Be(Ot)),Fe[St](H);try{const dt=this.evaluateBlock(N.body,H);pt+=dt.value}catch(dt){if(dt instanceof be)continue;if(dt instanceof xe)break;throw dt}It=!1}if(It){const St=this.evaluateBlock(N.defaultBlock,H);pt+=St.value}return new Ce(pt)}evaluateMacro(N,se){return se.setVariable(N.name.value,new et((H,re)=>{var Fe;const de=new Re(re);H=H.slice();let Pe;((Fe=H.at(-1))==null?void 0:Fe.type)==="KeywordArgumentsValue"&&(Pe=H.pop());for(let pt=0;pt<N.args.length;++pt){const It=N.args[pt],St=H[pt];if(It.type==="Identifier"){const Ot=It;if(!St)throw new Error(`Missing positional argument: ${Ot.value}`);de.setVariable(Ot.value,St)}else if(It.type==="KeywordArgumentExpression"){const Ot=It,dt=St??(Pe==null?void 0:Pe.value.get(Ot.key.value))??this.evaluate(Ot.value,de);de.setVariable(Ot.key.value,dt)}else throw new Error(`Unknown argument type: ${It.type}`)}return this.evaluateBlock(N.body,de)})),new lt}evaluateCallStatement(N,se){const H=new et((pt,It)=>{const St=new Re(It);if(N.callerArgs)for(let Ot=0;Ot<N.callerArgs.length;++Ot){const dt=N.callerArgs[Ot];if(dt.type!=="Identifier")throw new Error(`Caller parameter must be an identifier, got ${dt.type}`);St.setVariable(dt.value,pt[Ot]??new st)}return this.evaluateBlock(N.body,St)}),[re,de]=this.evaluateArguments(N.call.args,se);re.push(new Ze(de));const Pe=this.evaluate(N.call.callee,se);if(Pe.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Pe.type}`);const Fe=new Re(se);return Fe.setVariable("caller",H),Pe.value(re,Fe)}evaluateFilterStatement(N,se){const H=this.evaluateBlock(N.body,se);return this.applyFilter(H,N.filter,se)}evaluate(N,se){if(!N)return new st;switch(N.type){case"Program":return this.evalProgram(N,se);case"Set":return this.evaluateSet(N,se);case"If":return this.evaluateIf(N,se);case"For":return this.evaluateFor(N,se);case"Macro":return this.evaluateMacro(N,se);case"CallStatement":return this.evaluateCallStatement(N,se);case"Break":throw new xe;case"Continue":throw new be;case"IntegerLiteral":return new ye(N.value);case"FloatLiteral":return new Ae(N.value);case"StringLiteral":return new Ce(N.value);case"ArrayLiteral":return new Se(N.value.map(H=>this.evaluate(H,se)));case"TupleLiteral":return new it(N.value.map(H=>this.evaluate(H,se)));case"ObjectLiteral":{const H=new Map;for(const[re,de]of N.value){const Pe=this.evaluate(re,se);if(!(Pe instanceof Ce))throw new Error(`Object keys must be strings: got ${Pe.type}`);H.set(Pe.value,this.evaluate(de,se))}return new Be(H)}case"Identifier":return this.evaluateIdentifier(N,se);case"CallExpression":return this.evaluateCallExpression(N,se);case"MemberExpression":return this.evaluateMemberExpression(N,se);case"UnaryExpression":return this.evaluateUnaryExpression(N,se);case"BinaryExpression":return this.evaluateBinaryExpression(N,se);case"FilterExpression":return this.evaluateFilterExpression(N,se);case"FilterStatement":return this.evaluateFilterStatement(N,se);case"TestExpression":return this.evaluateTestExpression(N,se);case"SelectExpression":return this.evaluateSelectExpression(N,se);case"Ternary":return this.evaluateTernaryExpression(N,se);case"Comment":return new lt;default:throw new SyntaxError(`Unknown node type: ${N.type}`)}}};function Mt(N){switch(typeof N){case"number":return Number.isInteger(N)?new ye(N):new Ae(N);case"string":return new Ce(N);case"boolean":return new De(N);case"undefined":return new st;case"object":return N===null?new lt:Array.isArray(N)?new Se(N.map(Mt)):new Be(new Map(Object.entries(N).map(([se,H])=>[se,Mt(H)])));case"function":return new et((se,H)=>{const re=N(...se.map(de=>de.value))??null;return Mt(re)});default:throw new Error(`Cannot convert to runtime value: ${N}`)}}function Wt(N,se,H){const re=H??0;switch(N.type){case"NullValue":case"UndefinedValue":return"null";case"IntegerValue":case"FloatValue":case"StringValue":case"BooleanValue":return JSON.stringify(N.value);case"ArrayValue":case"ObjectValue":{const de=se?" ".repeat(se):"",Pe=`
`+de.repeat(re),Fe=Pe+de;if(N.type==="ArrayValue"){const pt=N.value.map(It=>Wt(It,se,re+1));return se?`[${Fe}${pt.join(`,${Fe}`)}${Pe}]`:`[${pt.join(", ")}]`}else{const pt=Array.from(N.value.entries()).map(([It,St])=>{const Ot=`"${It}": ${Wt(St,se,re+1)}`;return se?`${Fe}${Ot}`:Ot});return se?`{${pt.join(",")}${Pe}}`:`{${pt.join(", ")}}`}}default:throw new Error(`Cannot convert to JSON: ${N.type}`)}}var vt=`
`,wr="{%- ",Yr=" -%}";function Br(N){switch(N.operator.type){case"MultiplicativeBinaryOperator":return 4;case"AdditiveBinaryOperator":return 3;case"ComparisonBinaryOperator":return 2;case"Identifier":return N.operator.value==="and"?1:N.operator.value==="in"||N.operator.value==="not in"?2:0}return 0}function Pn(N,se="	"){const H=typeof se=="number"?" ".repeat(se):se;return Zr(N.body,0,H).replace(/\n$/,"")}function br(...N){return wr+N.join(" ")+Yr}function Zr(N,se,H){return N.map(re=>aa(re,se,H)).join(vt)}function aa(N,se,H){const re=H.repeat(se);switch(N.type){case"Program":return Zr(N.body,se,H);case"If":return La(N,se,H);case"For":return Os(N,se,H);case"Set":return an(N,se,H);case"Macro":return oa(N,se,H);case"Break":return re+br("break");case"Continue":return re+br("continue");case"CallStatement":return He(N,se,H);case"FilterStatement":return Xt(N,se,H);case"Comment":return re+"{# "+N.value+" #}";default:return re+"{{- "+mt(N)+" -}}"}}function La(N,se,H){const re=H.repeat(se),de=[];let Pe=N;for(;Pe&&(de.push({test:Pe.test,body:Pe.body}),Pe.alternate.length===1&&Pe.alternate[0].type==="If");)Pe=Pe.alternate[0];let Fe=re+br("if",mt(de[0].test))+vt+Zr(de[0].body,se+1,H);for(let pt=1;pt<de.length;++pt)Fe+=vt+re+br("elif",mt(de[pt].test))+vt+Zr(de[pt].body,se+1,H);return Pe&&Pe.alternate.length>0&&(Fe+=vt+re+br("else")+vt+Zr(Pe.alternate,se+1,H)),Fe+=vt+re+br("endif"),Fe}function Os(N,se,H){const re=H.repeat(se);let de="";if(N.iterable.type==="SelectExpression"){const Fe=N.iterable;de=`${mt(Fe.lhs)} if ${mt(Fe.test)}`}else de=mt(N.iterable);let Pe=re+br("for",mt(N.loopvar),"in",de)+vt+Zr(N.body,se+1,H);return N.defaultBlock.length>0&&(Pe+=vt+re+br("else")+vt+Zr(N.defaultBlock,se+1,H)),Pe+=vt+re+br("endfor"),Pe}function an(N,se,H){const re=H.repeat(se),de=mt(N.assignee),Pe=N.value?mt(N.value):"",Fe=re+br("set",`${de}${N.value?" = "+Pe:""}`);return N.body.length===0?Fe:Fe+vt+Zr(N.body,se+1,H)+vt+re+br("endset")}function oa(N,se,H){const re=H.repeat(se),de=N.args.map(mt).join(", ");return re+br("macro",`${N.name.value}(${de})`)+vt+Zr(N.body,se+1,H)+vt+re+br("endmacro")}function He(N,se,H){const re=H.repeat(se),de=N.callerArgs&&N.callerArgs.length>0?`(${N.callerArgs.map(mt).join(", ")})`:"",Pe=mt(N.call);let Fe=re+br(`call${de}`,Pe)+vt;return Fe+=Zr(N.body,se+1,H)+vt,Fe+=re+br("endcall"),Fe}function Xt(N,se,H){const re=H.repeat(se),de=N.filter.type==="Identifier"?N.filter.value:mt(N.filter);let Pe=re+br("filter",de)+vt;return Pe+=Zr(N.body,se+1,H)+vt,Pe+=re+br("endfilter"),Pe}function mt(N,se=-1){switch(N.type){case"SpreadExpression":return`*${mt(N.argument)}`;case"Identifier":return N.value;case"IntegerLiteral":return`${N.value}`;case"FloatLiteral":return`${N.value}`;case"StringLiteral":return JSON.stringify(N.value);case"BinaryExpression":{const H=N,re=Br(H),de=mt(H.left,re),Pe=mt(H.right,re+1),Fe=`${de} ${H.operator.value} ${Pe}`;return re<se?`(${Fe})`:Fe}case"UnaryExpression":{const H=N;return H.operator.value+(H.operator.value==="not"?" ":"")+mt(H.argument,1/0)}case"CallExpression":{const H=N,re=H.args.map(mt).join(", ");return`${mt(H.callee)}(${re})`}case"MemberExpression":{const H=N;let re=mt(H.object);["Identifier","MemberExpression","CallExpression","StringLiteral","IntegerLiteral","FloatLiteral","ArrayLiteral","TupleLiteral","ObjectLiteral"].includes(H.object.type)||(re=`(${re})`);let de=mt(H.property);return!H.computed&&H.property.type!=="Identifier"&&(de=`(${de})`),H.computed?`${re}[${de}]`:`${re}.${de}`}case"FilterExpression":{const H=N,re=mt(H.operand,1/0);return H.filter.type==="CallExpression"?`${re} | ${mt(H.filter)}`:`${re} | ${H.filter.value}`}case"SelectExpression":{const H=N;return`${mt(H.lhs)} if ${mt(H.test)}`}case"TestExpression":{const H=N;return`${mt(H.operand)} is${H.negate?" not":""} ${H.test.value}`}case"ArrayLiteral":case"TupleLiteral":{const H=N.value.map(mt),re=N.type==="ArrayLiteral"?"[]":"()";return`${re[0]}${H.join(", ")}${re[1]}`}case"ObjectLiteral":return`{${Array.from(N.value.entries()).map(([re,de])=>`${mt(re)}: ${mt(de)}`).join(", ")}}`;case"SliceExpression":{const H=N,re=H.start?mt(H.start):"",de=H.stop?mt(H.stop):"",Pe=H.step?`:${mt(H.step)}`:"";return`${re}:${de}${Pe}`}case"KeywordArgumentExpression":{const H=N;return`${H.key.value}=${mt(H.value)}`}case"Ternary":{const H=N,re=`${mt(H.trueExpr)} if ${mt(H.condition,0)} else ${mt(H.falseExpr)}`;return se>-1?`(${re})`:re}default:throw new Error(`Unknown expression type: ${N.type}`)}}var Kt=class{constructor(N){le(this,"parsed");const se=p(N,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=ne(se)}render(N){const se=new Re;if(Qe(se),N)for(const[de,Pe]of Object.entries(N))se.set(de,Pe);return new Pt(se).run(this.parsed).value}format(N){return Pn(this.parsed,(N==null?void 0:N.indent)||"	")}}},"./src/backends/onnx.js":(e,t,r)=>{var n;r.r(t),r.d(t,{Tensor:()=>i.Tensor,createInferenceSession:()=>v,deviceToExecutionProviders:()=>h,isONNXProxy:()=>C,isONNXTensor:()=>w,runInferenceSession:()=>y});var s=r("./src/env.js"),a=r("?2ce3"),o=r("onnxruntime-web"),i=r("onnxruntime-common");const l=Object.freeze({auto:null,gpu:null,cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:{name:"webnn",deviceType:"cpu"},"webnn-npu":{name:"webnn",deviceType:"npu"},"webnn-gpu":{name:"webnn",deviceType:"gpu"},"webnn-cpu":{name:"webnn",deviceType:"cpu"}}),d=[];let p,u;const m=Symbol.for("onnxruntime");if(m in globalThis)u=globalThis[m];else if(s.apis.IS_NODE_ENV){switch(u=a??(n||(n=r.t(a,2))),process.platform){case"win32":d.push("dml");break;case"linux":process.arch==="x64"&&d.push("cuda");break}d.push("cpu"),p=["cpu"]}else u=o,s.apis.IS_WEBNN_AVAILABLE&&d.push("webnn-npu","webnn-gpu","webnn-cpu","webnn"),s.apis.IS_WEBGPU_AVAILABLE&&d.push("webgpu"),d.push("wasm"),p=["wasm"];const f=u.InferenceSession;function h(E=null){if(!E)return p;switch(E){case"auto":return d;case"gpu":return d.filter(P=>["webgpu","cuda","dml","webnn-gpu"].includes(P))}if(d.includes(E))return[l[E]??E];throw new Error(`Unsupported device: "${E}". Should be one of: ${d.join(", ")}.`)}let _=null;async function v(E,P,I){_&&await _;const $=f.create(E,P);_??(_=$);const z=await $;return z.config=I,z}let g=Promise.resolve();const x=s.apis.IS_BROWSER_ENV||s.apis.IS_WEBWORKER_ENV;async function y(E,P){const I=()=>E.run(P);return await(x?g=g.then(I):I())}function w(E){return E instanceof u.Tensor}const b=u==null?void 0:u.env;b!=null&&b.wasm&&(!(typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope)&&!b.wasm.wasmPaths&&(b.wasm.wasmPaths=`https://cdn.jsdelivr.net/npm/@huggingface/transformers@${s.env.version}/dist/`),b.wasm.proxy=!1),b!=null&&b.webgpu&&(b.webgpu.powerPreference="high-performance");function C(){var E;return(E=b==null?void 0:b.wasm)==null?void 0:E.proxy}s.env.backends.onnx=b},"./src/base/feature_extraction_utils.js":(e,t,r)=>{r.r(t),r.d(t,{FeatureExtractor:()=>o,validate_audio_inputs:()=>i});var n=r("./src/utils/constants.js"),s=r("./src/utils/generic.js"),a=r("./src/utils/hub.js");class o extends s.Callable{constructor(d){super(),this.config=d}static async from_pretrained(d,p={}){const u=await(0,a.getModelJSON)(d,n.FEATURE_EXTRACTOR_NAME,!0,p);return new this(u)}}function i(l,d){var p;if(!(l instanceof Float32Array||l instanceof Float64Array))throw new Error(`${d} expects input to be a Float32Array or a Float64Array, but got ${((p=l==null?void 0:l.constructor)==null?void 0:p.name)??typeof l} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}},"./src/base/image_processors_utils.js":(e,t,r)=>{r.r(t),r.d(t,{ImageProcessor:()=>w,center_to_corners_format:()=>u,post_process_instance_segmentation:()=>y,post_process_object_detection:()=>m,post_process_panoptic_segmentation:()=>x,post_process_semantic_segmentation:()=>f});var n=r("./src/utils/generic.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/maths.js");r("./src/utils/image.js");var o=r("./src/utils/core.js"),i=r("./src/utils/hub.js"),l=r("./src/utils/constants.js");function d(b,C,E=0,P=null){const I=b/C;let $=(0,a.bankers_round)(I)*C;return P!==null&&$>P&&($=Math.floor(I)*C),$<E&&($=Math.ceil(I)*C),$}function p([b,C],E){return[Math.max(Math.floor(b/E),1)*E,Math.max(Math.floor(C/E),1)*E]}function u([b,C,E,P]){return[b-E/2,C-P/2,b+E/2,C+P/2]}function m(b,C=.5,E=null,P=!1){const I=b.logits,$=b.pred_boxes,[z,D,B]=I.dims;if(E!==null&&E.length!==z)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let U=[];for(let q=0;q<z;++q){let X=E!==null?E[q]:null,Z={boxes:[],classes:[],scores:[]},K=I[q],ee=$[q];for(let oe=0;oe<D;++oe){let ae=K[oe],G=[],R;if(P){R=ae.sigmoid().data;for(let Q=0;Q<R.length;++Q)R[Q]>C&&G.push(Q)}else{let Q=(0,a.max)(ae.data)[1];if(Q===B-1||(R=(0,a.softmax)(ae.data),R[Q]<C))continue;G.push(Q)}for(const Q of G){let ce=ee[oe].data;ce=u(ce),X!==null&&(ce=ce.map((ne,me)=>ne*X[(me+1)%2])),Z.boxes.push(ce),Z.classes.push(Q),Z.scores.push(R[Q])}}U.push(Z)}return U}function f(b,C=null){const E=b.logits,P=E.dims[0];if(C!==null&&C.length!==P)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const I=[];for(let $=0;$<P;++$){const z=C!==null?C[$]:null;let D=E[$];z!==null&&(D=(0,s.interpolate)(D,z,"bilinear",!1));const[B,U]=z??D.dims.slice(-2),q=new s.Tensor("int32",new Int32Array(B*U),[B,U]),X=D[0].data,Z=q.data;for(let oe=1;oe<D.dims[0];++oe){const ae=D[oe].data;for(let G=0;G<ae.length;++G)ae[G]>X[G]&&(X[G]=ae[G],Z[G]=oe)}const K=new Array(D.dims[0]);for(let oe=0;oe<Z.length;++oe){const ae=Z[oe];K[ae]=ae}const ee=K.filter(oe=>oe!==void 0);I.push({segmentation:q,labels:ee})}return I}function h(b,C,E,P){const I=[],$=[],z=[];for(let D=0;D<b.dims[0];++D){const B=b[D],U=C[D],q=(0,a.max)(B.data)[1];if(q===P)continue;const Z=(0,a.softmax)(B.data)[q];Z>E&&(I.push(U),$.push(Z),z.push(q))}return[I,$,z]}function _(b,C,E,P=.5,I=.8){const $=[];let z=0,D=0;const B=C[E].data;for(let q=0;q<b.length;++q)b[q]===E&&($.push(q),++z),B[q]>=P&&++D;let U=z>0&&D>0;return U&&(U=z/D>I),[U,$]}function v(b,C,E,P,I,$=null,z=null){const[D,B]=z??b[0].dims,U=new s.Tensor("int32",new Int32Array(D*B),[D,B]),q=[];if(z!==null)for(let oe=0;oe<b.length;++oe)b[oe]=(0,s.interpolate)(b[oe],z,"bilinear",!1);const X=new Int32Array(b[0].data.length),Z=new Float32Array(b[0].data.length);for(let oe=0;oe<b.length;++oe){let ae=C[oe];const G=b[oe].data;for(let R=0;R<G.length;++R)G[R]*=ae,G[R]>Z[R]&&(X[R]=oe,Z[R]=G[R])}let K=0;const ee=U.data;for(let oe=0;oe<E.length;++oe){const ae=E[oe],[G,R]=_(X,b,oe,P,I);if(G){++K;for(const Q of R)ee[Q]=K;q.push({id:K,label_id:ae,score:C[oe]})}}return[U,q]}function g(b,C,E=28,P=56*56,I=14*14*4*1280){if(b<E||C<E)throw new Error(`height:${b} or width:${C} must be larger than factor:${E}`);if(Math.max(b,C)/Math.min(b,C)>200)throw new Error(`absolute aspect ratio must be smaller than 200, got ${Math.max(b,C)/Math.min(b,C)}`);let $=Math.round(b/E)*E,z=Math.round(C/E)*E;if($*z>I){const D=Math.sqrt(b*C/I);$=Math.floor(b/D/E)*E,z=Math.floor(C/D/E)*E}else if($*z<P){const D=Math.sqrt(P/(b*C));$=Math.ceil(b*D/E)*E,z=Math.ceil(C*D/E)*E}return[$,z]}function x(b,C=.5,E=.5,P=.8,I=null,$=null){I===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),I=new Set);const z=b.class_queries_logits??b.logits,B=(b.masks_queries_logits??b.pred_masks).sigmoid();let[U,q,X]=z.dims;if(X-=1,$!==null&&$.length!==U)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Z=[];for(let K=0;K<U;++K){let ee=$!==null?$[K]:null,oe=z[K],ae=B[K],[G,R,Q]=h(oe,ae,C,X);if(Q.length===0){let[me,we]=ee??ae.dims.slice(-2),Ne=new s.Tensor("int32",new Int32Array(me*we).fill(-1),[me,we]);Z.push({segmentation:Ne,segments_info:[]});continue}let[ce,ne]=v(G,R,Q,E,P,I,ee);Z.push({segmentation:ce,segments_info:ne})}return Z}function y(b,C=.5,E=null){throw new Error("`post_process_instance_segmentation` is not yet implemented.")}class w extends n.Callable{constructor(C){super(),this.image_mean=C.image_mean??C.mean,this.image_std=C.image_std??C.std,this.resample=C.resample??2,this.do_rescale=C.do_rescale??!0,this.rescale_factor=C.rescale_factor??1/255,this.do_normalize=C.do_normalize,this.do_thumbnail=C.do_thumbnail,this.size=C.size??C.image_size,this.do_resize=C.do_resize??this.size!==void 0,this.size_divisibility=C.size_divisibility??C.size_divisor,this.do_center_crop=C.do_center_crop,this.crop_size=C.crop_size,this.do_convert_rgb=C.do_convert_rgb??!0,this.do_crop_margin=C.do_crop_margin,this.pad_size=C.pad_size,this.do_pad=C.do_pad,this.min_pixels=C.min_pixels,this.max_pixels=C.max_pixels,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=C.do_flip_channel_order??!1,this.config=C}async thumbnail(C,E,P=2){const I=C.height,$=C.width,z=E.height,D=E.width;let B=Math.min(I,z),U=Math.min($,D);return B===I&&U===$?C:(I>$?U=Math.floor($*B/I):$>I&&(B=Math.floor(I*U/$)),await C.resize(U,B,{resample:P}))}async crop_margin(C,E=200){const P=C.clone().grayscale(),I=(0,a.min)(P.data)[0],z=(0,a.max)(P.data)[0]-I;if(z===0)return C;const D=E/255;let B=P.width,U=P.height,q=0,X=0;const Z=P.data;for(let K=0;K<P.height;++K){const ee=K*P.width;for(let oe=0;oe<P.width;++oe)(Z[ee+oe]-I)/z<D&&(B=Math.min(B,oe),U=Math.min(U,K),q=Math.max(q,oe),X=Math.max(X,K))}return C=await C.crop([B,U,q,X]),C}pad_image(C,E,P,{mode:I="constant",center:$=!1,constant_values:z=0}={}){const[D,B,U]=E;let q,X;if(typeof P=="number"?(q=P,X=P):P==="square"?q=X=Math.max(D,B):(q=P.width,X=P.height),q!==B||X!==D){const Z=new Float32Array(q*X*U);if(Array.isArray(z))for(let oe=0;oe<Z.length;++oe)Z[oe]=z[oe%U];else z!==0&&Z.fill(z);const[K,ee]=$?[Math.floor((q-B)/2),Math.floor((X-D)/2)]:[0,0];for(let oe=0;oe<D;++oe){const ae=(oe+ee)*q,G=oe*B;for(let R=0;R<B;++R){const Q=(ae+R+K)*U,ce=(G+R)*U;for(let ne=0;ne<U;++ne)Z[Q+ne]=C[ce+ne]}}if(I==="symmetric"){if($)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const oe=D-1,ae=B-1;for(let G=0;G<X;++G){const R=G*q,Q=(0,o.calculateReflectOffset)(G,oe)*B;for(let ce=0;ce<q;++ce){if(G<D&&ce<B)continue;const ne=(R+ce)*U,me=(Q+(0,o.calculateReflectOffset)(ce,ae))*U;for(let we=0;we<U;++we)Z[ne+we]=C[me+we]}}}C=Z,E=[X,q,U]}return[C,E]}rescale(C){for(let E=0;E<C.length;++E)C[E]=this.rescale_factor*C[E]}get_resize_output_image_size(C,E){const[P,I]=C.size;let $,z;if(this.do_thumbnail){const{height:D,width:B}=E;$=Math.min(D,B)}else Number.isInteger(E)?($=E,z=this.config.max_size??$):E!==void 0&&($=E.shortest_edge,z=E.longest_edge);if($!==void 0||z!==void 0){const D=$===void 0?1:Math.max($/P,$/I),B=P*D,U=I*D,q=z===void 0?1:Math.min(z/B,z/U);let X=Math.floor(Number((B*q).toFixed(2))),Z=Math.floor(Number((U*q).toFixed(2)));return this.size_divisibility!==void 0&&([X,Z]=p([X,Z],this.size_divisibility)),[X,Z]}else if(E!==void 0&&E.width!==void 0&&E.height!==void 0){let D=E.width,B=E.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let U=B/I,q=D/P;Math.abs(1-q)<Math.abs(1-U)?U=q:q=U,B=d(U*I,this.config.ensure_multiple_of),D=d(q*P,this.config.ensure_multiple_of)}return[D,B]}else{if(this.size_divisibility!==void 0)return p([P,I],this.size_divisibility);if(this.min_pixels!==void 0&&this.max_pixels!==void 0){const D=this.config.patch_size*this.config.merge_size;return g(I,P,D,this.min_pixels,this.max_pixels)}else throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(E)}`)}}async resize(C){const[E,P]=this.get_resize_output_image_size(C,this.size);return await C.resize(E,P,{resample:this.resample})}async preprocess(C,{do_normalize:E=null,do_pad:P=null,do_convert_rgb:I=null,do_convert_grayscale:$=null,do_flip_channel_order:z=null}={}){this.do_crop_margin&&(C=await this.crop_margin(C));const[D,B]=C.size;if(I??this.do_convert_rgb?C=C.rgb():$&&(C=C.grayscale()),this.do_resize&&(C=await this.resize(C)),this.do_thumbnail&&(C=await this.thumbnail(C,this.size,this.resample)),this.do_center_crop){let K,ee;Number.isInteger(this.crop_size)?(K=this.crop_size,ee=this.crop_size):(K=this.crop_size.width,ee=this.crop_size.height),C=await C.center_crop(K,ee)}const U=[C.height,C.width];let q=Float32Array.from(C.data),X=[C.height,C.width,C.channels];if(this.do_rescale&&this.rescale(q),E??this.do_normalize){let K=this.image_mean;Array.isArray(this.image_mean)||(K=new Array(C.channels).fill(K));let ee=this.image_std;if(Array.isArray(this.image_std)||(ee=new Array(C.channels).fill(ee)),K.length!==C.channels||ee.length!==C.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${K.length}) and \`image_std\` (${ee.length}) must match the number of channels in the image (${C.channels}).`);for(let oe=0;oe<q.length;oe+=C.channels)for(let ae=0;ae<C.channels;++ae)q[oe+ae]=(q[oe+ae]-K[ae])/ee[ae]}if(P??this.do_pad){if(this.pad_size)[q,X]=this.pad_image(q,[C.height,C.width,C.channels],this.pad_size);else if(this.size_divisibility){const[K,ee]=p([X[1],X[0]],this.size_divisibility);[q,X]=this.pad_image(q,X,{width:K,height:ee})}}if(z??this.do_flip_channel_order){if(X[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let K=0;K<q.length;K+=3){const ee=q[K];q[K]=q[K+2],q[K+2]=ee}}const Z=new s.Tensor("float32",q,X).permute(2,0,1);return{original_size:[B,D],reshaped_input_size:U,pixel_values:Z}}async _call(C,...E){Array.isArray(C)||(C=[C]);const P=await Promise.all(C.map($=>this.preprocess($)));return{pixel_values:(0,s.stack)(P.map($=>$.pixel_values),0),original_sizes:P.map($=>$.original_size),reshaped_input_sizes:P.map($=>$.reshaped_input_size)}}static async from_pretrained(C,E={}){const P=await(0,i.getModelJSON)(C,l.IMAGE_PROCESSOR_NAME,!0,E);return new this(P)}}},"./src/base/processing_utils.js":(e,t,r)=>{r.r(t),r.d(t,{Processor:()=>o});var n=r("./src/utils/constants.js"),s=r("./src/utils/generic.js"),a=r("./src/utils/hub.js");class o extends s.Callable{constructor(l,d,p){super(),this.config=l,this.components=d,this.chat_template=p}get image_processor(){return this.components.image_processor}get tokenizer(){return this.components.tokenizer}get feature_extractor(){return this.components.feature_extractor}apply_chat_template(l,d={}){if(!this.tokenizer)throw new Error("Unable to apply chat template without a tokenizer.");return this.tokenizer.apply_chat_template(l,{tokenize:!1,chat_template:this.chat_template??void 0,...d})}batch_decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.batch_decode(...l)}decode(...l){if(!this.tokenizer)throw new Error("Unable to decode without a tokenizer.");return this.tokenizer.decode(...l)}async _call(l,...d){for(const p of[this.image_processor,this.feature_extractor,this.tokenizer])if(p)return p(l,...d);throw new Error("No image processor, feature extractor, or tokenizer found.")}static async from_pretrained(l,d={}){const[p,u,m]=await Promise.all([this.uses_processor_config?(0,a.getModelJSON)(l,n.PROCESSOR_NAME,!0,d):{},Promise.all(this.classes.filter(f=>f in this).map(async f=>{const h=await this[f].from_pretrained(l,d);return[f.replace(/_class$/,""),h]})).then(Object.fromEntries),this.uses_chat_template_file?(0,a.getModelText)(l,n.CHAT_TEMPLATE_NAME,!0,d):null]);return new this(p,u,m)}}le(o,"classes",["image_processor_class","tokenizer_class","feature_extractor_class"]),le(o,"uses_processor_config",!1),le(o,"uses_chat_template_file",!1)},"./src/configs.js":(e,t,r)=>{r.r(t),r.d(t,{AutoConfig:()=>p,PretrainedConfig:()=>d,getCacheShapes:()=>i});var n=r("./src/utils/core.js"),s=r("./src/utils/hub.js");async function a(u,m){return await(0,s.getModelJSON)(u,"config.json",!0,m)}function o(u){const m={};let f={};switch(u.model_type){case"llava":case"paligemma":case"gemma3":case"florence2":case"llava_onevision":case"idefics3":case"ultravox":case"voxtral":case"smolvlm":case"gemma3n":f=o(u.text_config);break;case"moondream1":f=o(u.phi_config);break;case"musicgen":f=o(u.decoder);break;case"multi_modality":f=o(u.language_config);break;case"gpt2":case"gptj":case"jais":case"codegen":case"gpt_bigcode":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="n_embd";break;case"gpt_neox":case"stablelm":case"opt":case"falcon":case"modernbert-decoder":m.num_heads="num_attention_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size";break;case"llama":case"llama4_text":case"nanochat":case"arcee":case"lfm2":case"smollm3":case"olmo":case"olmo2":case"mobilellm":case"granite":case"granitemoehybrid":case"cohere":case"mistral":case"starcoder2":case"qwen2":case"qwen2_vl":case"phi":case"phi3":case"phi3_v":case"llava_qwen2":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.hidden_size="hidden_size",m.num_attention_heads="num_attention_heads",m.dim_kv="head_dim";break;case"qwen3":case"gemma":case"gemma2":case"vaultgemma":case"gemma3_text":case"gemma3n_text":case"glm":case"helium":case"ernie4_5":m.num_heads="num_key_value_heads",m.num_layers="num_hidden_layers",m.dim_kv="head_dim";break;case"openelm":m.num_heads="num_kv_heads",m.num_layers="num_transformer_layers",m.dim_kv="head_dim";break;case"gpt_neo":case"donut-swin":m.num_heads="num_heads",m.num_layers="num_layers",m.hidden_size="hidden_size";break;case"bloom":m.num_heads="n_head",m.num_layers="n_layer",m.hidden_size="hidden_size";break;case"mpt":m.num_heads="n_heads",m.num_layers="n_layers",m.hidden_size="d_model";break;case"exaone":m.num_heads="num_key_value_heads",m.num_layers="num_layers",m.dim_kv="head_dim",m.num_attention_heads="num_attention_heads";break;case"t5":case"mt5":case"longt5":m.num_decoder_layers="num_decoder_layers",m.num_decoder_heads="num_heads",m.decoder_dim_kv="d_kv",m.num_encoder_layers="num_layers",m.num_encoder_heads="num_heads",m.encoder_dim_kv="d_kv";break;case"bart":case"mbart":case"marian":case"whisper":case"lite-whisper":case"m2m_100":case"blenderbot":case"blenderbot-small":case"florence2_language":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="d_model",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="d_model";break;case"speecht5":m.num_decoder_layers="decoder_layers",m.num_decoder_heads="decoder_attention_heads",m.decoder_hidden_size="hidden_size",m.num_encoder_layers="encoder_layers",m.num_encoder_heads="encoder_attention_heads",m.encoder_hidden_size="hidden_size";break;case"trocr":m.num_encoder_layers=m.num_decoder_layers="decoder_layers",m.num_encoder_heads=m.num_decoder_heads="decoder_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="d_model";break;case"musicgen_decoder":m.num_encoder_layers=m.num_decoder_layers="num_hidden_layers",m.num_encoder_heads=m.num_decoder_heads="num_attention_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"moonshine":m.num_decoder_layers="decoder_num_hidden_layers",m.num_decoder_heads="decoder_num_key_value_heads",m.num_encoder_layers="encoder_num_hidden_layers",m.num_encoder_heads="encoder_num_key_value_heads",m.encoder_hidden_size=m.decoder_hidden_size="hidden_size";break;case"vision-encoder-decoder":const _=o(u.decoder),v="num_decoder_layers"in _,g=(0,n.pick)(u,["model_type","is_encoder_decoder"]);return v?(g.num_decoder_layers=_.num_decoder_layers,g.num_decoder_heads=_.num_decoder_heads,g.decoder_hidden_size=_.decoder_hidden_size,g.num_encoder_layers=_.num_encoder_layers,g.num_encoder_heads=_.num_encoder_heads,g.encoder_hidden_size=_.encoder_hidden_size):(g.num_layers=_.num_layers,g.num_heads=_.num_heads,g.hidden_size=_.hidden_size),g}const h={...f,...(0,n.pick)(u,["model_type","multi_query","is_encoder_decoder"])};for(const _ in m)h[_]=u[m[_]];return h}function i(u,m){if(u.model_type==="lfm2"){const f=(m==null?void 0:m.prefix)??"past_key_values",h=f==="present"?"present":"past",_={},{layer_types:v,num_attention_heads:g,num_key_value_heads:x,hidden_size:y,conv_L_cache:w}=u,b=y/g,C=(m==null?void 0:m.batch_size)??1;for(let E=0;E<v.length;++E)if(v[E]==="full_attention")for(const P of["key","value"])_[`${f}.${E}.${P}`]=[C,x,0,b];else if(v[E]==="conv")_[`${h}_conv.${E}`]=[C,y,w];else throw new Error(`Unsupported layer type: ${v[E]}`);return _}return l(u,m)}function l(u,{prefix:m="past_key_values",batch_size:f=1}={}){const h={},_=u.normalized_config;if(_.is_encoder_decoder&&"num_encoder_heads"in _&&"num_decoder_heads"in _){const v=_.encoder_dim_kv??_.encoder_hidden_size/_.num_encoder_heads,g=_.decoder_dim_kv??_.decoder_hidden_size/_.num_decoder_heads,x=[f,_.num_encoder_heads,0,v],y=[f,_.num_decoder_heads,0,g];for(let w=0;w<_.num_decoder_layers;++w)h[`${m}.${w}.encoder.key`]=x,h[`${m}.${w}.encoder.value`]=x,h[`${m}.${w}.decoder.key`]=y,h[`${m}.${w}.decoder.value`]=y}else{const v=_.num_heads,g=_.num_layers,x=_.dim_kv??_.hidden_size/(_.num_attention_heads??v);if(_.model_type==="falcon"){const y=[f*v,0,x];for(let w=0;w<g;++w)h[`${m}.${w}.key`]=y,h[`${m}.${w}.value`]=y}else if(_.multi_query){const y=[f*v,0,2*x];for(let w=0;w<g;++w)h[`${m}.${w}.key_value`]=y}else if(_.model_type==="bloom"){const y=[f*v,x,0],w=[f*v,0,x];for(let b=0;b<g;++b)h[`${m}.${b}.key`]=y,h[`${m}.${b}.value`]=w}else if(_.model_type==="openelm")for(let y=0;y<g;++y){const w=[f,v[y],0,x];h[`${m}.${y}.key`]=w,h[`${m}.${y}.value`]=w}else{const y=[f,v,0,x];for(let w=0;w<g;++w)h[`${m}.${w}.key`]=y,h[`${m}.${w}.value`]=y}}return h}class d{constructor(m){le(this,"model_type",null);le(this,"is_encoder_decoder",!1);le(this,"max_position_embeddings");le(this,"transformers.js_config");Object.assign(this,m),this.normalized_config=o(this)}static async from_pretrained(m,{progress_callback:f=null,config:h=null,cache_dir:_=null,local_files_only:v=!1,revision:g="main"}={}){h&&!(h instanceof d)&&(h=new d(h));const x=h??await a(m,{progress_callback:f,config:h,cache_dir:_,local_files_only:v,revision:g});return new this(x)}}class p{static async from_pretrained(...m){return d.from_pretrained(...m)}}},"./src/env.js":(e,t,r)=>{var I,$;r.r(t),r.d(t,{apis:()=>g,env:()=>E});var n=r("?db59"),s=r("?383f"),a=r("?fa4b");const o="3.8.0",i=typeof window<"u"&&typeof window.document<"u",l=typeof self<"u"&&["DedicatedWorkerGlobalScope","ServiceWorkerGlobalScope","SharedWorkerGlobalScope"].includes((I=self.constructor)==null?void 0:I.name),d=typeof self<"u"&&"caches"in self,p=typeof navigator<"u"&&"gpu"in navigator,u=typeof navigator<"u"&&"ml"in navigator,m=typeof process<"u",f=m&&(($=process==null?void 0:process.release)==null?void 0:$.name)==="node",h=!P(n),_=!P(s),v=typeof globalThis.Deno<"u",g=Object.freeze({IS_BROWSER_ENV:i,IS_WEBWORKER_ENV:l,IS_WEB_CACHE_AVAILABLE:d,IS_WEBGPU_AVAILABLE:p,IS_WEBNN_AVAILABLE:u,IS_PROCESS_AVAILABLE:m,IS_NODE_ENV:f,IS_FS_AVAILABLE:h,IS_PATH_AVAILABLE:_}),x=h&&_;let y="./";if(x){const z=Object(import.meta).url;z?y=s.dirname(s.dirname(a.fileURLToPath(z))):typeof __dirname<"u"&&(y=s.dirname(__dirname))}const w=x?s.join(y,"/.cache/"):null,b="/models/",C=x?s.join(y,b):b,E={version:o,backends:{onnx:{}},allowRemoteModels:!0,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",allowLocalModels:!(i||l),localModelPath:C,useFS:h,useBrowserCache:d&&!v,useFSCache:h,cacheDir:w,useCustomCache:!1,customCache:null};function P(z){return Object.keys(z).length===0}},"./src/generation/configuration_utils.js":(e,t,r)=>{r.r(t),r.d(t,{GenerationConfig:()=>s});var n=r("./src/utils/core.js");class s{constructor(o){le(this,"max_length",20);le(this,"max_new_tokens",null);le(this,"min_length",0);le(this,"min_new_tokens",null);le(this,"early_stopping",!1);le(this,"max_time",null);le(this,"do_sample",!1);le(this,"num_beams",1);le(this,"num_beam_groups",1);le(this,"penalty_alpha",null);le(this,"use_cache",!0);le(this,"temperature",1);le(this,"top_k",50);le(this,"top_p",1);le(this,"typical_p",1);le(this,"epsilon_cutoff",0);le(this,"eta_cutoff",0);le(this,"diversity_penalty",0);le(this,"repetition_penalty",1);le(this,"encoder_repetition_penalty",1);le(this,"length_penalty",1);le(this,"no_repeat_ngram_size",0);le(this,"bad_words_ids",null);le(this,"force_words_ids",null);le(this,"renormalize_logits",!1);le(this,"constraints",null);le(this,"forced_bos_token_id",null);le(this,"forced_eos_token_id",null);le(this,"remove_invalid_values",!1);le(this,"exponential_decay_length_penalty",null);le(this,"suppress_tokens",null);le(this,"streamer",null);le(this,"begin_suppress_tokens",null);le(this,"forced_decoder_ids",null);le(this,"guidance_scale",null);le(this,"num_return_sequences",1);le(this,"output_attentions",!1);le(this,"output_hidden_states",!1);le(this,"output_scores",!1);le(this,"return_dict_in_generate",!1);le(this,"pad_token_id",null);le(this,"bos_token_id",null);le(this,"eos_token_id",null);le(this,"encoder_no_repeat_ngram_size",0);le(this,"decoder_start_token_id",null);le(this,"generation_kwargs",{});Object.assign(this,(0,n.pick)(o,Object.getOwnPropertyNames(this)))}}},"./src/generation/logits_process.js":(e,t,r)=>{r.r(t),r.d(t,{ClassifierFreeGuidanceLogitsProcessor:()=>g,ForcedBOSTokenLogitsProcessor:()=>l,ForcedEOSTokenLogitsProcessor:()=>d,LogitsProcessor:()=>a,LogitsProcessorList:()=>i,LogitsWarper:()=>o,MinLengthLogitsProcessor:()=>h,MinNewTokensLengthLogitsProcessor:()=>_,NoBadWordsLogitsProcessor:()=>v,NoRepeatNGramLogitsProcessor:()=>m,RepetitionPenaltyLogitsProcessor:()=>f,SuppressTokensAtBeginLogitsProcessor:()=>p,TemperatureLogitsWarper:()=>x,TopKLogitsWarper:()=>w,TopPLogitsWarper:()=>y,WhisperTimeStampLogitsProcessor:()=>u});var n=r("./src/utils/generic.js");r("./src/utils/tensor.js");var s=r("./src/utils/maths.js");class a extends n.Callable{_call(C,E){throw Error("`_call` should be implemented in a subclass")}}class o extends n.Callable{_call(C,E){throw Error("`_call` should be implemented in a subclass")}}class i extends n.Callable{constructor(){super(),this.processors=[]}push(C){this.processors.push(C)}extend(C){this.processors.push(...C)}_call(C,E){let P=E;for(const I of this.processors)P=I(C,P);return P}[Symbol.iterator](){return this.processors.values()}}class l extends a{constructor(C){super(),this.bos_token_id=C}_call(C,E){for(let P=0;P<C.length;++P)if(C[P].length===1){const I=E[P].data;I.fill(-1/0),I[this.bos_token_id]=0}return E}}class d extends a{constructor(C,E){super(),this.max_length=C,this.eos_token_id=Array.isArray(E)?E:[E]}_call(C,E){for(let P=0;P<C.length;++P)if(C[P].length===this.max_length-1){const I=E[P].data;I.fill(-1/0);for(const $ of this.eos_token_id)I[$]=0}return E}}class p extends a{constructor(C,E){super(),this.begin_suppress_tokens=C,this.begin_index=E}_call(C,E){for(let P=0;P<C.length;++P)if(C[P].length===this.begin_index){const I=E[P].data;for(const $ of this.begin_suppress_tokens)I[$]=-1/0}return E}}class u extends a{constructor(C,E){super(),this.eos_token_id=Array.isArray(C.eos_token_id)?C.eos_token_id[0]:C.eos_token_id,this.no_timestamps_token_id=C.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=E.length,E.at(-1)===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=C.max_initial_timestamp_index}_call(C,E){for(let P=0;P<C.length;++P){const I=E[P].data;if(I[this.no_timestamps_token_id]=-1/0,C[P].length===this.begin_index-1){I.fill(-1/0),I[this.timestamp_begin]=0;continue}const $=C[P].slice(this.begin_index),z=$.length>=1&&$[$.length-1]>=this.timestamp_begin,D=$.length<2||$[$.length-2]>=this.timestamp_begin;if(z&&(D?I.subarray(this.timestamp_begin).fill(-1/0):I.subarray(0,this.eos_token_id).fill(-1/0)),C[P].length===this.begin_index&&this.max_initial_timestamp_index!==null){const X=this.timestamp_begin+this.max_initial_timestamp_index;I.subarray(X+1).fill(-1/0)}const B=(0,s.log_softmax)(I),U=Math.log(B.subarray(this.timestamp_begin).map(Math.exp).reduce((X,Z)=>X+Z)),q=(0,s.max)(B.subarray(0,this.timestamp_begin))[0];U>q&&I.subarray(0,this.timestamp_begin).fill(-1/0)}return E}}class m extends a{constructor(C){super(),this.no_repeat_ngram_size=C}getNgrams(C){const E=C.length,P=[];for(let $=0;$<E+1-this.no_repeat_ngram_size;++$){const z=[];for(let D=0;D<this.no_repeat_ngram_size;++D)z.push(C[$+D]);P.push(z.map(Number))}const I=new Map;for(const $ of P){const z=$.slice(0,$.length-1),D=JSON.stringify(z),B=I.get(D)??[];B.push($[$.length-1]),I.set(D,B)}return I}getGeneratedNgrams(C,E){const P=E.slice(E.length+1-this.no_repeat_ngram_size,E.length);return C.get(JSON.stringify(P.map(Number)))??[]}calcBannedNgramTokens(C){const E=[];if(C.length+1<this.no_repeat_ngram_size)return E;{const P=this.getNgrams(C);return this.getGeneratedNgrams(P,C)}}_call(C,E){for(let P=0;P<C.length;++P){const I=E[P].data,$=this.calcBannedNgramTokens(C[P]);for(const z of $)I[z]=-1/0}return E}}class f extends a{constructor(C){super(),this.penalty=C}_call(C,E){for(let P=0;P<C.length;++P){const I=E[P].data;for(const $ of new Set(C[P])){const z=Number($);I[z]<0?I[z]*=this.penalty:I[z]/=this.penalty}}return E}}class h extends a{constructor(C,E){super(),this.min_length=C,this.eos_token_id=Array.isArray(E)?E:[E]}_call(C,E){for(let P=0;P<C.length;++P)if(C[P].length<this.min_length){const I=E[P].data;for(const $ of this.eos_token_id)I[$]=-1/0}return E}}class _ extends a{constructor(C,E,P){super(),this.prompt_length_to_skip=C,this.min_new_tokens=E,this.eos_token_id=Array.isArray(P)?P:[P]}_call(C,E){for(let P=0;P<C.length;++P)if(C[P].length-this.prompt_length_to_skip<this.min_new_tokens){const $=E[P].data;for(const z of this.eos_token_id)$[z]=-1/0}return E}}class v extends a{constructor(C,E){super(),this.bad_words_ids=C,this.eos_token_id=Array.isArray(E)?E:[E]}_call(C,E){for(let P=0;P<C.length;++P){const I=E[P].data,$=C[P];for(const z of this.bad_words_ids){if($.length<z.length-1)continue;let D=!0;for(let B=1;B<=z.length-1;++B)if(z.at(-B-1)!=$.at(-B)){D=!1;break}D&&(I[z.at(-1)]=-1/0)}}return E}}class g extends a{constructor(C){if(super(),C<=1)throw new Error(`Require guidance scale >1 to use the classifier free guidance processor, got guidance scale ${C}.`);this.guidance_scale=C}_call(C,E){if(E.dims[0]!==2*C.length)throw new Error(`Logits should have twice the batch size of the input ids, the first half of batches corresponding to the conditional inputs, and the second half of batches corresponding to the unconditional inputs. Got batch size ${E.dims[0]} for the logits and ${C.length} for the input ids.`);const P=C.length,I=E.slice([0,P],null),$=E.slice([P,E.dims[0]],null);for(let z=0;z<$.data.length;++z)$.data[z]+=(I.data[z]-$.data[z])*this.guidance_scale;return $}}class x extends o{constructor(C){super(),this.temperature=C}_call(C,E){const P=E.data;for(let I=0;I<P.length;++I)P[I]/=this.temperature;return E}}class y extends o{constructor(C,{filter_value:E=-1/0,min_tokens_to_keep:P=1}={}){if(super(),C<0||C>1)throw new Error(`\`top_p\` must be a float > 0 and < 1, but is ${C}`);if(!Number.isInteger(P)||P<1)throw new Error(`\`min_tokens_to_keep\` must be a positive integer, but is ${P}`);this.top_p=C,this.filter_value=E,this.min_tokens_to_keep=P}}class w extends o{constructor(C,{filter_value:E=-1/0,min_tokens_to_keep:P=1}={}){if(super(),!Number.isInteger(C)||C<0)throw new Error(`\`top_k\` must be a positive integer, but is ${C}`);this.top_k=Math.max(C,P),this.filter_value=E}}},"./src/generation/logits_sampler.js":(e,t,r)=>{r.r(t),r.d(t,{LogitsSampler:()=>o});var n=r("./src/utils/generic.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/maths.js");r("./src/generation/configuration_utils.js");class o extends n.Callable{constructor(u){super(),this.generation_config=u}async _call(u){return this.sample(u)}async sample(u){throw Error("sample should be implemented in subclasses.")}getLogits(u,m){let f=u.dims.at(-1),h=u.data;if(m===-1)h=h.slice(-f);else{let _=m*f;h=h.slice(_,_+f)}return h}randomSelect(u){let m=0;for(let h=0;h<u.length;++h)m+=u[h];let f=Math.random()*m;for(let h=0;h<u.length;++h)if(f-=u[h],f<=0)return h;return 0}static getSampler(u){if(u.do_sample)return new l(u);if(u.num_beams>1)return new d(u);if(u.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${u.num_return_sequences}.`);return new i(u)}}class i extends o{async sample(u){const m=(0,a.max)(u.data)[1];return[[BigInt(m),0]]}}class l extends o{async sample(u){let m=u.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[f,h]=await(0,s.topk)(u,m),_=(0,a.softmax)(f.data);return Array.from({length:this.generation_config.num_beams},()=>{const v=this.randomSelect(_);return[h.data[v],Math.log(_[v])]})}}class d extends o{async sample(u){let m=u.dims.at(-1);this.generation_config.top_k>0&&(m=Math.min(this.generation_config.top_k,m));const[f,h]=await(0,s.topk)(u,m),_=(0,a.softmax)(f.data);return Array.from({length:this.generation_config.num_beams},(v,g)=>[h.data[g],Math.log(_[g])])}}},"./src/generation/stopping_criteria.js":(e,t,r)=>{r.r(t),r.d(t,{EosTokenCriteria:()=>i,InterruptableStoppingCriteria:()=>l,MaxLengthCriteria:()=>o,StoppingCriteria:()=>s,StoppingCriteriaList:()=>a});var n=r("./src/utils/generic.js");class s extends n.Callable{_call(p,u){throw Error("StoppingCriteria needs to be subclassed")}}class a extends n.Callable{constructor(){super(),this.criteria=[]}push(p){this.criteria.push(p)}extend(p){p instanceof a?p=p.criteria:p instanceof s&&(p=[p]),this.criteria.push(...p)}_call(p,u){const m=new Array(p.length).fill(!1);for(const f of this.criteria){const h=f(p,u);for(let _=0;_<m.length;++_)m[_]||(m[_]=h[_])}return m}[Symbol.iterator](){return this.criteria.values()}}class o extends s{constructor(p,u=null){super(),this.max_length=p,this.max_position_embeddings=u}_call(p){return p.map(u=>u.length>=this.max_length)}}class i extends s{constructor(p){super(),Array.isArray(p)||(p=[p]),this.eos_token_id=p}_call(p,u){return p.map(m=>{const f=m.at(-1);return this.eos_token_id.some(h=>f==h)})}}class l extends s{constructor(){super(),this.interrupted=!1}interrupt(){this.interrupted=!0}reset(){this.interrupted=!1}_call(p,u){return new Array(p.length).fill(this.interrupted)}}},"./src/generation/streamers.js":(e,t,r)=>{r.r(t),r.d(t,{BaseStreamer:()=>o,TextStreamer:()=>l,WhisperTextStreamer:()=>d});var n=r("./src/utils/core.js"),s=r("./src/tokenizers.js"),a=r("./src/env.js");class o{put(u){throw Error("Not implemented")}end(){throw Error("Not implemented")}}const i=a.apis.IS_PROCESS_AVAILABLE?p=>process.stdout.write(p):p=>console.log(p);class l extends o{constructor(u,{skip_prompt:m=!1,callback_function:f=null,token_callback_function:h=null,skip_special_tokens:_=!0,decode_kwargs:v={},...g}={}){super(),this.tokenizer=u,this.skip_prompt=m,this.callback_function=f??i,this.token_callback_function=h,this.decode_kwargs={skip_special_tokens:_,...v,...g},this.token_cache=[],this.print_len=0,this.next_tokens_are_prompt=!0}put(u){var v;if(u.length>1)throw Error("TextStreamer only supports batch size of 1");const m=this.next_tokens_are_prompt;if(m&&(this.next_tokens_are_prompt=!1,this.skip_prompt))return;const f=u[0];(v=this.token_callback_function)==null||v.call(this,f),this.token_cache=(0,n.mergeArrays)(this.token_cache,f);const h=this.tokenizer.decode(this.token_cache,this.decode_kwargs);let _;m||h.endsWith(`
`)?(_=h.slice(this.print_len),this.token_cache=[],this.print_len=0):h.length>0&&(0,s.is_chinese_char)(h.charCodeAt(h.length-1))?(_=h.slice(this.print_len),this.print_len+=_.length):(_=h.slice(this.print_len,h.lastIndexOf(" ")+1),this.print_len+=_.length),this.on_finalized_text(_,!1)}end(){let u;this.token_cache.length>0?(u=this.tokenizer.decode(this.token_cache,this.decode_kwargs).slice(this.print_len),this.token_cache=[],this.print_len=0):u="",this.next_tokens_are_prompt=!0,this.on_finalized_text(u,!0)}on_finalized_text(u,m){var f,h;u.length>0&&((f=this.callback_function)==null||f.call(this,u)),m&&this.callback_function===i&&a.apis.IS_PROCESS_AVAILABLE&&((h=this.callback_function)==null||h.call(this,`
`))}}class d extends l{constructor(u,{skip_prompt:m=!1,callback_function:f=null,token_callback_function:h=null,on_chunk_start:_=null,on_chunk_end:v=null,on_finalize:g=null,time_precision:x=.02,skip_special_tokens:y=!0,decode_kwargs:w={}}={}){super(u,{skip_prompt:m,skip_special_tokens:y,callback_function:f,token_callback_function:h,decode_kwargs:w}),this.timestamp_begin=u.timestamp_begin,this.on_chunk_start=_,this.on_chunk_end=v,this.on_finalize=g,this.time_precision=x,this.waiting_for_timestamp=!1}put(u){var f,h,_;if(u.length>1)throw Error("WhisperTextStreamer only supports batch size of 1");const m=u[0];if(m.length===1){const v=Number(m[0])-this.timestamp_begin;if(v>=0){const g=v*this.time_precision;this.waiting_for_timestamp?(f=this.on_chunk_end)==null||f.call(this,g):(h=this.on_chunk_start)==null||h.call(this,g),this.waiting_for_timestamp=!this.waiting_for_timestamp,(_=this.token_callback_function)==null||_.call(this,m);return}}return super.put(u)}end(){var u;super.end(),(u=this.on_finalize)==null||u.call(this)}}},"./src/models.js":(e,t,r)=>{r.r(t),r.d(t,{ASTForAudioClassification:()=>Gm,ASTModel:()=>Um,ASTPreTrainedModel:()=>Zl,AlbertForMaskedLM:()=>Je,AlbertForQuestionAnswering:()=>at,AlbertForSequenceClassification:()=>qe,AlbertModel:()=>$e,AlbertPreTrainedModel:()=>ge,ArceeForCausalLM:()=>xo,ArceeModel:()=>hn,ArceePreTrainedModel:()=>ir,AutoModel:()=>sx,AutoModelForAudioClassification:()=>vC,AutoModelForAudioFrameClassification:()=>wC,AutoModelForAudioTextToText:()=>jC,AutoModelForCTC:()=>xC,AutoModelForCausalLM:()=>iC,AutoModelForDepthEstimation:()=>EC,AutoModelForDocumentQuestionAnswering:()=>bC,AutoModelForImageClassification:()=>uC,AutoModelForImageFeatureExtraction:()=>SC,AutoModelForImageMatting:()=>MC,AutoModelForImageSegmentation:()=>mC,AutoModelForImageTextToText:()=>kC,AutoModelForImageToImage:()=>TC,AutoModelForMaskGeneration:()=>_C,AutoModelForMaskedLM:()=>lC,AutoModelForNormalEstimation:()=>CC,AutoModelForObjectDetection:()=>hC,AutoModelForPoseEstimation:()=>PC,AutoModelForQuestionAnswering:()=>cC,AutoModelForSemanticSegmentation:()=>pC,AutoModelForSeq2SeqLM:()=>nC,AutoModelForSequenceClassification:()=>tC,AutoModelForSpeechSeq2Seq:()=>sC,AutoModelForTextToSpectrogram:()=>aC,AutoModelForTextToWaveform:()=>oC,AutoModelForTokenClassification:()=>rC,AutoModelForUniversalSegmentation:()=>fC,AutoModelForVision2Seq:()=>dC,AutoModelForXVector:()=>yC,AutoModelForZeroShotObjectDetection:()=>gC,BartForConditionalGeneration:()=>la,BartForSequenceClassification:()=>Mr,BartModel:()=>pn,BartPretrainedModel:()=>Jn,BaseModelOutput:()=>xe,BeitForImageClassification:()=>TM,BeitModel:()=>MM,BeitPreTrainedModel:()=>x_,BertForMaskedLM:()=>ye,BertForQuestionAnswering:()=>De,BertForSequenceClassification:()=>Ae,BertForTokenClassification:()=>Ce,BertModel:()=>Ee,BertPreTrainedModel:()=>be,BlenderbotForConditionalGeneration:()=>Gr,BlenderbotModel:()=>fn,BlenderbotPreTrainedModel:()=>Wn,BlenderbotSmallForConditionalGeneration:()=>Un,BlenderbotSmallModel:()=>en,BlenderbotSmallPreTrainedModel:()=>Cr,BloomForCausalLM:()=>H1,BloomModel:()=>G1,BloomPreTrainedModel:()=>o_,CLIPModel:()=>rc,CLIPPreTrainedModel:()=>ca,CLIPSegForImageSegmentation:()=>tl,CLIPSegModel:()=>xs,CLIPSegPreTrainedModel:()=>Go,CLIPTextModel:()=>np,CLIPTextModelWithProjection:()=>Od,CLIPVisionModel:()=>sp,CLIPVisionModelWithProjection:()=>Fd,CamembertForMaskedLM:()=>It,CamembertForQuestionAnswering:()=>dt,CamembertForSequenceClassification:()=>St,CamembertForTokenClassification:()=>Ot,CamembertModel:()=>pt,CamembertPreTrainedModel:()=>Fe,CausalLMOutput:()=>qo,CausalLMOutputWithPast:()=>$B,ChineseCLIPModel:()=>el,ChineseCLIPPreTrainedModel:()=>zd,ClapAudioModelWithProjection:()=>F2,ClapModel:()=>D2,ClapPreTrainedModel:()=>fp,ClapTextModelWithProjection:()=>O2,CodeGenForCausalLM:()=>W,CodeGenModel:()=>L,CodeGenPreTrainedModel:()=>j,CohereForCausalLM:()=>T1,CohereModel:()=>M1,CoherePreTrainedModel:()=>Xg,ConvBertForMaskedLM:()=>He,ConvBertForQuestionAnswering:()=>Kt,ConvBertForSequenceClassification:()=>Xt,ConvBertForTokenClassification:()=>mt,ConvBertModel:()=>oa,ConvBertPreTrainedModel:()=>an,ConvNextForImageClassification:()=>xT,ConvNextModel:()=>_T,ConvNextPreTrainedModel:()=>N_,ConvNextV2ForImageClassification:()=>yT,ConvNextV2Model:()=>vT,ConvNextV2PreTrainedModel:()=>$_,DFineForObjectDetection:()=>FM,DFineModel:()=>OM,DFinePreTrainedModel:()=>T_,DINOv3ConvNextModel:()=>ST,DINOv3ConvNextPreTrainedModel:()=>PT,DINOv3ViTModel:()=>CT,DINOv3ViTPreTrainedModel:()=>ET,DPTForDepthEstimation:()=>JM,DPTModel:()=>ZM,DPTPreTrainedModel:()=>j_,DacDecoderModel:()=>EE,DacDecoderOutput:()=>bE,DacEncoderModel:()=>TE,DacEncoderOutput:()=>wE,DacModel:()=>ME,DacPreTrainedModel:()=>wp,DebertaForMaskedLM:()=>Bn,DebertaForQuestionAnswering:()=>on,DebertaForSequenceClassification:()=>Zn,DebertaForTokenClassification:()=>Vr,DebertaModel:()=>hr,DebertaPreTrainedModel:()=>Yt,DebertaV2ForMaskedLM:()=>Ls,DebertaV2ForQuestionAnswering:()=>za,DebertaV2ForSequenceClassification:()=>yn,DebertaV2ForTokenClassification:()=>Ra,DebertaV2Model:()=>Fs,DebertaV2PreTrainedModel:()=>Wr,DecisionTransformerModel:()=>sE,DecisionTransformerPreTrainedModel:()=>nE,DeiTForImageClassification:()=>VM,DeiTModel:()=>BM,DeiTPreTrainedModel:()=>C_,DepthAnythingForDepthEstimation:()=>tT,DepthAnythingPreTrainedModel:()=>eT,DepthProForDepthEstimation:()=>oT,DepthProPreTrainedModel:()=>aT,DetrForObjectDetection:()=>CM,DetrForSegmentation:()=>v_,DetrModel:()=>EM,DetrObjectDetectionOutput:()=>y_,DetrPreTrainedModel:()=>ip,DetrSegmentationOutput:()=>PM,Dinov2ForImageClassification:()=>bT,Dinov2Model:()=>wT,Dinov2PreTrainedModel:()=>D_,Dinov2WithRegistersForImageClassification:()=>TT,Dinov2WithRegistersModel:()=>MT,Dinov2WithRegistersPreTrainedModel:()=>O_,DistilBertForMaskedLM:()=>Jr,DistilBertForQuestionAnswering:()=>zs,DistilBertForSequenceClassification:()=>cs,DistilBertForTokenClassification:()=>Dn,DistilBertModel:()=>Rs,DistilBertPreTrainedModel:()=>mn,DonutSwinModel:()=>gT,DonutSwinPreTrainedModel:()=>hT,EdgeTamModel:()=>RT,EfficientNetForImageClassification:()=>U2,EfficientNetModel:()=>W2,EfficientNetPreTrainedModel:()=>K_,ElectraForMaskedLM:()=>H,ElectraForQuestionAnswering:()=>Pe,ElectraForSequenceClassification:()=>re,ElectraForTokenClassification:()=>de,ElectraModel:()=>se,ElectraPreTrainedModel:()=>N,Ernie4_5_ForCausalLM:()=>j2,Ernie4_5_Model:()=>k2,Ernie4_5_PretrainedModel:()=>W_,EsmForMaskedLM:()=>ho,EsmForSequenceClassification:()=>Vn,EsmForTokenClassification:()=>Ue,EsmModel:()=>Bs,EsmPreTrainedModel:()=>Or,ExaoneForCausalLM:()=>m1,ExaoneModel:()=>u1,ExaonePreTrainedModel:()=>Ug,FalconForCausalLM:()=>$2,FalconModel:()=>N2,FalconPreTrainedModel:()=>G_,FastViTForImageClassification:()=>mM,FastViTModel:()=>uM,FastViTPreTrainedModel:()=>p_,Florence2ForConditionalGeneration:()=>Ym,Florence2PreTrainedModel:()=>Xm,GLPNForDepthEstimation:()=>fT,GLPNModel:()=>pT,GLPNPreTrainedModel:()=>I_,GPT2LMHeadModel:()=>Ud,GPT2Model:()=>Wd,GPT2PreTrainedModel:()=>rl,GPTBigCodeForCausalLM:()=>M,GPTBigCodeModel:()=>Xd,GPTBigCodePreTrainedModel:()=>cc,GPTJForCausalLM:()=>Qd,GPTJModel:()=>Kd,GPTJPreTrainedModel:()=>lc,GPTNeoForCausalLM:()=>nl,GPTNeoModel:()=>Hd,GPTNeoPreTrainedModel:()=>oc,GPTNeoXForCausalLM:()=>qd,GPTNeoXModel:()=>ic,GPTNeoXPreTrainedModel:()=>sl,Gemma2ForCausalLM:()=>S1,Gemma2Model:()=>P1,Gemma2PreTrainedModel:()=>Zg,Gemma3ForCausalLM:()=>I1,Gemma3Model:()=>A1,Gemma3PreTrainedModel:()=>e_,Gemma3nForConditionalGeneration:()=>$d,Gemma3nPreTrainedModel:()=>tp,GemmaForCausalLM:()=>C1,GemmaModel:()=>E1,GemmaPreTrainedModel:()=>Yg,GlmForCausalLM:()=>d1,GlmModel:()=>c1,GlmPreTrainedModel:()=>Wg,GraniteForCausalLM:()=>y1,GraniteModel:()=>v1,GraniteMoeHybridForCausalLM:()=>b1,GraniteMoeHybridModel:()=>w1,GraniteMoeHybridPreTrainedModel:()=>Qg,GranitePreTrainedModel:()=>Kg,GroundingDinoForObjectDetection:()=>jT,GroundingDinoPreTrainedModel:()=>kT,GroupViTModel:()=>dM,GroupViTPreTrainedModel:()=>cM,HeliumForCausalLM:()=>l1,HeliumModel:()=>i1,HeliumPreTrainedModel:()=>Vg,HieraForImageClassification:()=>UM,HieraModel:()=>WM,HieraPreTrainedModel:()=>P_,HubertForCTC:()=>m2,HubertForSequenceClassification:()=>p2,HubertModel:()=>u2,HubertPreTrainedModel:()=>yB,IJepaForImageClassification:()=>eM,IJepaModel:()=>J1,IJepaPreTrainedModel:()=>d_,Idefics3ForConditionalGeneration:()=>Ba,Idefics3PreTrainedModel:()=>Ji,ImageMattingOutput:()=>IC,JAISLMHeadModel:()=>Gd,JAISModel:()=>ac,JAISPreTrainedModel:()=>sc,JinaCLIPModel:()=>op,JinaCLIPPreTrainedModel:()=>yt,JinaCLIPTextModel:()=>Bd,JinaCLIPVisionModel:()=>Vd,Lfm2ForCausalLM:()=>s1,Lfm2Model:()=>n1,Lfm2PreTrainedModel:()=>Yd,LiteWhisperForConditionalGeneration:()=>Hm,Llama4ForCausalLM:()=>tt,Llama4PreTrainedModel:()=>We,LlamaForCausalLM:()=>Ie,LlamaModel:()=>he,LlamaPreTrainedModel:()=>J,LlavaForConditionalGeneration:()=>Zi,LlavaOnevisionForConditionalGeneration:()=>Km,LlavaPreTrainedModel:()=>Yi,LlavaQwen2ForCausalLM:()=>ep,LongT5ForConditionalGeneration:()=>pr,LongT5Model:()=>Fr,LongT5PreTrainedModel:()=>nr,M2M100ForConditionalGeneration:()=>UT,M2M100Model:()=>WT,M2M100PreTrainedModel:()=>R_,MBartForCausalLM:()=>kn,MBartForConditionalGeneration:()=>Vs,MBartForSequenceClassification:()=>Ws,MBartModel:()=>Sn,MBartPreTrainedModel:()=>Ur,MPNetForMaskedLM:()=>qi,MPNetForQuestionAnswering:()=>Xi,MPNetForSequenceClassification:()=>Ki,MPNetForTokenClassification:()=>Qi,MPNetModel:()=>Hi,MPNetPreTrainedModel:()=>_s,MT5ForConditionalGeneration:()=>Ir,MT5Model:()=>Lr,MT5PreTrainedModel:()=>Ar,MarianMTModel:()=>VT,MarianModel:()=>BT,MarianPreTrainedModel:()=>L_,MaskFormerForInstanceSegmentation:()=>mT,MaskFormerModel:()=>uT,MaskFormerPreTrainedModel:()=>A_,MaskedLMOutput:()=>wn,Metric3DForDepthEstimation:()=>lT,Metric3DPreTrainedModel:()=>iT,Metric3Dv2ForDepthEstimation:()=>dT,Metric3Dv2PreTrainedModel:()=>cT,MgpstrForSceneTextRecognition:()=>cE,MgpstrModelOutput:()=>iE,MgpstrPreTrainedModel:()=>lE,MimiDecoderModel:()=>yE,MimiDecoderOutput:()=>_E,MimiEncoderModel:()=>vE,MimiEncoderOutput:()=>gE,MimiModel:()=>xE,MimiPreTrainedModel:()=>yp,MistralForCausalLM:()=>S2,MistralModel:()=>P2,MistralPreTrainedModel:()=>V_,MobileBertForMaskedLM:()=>gr,MobileBertForQuestionAnswering:()=>ia,MobileBertForSequenceClassification:()=>go,MobileBertModel:()=>ut,MobileBertPreTrainedModel:()=>Ge,MobileLLMForCausalLM:()=>f1,MobileLLMModel:()=>p1,MobileLLMPreTrainedModel:()=>Gg,MobileNetV1ForImageClassification:()=>H2,MobileNetV1ForSemanticSegmentation:()=>q2,MobileNetV1Model:()=>G2,MobileNetV1PreTrainedModel:()=>gp,MobileNetV2ForImageClassification:()=>Q2,MobileNetV2ForSemanticSegmentation:()=>X2,MobileNetV2Model:()=>K2,MobileNetV2PreTrainedModel:()=>_p,MobileNetV3ForImageClassification:()=>Z2,MobileNetV3ForSemanticSegmentation:()=>J2,MobileNetV3Model:()=>Y2,MobileNetV3PreTrainedModel:()=>xp,MobileNetV4ForImageClassification:()=>tE,MobileNetV4ForSemanticSegmentation:()=>rE,MobileNetV4Model:()=>eE,MobileNetV4PreTrainedModel:()=>vp,MobileViTForImageClassification:()=>gM,MobileViTModel:()=>hM,MobileViTPreTrainedModel:()=>f_,MobileViTV2ForImageClassification:()=>xM,MobileViTV2Model:()=>_M,MobileViTV2PreTrainedModel:()=>h_,ModelOutput:()=>ue,ModernBertDecoderForCausalLM:()=>wr,ModernBertDecoderModel:()=>vt,ModernBertDecoderPreTrainedModel:()=>Wt,ModernBertForMaskedLM:()=>Qe,ModernBertForSequenceClassification:()=>Pt,ModernBertForTokenClassification:()=>Mt,ModernBertModel:()=>Re,ModernBertPreTrainedModel:()=>st,Moondream1ForConditionalGeneration:()=>Qm,MoonshineForConditionalGeneration:()=>qm,MoonshineModel:()=>zg,MoonshinePreTrainedModel:()=>ec,MptForCausalLM:()=>K1,MptModel:()=>q1,MptPreTrainedModel:()=>i_,MultiModalityCausalLM:()=>oE,MultiModalityPreTrainedModel:()=>aE,MusicgenForCausalLM:()=>TB,MusicgenForConditionalGeneration:()=>X_,MusicgenModel:()=>MB,MusicgenPreTrainedModel:()=>Q_,NanoChatForCausalLM:()=>Jt,NanoChatModel:()=>Lt,NanoChatPreTrainedModel:()=>ft,NeoBertForMaskedLM:()=>Se,NeoBertForQuestionAnswering:()=>lt,NeoBertForSequenceClassification:()=>it,NeoBertForTokenClassification:()=>et,NeoBertModel:()=>Ze,NeoBertPreTrainedModel:()=>Be,NomicBertModel:()=>Br,NomicBertPreTrainedModel:()=>Yr,OPTForCausalLM:()=>X1,OPTModel:()=>Q1,OPTPreTrainedModel:()=>l_,Olmo2ForCausalLM:()=>x1,Olmo2Model:()=>_1,Olmo2PreTrainedModel:()=>qg,OlmoForCausalLM:()=>g1,OlmoModel:()=>h1,OlmoPreTrainedModel:()=>Hg,OpenELMForCausalLM:()=>$1,OpenELMModel:()=>N1,OpenELMPreTrainedModel:()=>t_,OwlViTForObjectDetection:()=>yM,OwlViTModel:()=>vM,OwlViTPreTrainedModel:()=>g_,Owlv2ForObjectDetection:()=>bM,Owlv2Model:()=>wM,Owlv2PreTrainedModel:()=>__,PaliGemmaForConditionalGeneration:()=>Jm,PaliGemmaPreTrainedModel:()=>Zm,ParakeetForCTC:()=>XT,ParakeetPreTrainedModel:()=>QT,PatchTSMixerForPrediction:()=>pE,PatchTSMixerModel:()=>mE,PatchTSMixerPreTrainedModel:()=>Z_,PatchTSTForPrediction:()=>uE,PatchTSTModel:()=>dE,PatchTSTPreTrainedModel:()=>Y_,Phi3ForCausalLM:()=>U1,Phi3Model:()=>W1,Phi3PreTrainedModel:()=>a_,Phi3VForCausalLM:()=>Dd,Phi3VPreTrainedModel:()=>rp,PhiForCausalLM:()=>V1,PhiModel:()=>B1,PhiPreTrainedModel:()=>s_,PreTrainedModel:()=>F,PretrainedMixin:()=>ar,PvtForImageClassification:()=>sM,PvtModel:()=>nM,PvtPreTrainedModel:()=>u_,PyAnnoteForAudioFrameClassification:()=>ZT,PyAnnoteModel:()=>YT,PyAnnotePreTrainedModel:()=>z_,QuestionAnsweringModelOutput:()=>On,Qwen2ForCausalLM:()=>O1,Qwen2Model:()=>D1,Qwen2PreTrainedModel:()=>r_,Qwen2VLForConditionalGeneration:()=>z1,Qwen2VLPreTrainedModel:()=>R1,Qwen3ForCausalLM:()=>L1,Qwen3Model:()=>F1,Qwen3PreTrainedModel:()=>n_,RFDetrForObjectDetection:()=>$M,RFDetrModel:()=>NM,RFDetrObjectDetectionOutput:()=>DM,RFDetrPreTrainedModel:()=>M_,RTDetrForObjectDetection:()=>kM,RTDetrModel:()=>SM,RTDetrObjectDetectionOutput:()=>Zd,RTDetrPreTrainedModel:()=>w_,RTDetrV2ForObjectDetection:()=>AM,RTDetrV2Model:()=>jM,RTDetrV2ObjectDetectionOutput:()=>IM,RTDetrV2PreTrainedModel:()=>b_,ResNetForImageClassification:()=>HM,ResNetModel:()=>GM,ResNetPreTrainedModel:()=>S_,RoFormerForMaskedLM:()=>Zr,RoFormerForQuestionAnswering:()=>Os,RoFormerForSequenceClassification:()=>aa,RoFormerForTokenClassification:()=>La,RoFormerModel:()=>br,RoFormerPreTrainedModel:()=>Pn,RobertaForMaskedLM:()=>Nm,RobertaForQuestionAnswering:()=>Dm,RobertaForSequenceClassification:()=>kd,RobertaForTokenClassification:()=>$m,RobertaModel:()=>Yl,RobertaPreTrainedModel:()=>Us,Sam2ImageSegmentationOutput:()=>FT,Sam2Model:()=>dp,Sam2PreTrainedModel:()=>LT,Sam3TrackerModel:()=>zT,SamImageSegmentationOutput:()=>OT,SamModel:()=>DT,SamPreTrainedModel:()=>$T,SapiensForDepthEstimation:()=>nT,SapiensForNormalEstimation:()=>sT,SapiensForSemanticSegmentation:()=>rT,SapiensPreTrainedModel:()=>cp,SegformerForImageClassification:()=>R2,SegformerForSemanticSegmentation:()=>z2,SegformerModel:()=>bB,SegformerPreTrainedModel:()=>hp,Seq2SeqLMOutput:()=>NB,SequenceClassifierOutput:()=>Rt,SiglipModel:()=>Ld,SiglipPreTrainedModel:()=>nc,SiglipTextModel:()=>ap,SiglipVisionModel:()=>Rd,SmolLM3ForCausalLM:()=>o1,SmolLM3Model:()=>a1,SmolLM3PreTrainedModel:()=>Bg,SmolVLMForConditionalGeneration:()=>tc,SnacDecoderModel:()=>SE,SnacEncoderModel:()=>PE,SnacModel:()=>CE,SnacPreTrainedModel:()=>bp,SpeechT5ForSpeechToText:()=>w2,SpeechT5ForTextToSpeech:()=>b2,SpeechT5HifiGan:()=>M2,SpeechT5Model:()=>wB,SpeechT5PreTrainedModel:()=>pp,SqueezeBertForMaskedLM:()=>Y,SqueezeBertForQuestionAnswering:()=>fe,SqueezeBertForSequenceClassification:()=>ie,SqueezeBertModel:()=>O,SqueezeBertPreTrainedModel:()=>_e,StableLmForCausalLM:()=>V2,StableLmModel:()=>B2,StableLmPreTrainedModel:()=>q_,Starcoder2ForCausalLM:()=>I2,Starcoder2Model:()=>A2,Starcoder2PreTrainedModel:()=>U_,StyleTextToSpeech2Model:()=>y2,StyleTextToSpeech2PreTrainedModel:()=>v2,SupertonicForConditionalGeneration:()=>B_,SupertonicPreTrainedModel:()=>T2,Swin2SRForImageSuperResolution:()=>YM,Swin2SRModel:()=>XM,Swin2SRPreTrainedModel:()=>k_,SwinForImageClassification:()=>KM,SwinForSemanticSegmentation:()=>QM,SwinModel:()=>qM,SwinPreTrainedModel:()=>lp,T5ForConditionalGeneration:()=>Zt,T5Model:()=>$t,T5PreTrainedModel:()=>ct,TableTransformerForObjectDetection:()=>RM,TableTransformerModel:()=>LM,TableTransformerObjectDetectionOutput:()=>zM,TableTransformerPreTrainedModel:()=>E_,TokenClassifierOutput:()=>gn,TrOCRForCausalLM:()=>C2,TrOCRPreTrainedModel:()=>E2,UltravoxModel:()=>J_,UltravoxPreTrainedModel:()=>fE,UniSpeechForCTC:()=>r2,UniSpeechForSequenceClassification:()=>n2,UniSpeechModel:()=>t2,UniSpeechPreTrainedModel:()=>up,UniSpeechSatForAudioFrameClassification:()=>i2,UniSpeechSatForCTC:()=>a2,UniSpeechSatForSequenceClassification:()=>o2,UniSpeechSatModel:()=>s2,UniSpeechSatPreTrainedModel:()=>Jd,VaultGemmaForCausalLM:()=>j1,VaultGemmaModel:()=>k1,VaultGemmaPreTrainedModel:()=>Jg,ViTForImageClassification:()=>Z1,ViTMAEModel:()=>oM,ViTMAEPreTrainedModel:()=>aM,ViTMSNForImageClassification:()=>lM,ViTMSNModel:()=>iM,ViTMSNPreTrainedModel:()=>m_,ViTModel:()=>Y1,ViTPreTrainedModel:()=>c_,VisionEncoderDecoderModel:()=>Nd,VitMatteForImageMatting:()=>fM,VitMattePreTrainedModel:()=>pM,VitPoseForPoseEstimation:()=>rM,VitPosePreTrainedModel:()=>tM,VitsModel:()=>H_,VitsModelOutput:()=>NC,VitsPreTrainedModel:()=>L2,VoxtralForConditionalGeneration:()=>hE,Wav2Vec2BertForCTC:()=>c2,Wav2Vec2BertForSequenceClassification:()=>d2,Wav2Vec2BertModel:()=>l2,Wav2Vec2BertPreTrainedModel:()=>mp,Wav2Vec2ForAudioFrameClassification:()=>KT,Wav2Vec2ForCTC:()=>HT,Wav2Vec2ForSequenceClassification:()=>qT,Wav2Vec2Model:()=>GT,Wav2Vec2PreTrainedModel:()=>Ho,WavLMForAudioFrameClassification:()=>x2,WavLMForCTC:()=>h2,WavLMForSequenceClassification:()=>g2,WavLMForXVector:()=>_2,WavLMModel:()=>f2,WavLMPreTrainedModel:()=>dc,WeSpeakerResNetModel:()=>e2,WeSpeakerResNetPreTrainedModel:()=>JT,WhisperForConditionalGeneration:()=>_o,WhisperModel:()=>Id,WhisperPreTrainedModel:()=>Jl,XLMForQuestionAnswering:()=>zm,XLMForSequenceClassification:()=>Lm,XLMForTokenClassification:()=>Rm,XLMModel:()=>Om,XLMPreTrainedModel:()=>Wo,XLMRobertaForMaskedLM:()=>Vm,XLMRobertaForQuestionAnswering:()=>Ad,XLMRobertaForSequenceClassification:()=>Wm,XLMRobertaForTokenClassification:()=>jd,XLMRobertaModel:()=>Bm,XLMRobertaPreTrainedModel:()=>Uo,XLMWithLMHeadModel:()=>Fm,XVectorOutput:()=>AC,YolosForObjectDetection:()=>IT,YolosModel:()=>AT,YolosObjectDetectionOutput:()=>NT,YolosPreTrainedModel:()=>F_});var n=r("./src/configs.js"),s=r("./src/backends/onnx.js"),a=r("./src/utils/dtypes.js"),o=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),l=r("./src/utils/hub.js"),d=r("./src/utils/constants.js"),p=r("./src/generation/logits_process.js"),u=r("./src/generation/configuration_utils.js"),m=r("./src/utils/tensor.js"),f=r("./src/utils/image.js"),h=r("./src/utils/maths.js"),_=r("./src/generation/stopping_criteria.js"),v=r("./src/generation/logits_sampler.js"),g=r("./src/env.js"),x=r("./src/models/whisper/generation_whisper.js"),y=r("./src/models/whisper/common_whisper.js");const w={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5,ImageTextToText:6,Musicgen:7,MultiModality:8,Phi3V:9,AudioTextToText:10,AutoEncoder:11,ImageAudioTextToText:12,Supertonic:13},b=new Map,C=new Map,E=new Map;async function P(S,A,V){var bn;let pe=((bn=V.config)==null?void 0:bn["transformers.js_config"])??{},Te=V.device??pe.device;Te&&typeof Te!="string"&&(Te.hasOwnProperty(A)?Te=Te[A]:(console.warn(`device not specified for "${A}". Using the default device.`),Te=null));const ve=Te??(g.apis.IS_NODE_ENV?"cpu":"wasm"),ke=(0,s.deviceToExecutionProviders)(ve),Ve=pe.device_config??{};Ve.hasOwnProperty(ve)&&(pe={...pe,...Ve[ve]});let Xe=V.dtype??pe.dtype;if(typeof Xe!="string"&&(Xe&&Xe.hasOwnProperty(A)?Xe=Xe[A]:(Xe=a.DEFAULT_DEVICE_DTYPE_MAPPING[ve]??a.DATA_TYPES.fp32,console.warn(`dtype not specified for "${A}". Using the default dtype (${Xe}) for this device (${ve}).`))),Xe===a.DATA_TYPES.auto){let Gt=pe.dtype;typeof Gt!="string"&&(Gt=Gt==null?void 0:Gt[A]),Gt&&Gt!==a.DATA_TYPES.auto&&a.DATA_TYPES.hasOwnProperty(Gt)?Xe=Gt:Xe=a.DEFAULT_DEVICE_DTYPE_MAPPING[ve]??a.DATA_TYPES.fp32}const rt=Xe;if(a.DEFAULT_DTYPE_SUFFIX_MAPPING.hasOwnProperty(rt)){if(rt===a.DATA_TYPES.fp16&&ve==="webgpu"&&!await(0,a.isWebGpuFp16Supported)())throw new Error(`The device (${ve}) does not support fp16.`)}else throw new Error(`Invalid dtype: ${rt}. Should be one of: ${Object.keys(a.DATA_TYPES).join(", ")}`);const Ct=pe.kv_cache_dtype,jt=Ct?typeof Ct=="string"?Ct:Ct[rt]??"float32":void 0;if(jt&&!["float32","float16"].includes(jt))throw new Error(`Invalid kv_cache_dtype: ${jt}. Should be one of: float32, float16`);const Dt={dtype:rt,kv_cache_dtype:jt,device:ve},qt=a.DEFAULT_DTYPE_SUFFIX_MAPPING[rt],kt=`${A}${qt}.onnx`,Ft=`${V.subfolder??""}/${kt}`,_t={...V.session_options};_t.executionProviders??(_t.executionProviders=ke);const Ut=pe.free_dimension_overrides;Ut?_t.freeDimensionOverrides??(_t.freeDimensionOverrides=Ut):ve.startsWith("webnn")&&!_t.freeDimensionOverrides&&console.warn(`WebNN does not currently support dynamic shapes and requires 'free_dimension_overrides' to be set in config.json, preferably as a field within config["transformers.js_config"]["device_config"]["${ve}"]. When 'free_dimension_overrides' is not set, you may experience significant performance degradation.`);const sr=g.apis.IS_NODE_ENV&&g.env.useFSCache,vr=(0,l.getModelFile)(S,Ft,!0,V,sr),Tr=V.use_external_data_format??pe.use_external_data_format;let Pr=[];if(Tr){let Gt;typeof Tr=="object"?Tr.hasOwnProperty(kt)?Gt=Tr[kt]:Tr.hasOwnProperty(A)?Gt=Tr[A]:Gt=!1:Gt=Tr;const _n=+Gt;if(_n>l.MAX_EXTERNAL_DATA_CHUNKS)throw new Error(`The number of external data chunks (${_n}) exceeds the maximum allowed value (${l.MAX_EXTERNAL_DATA_CHUNKS}).`);for(let vs=0;vs<_n;++vs){const al=`${kt}_data${vs===0?"":"_"+vs}`,es=`${V.subfolder??""}/${al}`;Pr.push(new Promise(async(Gs,Mp)=>{const ol=await(0,l.getModelFile)(S,es,!0,V,sr);Gs(ol instanceof Uint8Array?{path:al,data:ol}:al)}))}}else _t.externalData!==void 0&&(Pr=_t.externalData.map(async Gt=>{if(typeof Gt.data=="string"){const _n=await(0,l.getModelFile)(S,Gt.data,!0,V);return{...Gt,data:_n}}return Gt}));if(Pr.length>0){const Gt=await Promise.all(Pr);g.apis.IS_NODE_ENV||(_t.externalData=Gt)}if(ve==="webgpu"){const Gt=(0,n.getCacheShapes)(V.config,{prefix:"present"});if(Object.keys(Gt).length>0&&!(0,s.isONNXProxy)()){const _n={};for(const vs in Gt)_n[vs]="gpu-buffer";_t.preferredOutputLocation=_n}}return{buffer_or_path:await vr,session_options:_t,session_config:Dt}}async function I(S,A,V){return Object.fromEntries(await Promise.all(Object.keys(A).map(async pe=>{const{buffer_or_path:Te,session_options:ve,session_config:ke}=await P(S,A[pe],V),Ve=await(0,s.createInferenceSession)(Te,ve,ke);return[pe,Ve]})))}async function $(S,A,V){return Object.fromEntries(await Promise.all(Object.keys(A).map(async pe=>{const Te=await(0,l.getModelJSON)(S,A[pe],!1,V);return[pe,Te]})))}function z(S,A){const V=Object.create(null),pe=[];for(const ke of S.inputNames){const Ve=A[ke];if(!(Ve instanceof m.Tensor)){pe.push(ke);continue}V[ke]=(0,s.isONNXProxy)()?Ve.clone():Ve}if(pe.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${pe.join(", ")}.`);const Te=Object.keys(A).length,ve=S.inputNames.length;if(Te>ve){let ke=Object.keys(A).filter(Ve=>!S.inputNames.includes(Ve));console.warn(`WARNING: Too many inputs were provided (${Te} > ${ve}). The following inputs will be ignored: "${ke.join(", ")}".`)}return V}async function D(S,A){const V=z(S,A);try{const pe=Object.fromEntries(Object.entries(V).map(([ve,ke])=>[ve,ke.ort_tensor])),Te=await(0,s.runInferenceSession)(S,pe);return B(Te)}catch(pe){const Te=Object.fromEntries(Object.entries(V).map(([ve,ke])=>{const Ve={type:ke.type,dims:ke.dims,location:ke.location};return Ve.location!=="gpu-buffer"&&(Ve.data=ke.data),[ve,Ve]}));throw console.error(`An error occurred during model execution: "${pe}".`),console.error("Inputs given to model:",Te),pe}}function B(S){for(let A in S)(0,s.isONNXTensor)(S[A])?S[A]=new m.Tensor(S[A]):typeof S[A]=="object"&&B(S[A]);return S}function U(S){if(S instanceof m.Tensor)return S;if(S.length===0)throw Error("items must be non-empty");if(Array.isArray(S[0])){if(S.some(A=>A.length!==S[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new m.Tensor("int64",BigInt64Array.from(S.flat().map(A=>BigInt(A))),[S.length,S[0].length])}else return new m.Tensor("int64",BigInt64Array.from(S.map(A=>BigInt(A))),[1,S.length])}function q(S){return new m.Tensor("bool",[S],[1])}async function X(S,A){let{encoder_outputs:V,input_ids:pe,decoder_input_ids:Te,...ve}=A;if(!V){const Ve=(0,i.pick)(A,S.sessions.model.inputNames);V=(await Z(S,Ve)).last_hidden_state}return ve.input_ids=Te,ve.encoder_hidden_states=V,S.sessions.decoder_model_merged.inputNames.includes("encoder_attention_mask")&&(ve.encoder_attention_mask=A.attention_mask),await ee(S,ve,!0)}async function Z(S,A){const V=S.sessions.model,pe=(0,i.pick)(A,V.inputNames);if(V.inputNames.includes("inputs_embeds")&&!pe.inputs_embeds){if(!A.input_ids)throw new Error("Both `input_ids` and `inputs_embeds` are missing in the model inputs.");pe.inputs_embeds=await S.encode_text({input_ids:A.input_ids})}if(V.inputNames.includes("token_type_ids")&&!pe.token_type_ids){if(!pe.input_ids)throw new Error("Both `input_ids` and `token_type_ids` are missing in the model inputs.");pe.token_type_ids=(0,m.zeros_like)(pe.input_ids)}if(V.inputNames.includes("pixel_mask")&&!pe.pixel_mask){if(!pe.pixel_values)throw new Error("Both `pixel_values` and `pixel_mask` are missing in the model inputs.");const Te=pe.pixel_values.dims;pe.pixel_mask=(0,m.ones)([Te[0],Te[2],Te[3]])}return await D(V,pe)}async function K(S,A){const V=await S.encode(A);return await S.decode(V)}async function ee(S,A,V=!1){const pe=S.sessions[V?"decoder_model_merged":"model"],{past_key_values:Te,...ve}=A;if(pe.inputNames.includes("use_cache_branch")&&(ve.use_cache_branch=q(!!Te)),pe.inputNames.includes("position_ids")&&ve.attention_mask&&!ve.position_ids){const Ve=["paligemma","gemma3_text","gemma3"].includes(S.config.model_type)?1:0;ve.position_ids=me(ve,Te,Ve)}S.addPastKeyValues(ve,Te);const ke=(0,i.pick)(ve,pe.inputNames);return await D(pe,ke)}function oe({modality_token_id:S,inputs_embeds:A,modality_features:V,input_ids:pe,attention_mask:Te}){const ve=pe.tolist().map(rt=>rt.reduce((Ct,jt,Dt)=>(jt==S&&Ct.push(Dt),Ct),[])),ke=ve.reduce((rt,Ct)=>rt+Ct.length,0),Ve=V.dims[0];if(ke!==Ve)throw new Error(`Number of tokens and features do not match: tokens: ${ke}, features ${Ve}`);let Xe=0;for(let rt=0;rt<ve.length;++rt){const Ct=ve[rt],jt=A[rt];for(let Dt=0;Dt<Ct.length;++Dt)jt[Ct[Dt]].data.set(V[Xe++].data)}return{inputs_embeds:A,attention_mask:Te}}function ae({image_token_id:S,inputs_embeds:A,image_features:V,input_ids:pe,attention_mask:Te}){return oe({modality_token_id:S,inputs_embeds:A,modality_features:V,input_ids:pe,attention_mask:Te})}function G({audio_token_id:S,inputs_embeds:A,audio_features:V,input_ids:pe,attention_mask:Te}){return oe({modality_token_id:S,inputs_embeds:A,modality_features:V,input_ids:pe,attention_mask:Te})}async function R(S,{encode_function:A,merge_function:V,modality_input_name:pe,modality_output_name:Te,input_ids:ve=null,attention_mask:ke=null,position_ids:Ve=null,inputs_embeds:Xe=null,past_key_values:rt=null,generation_config:Ct=null,logits_processor:jt=null,...Dt}){const qt=Dt[pe];if(!Xe){if(Xe=await S.encode_text({input_ids:ve,...Dt}),qt&&ve.dims[1]!==1){const Ft=await A({[pe]:qt,...Dt});({inputs_embeds:Xe,attention_mask:ke}=V({[Te]:Ft,inputs_embeds:Xe,input_ids:ve,attention_mask:ke}))}else if(rt&&qt&&ve.dims[1]===1){const Ft=ve.dims[1],_t=Object.values(rt)[0].dims.at(-2);ke=(0,m.cat)([(0,m.ones)([ve.dims[0],_t]),ke.slice(null,[ke.dims[1]-Ft,ke.dims[1]])],1)}}if(!Ve&&S.config.model_type==="qwen2_vl"){const{image_grid_thw:Ft,video_grid_thw:_t}=Dt;[Ve]=S.get_rope_index(ve,Ft,_t,ke)}return await ee(S,{inputs_embeds:Xe,past_key_values:rt,attention_mask:ke,position_ids:Ve,generation_config:Ct,logits_processor:jt},!0)}async function Q(S,A){return await R(S,{...A,modality_input_name:"audio_values",modality_output_name:"audio_features",encode_function:S.encode_audio.bind(S),merge_function:S._merge_input_ids_with_audio_features.bind(S)})}async function ce(S,A){return await R(S,{...A,modality_input_name:"pixel_values",modality_output_name:"image_features",encode_function:S.encode_image.bind(S),merge_function:S._merge_input_ids_with_image_features.bind(S)})}function ne(S,A=0){const[V,pe]=S.dims,Te=S.data,ve=new BigInt64Array(Te.length);for(let ke=0;ke<V;++ke){const Ve=ke*pe;let Xe=BigInt(A);for(let rt=0;rt<pe;++rt){const Ct=Ve+rt;Te[Ct]===0n?ve[Ct]=BigInt(1):(ve[Ct]=Xe,Xe+=Te[Ct])}}return{data:ve,dims:S.dims}}function me(S,A=null,V=0){const{input_ids:pe,inputs_embeds:Te,attention_mask:ve}=S,{data:ke,dims:Ve}=ne(ve,V);let Xe=new m.Tensor("int64",ke,Ve);if(A){const rt=-(pe??Te).dims.at(1);Xe=Xe.slice(null,[rt,null])}return Xe}function we(S,A,V,pe){const Te=V.past_key_values?Object.values(V.past_key_values)[0].dims.at(-2):0;if(!V.attention_mask){let ve;for(const ke of["input_ids","inputs_embeds","position_ids"])if(V[ke]){ve=V[ke].dims;break}if(!ve)throw new Error("attention_mask is not provided, and unable to infer its shape from model inputs.");V.attention_mask=(0,m.ones)([ve[0],Te+ve[1]])}if(V.past_key_values){const{input_ids:ve,attention_mask:ke}=V;ke&&ke.dims[1]>ve.dims[1]||Te<ve.dims[1]&&(V.input_ids=ve.slice(null,[Te,null]))}return V}function Ne(S,A,V,pe){return V.past_key_values&&(A=A.map(Te=>[Te.at(-1)])),{...V,decoder_input_ids:U(A)}}function Me(S,...A){return S.config.is_encoder_decoder?Ne(S,...A):we(S,...A)}function te(S,A,V,pe){const Te=!!V.past_key_values;return pe.guidance_scale!==null&&pe.guidance_scale>1&&(Te?V.input_ids=(0,m.cat)([V.input_ids,V.input_ids],0):(V.input_ids=(0,m.cat)([V.input_ids,(0,m.full_like)(V.input_ids,BigInt(pe.pad_token_id))],0),V.attention_mask=(0,m.cat)([V.attention_mask,(0,m.full_like)(V.attention_mask,0n)],0))),(Te||!V.pixel_values)&&(V.pixel_values=(0,m.full)([0,0,3,384,384],1)),Te&&(V.images_seq_mask=new m.Tensor("bool",new Array(1).fill(!0).fill(!1,0,1),[1,1]),V.images_emb_mask=new m.Tensor("bool",new Array(0).fill(!1),[1,1,0])),V}class F extends o.Callable{constructor(V,pe,Te){super();le(this,"main_input_name","input_ids");le(this,"forward_params",["input_ids","attention_mask"]);this.config=V,this.sessions=pe,this.configs=Te;const ve=E.get(this.constructor),ke=b.get(ve);switch(this.can_generate=!1,this._forward=null,this._prepare_inputs_for_generation=null,ke){case w.DecoderOnly:this.can_generate=!0,this._forward=ee,this._prepare_inputs_for_generation=we;break;case w.Seq2Seq:case w.Vision2Seq:case w.Musicgen:this.can_generate=!0,this._forward=X,this._prepare_inputs_for_generation=Ne;break;case w.EncoderDecoder:this._forward=X;break;case w.ImageTextToText:this.can_generate=!0,this._forward=ce,this._prepare_inputs_for_generation=Me;break;case w.AudioTextToText:this.can_generate=!0,this._forward=Q,this._prepare_inputs_for_generation=Me;break;case w.Phi3V:case w.ImageAudioTextToText:this.can_generate=!0,this._prepare_inputs_for_generation=Me;break;case w.MultiModality:this.can_generate=!0,this._prepare_inputs_for_generation=te;break;case w.AutoEncoder:this._forward=K;break;default:this._forward=Z;break}this.can_generate&&this.forward_params.push("past_key_values"),this.custom_config=this.config["transformers.js_config"]??{}}async dispose(){var pe;const V=[];for(const Te of Object.values(this.sessions))(pe=Te==null?void 0:Te.handler)!=null&&pe.dispose&&V.push(Te.handler.dispose());return await Promise.all(V)}static async from_pretrained(V,{progress_callback:pe=null,config:Te=null,cache_dir:ve=null,local_files_only:ke=!1,revision:Ve="main",model_file_name:Xe=null,subfolder:rt="onnx",device:Ct=null,dtype:jt=null,use_external_data_format:Dt=null,session_options:qt={}}={}){let kt={progress_callback:pe,config:Te,cache_dir:ve,local_files_only:ke,revision:Ve,model_file_name:Xe,subfolder:rt,device:Ct,dtype:jt,use_external_data_format:Dt,session_options:qt};const Ft=E.get(this),_t=b.get(Ft);Te=kt.config=await n.AutoConfig.from_pretrained(V,kt);let Ut;if(_t===w.DecoderOnly)Ut=await Promise.all([I(V,{model:kt.model_file_name??"model"},kt),$(V,{generation_config:"generation_config.json"},kt)]);else if(_t===w.Seq2Seq||_t===w.Vision2Seq)Ut=await Promise.all([I(V,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},kt),$(V,{generation_config:"generation_config.json"},kt)]);else if(_t===w.MaskGeneration)Ut=await Promise.all([I(V,{model:"vision_encoder",prompt_encoder_mask_decoder:"prompt_encoder_mask_decoder"},kt)]);else if(_t===w.EncoderDecoder)Ut=await Promise.all([I(V,{model:"encoder_model",decoder_model_merged:"decoder_model_merged"},kt)]);else if(_t===w.ImageTextToText){const sr={embed_tokens:"embed_tokens",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Te.is_encoder_decoder&&(sr.model="encoder_model"),Ut=await Promise.all([I(V,sr,kt),$(V,{generation_config:"generation_config.json"},kt)])}else if(_t===w.AudioTextToText){const sr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",decoder_model_merged:"decoder_model_merged"};Ut=await Promise.all([I(V,sr,kt),$(V,{generation_config:"generation_config.json"},kt)])}else if(_t===w.ImageAudioTextToText){const sr={embed_tokens:"embed_tokens",audio_encoder:"audio_encoder",vision_encoder:"vision_encoder",decoder_model_merged:"decoder_model_merged"};Ut=await Promise.all([I(V,sr,kt),$(V,{generation_config:"generation_config.json"},kt)])}else if(_t===w.Musicgen)Ut=await Promise.all([I(V,{model:"text_encoder",decoder_model_merged:"decoder_model_merged",encodec_decode:"encodec_decode"},kt),$(V,{generation_config:"generation_config.json"},kt)]);else if(_t===w.MultiModality)Ut=await Promise.all([I(V,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"language_model",lm_head:"lm_head",gen_head:"gen_head",gen_img_embeds:"gen_img_embeds",image_decode:"image_decode"},kt),$(V,{generation_config:"generation_config.json"},kt)]);else if(_t===w.Phi3V)Ut=await Promise.all([I(V,{prepare_inputs_embeds:"prepare_inputs_embeds",model:"model",vision_encoder:"vision_encoder"},kt),$(V,{generation_config:"generation_config.json"},kt)]);else if(_t===w.AutoEncoder)Ut=await Promise.all([I(V,{encoder_model:"encoder_model",decoder_model:"decoder_model"},kt)]);else if(_t===w.Supertonic)Ut=await Promise.all([I(V,{text_encoder:"text_encoder",latent_denoiser:"latent_denoiser",voice_decoder:"voice_decoder"},kt)]);else{if(_t!==w.EncoderOnly){const sr=Ft??(Te==null?void 0:Te.model_type);sr!=="custom"&&console.warn(`Model type for '${sr}' not found, assuming encoder-only architecture. Please report this at ${d.GITHUB_ISSUE_URL}.`)}Ut=await Promise.all([I(V,{model:kt.model_file_name??"model"},kt)])}return new this(Te,...Ut)}async _call(V){return await this.forward(V)}async forward(V){return await this._forward(this,V)}get generation_config(){var V;return((V=this.configs)==null?void 0:V.generation_config)??null}_get_logits_processor(V,pe,Te=null){const ve=new p.LogitsProcessorList;if(V.repetition_penalty!==null&&V.repetition_penalty!==1&&ve.push(new p.RepetitionPenaltyLogitsProcessor(V.repetition_penalty)),V.no_repeat_ngram_size!==null&&V.no_repeat_ngram_size>0&&ve.push(new p.NoRepeatNGramLogitsProcessor(V.no_repeat_ngram_size)),V.bad_words_ids!==null&&ve.push(new p.NoBadWordsLogitsProcessor(V.bad_words_ids,V.eos_token_id)),V.min_length!==null&&V.eos_token_id!==null&&V.min_length>0&&ve.push(new p.MinLengthLogitsProcessor(V.min_length,V.eos_token_id)),V.min_new_tokens!==null&&V.eos_token_id!==null&&V.min_new_tokens>0&&ve.push(new p.MinNewTokensLengthLogitsProcessor(pe,V.min_new_tokens,V.eos_token_id)),V.forced_bos_token_id!==null&&ve.push(new p.ForcedBOSTokenLogitsProcessor(V.forced_bos_token_id)),V.forced_eos_token_id!==null&&ve.push(new p.ForcedEOSTokenLogitsProcessor(V.max_length,V.forced_eos_token_id)),V.begin_suppress_tokens!==null){const ke=pe>1||V.forced_bos_token_id===null?pe:pe+1;ve.push(new p.SuppressTokensAtBeginLogitsProcessor(V.begin_suppress_tokens,ke))}return V.guidance_scale!==null&&V.guidance_scale>1&&ve.push(new p.ClassifierFreeGuidanceLogitsProcessor(V.guidance_scale)),V.temperature===0&&V.do_sample&&(console.warn("`do_sample` changed to false because `temperature: 0` implies greedy sampling (always selecting the most likely token), which is incompatible with `do_sample: true`."),V.do_sample=!1),V.do_sample&&V.temperature!==null&&V.temperature!==1&&ve.push(new p.TemperatureLogitsWarper(V.temperature)),Te!==null&&ve.extend(Te),ve}_prepare_generation_config(V,pe,Te=u.GenerationConfig){const ve={...this.config};for(const Ve of["decoder","generator","text_config"])Ve in ve&&Object.assign(ve,ve[Ve]);const ke=new Te(ve);return Object.assign(ke,this.generation_config??{}),V&&Object.assign(ke,V),pe&&Object.assign(ke,(0,i.pick)(pe,Object.getOwnPropertyNames(ke))),ke}_get_stopping_criteria(V,pe=null){const Te=new _.StoppingCriteriaList;return V.max_length!==null&&Te.push(new _.MaxLengthCriteria(V.max_length,this.config.max_position_embeddings??null)),V.eos_token_id!==null&&Te.push(new _.EosTokenCriteria(V.eos_token_id)),pe&&Te.extend(pe),Te}_validate_model_class(){if(!this.can_generate){const V=[rx,nx,tx,ex],pe=E.get(this.constructor),Te=new Set,ve=this.config.model_type;for(const Ve of V){const Xe=Ve.get(ve);Xe&&Te.add(Xe[0])}let ke=`The current model class (${pe}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;throw Te.size>0&&(ke+=` Please use the following class instead: ${[...Te].join(", ")}`),Error(ke)}}prepare_inputs_for_generation(...V){return this._prepare_inputs_for_generation(this,...V)}_update_model_kwargs_for_generation({generated_input_ids:V,outputs:pe,model_inputs:Te,is_encoder_decoder:ve}){return Te.past_key_values=this.getPastKeyValues(pe,Te.past_key_values),Te.input_ids=new m.Tensor("int64",V.flat(),[V.length,1]),ve||(Te.attention_mask=(0,m.cat)([Te.attention_mask,(0,m.ones)([Te.attention_mask.dims[0],1])],1)),Te.position_ids=null,Te}_prepare_model_inputs({inputs:V,bos_token_id:pe,model_kwargs:Te}){const ve=(0,i.pick)(Te,this.forward_params),ke=this.main_input_name;if(ke in ve){if(V)throw new Error("`inputs`: {inputs}` were passed alongside {input_name} which is not allowed. Make sure to either pass {inputs} or {input_name}=...")}else ve[ke]=V;return{inputs_tensor:ve[ke],model_inputs:ve,model_input_name:ke}}async _prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:V,model_inputs:pe,model_input_name:Te,generation_config:ve}){if(this.sessions.model.inputNames.includes("inputs_embeds")&&!pe.inputs_embeds&&"_prepare_inputs_embeds"in this){const{input_ids:Ve,pixel_values:Xe,attention_mask:rt,...Ct}=pe,jt=await this._prepare_inputs_embeds(pe);pe={...Ct,...(0,i.pick)(jt,["inputs_embeds","attention_mask"])}}let{last_hidden_state:ke}=await Z(this,pe);if(ve.guidance_scale!==null&&ve.guidance_scale>1)ke=(0,m.cat)([ke,(0,m.full_like)(ke,0)],0),"attention_mask"in pe&&(pe.attention_mask=(0,m.cat)([pe.attention_mask,(0,m.zeros_like)(pe.attention_mask)],0));else if(pe.decoder_input_ids){const Ve=U(pe.decoder_input_ids).dims[0];if(Ve!==ke.dims[0]){if(ke.dims[0]!==1)throw new Error(`The encoder outputs have a different batch size (${ke.dims[0]}) than the decoder inputs (${Ve}).`);ke=(0,m.cat)(Array.from({length:Ve},()=>ke),0)}}return pe.encoder_outputs=ke,pe}_prepare_decoder_input_ids_for_generation({batch_size:V,model_input_name:pe,model_kwargs:Te,decoder_start_token_id:ve,bos_token_id:ke,generation_config:Ve}){let{decoder_input_ids:Xe,...rt}=Te;if(!(Xe instanceof m.Tensor)){if(Xe)Array.isArray(Xe[0])||(Xe=Array.from({length:V},()=>Xe));else if(ve??(ve=ke),this.config.model_type==="musicgen")Xe=Array.from({length:V*this.config.decoder.num_codebooks},()=>[ve]);else if(Array.isArray(ve)){if(ve.length!==V)throw new Error(`\`decoder_start_token_id\` expcted to have length ${V} but got ${ve.length}`);Xe=ve}else Xe=Array.from({length:V},()=>[ve]);Xe=U(Xe)}return Te.decoder_attention_mask=(0,m.ones_like)(Xe),{input_ids:Xe,model_inputs:rt}}async generate({inputs:V=null,generation_config:pe=null,logits_processor:Te=null,stopping_criteria:ve=null,streamer:ke=null,...Ve}){this._validate_model_class(),pe=this._prepare_generation_config(pe,Ve);let{inputs_tensor:Xe,model_inputs:rt,model_input_name:Ct}=this._prepare_model_inputs({inputs:V,model_kwargs:Ve});const jt=this.config.is_encoder_decoder;jt&&("encoder_outputs"in rt||(rt=await this._prepare_encoder_decoder_kwargs_for_generation({inputs_tensor:Xe,model_inputs:rt,model_input_name:Ct,generation_config:pe})));let Dt;jt?{input_ids:Dt,model_inputs:rt}=this._prepare_decoder_input_ids_for_generation({batch_size:rt[Ct].dims.at(0),model_input_name:Ct,model_kwargs:rt,decoder_start_token_id:pe.decoder_start_token_id,bos_token_id:pe.bos_token_id,generation_config:pe}):Dt=rt[Ct];let qt=Dt.dims.at(-1);pe.max_new_tokens!==null&&(pe.max_length=qt+pe.max_new_tokens);const kt=this._get_logits_processor(pe,qt,Te),Ft=this._get_stopping_criteria(pe,ve),_t=rt[Ct].dims.at(0),Ut=v.LogitsSampler.getSampler(pe),sr=new Array(_t).fill(0),vr=Dt.tolist();ke&&ke.put(vr);let Tr,Pr={};for(;;){if(rt=this.prepare_inputs_for_generation(vr,rt,pe),Tr=await this.forward(rt),pe.output_attentions&&pe.return_dict_in_generate){const es=this.getAttentions(Tr);for(const Gs in es)Gs in Pr||(Pr[Gs]=[]),Pr[Gs].push(es[Gs])}const Gt=Tr.logits.slice(null,-1,null),_n=kt(vr,Gt),vs=[];for(let es=0;es<_n.dims.at(0);++es){const Gs=_n[es],Mp=await Ut(Gs);for(const[ol,Tp]of Mp){const Ep=BigInt(ol);sr[es]+=Tp,vr[es].push(Ep),vs.push([Ep]);break}}if(ke&&ke.put(vs),Ft(vr).every(es=>es))break;rt=this._update_model_kwargs_for_generation({generated_input_ids:vs,outputs:Tr,model_inputs:rt,is_encoder_decoder:jt})}ke&&ke.end();const ln=this.getPastKeyValues(Tr,rt.past_key_values,!0),bn=new m.Tensor("int64",vr.flat(),[vr.length,vr[0].length]);if(pe.return_dict_in_generate)return{sequences:bn,past_key_values:ln,...Pr};for(const Gt of Object.values(Tr))Gt.location==="gpu-buffer"&&Gt.dispose();return bn}getPastKeyValues(V,pe,Te=!1){const ve=Object.create(null);for(const ke in V)if(ke.startsWith("present")){const Ve=ke.replace("present_conv","past_conv").replace("present","past_key_values"),Xe=ke.includes("encoder");if(Xe&&pe?ve[Ve]=pe[Ve]:ve[Ve]=V[ke],pe&&(!Xe||Te)){const rt=pe[Ve];rt.location==="gpu-buffer"&&rt.dispose()}}return ve}getAttentions(V){const pe={};for(const Te of["cross_attentions","encoder_attentions","decoder_attentions"])for(const ve in V)ve.startsWith(Te)&&(Te in pe||(pe[Te]=[]),pe[Te].push(V[ve]));return pe}addPastKeyValues(V,pe){var Te,ve,ke;if(pe)Object.assign(V,pe);else{const Ve=this.sessions.decoder_model_merged??this.sessions.model,Xe=((ve=(Te=V[this.main_input_name]??V.attention_mask)==null?void 0:Te.dims)==null?void 0:ve[0])??1,rt=((ke=Ve==null?void 0:Ve.config)==null?void 0:ke.kv_cache_dtype)??"float32",Ct=rt==="float16"?m.DataTypeMap.float16:m.DataTypeMap.float32,jt=(0,n.getCacheShapes)(this.config,{batch_size:Xe});for(const Dt in jt){const qt=jt[Dt].reduce((kt,Ft)=>kt*Ft,1);V[Dt]=new m.Tensor(rt,new Ct(qt),jt[Dt])}}}async encode_image({pixel_values:V}){return(await D(this.sessions.vision_encoder,{pixel_values:V})).image_features}async encode_text({input_ids:V}){return(await D(this.sessions.embed_tokens,{input_ids:V})).inputs_embeds}async encode_audio({audio_values:V}){return(await D(this.sessions.audio_encoder,{audio_values:V})).audio_features}}class ue{}class xe extends ue{constructor({last_hidden_state:A,hidden_states:V=null,attentions:pe=null}){super(),this.last_hidden_state=A,this.hidden_states=V,this.attentions=pe}}class be extends F{}class Ee extends be{}class ye extends be{async _call(A){return new wn(await super._call(A))}}class Ae extends be{async _call(A){return new Rt(await super._call(A))}}class Ce extends be{async _call(A){return new gn(await super._call(A))}}class De extends be{async _call(A){return new On(await super._call(A))}}class Be extends F{}class Ze extends Be{}class Se extends Be{async _call(A){return new wn(await super._call(A))}}class it extends Be{async _call(A){return new Rt(await super._call(A))}}class et extends Be{async _call(A){return new gn(await super._call(A))}}class lt extends Be{async _call(A){return new On(await super._call(A))}}class st extends F{}class Re extends st{}class Qe extends st{async _call(A){return new wn(await super._call(A))}}class Pt extends st{async _call(A){return new Rt(await super._call(A))}}class Mt extends st{async _call(A){return new gn(await super._call(A))}}class Wt extends F{}class vt extends Wt{}class wr extends Wt{}class Yr extends F{}class Br extends Yr{}class Pn extends F{}class br extends Pn{}class Zr extends Pn{async _call(A){return new wn(await super._call(A))}}class aa extends Pn{async _call(A){return new Rt(await super._call(A))}}class La extends Pn{async _call(A){return new gn(await super._call(A))}}class Os extends Pn{async _call(A){return new On(await super._call(A))}}class an extends F{}class oa extends an{}class He extends an{async _call(A){return new wn(await super._call(A))}}class Xt extends an{async _call(A){return new Rt(await super._call(A))}}class mt extends an{async _call(A){return new gn(await super._call(A))}}class Kt extends an{async _call(A){return new On(await super._call(A))}}class N extends F{}class se extends N{}class H extends N{async _call(A){return new wn(await super._call(A))}}class re extends N{async _call(A){return new Rt(await super._call(A))}}class de extends N{async _call(A){return new gn(await super._call(A))}}class Pe extends N{async _call(A){return new On(await super._call(A))}}class Fe extends F{}class pt extends Fe{}class It extends Fe{async _call(A){return new wn(await super._call(A))}}class St extends Fe{async _call(A){return new Rt(await super._call(A))}}class Ot extends Fe{async _call(A){return new gn(await super._call(A))}}class dt extends Fe{async _call(A){return new On(await super._call(A))}}class Yt extends F{}class hr extends Yt{}class Bn extends Yt{async _call(A){return new wn(await super._call(A))}}class Zn extends Yt{async _call(A){return new Rt(await super._call(A))}}class Vr extends Yt{async _call(A){return new gn(await super._call(A))}}class on extends Yt{async _call(A){return new On(await super._call(A))}}class Wr extends F{}class Fs extends Wr{}class Ls extends Wr{async _call(A){return new wn(await super._call(A))}}class yn extends Wr{async _call(A){return new Rt(await super._call(A))}}class Ra extends Wr{async _call(A){return new gn(await super._call(A))}}class za extends Wr{async _call(A){return new On(await super._call(A))}}class mn extends F{}class Rs extends mn{}class cs extends mn{async _call(A){return new Rt(await super._call(A))}}class Dn extends mn{async _call(A){return new gn(await super._call(A))}}class zs extends mn{async _call(A){return new On(await super._call(A))}}class Jr extends mn{async _call(A){return new wn(await super._call(A))}}class Or extends F{}class Bs extends Or{}class ho extends Or{async _call(A){return new wn(await super._call(A))}}class Vn extends Or{async _call(A){return new Rt(await super._call(A))}}class Ue extends Or{async _call(A){return new gn(await super._call(A))}}class Ge extends F{}class ut extends Ge{}class gr extends Ge{async _call(A){return new wn(await super._call(A))}}class go extends Ge{async _call(A){return new Rt(await super._call(A))}}class ia extends Ge{async _call(A){return new On(await super._call(A))}}class _s extends F{}class Hi extends _s{}class qi extends _s{async _call(A){return new wn(await super._call(A))}}class Ki extends _s{async _call(A){return new Rt(await super._call(A))}}class Qi extends _s{async _call(A){return new gn(await super._call(A))}}class Xi extends _s{async _call(A){return new On(await super._call(A))}}class _e extends F{}class O extends _e{}class Y extends _e{async _call(A){return new wn(await super._call(A))}}class ie extends _e{async _call(A){return new Rt(await super._call(A))}}class fe extends _e{async _call(A){return new On(await super._call(A))}}class ge extends F{}class $e extends ge{}class qe extends ge{async _call(A){return new Rt(await super._call(A))}}class at extends ge{async _call(A){return new On(await super._call(A))}}class Je extends ge{async _call(A){return new wn(await super._call(A))}}class ct extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class $t extends ct{}class Zt extends ct{}class nr extends F{}class Fr extends nr{}class pr extends nr{}class Ar extends F{}class Lr extends Ar{}class Ir extends Ar{}class Jn extends F{}class pn extends Jn{}class la extends Jn{}class Mr extends Jn{async _call(A){return new Rt(await super._call(A))}}class Ur extends F{}class Sn extends Ur{}class Vs extends Ur{}class Ws extends Ur{async _call(A){return new Rt(await super._call(A))}}class kn extends Ur{}class Wn extends F{}class fn extends Wn{}class Gr extends Wn{}class Cr extends F{}class en extends Cr{}class Un extends Cr{}class Us extends F{}class Yl extends Us{}class Nm extends Us{async _call(A){return new wn(await super._call(A))}}class kd extends Us{async _call(A){return new Rt(await super._call(A))}}class $m extends Us{async _call(A){return new gn(await super._call(A))}}class Dm extends Us{async _call(A){return new On(await super._call(A))}}class Wo extends F{}class Om extends Wo{}class Fm extends Wo{async _call(A){return new wn(await super._call(A))}}class Lm extends Wo{async _call(A){return new Rt(await super._call(A))}}class Rm extends Wo{async _call(A){return new gn(await super._call(A))}}class zm extends Wo{async _call(A){return new On(await super._call(A))}}class Uo extends F{}class Bm extends Uo{}class Vm extends Uo{async _call(A){return new wn(await super._call(A))}}class Wm extends Uo{async _call(A){return new Rt(await super._call(A))}}class jd extends Uo{async _call(A){return new gn(await super._call(A))}}class Ad extends Uo{async _call(A){return new On(await super._call(A))}}class Zl extends F{}class Um extends Zl{}class Gm extends Zl{}class Jl extends F{constructor(){super(...arguments);le(this,"requires_attention_mask",!1);le(this,"main_input_name","input_features");le(this,"forward_params",["input_features","attention_mask","decoder_input_ids","decoder_attention_mask","past_key_values"])}}class Id extends Jl{}class _o extends Jl{_prepare_generation_config(A,V){return super._prepare_generation_config(A,V,x.WhisperGenerationConfig)}_retrieve_init_tokens(A){const V=[A.decoder_start_token_id];let pe=A.language;const Te=A.task;if(A.is_multilingual){pe||(console.warn("No language specified - defaulting to English (en)."),pe="en");const ke=`<|${(0,y.whisper_language_to_code)(pe)}|>`;V.push(A.lang_to_id[ke]),V.push(A.task_to_id[Te??"transcribe"])}else if(pe||Te)throw new Error("Cannot specify `task` or `language` for an English-only model. If the model is intended to be multilingual, pass `is_multilingual=true` to generate, or update the generation config.");return!A.return_timestamps&&A.no_timestamps_token_id&&V.at(-1)!==A.no_timestamps_token_id?V.push(A.no_timestamps_token_id):A.return_timestamps&&V.at(-1)===A.no_timestamps_token_id&&(console.warn("<|notimestamps|> prompt token is removed from generation_config since `return_timestamps` is set to `true`."),V.pop()),V.filter(ve=>ve!=null)}async generate({inputs:A=null,generation_config:V=null,logits_processor:pe=null,stopping_criteria:Te=null,...ve}){V=this._prepare_generation_config(V,ve);const ke=ve.decoder_input_ids??this._retrieve_init_tokens(V);if(V.return_timestamps&&(pe??(pe=new p.LogitsProcessorList),pe.push(new p.WhisperTimeStampLogitsProcessor(V,ke))),V.begin_suppress_tokens&&(pe??(pe=new p.LogitsProcessorList),pe.push(new p.SuppressTokensAtBeginLogitsProcessor(V.begin_suppress_tokens,ke.length))),V.return_token_timestamps){if(!V.alignment_heads)throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");V.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),V.output_attentions=!0,V.return_dict_in_generate=!0}const Ve=await super.generate({inputs:A,generation_config:V,logits_processor:pe,decoder_input_ids:ke,...ve});return V.return_token_timestamps&&(Ve.token_timestamps=this._extract_token_timestamps(Ve,V.alignment_heads,V.num_frames)),Ve}_extract_token_timestamps(A,V,pe=null,Te=.02){if(!A.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");pe==null&&console.warn("`num_frames` has not been set, meaning the entire audio will be analyzed. This may lead to inaccurate token-level timestamps for short audios (< 30 seconds).");let ve=this.config.median_filter_width;ve===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),ve=7);const ke=A.cross_attentions,Ve=Array.from({length:this.config.decoder_layers},(Ft,_t)=>(0,m.cat)(ke.map(Ut=>Ut[_t]),2)),Xe=(0,m.stack)(V.map(([Ft,_t])=>{if(Ft>=Ve.length)throw new Error(`Layer index ${Ft} is out of bounds for cross attentions (length ${Ve.length}).`);return pe?Ve[Ft].slice(null,_t,null,[0,pe]):Ve[Ft].slice(null,_t)})).transpose(1,0,2,3),[rt,Ct]=(0,m.std_mean)(Xe,-2,0,!0),jt=Xe.clone();for(let Ft=0;Ft<jt.dims[0];++Ft){const _t=jt[Ft];for(let Ut=0;Ut<_t.dims[0];++Ut){const sr=_t[Ut],vr=rt[Ft][Ut][0].data,Tr=Ct[Ft][Ut][0].data;for(let Pr=0;Pr<sr.dims[0];++Pr){let ln=sr[Pr].data;for(let bn=0;bn<ln.length;++bn)ln[bn]=(ln[bn]-Tr[bn])/vr[bn];ln.set((0,h.medianFilter)(ln,ve))}}}const Dt=[(0,m.mean)(jt,1)],qt=A.sequences.dims,kt=new m.Tensor("float32",new Float32Array(qt[0]*qt[1]),qt);for(let Ft=0;Ft<qt[0];++Ft){const _t=Dt[Ft].neg().squeeze_(0),[Ut,sr]=(0,h.dynamic_time_warping)(_t.tolist()),vr=Array.from({length:Ut.length-1},(ln,bn)=>Ut[bn+1]-Ut[bn]),Tr=(0,i.mergeArrays)([1],vr).map(ln=>!!ln),Pr=[];for(let ln=0;ln<Tr.length;++ln)Tr[ln]&&Pr.push(sr[ln]*Te);kt[Ft].data.set(Pr,1)}return kt}}class Hm extends _o{}class ec extends F{constructor(){super(...arguments);le(this,"requires_attention_mask",!1);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values","decoder_input_ids","past_key_values"])}}class zg extends ec{}class qm extends ec{}class Nd extends F{constructor(){super(...arguments);le(this,"main_input_name","pixel_values");le(this,"forward_params",["pixel_values","decoder_input_ids","encoder_hidden_states","past_key_values"])}}class Yi extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class Zi extends Yi{_merge_input_ids_with_image_features(A){const V=A.image_features.dims.at(-1),pe=A.image_features.view(-1,V);return ae({image_token_id:this.config.image_token_index,...A,image_features:pe})}}class Km extends Zi{}class Qm extends Zi{}class Xm extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","inputs_embeds","attention_mask","pixel_values","encoder_outputs","decoder_input_ids","decoder_inputs_embeds","decoder_attention_mask","past_key_values"]);le(this,"main_input_name","inputs_embeds")}}class Ym extends Xm{_merge_input_ids_with_image_features({inputs_embeds:A,image_features:V,input_ids:pe,attention_mask:Te}){return{inputs_embeds:(0,m.cat)([V,A],1),attention_mask:(0,m.cat)([(0,m.ones)(V.dims.slice(0,2)),Te],1)}}async _prepare_inputs_embeds({input_ids:A,pixel_values:V,inputs_embeds:pe,attention_mask:Te}){if(!A&&!V)throw new Error("Either `input_ids` or `pixel_values` should be provided.");let ve,ke;return A&&(ve=await this.encode_text({input_ids:A})),V&&(ke=await this.encode_image({pixel_values:V})),ve&&ke?{inputs_embeds:pe,attention_mask:Te}=this._merge_input_ids_with_image_features({inputs_embeds:ve,image_features:ke,input_ids:A,attention_mask:Te}):pe=ve||ke,{inputs_embeds:pe,attention_mask:Te}}async forward({input_ids:A,pixel_values:V,attention_mask:pe,decoder_input_ids:Te,decoder_attention_mask:ve,encoder_outputs:ke,past_key_values:Ve,inputs_embeds:Xe,decoder_inputs_embeds:rt}){if(Xe||({inputs_embeds:Xe,attention_mask:pe}=await this._prepare_inputs_embeds({input_ids:A,pixel_values:V,inputs_embeds:Xe,attention_mask:pe})),!ke){let{last_hidden_state:Dt}=await Z(this,{inputs_embeds:Xe,attention_mask:pe});ke=Dt}if(!rt){if(!Te)throw new Error("Either `decoder_input_ids` or `decoder_inputs_embeds` should be provided.");rt=await this.encode_text({input_ids:Te})}return await ee(this,{inputs_embeds:rt,attention_mask:ve,encoder_attention_mask:pe,encoder_hidden_states:ke,past_key_values:Ve},!0)}}class Zm extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","position_ids","past_key_values"])}}class Jm extends Zm{_merge_input_ids_with_image_features(A){const V=A.image_features.dims.at(-1),pe=A.image_features.view(-1,V);return ae({image_token_id:this.config.image_token_index,...A,image_features:pe})}}class ep extends Yi{_merge_input_ids_with_image_features(A){const V=A.image_features.dims.at(-1),pe=A.image_features.view(-1,V);return ae({image_token_id:this.config.image_token_index,...A,image_features:pe})}}class tp extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","inputs_embeds","per_layer_inputs","position_ids","pixel_values","input_features","input_features_mask","past_key_values"])}}class $d extends tp{async forward({input_ids:A=null,attention_mask:V=null,pixel_values:pe=null,input_features:Te=null,input_features_mask:ve=null,position_ids:ke=null,inputs_embeds:Ve=null,per_layer_inputs:Xe=null,past_key_values:rt=null,generation_config:Ct=null,logits_processor:jt=null,...Dt}){if((!Ve||!Xe)&&({inputs_embeds:Ve,per_layer_inputs:Xe}=await D(this.sessions.embed_tokens,{input_ids:A}),A.dims[1]!==1)){if(pe){const{image_features:kt}=await D(this.sessions.vision_encoder,{pixel_values:pe});({inputs_embeds:Ve,attention_mask:V}=this._merge_input_ids_with_image_features({image_features:kt,inputs_embeds:Ve,input_ids:A,attention_mask:V}))}if(Te){const{audio_features:kt}=await D(this.sessions.audio_encoder,{input_features:Te,input_features_mask:ve});({inputs_embeds:Ve,attention_mask:V}=this._merge_input_ids_with_audio_features({audio_features:kt,inputs_embeds:Ve,input_ids:A,attention_mask:V}))}}return await ee(this,{inputs_embeds:Ve,per_layer_inputs:Xe,past_key_values:rt,attention_mask:V,position_ids:ke,generation_config:Ct,logits_processor:jt},!0)}_merge_input_ids_with_image_features(A){const V=A.image_features.dims.at(-1),pe=A.image_features.view(-1,V);return ae({image_token_id:this.config.image_token_id,...A,image_features:pe})}_merge_input_ids_with_audio_features(A){const V=A.audio_features.dims.at(-1),pe=A.audio_features.view(-1,V);return G({audio_token_id:this.config.audio_token_id,...A,audio_features:pe})}}class Ji extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","pixel_values","pixel_attention_mask","position_ids","past_key_values"])}}class Ba extends Ji{async encode_image({pixel_values:A,pixel_attention_mask:V}){return(await D(this.sessions.vision_encoder,{pixel_values:A,pixel_attention_mask:V})).image_features}_merge_input_ids_with_image_features(A){const V=A.image_features.dims.at(-1),pe=A.image_features.view(-1,V);return ae({image_token_id:this.config.image_token_id,...A,image_features:pe})}}class tc extends Ba{}class rp extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","inputs_embeds","attention_mask","position_ids","pixel_values","image_sizes","past_key_values"])}}class Dd extends rp{async forward({input_ids:A=null,attention_mask:V=null,pixel_values:pe=null,image_sizes:Te=null,position_ids:ve=null,inputs_embeds:ke=null,past_key_values:Ve=null,generation_config:Xe=null,logits_processor:rt=null,...Ct}){if(!ke){let Dt;if(pe&&A.dims[1]!==1){if(!Te)throw new Error("`image_sizes` must be provided when `pixel_values` is provided.");({image_features:Dt}=await D(this.sessions.vision_encoder,{pixel_values:pe,image_sizes:Te}))}else{const qt=this.config.normalized_config.hidden_size;Dt=new m.Tensor("float32",[],[0,qt])}({inputs_embeds:ke}=await D(this.sessions.prepare_inputs_embeds,{input_ids:A,image_features:Dt}))}return await ee(this,{inputs_embeds:ke,past_key_values:Ve,attention_mask:V,position_ids:ve,generation_config:Xe,logits_processor:rt},!1)}}class ca extends F{}class rc extends ca{}class np extends ca{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"text_model"})}}class Od extends ca{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"text_model"})}}class sp extends ca{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"vision_model"})}}class Fd extends ca{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"vision_model"})}}class nc extends F{}class Ld extends nc{}class ap extends nc{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"text_model"})}}class Rd extends ca{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"vision_model"})}}class zd extends F{}class el extends zd{}class yt extends F{}class op extends yt{async forward(A){const V=!A.input_ids,pe=!A.pixel_values;if(V&&pe)throw new Error("Either `input_ids` or `pixel_values` should be provided.");if(V&&(A.input_ids=(0,m.ones)([A.pixel_values.dims[0],1])),pe){const{image_size:rt}=this.config.vision_config;A.pixel_values=(0,m.full)([0,3,rt,rt],0)}const{text_embeddings:Te,image_embeddings:ve,l2norm_text_embeddings:ke,l2norm_image_embeddings:Ve}=await super.forward(A),Xe={};return V||(Xe.text_embeddings=Te,Xe.l2norm_text_embeddings=ke),pe||(Xe.image_embeddings=ve,Xe.l2norm_image_embeddings=Ve),Xe}}class Bd extends yt{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"text_model"})}}class Vd extends yt{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"vision_model"})}}class Go extends F{}class xs extends Go{}class tl extends Go{}class rl extends F{}class Wd extends rl{}class Ud extends rl{}class sc extends F{}class ac extends sc{}class Gd extends sc{}class oc extends F{}class Hd extends oc{}class nl extends oc{}class sl extends F{}class ic extends sl{}class qd extends sl{}class lc extends F{}class Kd extends lc{}class Qd extends lc{}class cc extends F{}class Xd extends cc{}class M extends cc{}class j extends F{}class L extends j{}class W extends j{}class J extends F{}class he extends J{}class Ie extends J{}class We extends F{}class tt extends We{}class ft extends F{}class Lt extends ft{}class Jt extends ft{}class ir extends F{}class hn extends ir{}class xo extends ir{}class Yd extends F{}class n1 extends Yd{}class s1 extends Yd{}class Bg extends F{}class a1 extends Bg{}class o1 extends Bg{}class Vg extends F{}class i1 extends Vg{}class l1 extends Vg{}class Wg extends F{}class c1 extends Wg{}class d1 extends Wg{}class Ug extends F{}class u1 extends Ug{}class m1 extends Ug{}class Gg extends F{}class p1 extends Gg{}class f1 extends Gg{}class Hg extends F{}class h1 extends Hg{}class g1 extends Hg{}class qg extends F{}class _1 extends qg{}class x1 extends qg{}class Kg extends F{}class v1 extends Kg{}class y1 extends Kg{}class Qg extends F{}class w1 extends Qg{}class b1 extends Qg{}class Xg extends F{}class M1 extends Xg{}class T1 extends Xg{}class Yg extends F{}class E1 extends Yg{}class C1 extends Yg{}class Zg extends F{}class P1 extends Zg{}class S1 extends Zg{}class Jg extends F{}class k1 extends Jg{}class j1 extends Jg{}class e_ extends F{}class A1 extends e_{}class I1 extends e_{}class t_ extends F{}class N1 extends t_{}class $1 extends t_{}class r_ extends F{}class D1 extends r_{}class O1 extends r_{}class n_ extends F{}class F1 extends n_{}class L1 extends n_{}class R1 extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","position_ids","past_key_values","pixel_values","image_grid_thw"])}}class z1 extends R1{get_rope_index(A,V,pe,Te){const{vision_config:ve,image_token_id:ke,video_token_id:Ve,vision_start_token_id:Xe}=this.config,rt=ve.spatial_merge_size??2,Ct=[];if(V||pe){let jt=A.tolist();Te||(Te=(0,m.ones_like)(A));const Dt=Te.tolist(),qt=Array.from({length:3},sr=>Array.from({length:A.dims[0]},vr=>Array.from({length:A.dims[1]},Tr=>1))),kt=V?V.tolist():[],Ft=pe?pe.tolist():[];let _t=0,Ut=0;for(let sr=0;sr<jt.length;++sr){const vr=jt[sr].filter((Sr,xn)=>Dt[sr][xn]==1),Pr=vr.reduce((Sr,xn,Ko)=>(xn==Xe&&Sr.push(Ko),Sr),[]).map(Sr=>vr[Sr+1]),ln=Pr.filter(Sr=>Sr==ke).length,bn=Pr.filter(Sr=>Sr==Ve).length;let Gt=[],_n=0,vs=ln,al=bn;for(let Sr=0;Sr<Pr.length;++Sr){const xn=vr.findIndex((ll,da)=>da>_n&&ll==ke),Ko=vr.findIndex((ll,da)=>da>_n&&ll==Ve),il=vs>0&&xn!==-1?xn:vr.length+1,mc=al>0&&Ko!==-1?Ko:vr.length+1;let Cp,ax,ox,ix;il<mc?([ax,ox,ix]=kt[_t],++_t,--vs,Cp=il):([ax,ox,ix]=Ft[Ut],++Ut,--al,Cp=mc);const[DB,lx,Pp]=[Number(ax),Math.floor(Number(ox)/rt),Math.floor(Number(ix)/rt)],cx=Cp-_n,$C=Gt.length>0?(0,h.max)(Gt.at(-1))[0]+1:0;Gt.push(Array.from({length:3*cx},(ll,da)=>$C+da%cx));const dx=cx+$C,Sp=DB*lx*Pp,OB=Array.from({length:Sp},(ll,da)=>dx+Math.floor(da/(lx*Pp))),FB=Array.from({length:Sp},(ll,da)=>dx+Math.floor(da/Pp)%lx),LB=Array.from({length:Sp},(ll,da)=>dx+da%Pp);Gt.push([OB,FB,LB].flat()),_n=Cp+Sp}if(_n<vr.length){const Sr=Gt.length>0?(0,h.max)(Gt.at(-1))[0]+1:0,xn=vr.length-_n;Gt.push(Array.from({length:3*xn},(Ko,il)=>Sr+il%xn))}const es=Gt.reduce((Sr,xn)=>Sr+xn.length,0),Gs=new Array(es);let Mp=0;for(let Sr=0;Sr<3;++Sr)for(let xn=0;xn<Gt.length;++xn){const Ko=Gt[xn],il=Ko.length/3;for(let mc=Sr*il;mc<(Sr+1)*il;++mc)Gs[Mp++]=Ko[mc]}let ol=0;const Tp=Dt[sr];for(let Sr=0;Sr<Tp.length;++Sr)if(Tp[Sr]==1){for(let xn=0;xn<3;++xn)qt[xn][sr][Sr]=Gs[xn*es/3+ol];++ol}const Ep=(0,h.max)(Gs)[0];Ct.push(Ep+1-jt[sr].length)}return[new m.Tensor("int64",qt.flat(1/0),[3,A.dims[0],A.dims[1]]),new m.Tensor("int64",Ct,[Ct.length,1])]}else if(Te){const{data:jt,dims:Dt}=ne(Te),qt=BigInt64Array.from({length:3*jt.length},(Ft,_t)=>jt[_t%jt.length]),kt=Array.from({length:Dt[0]},(Ft,_t)=>(0,h.max)(jt.subarray(Dt[1]*_t,Dt[1]*(_t+1)))[0]+1n+BigInt(Dt[1]));return[new m.Tensor("int64",qt,[3,...Dt]),new m.Tensor("int64",kt,[kt.length,1])]}else{const[jt,Dt]=A.dims,qt=BigInt64Array.from({length:3*jt*Dt},(kt,Ft)=>BigInt(Math.floor(Ft%Dt/jt)));return[new m.Tensor("int64",qt,[3,...A.dims]),(0,m.zeros)([jt,1])]}}async encode_image({pixel_values:A,image_grid_thw:V}){return(await D(this.sessions.vision_encoder,{pixel_values:A,grid_thw:V})).image_features}_merge_input_ids_with_image_features(A){return ae({image_token_id:this.config.image_token_id,...A})}prepare_inputs_for_generation(A,V,pe){if(V.attention_mask&&!V.position_ids)if(!V.past_key_values)[V.position_ids,V.rope_deltas]=this.get_rope_index(V.input_ids,V.image_grid_thw,V.video_grid_thw,V.attention_mask);else{V.pixel_values=null;const Te=BigInt(Object.values(V.past_key_values)[0].dims.at(-2)),ve=V.rope_deltas.map(ke=>Te+ke);V.position_ids=(0,m.stack)([ve,ve,ve],0)}return V}}class s_ extends F{}class B1 extends s_{}class V1 extends s_{}class a_ extends F{}class W1 extends a_{}class U1 extends a_{}class o_ extends F{}class G1 extends o_{}class H1 extends o_{}class i_ extends F{}class q1 extends i_{}class K1 extends i_{}class l_ extends F{}class Q1 extends l_{}class X1 extends l_{}class c_ extends F{}class Y1 extends c_{}class Z1 extends c_{async _call(A){return new Rt(await super._call(A))}}class d_ extends F{}class J1 extends d_{}class eM extends d_{async _call(A){return new Rt(await super._call(A))}}class tM extends F{}class rM extends tM{}class u_ extends F{}class nM extends u_{}class sM extends u_{async _call(A){return new Rt(await super._call(A))}}class aM extends F{}class oM extends aM{}class m_ extends F{}class iM extends m_{}class lM extends m_{async _call(A){return new Rt(await super._call(A))}}class cM extends F{}class dM extends cM{}class p_ extends F{}class uM extends p_{}class mM extends p_{async _call(A){return new Rt(await super._call(A))}}class pM extends F{}class fM extends pM{async _call(A){return new IC(await super._call(A))}}class f_ extends F{}class hM extends f_{}class gM extends f_{async _call(A){return new Rt(await super._call(A))}}class h_ extends F{}class _M extends h_{}class xM extends h_{async _call(A){return new Rt(await super._call(A))}}class g_ extends F{}class vM extends g_{}class yM extends g_{}class __ extends F{}class wM extends __{}class bM extends __{}class x_ extends F{}class MM extends x_{}class TM extends x_{async _call(A){return new Rt(await super._call(A))}}class ip extends F{}class EM extends ip{}class CM extends ip{async _call(A){return new y_(await super._call(A))}}class v_ extends ip{async _call(A){return new PM(await super._call(A))}}class y_ extends ue{constructor({logits:A,pred_boxes:V}){super(),this.logits=A,this.pred_boxes=V}}class PM extends ue{constructor({logits:A,pred_boxes:V,pred_masks:pe}){super(),this.logits=A,this.pred_boxes=V,this.pred_masks=pe}}class w_ extends F{}class SM extends w_{}class kM extends w_{async _call(A){return new Zd(await super._call(A))}}class Zd extends ue{constructor({logits:A,pred_boxes:V}){super(),this.logits=A,this.pred_boxes=V}}class b_ extends F{}class jM extends b_{}class AM extends b_{async _call(A){return new IM(await super._call(A))}}class IM extends Zd{}class M_ extends F{}class NM extends M_{}class $M extends M_{async _call(A){return new DM(await super._call(A))}}class DM extends Zd{}class T_ extends F{}class OM extends T_{}class FM extends T_{async _call(A){return new Zd(await super._call(A))}}class E_ extends F{}class LM extends E_{}class RM extends E_{async _call(A){return new zM(await super._call(A))}}class zM extends y_{}class C_ extends F{}class BM extends C_{}class VM extends C_{async _call(A){return new Rt(await super._call(A))}}class P_ extends F{}class WM extends P_{}class UM extends P_{async _call(A){return new Rt(await super._call(A))}}class S_ extends F{}class GM extends S_{}class HM extends S_{async _call(A){return new Rt(await super._call(A))}}class lp extends F{}class qM extends lp{}class KM extends lp{async _call(A){return new Rt(await super._call(A))}}class QM extends lp{}class k_ extends F{}class XM extends k_{}class YM extends k_{}class j_ extends F{}class ZM extends j_{}class JM extends j_{}class eT extends F{}class tT extends eT{}class cp extends F{}class rT extends cp{}class nT extends cp{}class sT extends cp{}class aT extends F{}class oT extends aT{}class iT extends F{}class lT extends iT{}class cT extends F{}class dT extends cT{}class A_ extends F{}class uT extends A_{}class mT extends A_{}class I_ extends F{}class pT extends I_{}class fT extends I_{}class hT extends F{}class gT extends hT{}class N_ extends F{}class _T extends N_{}class xT extends N_{async _call(A){return new Rt(await super._call(A))}}class $_ extends F{}class vT extends $_{}class yT extends $_{async _call(A){return new Rt(await super._call(A))}}class D_ extends F{}class wT extends D_{}class bT extends D_{async _call(A){return new Rt(await super._call(A))}}class O_ extends F{}class MT extends O_{}class TT extends O_{async _call(A){return new Rt(await super._call(A))}}class ET extends F{}class CT extends ET{}class PT extends F{}class ST extends PT{}class kT extends F{}class jT extends kT{}class F_ extends F{}class AT extends F_{}class IT extends F_{async _call(A){return new NT(await super._call(A))}}class NT extends ue{constructor({logits:A,pred_boxes:V}){super(),this.logits=A,this.pred_boxes=V}}class $T extends F{}class DT extends $T{async get_image_embeddings({pixel_values:A}){return await Z(this,{pixel_values:A})}async forward(A){!A.image_embeddings||!A.image_positional_embeddings?A={...A,...await this.get_image_embeddings(A)}:A={...A},A.input_labels??(A.input_labels=(0,m.ones)(A.input_points.dims.slice(0,-1)));const V={image_embeddings:A.image_embeddings,image_positional_embeddings:A.image_positional_embeddings};return A.input_points&&(V.input_points=A.input_points),A.input_labels&&(V.input_labels=A.input_labels),A.input_boxes&&(V.input_boxes=A.input_boxes),await D(this.sessions.prompt_encoder_mask_decoder,V)}async _call(A){return new OT(await super._call(A))}}class OT extends ue{constructor({iou_scores:A,pred_masks:V}){super(),this.iou_scores=A,this.pred_masks=V}}class FT extends ue{constructor({iou_scores:A,pred_masks:V,object_score_logits:pe}){super(),this.iou_scores=A,this.pred_masks=V,this.object_score_logits=pe}}class LT extends F{}class dp extends LT{async get_image_embeddings({pixel_values:A}){return await Z(this,{pixel_values:A})}async forward(A){const{num_feature_levels:V}=this.config.vision_config;if(Array.from({length:V},(ke,Ve)=>`image_embeddings.${Ve}`).some(ke=>!A[ke])?A={...A,...await this.get_image_embeddings(A)}:A={...A},A.input_points){if(A.input_boxes&&A.input_boxes.dims[1]!==1)throw new Error("When both `input_points` and `input_boxes` are provided, the number of boxes per image must be 1.");const ke=A.input_points.dims;A.input_labels??(A.input_labels=(0,m.ones)(ke.slice(0,-1))),A.input_boxes??(A.input_boxes=(0,m.full)([ke[0],0,4],0))}else if(A.input_boxes){const ke=A.input_boxes.dims;A.input_labels=(0,m.full)([ke[0],ke[1],0],-1n),A.input_points=(0,m.full)([ke[0],1,0,2],0)}else throw new Error("At least one of `input_points` or `input_boxes` must be provided.");const Te=this.sessions.prompt_encoder_mask_decoder,ve=(0,i.pick)(A,Te.inputNames);return await D(Te,ve)}async _call(A){return new FT(await super._call(A))}}class RT extends dp{}class zT extends dp{}class L_ extends F{}class BT extends L_{}class VT extends L_{}class R_ extends F{}class WT extends R_{}class UT extends R_{}class Ho extends F{}class GT extends Ho{}class HT extends Ho{async _call(A){return new qo(await super._call(A))}}class qT extends Ho{async _call(A){return new Rt(await super._call(A))}}class KT extends Ho{async _call(A){return new gn(await super._call(A))}}class QT extends F{}class XT extends QT{async _call(A){return new qo(await super._call(A))}}class z_ extends F{}class YT extends z_{}class ZT extends z_{async _call(A){return new gn(await super._call(A))}}class JT extends F{}class e2 extends JT{}class up extends F{}class t2 extends up{}class r2 extends up{async _call(A){return new qo(await super._call(A))}}class n2 extends up{async _call(A){return new Rt(await super._call(A))}}class Jd extends F{}class s2 extends Jd{}class a2 extends Jd{async _call(A){return new qo(await super._call(A))}}class o2 extends Jd{async _call(A){return new Rt(await super._call(A))}}class i2 extends Jd{async _call(A){return new gn(await super._call(A))}}class mp extends F{}class l2 extends mp{}class c2 extends mp{async _call(A){return new qo(await super._call(A))}}class d2 extends mp{async _call(A){return new Rt(await super._call(A))}}class yB extends F{}class u2 extends Ho{}class m2 extends Ho{async _call(A){return new qo(await super._call(A))}}class p2 extends Ho{async _call(A){return new Rt(await super._call(A))}}class dc extends F{}class f2 extends dc{}class h2 extends dc{async _call(A){return new qo(await super._call(A))}}class g2 extends dc{async _call(A){return new Rt(await super._call(A))}}class _2 extends dc{async _call(A){return new AC(await super._call(A))}}class x2 extends dc{async _call(A){return new gn(await super._call(A))}}class v2 extends F{}class y2 extends v2{}class pp extends F{}class wB extends pp{}class w2 extends pp{}class b2 extends pp{async generate_speech(A,V,{threshold:pe=.5,minlenratio:Te=0,maxlenratio:ve=20,vocoder:ke=null}={}){const Ve={input_ids:A},{encoder_outputs:Xe,encoder_attention_mask:rt}=await Z(this,Ve),Ct=Xe.dims[1]/this.config.reduction_factor,jt=Math.floor(Ct*ve),Dt=Math.floor(Ct*Te),qt=this.config.num_mel_bins;let kt=[],Ft=null,_t=null,Ut=0;for(;;){++Ut;const Tr=q(!!_t);let Pr;_t?Pr=_t.output_sequence_out:Pr=new m.Tensor("float32",new Float32Array(qt),[1,1,qt]);let ln={use_cache_branch:Tr,output_sequence:Pr,encoder_attention_mask:rt,speaker_embeddings:V,encoder_hidden_states:Xe};this.addPastKeyValues(ln,Ft),_t=await D(this.sessions.decoder_model_merged,ln),Ft=this.getPastKeyValues(_t,Ft);const{prob:bn,spectrum:Gt}=_t;if(kt.push(Gt),Ut>=Dt&&(Array.from(bn.data).filter(_n=>_n>=pe).length>0||Ut>=jt))break}const sr=(0,m.cat)(kt),{waveform:vr}=await D(ke.sessions.model,{spectrogram:sr});return{spectrogram:sr,waveform:vr}}}class M2 extends F{constructor(){super(...arguments);le(this,"main_input_name","spectrogram")}}class T2 extends F{}class B_ extends T2{async generate_speech({input_ids:A,attention_mask:V,style:pe,num_inference_steps:Te=5,speed:ve=1.05}){const{sampling_rate:ke,chunk_compress_factor:Ve,base_chunk_size:Xe,latent_dim:rt}=this.config,{last_hidden_state:Ct,durations:jt}=await D(this.sessions.text_encoder,{input_ids:A,attention_mask:V,style:pe});jt.div_(ve);const Dt=jt.max().item()*ke,qt=Xe*Ve,kt=Math.floor((Dt+qt-1)/qt),Ft=A.dims[0],_t=(0,m.ones)([Ft,kt]),Ut=(0,m.full)([Ft],Te);let sr=(0,m.randn)([Ft,rt*Ve,kt]);for(let Tr=0;Tr<Te;++Tr){const Pr=(0,m.full)([Ft],Tr);({denoised_latents:sr}=await D(this.sessions.latent_denoiser,{style:pe,noisy_latents:sr,latent_mask:_t,encoder_outputs:Ct,attention_mask:V,timestep:Pr,num_inference_steps:Ut}))}const{waveform:vr}=await D(this.sessions.voice_decoder,{latents:sr});return{waveform:vr,durations:jt}}}class E2 extends F{}class C2 extends E2{}class V_ extends F{}class P2 extends V_{}class S2 extends V_{}class W_ extends F{}class k2 extends W_{}class j2 extends W_{}class U_ extends F{}class A2 extends U_{}class I2 extends U_{}class G_ extends F{}class N2 extends G_{}class $2 extends G_{}class fp extends F{}class D2 extends fp{}class O2 extends fp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"text_model"})}}class F2 extends fp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"audio_model"})}}class L2 extends F{}class H_ extends L2{async _call(A){return new NC(await super._call(A))}}class hp extends F{}class bB extends hp{}class R2 extends hp{}class z2 extends hp{}class q_ extends F{}class B2 extends q_{}class V2 extends q_{}class K_ extends F{}class W2 extends K_{}class U2 extends K_{async _call(A){return new Rt(await super._call(A))}}class Q_ extends F{}class MB extends Q_{}class TB extends Q_{}class X_ extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","encoder_outputs","decoder_input_ids","decoder_attention_mask","past_key_values"])}_apply_and_filter_by_delay_pattern_mask(V){const[pe,Te]=V.dims,ve=this.config.decoder.num_codebooks,ke=Te-ve;let Ve=0;for(let Ct=0;Ct<V.size;++Ct){if(V.data[Ct]===this.config.decoder.pad_token_id)continue;const jt=Ct%Te,Dt=Math.floor(Ct/Te)%ve,qt=jt-Dt;qt>0&&qt<=ke&&(V.data[Ve++]=V.data[Ct])}const Xe=Math.floor(pe/ve),rt=Ve/(Xe*ve);return new m.Tensor(V.type,V.data.slice(0,Ve),[Xe,ve,rt])}prepare_inputs_for_generation(V,pe,Te){let ve=structuredClone(V);for(let Ve=0;Ve<ve.length;++Ve)for(let Xe=0;Xe<ve[Ve].length;++Xe)Ve%this.config.decoder.num_codebooks>=Xe&&(ve[Ve][Xe]=BigInt(this.config.decoder.pad_token_id));return Te.guidance_scale!==null&&Te.guidance_scale>1&&(ve=ve.concat(ve)),super.prepare_inputs_for_generation(ve,pe,Te)}async generate(V){const pe=await super.generate(V),Te=this._apply_and_filter_by_delay_pattern_mask(pe).unsqueeze_(0),{audio_values:ve}=await D(this.sessions.encodec_decode,{audio_codes:Te});return ve}}class gp extends F{}class G2 extends gp{}class H2 extends gp{async _call(A){return new Rt(await super._call(A))}}class q2 extends gp{}class _p extends F{}class K2 extends _p{}class Q2 extends _p{async _call(A){return new Rt(await super._call(A))}}class X2 extends _p{}class xp extends F{}class Y2 extends xp{}class Z2 extends xp{async _call(A){return new Rt(await super._call(A))}}class J2 extends xp{}class vp extends F{}class eE extends vp{}class tE extends vp{async _call(A){return new Rt(await super._call(A))}}class rE extends vp{}class nE extends F{}class sE extends nE{}class aE extends F{}class oE extends aE{constructor(...V){super(...V);le(this,"forward_params",["input_ids","pixel_values","images_seq_mask","images_emb_mask","attention_mask","position_ids","past_key_values"]);this._generation_mode="text"}async forward(V){const pe=this._generation_mode??"text";let Te;if(pe==="text"||!V.past_key_values){const rt=this.sessions.prepare_inputs_embeds,Ct=(0,i.pick)(V,rt.inputNames);Te=await D(rt,Ct)}else{const rt=this.sessions.gen_img_embeds,Ct=(0,i.pick)({image_ids:V.input_ids},rt.inputNames);Te=await D(rt,Ct)}const ve={...V,...Te},ke=await ee(this,ve),Ve=this.sessions[pe==="text"?"lm_head":"gen_head"];if(!Ve)throw new Error(`Unable to find "${Ve}" generation head`);const Xe=await D(Ve,(0,i.pick)(ke,Ve.inputNames));return{...Te,...ke,...Xe}}async generate(V){return this._generation_mode="text",super.generate(V)}async generate_images(V){this._generation_mode="image";const pe=(V.inputs??V[this.main_input_name]).dims[1],ve=(await super.generate(V)).slice(null,[pe,null]),ke=this.sessions.image_decode,{decoded_image:Ve}=await D(ke,{generated_tokens:ve}),Xe=Ve.add_(1).mul_(255/2).clamp_(0,255).to("uint8"),rt=[];for(const Ct of Xe){const jt=f.RawImage.fromTensor(Ct);rt.push(jt)}return rt}}class iE extends ue{constructor({char_logits:A,bpe_logits:V,wp_logits:pe}){super(),this.char_logits=A,this.bpe_logits=V,this.wp_logits=pe}get logits(){return[this.char_logits,this.bpe_logits,this.wp_logits]}}class lE extends F{}class cE extends lE{async _call(A){return new iE(await super._call(A))}}class Y_ extends F{}class dE extends Y_{}class uE extends Y_{}class Z_ extends F{}class mE extends Z_{}class pE extends Z_{}class fE extends F{constructor(){super(...arguments);le(this,"forward_params",["input_ids","attention_mask","position_ids","audio_values","past_key_values"])}}class J_ extends fE{_merge_input_ids_with_audio_features(A){const V=A.audio_features.dims.at(-1),pe=A.audio_features.view(-1,V);return G({audio_token_id:this.config.ignore_index??this.config.audio_token_id,...A,audio_features:pe})}}class hE extends J_{}class yp extends F{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class gE extends ue{constructor({audio_codes:A}){super(),this.audio_codes=A}}class _E extends ue{constructor({audio_values:A}){super(),this.audio_values=A}}class xE extends yp{async encode(A){return new gE(await D(this.sessions.encoder_model,A))}async decode(A){return new _E(await D(this.sessions.decoder_model,A))}}class vE extends yp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"encoder_model"})}}class yE extends yp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"decoder_model"})}}class wp extends F{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class wE extends ue{constructor({audio_codes:A}){super(),this.audio_codes=A}}class bE extends ue{constructor({audio_values:A}){super(),this.audio_values=A}}class ME extends wp{async encode(A){return new wE(await D(this.sessions.encoder_model,A))}async decode(A){return new bE(await D(this.sessions.decoder_model,A))}}class TE extends wp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"encoder_model"})}}class EE extends wp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"decoder_model"})}}class bp extends F{constructor(){super(...arguments);le(this,"main_input_name","input_values");le(this,"forward_params",["input_values"])}}class CE extends bp{async encode(A){return await D(this.sessions.encoder_model,A)}async decode(A){return await D(this.sessions.decoder_model,A)}}class PE extends bp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"encoder_model"})}}class SE extends bp{static async from_pretrained(A,V={}){return super.from_pretrained(A,{...V,model_file_name:V.model_file_name??"decoder_model"})}}class ar{static async from_pretrained(A,{progress_callback:V=null,config:pe=null,cache_dir:Te=null,local_files_only:ve=!1,revision:ke="main",model_file_name:Ve=null,subfolder:Xe="onnx",device:rt=null,dtype:Ct=null,use_external_data_format:jt=null,session_options:Dt={}}={}){const qt={progress_callback:V,config:pe,cache_dir:Te,local_files_only:ve,revision:ke,model_file_name:Ve,subfolder:Xe,device:rt,dtype:Ct,use_external_data_format:jt,session_options:Dt};if(qt.config=await n.AutoConfig.from_pretrained(A,qt),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);const kt=qt.config.model_type;for(const Ft of this.MODEL_CLASS_MAPPINGS){let _t=Ft.get(kt);if(!_t){for(const Ut of Ft.values())if(Ut[0]===kt){_t=Ut;break}if(!_t)continue}return await _t[1].from_pretrained(A,qt)}if(this.BASE_IF_FAIL)return eC.has(kt)||console.warn(`Unknown model class "${kt}", attempting to construct from base class.`),await F.from_pretrained(A,qt);throw Error(`Unsupported model type: ${kt}`)}}le(ar,"MODEL_CLASS_MAPPINGS",null),le(ar,"BASE_IF_FAIL",!1);const EB=new Map([["bert",["BertModel",Ee]],["neobert",["NeoBertModel",Ze]],["modernbert",["ModernBertModel",Re]],["nomic_bert",["NomicBertModel",Br]],["roformer",["RoFormerModel",br]],["electra",["ElectraModel",se]],["esm",["EsmModel",Bs]],["convbert",["ConvBertModel",oa]],["camembert",["CamembertModel",pt]],["deberta",["DebertaModel",hr]],["deberta-v2",["DebertaV2Model",Fs]],["mpnet",["MPNetModel",Hi]],["albert",["AlbertModel",$e]],["distilbert",["DistilBertModel",Rs]],["roberta",["RobertaModel",Yl]],["xlm",["XLMModel",Om]],["xlm-roberta",["XLMRobertaModel",Bm]],["clap",["ClapModel",D2]],["clip",["CLIPModel",rc]],["clipseg",["CLIPSegModel",xs]],["chinese_clip",["ChineseCLIPModel",el]],["siglip",["SiglipModel",Ld]],["jina_clip",["JinaCLIPModel",op]],["mobilebert",["MobileBertModel",ut]],["squeezebert",["SqueezeBertModel",O]],["wav2vec2",["Wav2Vec2Model",GT]],["wav2vec2-bert",["Wav2Vec2BertModel",l2]],["unispeech",["UniSpeechModel",t2]],["unispeech-sat",["UniSpeechSatModel",s2]],["hubert",["HubertModel",u2]],["wavlm",["WavLMModel",f2]],["audio-spectrogram-transformer",["ASTModel",Um]],["vits",["VitsModel",H_]],["pyannote",["PyAnnoteModel",YT]],["wespeaker-resnet",["WeSpeakerResNetModel",e2]],["detr",["DetrModel",EM]],["rt_detr",["RTDetrModel",SM]],["rt_detr_v2",["RTDetrV2Model",jM]],["rf_detr",["RFDetrModel",NM]],["d_fine",["DFineModel",OM]],["table-transformer",["TableTransformerModel",LM]],["vit",["ViTModel",Y1]],["ijepa",["IJepaModel",J1]],["pvt",["PvtModel",nM]],["vit_msn",["ViTMSNModel",iM]],["vit_mae",["ViTMAEModel",oM]],["groupvit",["GroupViTModel",dM]],["fastvit",["FastViTModel",uM]],["mobilevit",["MobileViTModel",hM]],["mobilevitv2",["MobileViTV2Model",_M]],["owlvit",["OwlViTModel",vM]],["owlv2",["Owlv2Model",wM]],["beit",["BeitModel",MM]],["deit",["DeiTModel",BM]],["hiera",["HieraModel",WM]],["convnext",["ConvNextModel",_T]],["convnextv2",["ConvNextV2Model",vT]],["dinov2",["Dinov2Model",wT]],["dinov2_with_registers",["Dinov2WithRegistersModel",MT]],["dinov3_vit",["DINOv3ViTModel",CT]],["dinov3_convnext",["DINOv3ConvNextModel",ST]],["resnet",["ResNetModel",GM]],["swin",["SwinModel",qM]],["swin2sr",["Swin2SRModel",XM]],["donut-swin",["DonutSwinModel",gT]],["yolos",["YolosModel",AT]],["dpt",["DPTModel",ZM]],["glpn",["GLPNModel",pT]],["hifigan",["SpeechT5HifiGan",M2]],["efficientnet",["EfficientNetModel",W2]],["decision_transformer",["DecisionTransformerModel",sE]],["patchtst",["PatchTSTForPrediction",dE]],["patchtsmixer",["PatchTSMixerForPrediction",mE]],["mobilenet_v1",["MobileNetV1Model",G2]],["mobilenet_v2",["MobileNetV2Model",K2]],["mobilenet_v3",["MobileNetV3Model",Y2]],["mobilenet_v4",["MobileNetV4Model",eE]],["maskformer",["MaskFormerModel",uT]],["mgp-str",["MgpstrForSceneTextRecognition",cE]],["style_text_to_speech_2",["StyleTextToSpeech2Model",y2]]]),CB=new Map([["t5",["T5Model",$t]],["longt5",["LongT5Model",Fr]],["mt5",["MT5Model",Lr]],["bart",["BartModel",pn]],["mbart",["MBartModel",Sn]],["marian",["MarianModel",BT]],["whisper",["WhisperModel",Id]],["m2m_100",["M2M100Model",WT]],["blenderbot",["BlenderbotModel",fn]],["blenderbot-small",["BlenderbotSmallModel",en]]]),PB=new Map([["mimi",["MimiModel",xE]],["dac",["DacModel",ME]],["snac",["SnacModel",CE]]]),SB=new Map([["bloom",["BloomModel",G1]],["jais",["JAISModel",ac]],["gpt2",["GPT2Model",Wd]],["gptj",["GPTJModel",Kd]],["gpt_bigcode",["GPTBigCodeModel",Xd]],["gpt_neo",["GPTNeoModel",Hd]],["gpt_neox",["GPTNeoXModel",ic]],["codegen",["CodeGenModel",L]],["llama",["LlamaModel",he]],["nanochat",["NanoChatModel",Lt]],["arcee",["ArceeModel",hn]],["lfm2",["Lfm2Model",n1]],["smollm3",["SmolLM3Model",a1]],["exaone",["ExaoneModel",u1]],["olmo",["OlmoModel",h1]],["olmo2",["Olmo2Model",_1]],["mobilellm",["MobileLLMModel",p1]],["granite",["GraniteModel",v1]],["granitemoehybrid",["GraniteMoeHybridModel",w1]],["cohere",["CohereModel",M1]],["gemma",["GemmaModel",E1]],["gemma2",["Gemma2Model",P1]],["vaultgemma",["VaultGemmaModel",k1]],["gemma3_text",["Gemma3Model",A1]],["helium",["HeliumModel",i1]],["glm",["GlmModel",c1]],["openelm",["OpenELMModel",N1]],["qwen2",["Qwen2Model",D1]],["qwen3",["Qwen3Model",F1]],["phi",["PhiModel",B1]],["phi3",["Phi3Model",W1]],["mpt",["MptModel",q1]],["opt",["OPTModel",Q1]],["mistral",["MistralModel",P2]],["ernie4_5",["Ernie4_5_Model",k2]],["starcoder2",["Starcoder2Model",A2]],["falcon",["FalconModel",N2]],["stablelm",["StableLmModel",B2]],["modernbert-decoder",["ModernBertDecoderModel",vt]]]),ex=new Map([["speecht5",["SpeechT5ForSpeechToText",w2]],["whisper",["WhisperForConditionalGeneration",_o]],["lite-whisper",["LiteWhisperForConditionalGeneration",Hm]],["moonshine",["MoonshineForConditionalGeneration",qm]]]),kE=new Map([["speecht5",["SpeechT5ForTextToSpeech",b2]]]),jE=new Map([["vits",["VitsModel",H_]],["musicgen",["MusicgenForConditionalGeneration",X_]],["supertonic",["SupertonicForConditionalGeneration",B_]]]),AE=new Map([["bert",["BertForSequenceClassification",Ae]],["neobert",["NeoBertForSequenceClassification",it]],["modernbert",["ModernBertForSequenceClassification",Pt]],["roformer",["RoFormerForSequenceClassification",aa]],["electra",["ElectraForSequenceClassification",re]],["esm",["EsmForSequenceClassification",Vn]],["convbert",["ConvBertForSequenceClassification",Xt]],["camembert",["CamembertForSequenceClassification",St]],["deberta",["DebertaForSequenceClassification",Zn]],["deberta-v2",["DebertaV2ForSequenceClassification",yn]],["mpnet",["MPNetForSequenceClassification",Ki]],["albert",["AlbertForSequenceClassification",qe]],["distilbert",["DistilBertForSequenceClassification",cs]],["roberta",["RobertaForSequenceClassification",kd]],["xlm",["XLMForSequenceClassification",Lm]],["xlm-roberta",["XLMRobertaForSequenceClassification",Wm]],["bart",["BartForSequenceClassification",Mr]],["mbart",["MBartForSequenceClassification",Ws]],["mobilebert",["MobileBertForSequenceClassification",go]],["squeezebert",["SqueezeBertForSequenceClassification",ie]]]),IE=new Map([["bert",["BertForTokenClassification",Ce]],["neobert",["NeoBertForTokenClassification",et]],["modernbert",["ModernBertForTokenClassification",Mt]],["roformer",["RoFormerForTokenClassification",La]],["electra",["ElectraForTokenClassification",de]],["esm",["EsmForTokenClassification",Ue]],["convbert",["ConvBertForTokenClassification",mt]],["camembert",["CamembertForTokenClassification",Ot]],["deberta",["DebertaForTokenClassification",Vr]],["deberta-v2",["DebertaV2ForTokenClassification",Ra]],["mpnet",["MPNetForTokenClassification",Qi]],["distilbert",["DistilBertForTokenClassification",Dn]],["roberta",["RobertaForTokenClassification",$m]],["xlm",["XLMForTokenClassification",Rm]],["xlm-roberta",["XLMRobertaForTokenClassification",jd]]]),tx=new Map([["t5",["T5ForConditionalGeneration",Zt]],["longt5",["LongT5ForConditionalGeneration",pr]],["mt5",["MT5ForConditionalGeneration",Ir]],["bart",["BartForConditionalGeneration",la]],["mbart",["MBartForConditionalGeneration",Vs]],["marian",["MarianMTModel",VT]],["m2m_100",["M2M100ForConditionalGeneration",UT]],["blenderbot",["BlenderbotForConditionalGeneration",Gr]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",Un]]]),rx=new Map([["bloom",["BloomForCausalLM",H1]],["gpt2",["GPT2LMHeadModel",Ud]],["jais",["JAISLMHeadModel",Gd]],["gptj",["GPTJForCausalLM",Qd]],["gpt_bigcode",["GPTBigCodeForCausalLM",M]],["gpt_neo",["GPTNeoForCausalLM",nl]],["gpt_neox",["GPTNeoXForCausalLM",qd]],["codegen",["CodeGenForCausalLM",W]],["llama",["LlamaForCausalLM",Ie]],["nanochat",["NanoChatForCausalLM",Jt]],["llama4_text",["Llama4ForCausalLM",tt]],["arcee",["ArceeForCausalLM",xo]],["lfm2",["Lfm2ForCausalLM",s1]],["smollm3",["SmolLM3ForCausalLM",o1]],["exaone",["ExaoneForCausalLM",m1]],["olmo",["OlmoForCausalLM",g1]],["olmo2",["Olmo2ForCausalLM",x1]],["mobilellm",["MobileLLMForCausalLM",f1]],["granite",["GraniteForCausalLM",y1]],["granitemoehybrid",["GraniteMoeHybridForCausalLM",b1]],["cohere",["CohereForCausalLM",T1]],["gemma",["GemmaForCausalLM",C1]],["gemma2",["Gemma2ForCausalLM",S1]],["vaultgemma",["VaultGemmaForCausalLM",j1]],["gemma3_text",["Gemma3ForCausalLM",I1]],["helium",["HeliumForCausalLM",l1]],["glm",["GlmForCausalLM",d1]],["openelm",["OpenELMForCausalLM",$1]],["qwen2",["Qwen2ForCausalLM",O1]],["qwen3",["Qwen3ForCausalLM",L1]],["phi",["PhiForCausalLM",V1]],["phi3",["Phi3ForCausalLM",U1]],["mpt",["MptForCausalLM",K1]],["opt",["OPTForCausalLM",X1]],["mbart",["MBartForCausalLM",kn]],["mistral",["MistralForCausalLM",S2]],["ernie4_5",["Ernie4_5_ForCausalLM",j2]],["starcoder2",["Starcoder2ForCausalLM",I2]],["falcon",["FalconForCausalLM",$2]],["trocr",["TrOCRForCausalLM",C2]],["stablelm",["StableLmForCausalLM",V2]],["modernbert-decoder",["ModernBertDecoderForCausalLM",wr]],["phi3_v",["Phi3VForCausalLM",Dd]]]),kB=new Map([["multi_modality",["MultiModalityCausalLM",oE]]]),NE=new Map([["bert",["BertForMaskedLM",ye]],["neobert",["NeoBertForMaskedLM",Se]],["modernbert",["ModernBertForMaskedLM",Qe]],["roformer",["RoFormerForMaskedLM",Zr]],["electra",["ElectraForMaskedLM",H]],["esm",["EsmForMaskedLM",ho]],["convbert",["ConvBertForMaskedLM",He]],["camembert",["CamembertForMaskedLM",It]],["deberta",["DebertaForMaskedLM",Bn]],["deberta-v2",["DebertaV2ForMaskedLM",Ls]],["mpnet",["MPNetForMaskedLM",qi]],["albert",["AlbertForMaskedLM",Je]],["distilbert",["DistilBertForMaskedLM",Jr]],["roberta",["RobertaForMaskedLM",Nm]],["xlm",["XLMWithLMHeadModel",Fm]],["xlm-roberta",["XLMRobertaForMaskedLM",Vm]],["mobilebert",["MobileBertForMaskedLM",gr]],["squeezebert",["SqueezeBertForMaskedLM",Y]]]),$E=new Map([["bert",["BertForQuestionAnswering",De]],["neobert",["NeoBertForQuestionAnswering",lt]],["roformer",["RoFormerForQuestionAnswering",Os]],["electra",["ElectraForQuestionAnswering",Pe]],["convbert",["ConvBertForQuestionAnswering",Kt]],["camembert",["CamembertForQuestionAnswering",dt]],["deberta",["DebertaForQuestionAnswering",on]],["deberta-v2",["DebertaV2ForQuestionAnswering",za]],["mpnet",["MPNetForQuestionAnswering",Xi]],["albert",["AlbertForQuestionAnswering",at]],["distilbert",["DistilBertForQuestionAnswering",zs]],["roberta",["RobertaForQuestionAnswering",Dm]],["xlm",["XLMForQuestionAnswering",zm]],["xlm-roberta",["XLMRobertaForQuestionAnswering",Ad]],["mobilebert",["MobileBertForQuestionAnswering",ia]],["squeezebert",["SqueezeBertForQuestionAnswering",fe]]]),nx=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Nd]],["idefics3",["Idefics3ForConditionalGeneration",Ba]],["smolvlm",["SmolVLMForConditionalGeneration",tc]]]),DE=new Map([["llava",["LlavaForConditionalGeneration",Zi]],["llava_onevision",["LlavaOnevisionForConditionalGeneration",Km]],["moondream1",["Moondream1ForConditionalGeneration",Qm]],["florence2",["Florence2ForConditionalGeneration",Ym]],["qwen2-vl",["Qwen2VLForConditionalGeneration",z1]],["idefics3",["Idefics3ForConditionalGeneration",Ba]],["smolvlm",["SmolVLMForConditionalGeneration",tc]],["paligemma",["PaliGemmaForConditionalGeneration",Jm]],["llava_qwen2",["LlavaQwen2ForCausalLM",ep]],["gemma3n",["Gemma3nForConditionalGeneration",$d]]]),OE=new Map([["ultravox",["UltravoxModel",J_]],["voxtral",["VoxtralForConditionalGeneration",hE]]]),jB=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",Nd]]]),FE=new Map([["vit",["ViTForImageClassification",Z1]],["ijepa",["IJepaForImageClassification",eM]],["pvt",["PvtForImageClassification",sM]],["vit_msn",["ViTMSNForImageClassification",lM]],["fastvit",["FastViTForImageClassification",mM]],["mobilevit",["MobileViTForImageClassification",gM]],["mobilevitv2",["MobileViTV2ForImageClassification",xM]],["beit",["BeitForImageClassification",TM]],["deit",["DeiTForImageClassification",VM]],["hiera",["HieraForImageClassification",UM]],["convnext",["ConvNextForImageClassification",xT]],["convnextv2",["ConvNextV2ForImageClassification",yT]],["dinov2",["Dinov2ForImageClassification",bT]],["dinov2_with_registers",["Dinov2WithRegistersForImageClassification",TT]],["resnet",["ResNetForImageClassification",HM]],["swin",["SwinForImageClassification",KM]],["segformer",["SegformerForImageClassification",R2]],["efficientnet",["EfficientNetForImageClassification",U2]],["mobilenet_v1",["MobileNetV1ForImageClassification",H2]],["mobilenet_v2",["MobileNetV2ForImageClassification",Q2]],["mobilenet_v3",["MobileNetV3ForImageClassification",Z2]],["mobilenet_v4",["MobileNetV4ForImageClassification",tE]]]),LE=new Map([["detr",["DetrForObjectDetection",CM]],["rt_detr",["RTDetrForObjectDetection",kM]],["rt_detr_v2",["RTDetrV2ForObjectDetection",AM]],["rf_detr",["RFDetrForObjectDetection",$M]],["d_fine",["DFineForObjectDetection",FM]],["table-transformer",["TableTransformerForObjectDetection",RM]],["yolos",["YolosForObjectDetection",IT]]]),RE=new Map([["owlvit",["OwlViTForObjectDetection",yM]],["owlv2",["Owlv2ForObjectDetection",bM]],["grounding-dino",["GroundingDinoForObjectDetection",jT]]]),uc=new Map([["detr",["DetrForSegmentation",v_]],["clipseg",["CLIPSegForImageSegmentation",tl]]]),zE=new Map([["segformer",["SegformerForSemanticSegmentation",z2]],["sapiens",["SapiensForSemanticSegmentation",rT]],["swin",["SwinForSemanticSegmentation",QM]],["mobilenet_v1",["MobileNetV1ForSemanticSegmentation",q2]],["mobilenet_v2",["MobileNetV2ForSemanticSegmentation",X2]],["mobilenet_v3",["MobileNetV3ForSemanticSegmentation",J2]],["mobilenet_v4",["MobileNetV4ForSemanticSegmentation",rE]]]),BE=new Map([["detr",["DetrForSegmentation",v_]],["maskformer",["MaskFormerForInstanceSegmentation",mT]]]),VE=new Map([["sam",["SamModel",DT]],["sam2",["Sam2Model",dp]],["edgetam",["EdgeTamModel",RT]],["sam3_tracker",["Sam3TrackerModel",zT]]]),WE=new Map([["wav2vec2",["Wav2Vec2ForCTC",HT]],["wav2vec2-bert",["Wav2Vec2BertForCTC",c2]],["unispeech",["UniSpeechForCTC",r2]],["unispeech-sat",["UniSpeechSatForCTC",a2]],["wavlm",["WavLMForCTC",h2]],["hubert",["HubertForCTC",m2]],["parakeet_ctc",["ParakeetForCTC",XT]]]),UE=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",qT]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",d2]],["unispeech",["UniSpeechForSequenceClassification",n2]],["unispeech-sat",["UniSpeechSatForSequenceClassification",o2]],["wavlm",["WavLMForSequenceClassification",g2]],["hubert",["HubertForSequenceClassification",p2]],["audio-spectrogram-transformer",["ASTForAudioClassification",Gm]]]),GE=new Map([["wavlm",["WavLMForXVector",_2]]]),HE=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",i2]],["wavlm",["WavLMForAudioFrameClassification",x2]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",KT]],["pyannote",["PyAnnoteForAudioFrameClassification",ZT]]]),qE=new Map([["vitmatte",["VitMatteForImageMatting",fM]]]),AB=new Map([["patchtst",["PatchTSTForPrediction",uE]],["patchtsmixer",["PatchTSMixerForPrediction",pE]]]),KE=new Map([["swin2sr",["Swin2SRForImageSuperResolution",YM]]]),QE=new Map([["dpt",["DPTForDepthEstimation",JM]],["depth_anything",["DepthAnythingForDepthEstimation",tT]],["glpn",["GLPNForDepthEstimation",fT]],["sapiens",["SapiensForDepthEstimation",nT]],["depth_pro",["DepthProForDepthEstimation",oT]],["metric3d",["Metric3DForDepthEstimation",lT]],["metric3dv2",["Metric3Dv2ForDepthEstimation",dT]]]),XE=new Map([["sapiens",["SapiensForNormalEstimation",sT]]]),YE=new Map([["vitpose",["VitPoseForPoseEstimation",rM]]]),ZE=new Map([["clip",["CLIPVisionModelWithProjection",Fd]],["siglip",["SiglipVisionModel",Rd]],["jina_clip",["JinaCLIPVisionModel",Vd]]]),JE=[[EB,w.EncoderOnly],[CB,w.EncoderDecoder],[SB,w.DecoderOnly],[PB,w.AutoEncoder],[AE,w.EncoderOnly],[IE,w.EncoderOnly],[tx,w.Seq2Seq],[ex,w.Seq2Seq],[rx,w.DecoderOnly],[kB,w.MultiModality],[NE,w.EncoderOnly],[$E,w.EncoderOnly],[nx,w.Vision2Seq],[DE,w.ImageTextToText],[OE,w.AudioTextToText],[FE,w.EncoderOnly],[uc,w.EncoderOnly],[BE,w.EncoderOnly],[zE,w.EncoderOnly],[qE,w.EncoderOnly],[AB,w.EncoderOnly],[KE,w.EncoderOnly],[QE,w.EncoderOnly],[XE,w.EncoderOnly],[YE,w.EncoderOnly],[LE,w.EncoderOnly],[RE,w.EncoderOnly],[VE,w.MaskGeneration],[WE,w.EncoderOnly],[UE,w.EncoderOnly],[kE,w.Seq2Seq],[jE,w.EncoderOnly],[GE,w.EncoderOnly],[HE,w.EncoderOnly],[ZE,w.EncoderOnly]];for(const[S,A]of JE)for(const[V,pe]of S.values())b.set(V,A),E.set(pe,V),C.set(V,pe);const IB=[["MusicgenForConditionalGeneration",X_,w.Musicgen],["Phi3VForCausalLM",Dd,w.Phi3V],["CLIPTextModelWithProjection",Od,w.EncoderOnly],["SiglipTextModel",ap,w.EncoderOnly],["JinaCLIPTextModel",Bd,w.EncoderOnly],["ClapTextModelWithProjection",O2,w.EncoderOnly],["ClapAudioModelWithProjection",F2,w.EncoderOnly],["DacEncoderModel",TE,w.EncoderOnly],["DacDecoderModel",EE,w.EncoderOnly],["MimiEncoderModel",vE,w.EncoderOnly],["MimiDecoderModel",yE,w.EncoderOnly],["SnacEncoderModel",PE,w.EncoderOnly],["SnacDecoderModel",SE,w.EncoderOnly],["Gemma3nForConditionalGeneration",$d,w.ImageAudioTextToText],["SupertonicForConditionalGeneration",B_,w.Supertonic]];for(const[S,A,V]of IB)b.set(S,V),E.set(A,S),C.set(S,A);const eC=new Map([["modnet",uc],["birefnet",uc],["isnet",uc],["ben",uc]]);for(const[S,A]of eC.entries())A.set(S,["PreTrainedModel",F]),b.set(S,w.EncoderOnly),E.set(F,S),C.set(S,F);class sx extends ar{}le(sx,"MODEL_CLASS_MAPPINGS",JE.map(A=>A[0])),le(sx,"BASE_IF_FAIL",!0);class tC extends ar{}le(tC,"MODEL_CLASS_MAPPINGS",[AE]);class rC extends ar{}le(rC,"MODEL_CLASS_MAPPINGS",[IE]);class nC extends ar{}le(nC,"MODEL_CLASS_MAPPINGS",[tx]);class sC extends ar{}le(sC,"MODEL_CLASS_MAPPINGS",[ex]);class aC extends ar{}le(aC,"MODEL_CLASS_MAPPINGS",[kE]);class oC extends ar{}le(oC,"MODEL_CLASS_MAPPINGS",[jE]);class iC extends ar{}le(iC,"MODEL_CLASS_MAPPINGS",[rx]);class lC extends ar{}le(lC,"MODEL_CLASS_MAPPINGS",[NE]);class cC extends ar{}le(cC,"MODEL_CLASS_MAPPINGS",[$E]);class dC extends ar{}le(dC,"MODEL_CLASS_MAPPINGS",[nx]);class uC extends ar{}le(uC,"MODEL_CLASS_MAPPINGS",[FE]);class mC extends ar{}le(mC,"MODEL_CLASS_MAPPINGS",[uc]);class pC extends ar{}le(pC,"MODEL_CLASS_MAPPINGS",[zE]);class fC extends ar{}le(fC,"MODEL_CLASS_MAPPINGS",[BE]);class hC extends ar{}le(hC,"MODEL_CLASS_MAPPINGS",[LE]);class gC extends ar{}le(gC,"MODEL_CLASS_MAPPINGS",[RE]);class _C extends ar{}le(_C,"MODEL_CLASS_MAPPINGS",[VE]);class xC extends ar{}le(xC,"MODEL_CLASS_MAPPINGS",[WE]);class vC extends ar{}le(vC,"MODEL_CLASS_MAPPINGS",[UE]);class yC extends ar{}le(yC,"MODEL_CLASS_MAPPINGS",[GE]);class wC extends ar{}le(wC,"MODEL_CLASS_MAPPINGS",[HE]);class bC extends ar{}le(bC,"MODEL_CLASS_MAPPINGS",[jB]);class MC extends ar{}le(MC,"MODEL_CLASS_MAPPINGS",[qE]);class TC extends ar{}le(TC,"MODEL_CLASS_MAPPINGS",[KE]);class EC extends ar{}le(EC,"MODEL_CLASS_MAPPINGS",[QE]);class CC extends ar{}le(CC,"MODEL_CLASS_MAPPINGS",[XE]);class PC extends ar{}le(PC,"MODEL_CLASS_MAPPINGS",[YE]);class SC extends ar{}le(SC,"MODEL_CLASS_MAPPINGS",[ZE]);class kC extends ar{}le(kC,"MODEL_CLASS_MAPPINGS",[DE]);class jC extends ar{}le(jC,"MODEL_CLASS_MAPPINGS",[OE]);class NB extends ue{constructor({logits:A,past_key_values:V,encoder_outputs:pe,decoder_attentions:Te=null,cross_attentions:ve=null}){super(),this.logits=A,this.past_key_values=V,this.encoder_outputs=pe,this.decoder_attentions=Te,this.cross_attentions=ve}}class Rt extends ue{constructor({logits:A,...V}){super(),this.logits=A;const pe=Object.values(V);pe.length>0&&(this.attentions=pe)}}class AC extends ue{constructor({logits:A,embeddings:V}){super(),this.logits=A,this.embeddings=V}}class gn extends ue{constructor({logits:A}){super(),this.logits=A}}class wn extends ue{constructor({logits:A}){super(),this.logits=A}}class On extends ue{constructor({start_logits:A,end_logits:V}){super(),this.start_logits=A,this.end_logits=V}}class qo extends ue{constructor({logits:A}){super(),this.logits=A}}class $B extends ue{constructor({logits:A,past_key_values:V}){super(),this.logits=A,this.past_key_values=V}}class IC extends ue{constructor({alphas:A}){super(),this.alphas=A}}class NC extends ue{constructor({waveform:A,spectrogram:V}){super(),this.waveform=A,this.spectrogram=V}}},"./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(i){super(i);const l=this.config.sampling_rate,d=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=d,this.window=(0,s.window_function)(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}async _extract_fbank_features(i,l){return(0,s.spectrogram)(i,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:l,transpose:!0})}async _call(i){(0,n.validate_audio_inputs)(i,"ASTFeatureExtractor");const l=await this._extract_fbank_features(i,this.config.max_length);if(this.config.do_normalize){const d=this.std*2,p=l.data;for(let u=0;u<p.length;++u)p[u]=(p[u]-this.mean)/d}return{input_values:l.unsqueeze_(0)}}}},"./src/models/auto/feature_extraction_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoFeatureExtractor:()=>o});var n=r("./src/utils/constants.js"),s=r("./src/utils/hub.js");r("./src/base/feature_extraction_utils.js");var a=r("./src/models/feature_extractors.js");class o{static async from_pretrained(l,d={}){const p=await(0,s.getModelJSON)(l,n.FEATURE_EXTRACTOR_NAME,!0,d),u=p.feature_extractor_type,m=a[u];if(!m)throw new Error(`Unknown feature_extractor_type: '${u}'. Please report this at ${n.GITHUB_ISSUE_URL}.`);return new m(p)}}},"./src/models/auto/image_processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoImageProcessor:()=>i});var n=r("./src/utils/constants.js"),s=r("./src/utils/hub.js"),a=r("./src/base/image_processors_utils.js"),o=r("./src/models/image_processors.js");class i{static async from_pretrained(d,p={}){const u=await(0,s.getModelJSON)(d,n.IMAGE_PROCESSOR_NAME,!0,p),m=u.image_processor_type??u.feature_extractor_type;let f=o[m==null?void 0:m.replace(/Fast$/,"")];return f||(m!==void 0&&console.warn(`Image processor type '${m}' not found, assuming base ImageProcessor. Please report this at ${n.GITHUB_ISSUE_URL}.`),f=a.ImageProcessor),new f(u)}}},"./src/models/auto/processing_auto.js":(e,t,r)=>{r.r(t),r.d(t,{AutoProcessor:()=>d});var n=r("./src/utils/constants.js"),s=r("./src/utils/hub.js"),a=r("./src/base/processing_utils.js"),o=r("./src/models/processors.js"),i=r("./src/models/image_processors.js"),l=r("./src/models/feature_extractors.js");class d{static async from_pretrained(u,m={}){const f=await(0,s.getModelJSON)(u,n.IMAGE_PROCESSOR_NAME,!0,m),{image_processor_type:h,feature_extractor_type:_,processor_class:v}=f;if(v&&o[v])return o[v].from_pretrained(u,m);if(!h&&!_)throw new Error("No `image_processor_type` or `feature_extractor_type` found in the config.");const g={};if(h){const y=i[h.replace(/Fast$/,"")];if(!y)throw new Error(`Unknown image_processor_type: '${h}'.`);g.image_processor=new y(f)}if(_){const y=i[_];if(y)g.image_processor=new y(f);else{const w=l[_];if(!w)throw new Error(`Unknown feature_extractor_type: '${_}'.`);g.feature_extractor=new w(f)}}const x={};return new a.Processor(x,g,null)}}},"./src/models/beit/image_processing_beit.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/bit/image_processing_bit.js":(e,t,r)=>{r.r(t),r.d(t,{BitImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/chinese_clip/image_processing_chinese_clip.js":(e,t,r)=>{r.r(t),r.d(t,{ChineseCLIPFeatureExtractor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/clap/feature_extraction_clap.js":(e,t,r)=>{r.r(t),r.d(t,{ClapFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(i){super(i),this.mel_filters=(0,s.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=(0,s.mel_filter_bank)(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=(0,s.window_function)(this.config.fft_window_size,"hann")}async _get_input_mel(i,l,d,p){let u;const m=i.length-l;if(m>0)if(d==="rand_trunc"){const f=Math.floor(Math.random()*(m+1));i=i.subarray(f,f+l),u=await this._extract_fbank_features(i,this.mel_filters_slaney,this.config.nb_max_samples)}else throw new Error(`Truncation strategy "${d}" not implemented`);else{if(m<0){let f=new Float64Array(l);if(f.set(i),p==="repeat")for(let h=i.length;h<l;h+=i.length)f.set(i.subarray(0,Math.min(i.length,l-h)),h);else if(p==="repeatpad")for(let h=i.length;h<-m;h+=i.length)f.set(i,h);i=f}if(d==="fusion")throw new Error(`Truncation strategy "${d}" not implemented`);u=await this._extract_fbank_features(i,this.mel_filters_slaney,this.config.nb_max_samples)}return u.unsqueeze_(0)}async _extract_fbank_features(i,l,d=null){return(0,s.spectrogram)(i,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:l,log_mel:"dB",max_num_frames:d,do_pad:!1,transpose:!0})}async _call(i,{max_length:l=null}={}){return(0,n.validate_audio_inputs)(i,"ClapFeatureExtractor"),{input_features:(await this._get_input_mel(i,l??this.config.nb_max_samples,this.config.truncation,this.config.padding)).unsqueeze_(0)}}}},"./src/models/clip/image_processing_clip.js":(e,t,r)=>{r.r(t),r.d(t,{CLIPFeatureExtractor:()=>a,CLIPImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/convnext/image_processing_convnext.js":(e,t,r)=>{r.r(t),r.d(t,{ConvNextFeatureExtractor:()=>a,ConvNextImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{constructor(i){super(i),this.crop_pct=this.config.crop_pct??224/256}async resize(i){var d;const l=(d=this.size)==null?void 0:d.shortest_edge;if(l===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(l<384){const p=Math.floor(l/this.crop_pct),[u,m]=this.get_resize_output_image_size(i,{shortest_edge:p});i=await i.resize(u,m,{resample:this.resample}),i=await i.center_crop(l,l)}else i=await i.resize(l,l,{resample:this.resample});return i}}class a extends s{}},"./src/models/dac/feature_extraction_dac.js":(e,t,r)=>{r.r(t),r.d(t,{DacFeatureExtractor:()=>s});var n=r("./src/models/encodec/feature_extraction_encodec.js");class s extends n.EncodecFeatureExtractor{}},"./src/models/deit/image_processing_deit.js":(e,t,r)=>{r.r(t),r.d(t,{DeiTFeatureExtractor:()=>a,DeiTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/detr/image_processing_detr.js":(e,t,r)=>{r.r(t),r.d(t,{DetrFeatureExtractor:()=>o,DetrImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{async _call(l){const d=await super._call(l),p=[d.pixel_values.dims[0],64,64],u=(0,s.full)(p,1n);return{...d,pixel_mask:u}}post_process_object_detection(...l){return(0,n.post_process_object_detection)(...l)}post_process_panoptic_segmentation(...l){return(0,n.post_process_panoptic_segmentation)(...l)}post_process_instance_segmentation(...l){return(0,n.post_process_instance_segmentation)(...l)}}class o extends a{}},"./src/models/dinov3_vit/image_processing_dinov3_vit.js":(e,t,r)=>{r.r(t),r.d(t,{DINOv3ViTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/donut/image_processing_donut.js":(e,t,r)=>{r.r(t),r.d(t,{DonutFeatureExtractor:()=>a,DonutImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{pad_image(i,l,d,p={}){const[u,m,f]=l;let h=this.image_mean;Array.isArray(this.image_mean)||(h=new Array(f).fill(h));let _=this.image_std;Array.isArray(_)||(_=new Array(f).fill(h));const v=h.map((g,x)=>-g/_[x]);return super.pad_image(i,l,d,{center:!0,constant_values:v,...p})}}class a extends s{}},"./src/models/dpt/image_processing_dpt.js":(e,t,r)=>{r.r(t),r.d(t,{DPTFeatureExtractor:()=>a,DPTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/efficientnet/image_processing_efficientnet.js":(e,t,r)=>{r.r(t),r.d(t,{EfficientNetImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{constructor(o){super(o),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(i=>i*i))}}},"./src/models/encodec/feature_extraction_encodec.js":(e,t,r)=>{r.r(t),r.d(t,{EncodecFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js");class a extends n.FeatureExtractor{async _call(i){(0,n.validate_audio_inputs)(i,"EncodecFeatureExtractor"),i instanceof Float64Array&&(i=new Float32Array(i));const l=this.config.feature_size;if(i.length%l!==0)throw new Error(`The length of the audio data must be a multiple of the number of channels (${l}).`);const d=[1,l,i.length/l];return{input_values:new s.Tensor("float32",i,d)}}}},"./src/models/feature_extractors.js":(e,t,r)=>{r.r(t),r.d(t,{ASTFeatureExtractor:()=>n.ASTFeatureExtractor,ClapFeatureExtractor:()=>a.ClapFeatureExtractor,DacFeatureExtractor:()=>o.DacFeatureExtractor,EncodecFeatureExtractor:()=>s.EncodecFeatureExtractor,Gemma3nAudioFeatureExtractor:()=>i.Gemma3nAudioFeatureExtractor,ImageFeatureExtractor:()=>g.ImageProcessor,MoonshineFeatureExtractor:()=>l.MoonshineFeatureExtractor,ParakeetFeatureExtractor:()=>d.ParakeetFeatureExtractor,PyAnnoteFeatureExtractor:()=>p.PyAnnoteFeatureExtractor,SeamlessM4TFeatureExtractor:()=>u.SeamlessM4TFeatureExtractor,SnacFeatureExtractor:()=>m.SnacFeatureExtractor,SpeechT5FeatureExtractor:()=>f.SpeechT5FeatureExtractor,Wav2Vec2FeatureExtractor:()=>h.Wav2Vec2FeatureExtractor,WeSpeakerFeatureExtractor:()=>_.WeSpeakerFeatureExtractor,WhisperFeatureExtractor:()=>v.WhisperFeatureExtractor});var n=r("./src/models/audio_spectrogram_transformer/feature_extraction_audio_spectrogram_transformer.js"),s=r("./src/models/encodec/feature_extraction_encodec.js"),a=r("./src/models/clap/feature_extraction_clap.js"),o=r("./src/models/dac/feature_extraction_dac.js"),i=r("./src/models/gemma3n/feature_extraction_gemma3n.js"),l=r("./src/models/moonshine/feature_extraction_moonshine.js"),d=r("./src/models/parakeet/feature_extraction_parakeet.js"),p=r("./src/models/pyannote/feature_extraction_pyannote.js"),u=r("./src/models/seamless_m4t/feature_extraction_seamless_m4t.js"),m=r("./src/models/snac/feature_extraction_snac.js"),f=r("./src/models/speecht5/feature_extraction_speecht5.js"),h=r("./src/models/wav2vec2/feature_extraction_wav2vec2.js"),_=r("./src/models/wespeaker/feature_extraction_wespeaker.js"),v=r("./src/models/whisper/feature_extraction_whisper.js"),g=r("./src/base/image_processors_utils.js")},"./src/models/florence2/processing_florence2.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");class o extends n.Processor{constructor(l,d,p){super(l,d,p);const{tasks_answer_post_processing_type:u,task_prompts_without_inputs:m,task_prompts_with_input:f}=this.image_processor.config;this.tasks_answer_post_processing_type=new Map(Object.entries(u??{})),this.task_prompts_without_inputs=new Map(Object.entries(m??{})),this.task_prompts_with_input=new Map(Object.entries(f??{})),this.regexes={quad_boxes:/(.+?)<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm,bboxes:/([^<]+)?<loc_(\d+)><loc_(\d+)><loc_(\d+)><loc_(\d+)>/gm},this.size_per_bin=1e3}construct_prompts(l){typeof l=="string"&&(l=[l]);const d=[];for(const p of l)if(this.task_prompts_without_inputs.has(p))d.push(this.task_prompts_without_inputs.get(p));else{for(const[u,m]of this.task_prompts_with_input)if(p.includes(u)){d.push(m.replaceAll("{input}",p).replaceAll(u,""));break}d.length!==l.length&&d.push(p)}return d}post_process_generation(l,d,p){const u=this.tasks_answer_post_processing_type.get(d)??"pure_text";l=l.replaceAll("<s>","").replaceAll("</s>","");let m;switch(u){case"pure_text":m=l;break;case"description_with_bboxes":case"bboxes":case"phrase_grounding":case"ocr":const f=u==="ocr"?"quad_boxes":"bboxes",h=l.matchAll(this.regexes[f]),_=[],v=[];for(const[g,x,...y]of h)_.push(x?x.trim():_.at(-1)??""),v.push(y.map((w,b)=>(Number(w)+.5)/this.size_per_bin*p[b%2]));m={labels:_,[f]:v};break;default:throw new Error(`Task "${d}" (of type "${u}") not yet implemented.`)}return{[d]:m}}async _call(l,d=null,p={}){if(!l&&!d)throw new Error("Either text or images must be provided");const u=await this.image_processor(l,p),m=d?this.tokenizer(this.construct_prompts(d),p):{};return{...u,...m}}}le(o,"tokenizer_class",a.AutoTokenizer),le(o,"image_processor_class",s.AutoImageProcessor)},"./src/models/gemma3n/feature_extraction_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nAudioFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(l){super(l);const{fft_length:d,feature_size:p,min_frequency:u,max_frequency:m,sampling_rate:f,frame_length:h}=this.config,_=(0,a.mel_filter_bank)(Math.floor(1+d/2),p,u,m,f,null,"htk",!1);this.mel_filters=_,this.window=(0,a.window_function)(h,"hann")}async _extract_fbank_features(l,d){return(0,a.spectrogram)(l,this.window,this.config.frame_length,this.config.hop_length,{fft_length:this.config.fft_length,center:!1,onesided:!0,preemphasis:this.config.preemphasis,preemphasis_htk_flavor:this.config.preemphasis_htk_flavor,mel_filters:this.mel_filters,log_mel:"log",mel_floor:this.config.mel_floor,remove_dc_offset:!1,transpose:!0})}async _call(l,{max_length:d=48e4,truncation:p=!0,padding:u=!0,pad_to_multiple_of:m=128}={}){if((0,n.validate_audio_inputs)(l,"Gemma3nAudioFeatureExtractor"),p&&l.length>d&&(l=l.slice(0,d)),u&&l.length%m!==0){const _=m-l.length%m,v=new Float64Array(l.length+_);v.set(l),this.config.padding_value!==0&&v.fill(this.config.padding_value,l.length),l=v}const f=await this._extract_fbank_features(l,this.config.max_length),h=(0,s.full)([1,f.dims[0]],!0);return{input_features:f.unsqueeze_(0),input_features_mask:h}}}},"./src/models/gemma3n/processing_gemma3n.js":(e,t,r)=>{r.r(t),r.d(t,{Gemma3nProcessor:()=>i});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/models/auto/feature_extraction_auto.js"),o=r("./src/tokenizers.js");r("./src/utils/image.js"),r("./src/utils/audio.js");class i extends n.Processor{constructor(d,p,u){super(d,p,u),this.audio_seq_length=this.config.audio_seq_length,this.image_seq_length=this.config.image_seq_length;const{audio_token_id:m,boa_token:f,audio_token:h,eoa_token:_,image_token_id:v,boi_token:g,image_token:x,eoi_token:y}=this.tokenizer.config;this.audio_token_id=m,this.boa_token=f,this.audio_token=h;const w=h.repeat(this.audio_seq_length);this.full_audio_sequence=`

${f}${w}${_}

`,this.image_token_id=v,this.boi_token=g,this.image_token=x;const b=x.repeat(this.image_seq_length);this.full_image_sequence=`

${g}${b}${y}

`}async _call(d,p=null,u=null,m={}){typeof d=="string"&&(d=[d]);let f;u&&(f=await this.feature_extractor(u,m),d=d.map(v=>v.replaceAll(this.audio_token,this.full_audio_sequence)));let h;return p&&(h=await this.image_processor(p,m),d=d.map(v=>v.replaceAll(this.image_token,this.full_image_sequence))),{...this.tokenizer(d,m),...h,...f}}}le(i,"image_processor_class",s.AutoImageProcessor),le(i,"feature_extractor_class",a.AutoFeatureExtractor),le(i,"tokenizer_class",o.AutoTokenizer),le(i,"uses_processor_config",!0),le(i,"uses_chat_template_file",!0)},"./src/models/glpn/image_processing_glpn.js":(e,t,r)=>{r.r(t),r.d(t,{GLPNFeatureExtractor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/grounding_dino/image_processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{async _call(i){const l=await super._call(i),d=l.pixel_values.dims,p=(0,s.ones)([d[0],d[2],d[3]]);return{...l,pixel_mask:p}}}},"./src/models/grounding_dino/processing_grounding_dino.js":(e,t,r)=>{r.r(t),r.d(t,{GroundingDinoProcessor:()=>l});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js"),o=r("./src/base/image_processors_utils.js");function i(d,p){const m=d.dims.at(-1)-1,f=d.tolist();f.fill(!1,0,1),f.fill(!1,m);const h=p.tolist();return f.map((_,v)=>_?v:null).filter(_=>_!==null).map(_=>h[_])}class l extends n.Processor{async _call(p,u,m={}){const f=p?await this.image_processor(p,m):{};return{...u?this.tokenizer(u,m):{},...f}}post_process_grounded_object_detection(p,u,{box_threshold:m=.25,text_threshold:f=.25,target_sizes:h=null}={}){const{logits:_,pred_boxes:v}=p,g=_.dims[0];if(h!==null&&h.length!==g)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const x=_.dims.at(1),y=_.sigmoid(),w=y.max(-1).tolist(),b=v.tolist().map(E=>E.map(P=>(0,o.center_to_corners_format)(P))),C=[];for(let E=0;E<g;++E){const P=h!==null?h[E]:null;P!==null&&(b[E]=b[E].map(B=>B.map((U,q)=>U*P[(q+1)%2])));const I=w[E],$=[],z=[],D=[];for(let B=0;B<x;++B){const U=I[B];if(U<=m)continue;const q=b[E][B],X=y[E][B];$.push(U),D.push(q);const Z=i(X.gt(f),u[E]);z.push(Z)}C.push({scores:$,boxes:D,labels:this.batch_decode(z)})}return C}}le(l,"tokenizer_class",a.AutoTokenizer),le(l,"image_processor_class",s.AutoImageProcessor)},"./src/models/idefics3/image_processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3ImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{constructor(i){super(i),this.do_image_splitting=i.do_image_splitting??!0,this.max_image_size=i.max_image_size}get_resize_for_vision_encoder(i,l){let[d,p]=i.dims.slice(-2);const u=p/d;return p>=d?(p=Math.ceil(p/l)*l,d=Math.floor(p/u),d=Math.ceil(d/l)*l):(d=Math.ceil(d/l)*l,p=Math.floor(d*u),p=Math.ceil(p/l)*l),{height:d,width:p}}async _call(i,{do_image_splitting:l=null,return_row_col_info:d=!1}={}){let p;if(!Array.isArray(i))p=[[i]];else{if(i.length===0||!i[0])throw new Error("No images provided.");Array.isArray(i[0])?p=i:p=[i]}let u=[],m=[],f=[];const h=[],_=[];for(const E of p){let P=await Promise.all(E.map(z=>this.preprocess(z)));h.push(...P.map(z=>z.original_size)),_.push(...P.map(z=>z.reshaped_input_size)),P.forEach(z=>z.pixel_values.unsqueeze_(0));const{longest_edge:I}=this.max_image_size;let $;if(l??this.do_image_splitting){let z=new Array(P.length),D=new Array(P.length);$=await Promise.all(P.map(async(B,U)=>{const q=this.get_resize_for_vision_encoder(B.pixel_values,I),X=await(0,s.interpolate_4d)(B.pixel_values,{size:[q.height,q.width]}),{frames:Z,num_splits_h:K,num_splits_w:ee}=await this.split_image(X,this.max_image_size);return z[U]=K,D[U]=ee,(0,s.cat)(Z,0)})),m.push(z),f.push(D)}else{const z=[I,I];$=await Promise.all(P.map(D=>(0,s.interpolate_4d)(D.pixel_values,{size:z}))),m.push(new Array(P.length).fill(0)),f.push(new Array(P.length).fill(0))}u.push((0,s.cat)($,0))}const v=u.length,[g,x,y,w]=u[0].dims;let b,C;if(v===1)b=u[0].unsqueeze_(0),C=(0,s.full)([v,g,y,w],!0);else{const E=Math.max(...u.map($=>$.dims.at(0)));C=(0,s.full)([v,E,y,w],!0);const P=C.data,I=E*y*w;for(let $=0;$<v;++$){const z=u[$].dims[0];if(z<E){u[$]=(0,s.cat)([u[$],(0,s.full)([E-z,x,y,w],0)],0);const D=$*I+z*y*w,B=($+1)*I;P.fill(!1,D,B)}}b=(0,s.stack)(u,0)}return{pixel_values:b,pixel_attention_mask:C,original_sizes:h,reshaped_input_sizes:_,...d?{rows:m,cols:f}:{}}}async split_image(i,{longest_edge:l}){const d=l,p=l,u=[],[m,f]=i.dims.slice(-2);let h=0,_=0;if(m>d||f>p){h=Math.ceil(m/d),_=Math.ceil(f/p);const v=Math.ceil(m/h),g=Math.ceil(f/_);for(let w=0;w<h;++w)for(let b=0;b<_;++b){let C,E,P,I;w===h-1?(E=m-v,I=m):(E=w*v,I=(w+1)*v),b===_-1?(C=f-g,P=f):(C=b*g,P=(b+1)*g);const $=[E,C],z=[I,P],D=await(0,s.slice)(i,$,z,[2,3]);u.push(D)}const x=d,y=p;(m!==x||f!==y)&&(i=await(0,s.interpolate_4d)(i,{size:[x,y]}))}return u.push(i),{frames:u,num_splits_h:h,num_splits_w:_}}}},"./src/models/idefics3/processing_idefics3.js":(e,t,r)=>{r.r(t),r.d(t,{Idefics3Processor:()=>p});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js");var o=r("./src/utils/core.js");function i(u,m,f,h,_,v){let g="";for(let x=0;x<m;++x){for(let y=0;y<f;++y)g+=h+`<row_${x+1}_col_${y+1}>`+_.repeat(u);g+=`
`}return g+=`
${h}${v}`+_.repeat(u)+`${h}`,g}function l(u,m,f,h){return`${m}${h}`+f.repeat(u)+`${m}`}function d(u,m,f,h,_,v){return u===0&&m===0?l(f,h,_,v):i(f,u,m,h,_,v)}class p extends n.Processor{constructor(){super(...arguments);le(this,"fake_image_token","<fake_token_around_image>");le(this,"image_token","<image>");le(this,"global_img_token","<global-img>")}async _call(f,h=null,_={}){_.return_row_col_info??(_.return_row_col_info=!0);let v;h&&(v=await this.image_processor(h,_)),Array.isArray(f)||(f=[f]);const g=v.rows??[new Array(f.length).fill(0)],x=v.cols??[new Array(f.length).fill(0)],y=this.config.image_seq_len,w=[],b=[];for(let E=0;E<f.length;++E){const P=f[E],I=g[E],$=x[E];w.push((0,o.count)(P,this.image_token));const z=I.map((U,q)=>d(U,$[q],y,this.fake_image_token,this.image_token,this.global_img_token)),D=P.split(this.image_token);if(D.length===0)throw new Error("The image token should be present in the text.");let B=D[0];for(let U=0;U<z.length;++U)B+=z[U]+D[U+1];b.push(B)}return{...this.tokenizer(b),...v}}}le(p,"image_processor_class",s.AutoImageProcessor),le(p,"tokenizer_class",a.AutoTokenizer),le(p,"uses_processor_config",!0)},"./src/models/image_processors.js":(e,t,r)=>{r.r(t),r.d(t,{BeitFeatureExtractor:()=>n.BeitFeatureExtractor,BitImageProcessor:()=>s.BitImageProcessor,CLIPFeatureExtractor:()=>o.CLIPFeatureExtractor,CLIPImageProcessor:()=>o.CLIPImageProcessor,ChineseCLIPFeatureExtractor:()=>a.ChineseCLIPFeatureExtractor,ConvNextFeatureExtractor:()=>i.ConvNextFeatureExtractor,ConvNextImageProcessor:()=>i.ConvNextImageProcessor,DINOv3ViTImageProcessor:()=>p.DINOv3ViTImageProcessor,DPTFeatureExtractor:()=>m.DPTFeatureExtractor,DPTImageProcessor:()=>m.DPTImageProcessor,DeiTFeatureExtractor:()=>l.DeiTFeatureExtractor,DeiTImageProcessor:()=>l.DeiTImageProcessor,DetrFeatureExtractor:()=>d.DetrFeatureExtractor,DetrImageProcessor:()=>d.DetrImageProcessor,DonutFeatureExtractor:()=>u.DonutFeatureExtractor,DonutImageProcessor:()=>u.DonutImageProcessor,EfficientNetImageProcessor:()=>f.EfficientNetImageProcessor,GLPNFeatureExtractor:()=>h.GLPNFeatureExtractor,GroundingDinoImageProcessor:()=>_.GroundingDinoImageProcessor,Idefics3ImageProcessor:()=>v.Idefics3ImageProcessor,JinaCLIPImageProcessor:()=>x.JinaCLIPImageProcessor,LlavaOnevisionImageProcessor:()=>y.LlavaOnevisionImageProcessor,Mask2FormerImageProcessor:()=>w.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>b.MaskFormerFeatureExtractor,MaskFormerImageProcessor:()=>b.MaskFormerImageProcessor,MobileNetV1FeatureExtractor:()=>C.MobileNetV1FeatureExtractor,MobileNetV1ImageProcessor:()=>C.MobileNetV1ImageProcessor,MobileNetV2FeatureExtractor:()=>E.MobileNetV2FeatureExtractor,MobileNetV2ImageProcessor:()=>E.MobileNetV2ImageProcessor,MobileNetV3FeatureExtractor:()=>P.MobileNetV3FeatureExtractor,MobileNetV3ImageProcessor:()=>P.MobileNetV3ImageProcessor,MobileNetV4FeatureExtractor:()=>I.MobileNetV4FeatureExtractor,MobileNetV4ImageProcessor:()=>I.MobileNetV4ImageProcessor,MobileViTFeatureExtractor:()=>$.MobileViTFeatureExtractor,MobileViTImageProcessor:()=>$.MobileViTImageProcessor,NougatImageProcessor:()=>z.NougatImageProcessor,OwlViTFeatureExtractor:()=>B.OwlViTFeatureExtractor,OwlViTImageProcessor:()=>B.OwlViTImageProcessor,Owlv2ImageProcessor:()=>D.Owlv2ImageProcessor,Phi3VImageProcessor:()=>U.Phi3VImageProcessor,PvtImageProcessor:()=>q.PvtImageProcessor,Qwen2VLImageProcessor:()=>X.Qwen2VLImageProcessor,RTDetrImageProcessor:()=>Z.RTDetrImageProcessor,Sam2ImageProcessor:()=>ee.Sam2ImageProcessor,Sam3ImageProcessor:()=>oe.Sam3ImageProcessor,SamImageProcessor:()=>K.SamImageProcessor,SegformerFeatureExtractor:()=>ae.SegformerFeatureExtractor,SegformerImageProcessor:()=>ae.SegformerImageProcessor,SiglipImageProcessor:()=>G.SiglipImageProcessor,SmolVLMImageProcessor:()=>R.SmolVLMImageProcessor,Swin2SRImageProcessor:()=>Q.Swin2SRImageProcessor,VLMImageProcessor:()=>g.VLMImageProcessor,ViTFeatureExtractor:()=>ce.ViTFeatureExtractor,ViTImageProcessor:()=>ce.ViTImageProcessor,VitMatteImageProcessor:()=>ne.VitMatteImageProcessor,VitPoseImageProcessor:()=>me.VitPoseImageProcessor,YolosFeatureExtractor:()=>we.YolosFeatureExtractor,YolosImageProcessor:()=>we.YolosImageProcessor});var n=r("./src/models/beit/image_processing_beit.js"),s=r("./src/models/bit/image_processing_bit.js"),a=r("./src/models/chinese_clip/image_processing_chinese_clip.js"),o=r("./src/models/clip/image_processing_clip.js"),i=r("./src/models/convnext/image_processing_convnext.js"),l=r("./src/models/deit/image_processing_deit.js"),d=r("./src/models/detr/image_processing_detr.js"),p=r("./src/models/dinov3_vit/image_processing_dinov3_vit.js"),u=r("./src/models/donut/image_processing_donut.js"),m=r("./src/models/dpt/image_processing_dpt.js"),f=r("./src/models/efficientnet/image_processing_efficientnet.js"),h=r("./src/models/glpn/image_processing_glpn.js"),_=r("./src/models/grounding_dino/image_processing_grounding_dino.js"),v=r("./src/models/idefics3/image_processing_idefics3.js"),g=r("./src/models/janus/image_processing_janus.js"),x=r("./src/models/jina_clip/image_processing_jina_clip.js"),y=r("./src/models/llava_onevision/image_processing_llava_onevision.js"),w=r("./src/models/mask2former/image_processing_mask2former.js"),b=r("./src/models/maskformer/image_processing_maskformer.js"),C=r("./src/models/mobilenet_v1/image_processing_mobilenet_v1.js"),E=r("./src/models/mobilenet_v2/image_processing_mobilenet_v2.js"),P=r("./src/models/mobilenet_v3/image_processing_mobilenet_v3.js"),I=r("./src/models/mobilenet_v4/image_processing_mobilenet_v4.js"),$=r("./src/models/mobilevit/image_processing_mobilevit.js"),z=r("./src/models/nougat/image_processing_nougat.js"),D=r("./src/models/owlv2/image_processing_owlv2.js"),B=r("./src/models/owlvit/image_processing_owlvit.js"),U=r("./src/models/phi3_v/image_processing_phi3_v.js"),q=r("./src/models/pvt/image_processing_pvt.js"),X=r("./src/models/qwen2_vl/image_processing_qwen2_vl.js"),Z=r("./src/models/rt_detr/image_processing_rt_detr.js"),K=r("./src/models/sam/image_processing_sam.js"),ee=r("./src/models/sam2/image_processing_sam2.js"),oe=r("./src/models/sam3/image_processing_sam3.js"),ae=r("./src/models/segformer/image_processing_segformer.js"),G=r("./src/models/siglip/image_processing_siglip.js"),R=r("./src/models/smolvlm/image_processing_smolvlm.js"),Q=r("./src/models/swin2sr/image_processing_swin2sr.js"),ce=r("./src/models/vit/image_processing_vit.js"),ne=r("./src/models/vitmatte/image_processing_vitmatte.js"),me=r("./src/models/vitpose/image_processing_vitpose.js"),we=r("./src/models/yolos/image_processing_yolos.js")},"./src/models/janus/image_processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLMImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{constructor(o){super({do_pad:!0,pad_size:{width:o.image_size,height:o.image_size},...o}),this.constant_values=this.config.background_color.map(i=>i*this.rescale_factor)}pad_image(o,i,l,d){return super.pad_image(o,i,l,{constant_values:this.constant_values,center:!0,...d})}}},"./src/models/janus/processing_janus.js":(e,t,r)=>{r.r(t),r.d(t,{VLChatProcessor:()=>d});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js"),o=r("./src/utils/core.js"),i=r("./src/utils/tensor.js"),l=r("./src/utils/image.js");class d extends n.Processor{constructor(u,m,f){super(u,m,f),this.image_tag=this.config.image_tag,this.image_start_tag=this.config.image_start_tag,this.image_end_tag=this.config.image_end_tag,this.num_image_tokens=this.config.num_image_tokens}async _call(u,{images:m=null,chat_template:f="default"}={}){m?Array.isArray(m)||(m=[m]):m=await Promise.all(u.filter($=>$.images).flatMap($=>$.images).map($=>l.RawImage.read($)));const h=this.tokenizer,_=h.apply_chat_template(u,{tokenize:!1,add_generation_prompt:!0,chat_template:f}),v=$=>h.encode($,{add_special_tokens:!1}),g=_.split(this.image_tag),x=g.length-1;if(m.length!==x)throw new Error(`Number of images provided (${m.length}) does not match number of "${this.image_tag}" image tags (${x})`);const[y,w,b]=h.model.convert_tokens_to_ids([this.image_tag,this.image_start_tag,this.image_end_tag]);let C=v(g[0]),E=new Array(C.length).fill(!1);for(let $=1;$<g.length;++$){const z=new Array(this.num_image_tokens).fill(y),D=v(g[$]);C=(0,o.mergeArrays)(C,[w],z,[b],D);const B=new Array(this.num_image_tokens).fill(!0);E=(0,o.mergeArrays)(E,[!1],B,[!1],new Array(D.length).fill(!1))}const P=[1,C.length],I={input_ids:new i.Tensor("int64",C,P),attention_mask:new i.Tensor("int64",new Array(C.length).fill(1),P),images_seq_mask:new i.Tensor("bool",E,P),images_emb_mask:new i.Tensor("bool",new Array(x*this.num_image_tokens).fill(!0),[1,x,this.num_image_tokens])};if(m&&m.length>0){const $=await this.image_processor(m);return $.pixel_values.unsqueeze_(0),{...I,...$}}return I}}le(d,"image_processor_class",s.AutoImageProcessor),le(d,"tokenizer_class",a.AutoTokenizer),le(d,"uses_processor_config",!0)},"./src/models/jina_clip/image_processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{constructor(o){const{resize_mode:i,fill_color:l,interpolation:d,size:p,...u}=o,m=i==="squash"?{width:p,height:p}:i==="shortest"?{shortest_edge:p}:{longest_edge:p},f=d==="bicubic"?3:2;super({...u,size:m,resample:f,do_center_crop:!0,crop_size:p,do_normalize:!0})}}},"./src/models/jina_clip/processing_jina_clip.js":(e,t,r)=>{r.r(t),r.d(t,{JinaCLIPProcessor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");class o extends n.Processor{async _call(l=null,d=null,p={}){if(!l&&!d)throw new Error("Either text or images must be provided");const u=l?this.tokenizer(l,p):{},m=d?await this.image_processor(d,p):{};return{...u,...m}}}le(o,"tokenizer_class",a.AutoTokenizer),le(o,"image_processor_class",s.AutoImageProcessor)},"./src/models/llava/processing_llava.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaProcessor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");class o extends n.Processor{async _call(l,d=null,p={}){const u=await this.image_processor(l,p);if(d){const[f,h]=u.pixel_values.dims.slice(-2),{image_token:_,patch_size:v,num_additional_image_tokens:g}=this.config,x=Math.floor(f/v)*Math.floor(h/v)+g;d=structuredClone(d),Array.isArray(d)||(d=[d]);for(let y=0;y<d.length;++y)d[y]=d[y].replace(_,_.repeat(x))}const m=d?this.tokenizer(d,p):{};return{...u,...m}}}le(o,"tokenizer_class",a.AutoTokenizer),le(o,"image_processor_class",s.AutoImageProcessor),le(o,"uses_processor_config",!0)},"./src/models/llava_onevision/image_processing_llava_onevision.js":(e,t,r)=>{r.r(t),r.d(t,{LlavaOnevisionImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/mask2former/image_processing_mask2former.js":(e,t,r)=>{r.r(t),r.d(t,{Mask2FormerImageProcessor:()=>s});var n=r("./src/models/maskformer/image_processing_maskformer.js");class s extends n.MaskFormerImageProcessor{}},"./src/models/maskformer/image_processing_maskformer.js":(e,t,r)=>{r.r(t),r.d(t,{MaskFormerFeatureExtractor:()=>a,MaskFormerImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_panoptic_segmentation(...i){return(0,n.post_process_panoptic_segmentation)(...i)}post_process_instance_segmentation(...i){return(0,n.post_process_instance_segmentation)(...i)}}class a extends s{}},"./src/models/mgp_str/processing_mgp_str.js":(e,t,r)=>{r.r(t),r.d(t,{MgpstrProcessor:()=>l});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js"),o=r("./src/utils/maths.js");const i={char:["char_decode",1],bpe:["bpe_decode",2],wp:["wp_decode",102]};class l extends n.Processor{get char_tokenizer(){return this.components.char_tokenizer}get bpe_tokenizer(){return this.components.bpe_tokenizer}get wp_tokenizer(){return this.components.wp_tokenizer}_decode_helper(p,u){if(!i.hasOwnProperty(u))throw new Error(`Format ${u} is not supported.`);const[m,f]=i[u],h=this[m].bind(this),[_,v]=p.dims,g=[],x=[],y=p.tolist();for(let b=0;b<_;++b){const C=y[b],E=[],P=[];for(let $=1;$<v;++$){const[z,D]=(0,o.max)((0,o.softmax)(C[$]));if(P.push(z),D==f)break;E.push(D)}const I=P.length>0?P.reduce(($,z)=>$*z,1):0;x.push(E),g.push(I)}return[h(x),g]}char_decode(p){return this.char_tokenizer.batch_decode(p).map(u=>u.replaceAll(" ",""))}bpe_decode(p){return this.bpe_tokenizer.batch_decode(p)}wp_decode(p){return this.wp_tokenizer.batch_decode(p).map(u=>u.replaceAll(" ",""))}batch_decode([p,u,m]){const[f,h]=this._decode_helper(p,"char"),[_,v]=this._decode_helper(u,"bpe"),[g,x]=this._decode_helper(m,"wp"),y=[],w=[];for(let b=0;b<f.length;++b){const[C,E]=(0,o.max)([h[b],v[b],x[b]]);y.push([f[b],_[b],g[b]][E]),w.push(C)}return{generated_text:y,scores:w,char_preds:f,bpe_preds:_,wp_preds:g}}static async from_pretrained(...p){const u=await super.from_pretrained(...p),m=await a.AutoTokenizer.from_pretrained("Xenova/gpt2"),f=await a.AutoTokenizer.from_pretrained("Xenova/bert-base-uncased");return u.components={image_processor:u.image_processor,char_tokenizer:u.tokenizer,bpe_tokenizer:m,wp_tokenizer:f},u}async _call(p,u=null){const m=await this.image_processor(p);return u&&(m.labels=this.tokenizer(u).input_ids),m}}le(l,"tokenizer_class",a.AutoTokenizer),le(l,"image_processor_class",s.AutoImageProcessor)},"./src/models/mobilenet_v1/image_processing_mobilenet_v1.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV1FeatureExtractor:()=>a,MobileNetV1ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/mobilenet_v2/image_processing_mobilenet_v2.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV2FeatureExtractor:()=>a,MobileNetV2ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/mobilenet_v3/image_processing_mobilenet_v3.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV3FeatureExtractor:()=>a,MobileNetV3ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/mobilenet_v4/image_processing_mobilenet_v4.js":(e,t,r)=>{r.r(t),r.d(t,{MobileNetV4FeatureExtractor:()=>a,MobileNetV4ImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/mobilevit/image_processing_mobilevit.js":(e,t,r)=>{r.r(t),r.d(t,{MobileViTFeatureExtractor:()=>a,MobileViTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/moonshine/feature_extraction_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js");class a extends n.FeatureExtractor{async _call(i){(0,n.validate_audio_inputs)(i,"MoonshineFeatureExtractor"),i instanceof Float64Array&&(i=new Float32Array(i));const l=[1,i.length];return{input_values:new s.Tensor("float32",i,l)}}}},"./src/models/moonshine/processing_moonshine.js":(e,t,r)=>{r.r(t),r.d(t,{MoonshineProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/processing_utils.js");class o extends a.Processor{async _call(l){return await this.feature_extractor(l)}}le(o,"tokenizer_class",s.AutoTokenizer),le(o,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/nougat/image_processing_nougat.js":(e,t,r)=>{r.r(t),r.d(t,{NougatImageProcessor:()=>s});var n=r("./src/models/donut/image_processing_donut.js");class s extends n.DonutImageProcessor{}},"./src/models/owlv2/image_processing_owlv2.js":(e,t,r)=>{r.r(t),r.d(t,{Owlv2ImageProcessor:()=>s});var n=r("./src/models/owlvit/image_processing_owlvit.js");class s extends n.OwlViTImageProcessor{}},"./src/models/owlvit/image_processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTFeatureExtractor:()=>a,OwlViTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_object_detection(...i){return(0,n.post_process_object_detection)(...i)}}class a extends s{}},"./src/models/owlvit/processing_owlvit.js":(e,t,r)=>{r.r(t),r.d(t,{OwlViTProcessor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");class o extends n.Processor{}le(o,"tokenizer_class",a.AutoTokenizer),le(o,"image_processor_class",s.AutoImageProcessor)},"./src/models/paligemma/processing_paligemma.js":(e,t,r)=>{r.r(t),r.d(t,{PaliGemmaProcessor:()=>l});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");const o="<image>";function i(d,p,u,m,f){return`${m.repeat(u*f)}${p}${d}
`}class l extends n.Processor{async _call(p,u=null,m={}){u||(console.warn("You are using PaliGemma without a text prefix. It will perform as a picture-captioning model."),u=""),Array.isArray(p)||(p=[p]),Array.isArray(u)||(u=[u]);const f=this.tokenizer.bos_token,h=this.image_processor.config.image_seq_length;let _;u.some(x=>x.includes(o))?_=u.map(x=>{const y=x.replaceAll(o,o.repeat(h)),w=y.lastIndexOf(o),b=w===-1?0:w+o.length;return y.slice(0,b)+f+y.slice(b)+`
`}):(console.warn("You are passing both `text` and `images` to `PaliGemmaProcessor`. The processor expects special image tokens in the text, as many tokens as there are images per each text. It is recommended to add `<image>` tokens in the very beginning of your text. For this call, we will infer how many images each text has and add special tokens."),_=u.map(x=>i(x,f,h,o,p.length)));const v=this.tokenizer(_,m);return{...await this.image_processor(p,m),...v}}}le(l,"tokenizer_class",a.AutoTokenizer),le(l,"image_processor_class",s.AutoImageProcessor),le(l,"uses_processor_config",!1)},"./src/models/parakeet/feature_extraction_parakeet.js":(e,t,r)=>{r.r(t),r.d(t,{ParakeetFeatureExtractor:()=>i});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/audio.js");const o=1e-5;class i extends n.FeatureExtractor{constructor(d){var m;super(d),(m=this.config).mel_filters??(m.mel_filters=(0,a.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,this.config.sampling_rate/2,this.config.sampling_rate,"slaney","slaney"));const p=(0,a.window_function)(this.config.win_length,"hann",{periodic:!1});this.window=new Float64Array(this.config.n_fft);const u=Math.floor((this.config.n_fft-this.config.win_length)/2);this.window.set(p,u)}async _extract_fbank_features(d){const p=this.config.preemphasis;d=new Float64Array(d);for(let m=d.length-1;m>=1;--m)d[m]-=p*d[m-1];return await(0,a.spectrogram)(d,this.window,this.window.length,this.config.hop_length,{fft_length:this.config.n_fft,power:2,mel_filters:this.config.mel_filters,log_mel:"log",mel_floor:-1/0,pad_mode:"constant",center:!0,transpose:!0,mel_offset:2**-24})}async _call(d){(0,n.validate_audio_inputs)(d,"ParakeetFeatureExtractor");const p=await this._extract_fbank_features(d),u=Math.floor((d.length+Math.floor(this.config.n_fft/2)*2-this.config.n_fft)/this.config.hop_length),m=p.data;m.fill(0,u*p.dims[1]);const[f,h]=p.dims,_=new Float64Array(h),v=new Float64Array(h);for(let y=0;y<u;++y){const w=y*h;for(let b=0;b<h;++b){const C=m[w+b];_[b]+=C,v[b]+=C*C}}const g=u>1?u-1:1;for(let y=0;y<h;++y){const w=_[y]/u,b=(v[y]-u*w*w)/g,E=1/(Math.sqrt(b)+o);for(let P=0;P<u;++P){const I=P*h+y;m[I]=(m[I]-w)*E}}const x=new BigInt64Array(f);return x.fill(1n,0,u),{input_features:p.unsqueeze_(0),attention_mask:new s.Tensor("int64",x,[1,f])}}}},"./src/models/phi3_v/image_processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VImageProcessor:()=>p});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");const a=336,o=[2,3],{ceil:i,floor:l,sqrt:d}=Math;class p extends n.ImageProcessor{constructor(m){super({...m,do_normalize:!0,do_pad:!0,pad_size:"custom",do_convert_rgb:!0,do_resize:!0}),this._num_crops=m.num_crops}calc_num_image_tokens_from_image_size(m,f){const{num_img_tokens:h}=this.config;return l((l(f/a)*l(m/a)+1)*h+1+(l(f/a)+1)*d(h))}get_resize_output_image_size(m,f){const h=this._num_crops,[_,v]=m.size;let g=_/v,x=1;for(;x*Math.ceil(x/g)<=h;)x+=1;x-=1;const y=Math.floor(x*336),w=Math.floor(y/g);return[y,w]}pad_image(m,f,h,_={}){const[v,g]=f,x=a*i(v/a),y=a*i(g/a),w=[1,1,1].map((b,C)=>(b-this.image_mean[C])/this.image_std[C]);return super.pad_image(m,f,{width:y,height:x},{center:!0,constant_values:w,..._})}async _call(m,{num_crops:f=null}={}){if(this._num_crops=f??(f=this.config.num_crops),f<4||d(f)%1!==0)throw new Error("num_crops must be a square number >= 4");Array.isArray(m)||(m=[m]);const h=m.length,_=await Promise.all(m.map(E=>this.preprocess(E))),v=_.map(E=>E.original_size),g=_.map(E=>E.reshaped_input_size),x=[];for(const{pixel_values:E}of _){E.unsqueeze_(0);const[P,I]=E.dims.slice(-2),$=await(0,s.interpolate_4d)(E,{size:[a,a],mode:"bicubic"});if(f>0){const z=[],D=d(f),B=l(I/D),U=l(P/D);for(let X=0;X<D;++X)for(let Z=0;Z<D;++Z){let K,ee,oe,ae;X===D-1?(ee=P-U,ae=P):(ee=X*U,ae=(X+1)*U),Z===D-1?(K=I-B,oe=I):(K=Z*B,oe=(Z+1)*B);const G=[ee,K],R=[ae,oe],Q=await(0,s.slice)(E,G,R,o);z.push(Q)}const q=await(0,s.interpolate_4d)((0,s.cat)(z,0),{size:[a,a],mode:"bicubic"});x.push((0,s.cat)([$,q],0))}else x.push($)}const y=(0,s.stack)(x,0),w=g.map(E=>E.map(P=>a*i(P/a))),b=new s.Tensor("int64",w.flat(),[h,2]),C=w.map(([E,P])=>this.calc_num_image_tokens_from_image_size(P,E));return{pixel_values:y,original_sizes:v,reshaped_input_sizes:g,image_sizes:b,num_img_tokens:C}}}},"./src/models/phi3_v/processing_phi3_v.js":(e,t,r)=>{r.r(t),r.d(t,{Phi3VProcessor:()=>l});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js");const o="<|image|>",i=/<\|image_\d+\|>/g;class l extends n.Processor{async _call(p,u=null,{padding:m=!0,truncation:f=!0,num_crops:h=null}={}){Array.isArray(p)||(p=[p]);let _,v;if(u){v=await this.image_processor(u,{num_crops:h});const{num_img_tokens:g}=v,x=p.map((w,b)=>w.split(i).join(o.repeat(g[b])));_=this.tokenizer(x,{padding:m,truncation:f});const y=this.tokenizer.model.convert_tokens_to_ids([o])[0];_.input_ids.map_(w=>w==y?-w:w)}else _=this.tokenizer(p);return{..._,...v}}}le(l,"image_processor_class",s.AutoImageProcessor),le(l,"tokenizer_class",a.AutoTokenizer)},"./src/models/processors.js":(e,t,r)=>{r.r(t),r.d(t,{Florence2Processor:()=>n.Florence2Processor,Gemma3nProcessor:()=>s.Gemma3nProcessor,GroundingDinoProcessor:()=>a.GroundingDinoProcessor,Idefics3Processor:()=>o.Idefics3Processor,JinaCLIPProcessor:()=>l.JinaCLIPProcessor,LlavaProcessor:()=>d.LlavaProcessor,MgpstrProcessor:()=>p.MgpstrProcessor,MoonshineProcessor:()=>u.MoonshineProcessor,OwlViTProcessor:()=>m.OwlViTProcessor,PaliGemmaProcessor:()=>h.PaliGemmaProcessor,Phi3VProcessor:()=>f.Phi3VProcessor,PyAnnoteProcessor:()=>_.PyAnnoteProcessor,Qwen2VLProcessor:()=>v.Qwen2VLProcessor,Sam2Processor:()=>x.Sam2Processor,Sam2VideoProcessor:()=>x.Sam2VideoProcessor,SamProcessor:()=>g.SamProcessor,SmolVLMProcessor:()=>y.SmolVLMProcessor,SpeechT5Processor:()=>w.SpeechT5Processor,UltravoxProcessor:()=>b.UltravoxProcessor,VLChatProcessor:()=>i.VLChatProcessor,VoxtralProcessor:()=>C.VoxtralProcessor,Wav2Vec2Processor:()=>E.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>P.Wav2Vec2ProcessorWithLM,WhisperProcessor:()=>I.WhisperProcessor});var n=r("./src/models/florence2/processing_florence2.js"),s=r("./src/models/gemma3n/processing_gemma3n.js"),a=r("./src/models/grounding_dino/processing_grounding_dino.js"),o=r("./src/models/idefics3/processing_idefics3.js"),i=r("./src/models/janus/processing_janus.js"),l=r("./src/models/jina_clip/processing_jina_clip.js"),d=r("./src/models/llava/processing_llava.js"),p=r("./src/models/mgp_str/processing_mgp_str.js"),u=r("./src/models/moonshine/processing_moonshine.js"),m=r("./src/models/owlvit/processing_owlvit.js"),f=r("./src/models/phi3_v/processing_phi3_v.js"),h=r("./src/models/paligemma/processing_paligemma.js"),_=r("./src/models/pyannote/processing_pyannote.js"),v=r("./src/models/qwen2_vl/processing_qwen2_vl.js"),g=r("./src/models/sam/processing_sam.js"),x=r("./src/models/sam2/processing_sam2.js"),y=r("./src/models/smolvlm/processing_smolvlm.js"),w=r("./src/models/speecht5/processing_speecht5.js"),b=r("./src/models/ultravox/processing_ultravox.js"),C=r("./src/models/voxtral/processing_voxtral.js"),E=r("./src/models/wav2vec2/processing_wav2vec2.js"),P=r("./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js"),I=r("./src/models/whisper/processing_whisper.js")},"./src/models/pvt/image_processing_pvt.js":(e,t,r)=>{r.r(t),r.d(t,{PvtImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/pyannote/feature_extraction_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/maths.js");class o extends n.FeatureExtractor{async _call(l){(0,n.validate_audio_inputs)(l,"PyAnnoteFeatureExtractor"),l instanceof Float64Array&&(l=new Float32Array(l));const d=[1,1,l.length];return{input_values:new s.Tensor("float32",l,d)}}samples_to_frames(l){return(l-this.config.offset)/this.config.step}post_process_speaker_diarization(l,d){const p=d/this.samples_to_frames(d)/this.config.sampling_rate,u=[];for(const m of l.tolist()){const f=[];let h=-1;for(let _=0;_<m.length;++_){const v=(0,a.softmax)(m[_]),[g,x]=(0,a.max)(v),[y,w]=[_,_+1];x!==h?(h=x,f.push({id:x,start:y,end:w,score:g})):(f.at(-1).end=w,f.at(-1).score+=g)}u.push(f.map(({id:_,start:v,end:g,score:x})=>({id:_,start:v*p,end:g*p,confidence:x/(g-v)})))}return u}}},"./src/models/pyannote/processing_pyannote.js":(e,t,r)=>{r.r(t),r.d(t,{PyAnnoteProcessor:()=>a});var n=r("./src/base/processing_utils.js"),s=r("./src/models/pyannote/feature_extraction_pyannote.js");class a extends n.Processor{async _call(i){return await this.feature_extractor(i)}post_process_speaker_diarization(...i){return this.feature_extractor.post_process_speaker_diarization(...i)}get sampling_rate(){return this.feature_extractor.config.sampling_rate}}le(a,"feature_extractor_class",s.PyAnnoteFeatureExtractor)},"./src/models/qwen2_vl/image_processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{async _call(i,...l){const{pixel_values:d,original_sizes:p,reshaped_input_sizes:u}=await super._call(i,...l);let m=d;const{temporal_patch_size:f,merge_size:h,patch_size:_}=this.config;m.dims[0]===1&&(m=(0,s.cat)(Array.from({length:f},()=>m),0));const v=m.dims[0]/f,g=m.dims[1],x=Math.floor(m.dims[2]/_),y=Math.floor(m.dims[3]/_),w=m.view(v,f,g,Math.floor(x/h),h,_,Math.floor(y/h),h,_).permute(0,3,6,4,7,2,1,5,8).view(v*x*y,g*f*_*_),b=new s.Tensor("int64",[v,x,y],[1,3]);return{pixel_values:w,image_grid_thw:b,original_sizes:p,reshaped_input_sizes:u}}}},"./src/models/qwen2_vl/processing_qwen2_vl.js":(e,t,r)=>{r.r(t),r.d(t,{Qwen2VLProcessor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js"),a=r("./src/tokenizers.js");r("./src/utils/image.js");class o extends n.Processor{async _call(l,d=null,...p){Array.isArray(l)||(l=[l]);let u,m;if(d&&(u=await this.image_processor(d),m=u.image_grid_thw),m){let h=this.image_processor.config.merge_size**2,_=0;const v=m.tolist();l=l.map(g=>{for(;g.includes("<|image_pad|>");){const x=Number(v[_++].reduce((y,w)=>y*w,1n));g=g.replace("<|image_pad|>","<|placeholder|>".repeat(Math.floor(x/h)))}return g.replaceAll("<|placeholder|>","<|image_pad|>")})}return{...this.tokenizer(l),...u}}}le(o,"image_processor_class",s.AutoImageProcessor),le(o,"tokenizer_class",a.AutoTokenizer)},"./src/models/rt_detr/image_processing_rt_detr.js":(e,t,r)=>{r.r(t),r.d(t,{RTDetrImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_object_detection(...o){return(0,n.post_process_object_detection)(...o)}}},"./src/models/sam/image_processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamImageProcessor:()=>o});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/core.js"),a=r("./src/utils/tensor.js");class o extends n.ImageProcessor{reshape_input_points(l,d,p,u=!1){l=structuredClone(l);let m=(0,s.calculateDimensions)(l);if(m.length===3)u||(m=[1,...m]),l=[l];else if(m.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let f=0;f<l.length;++f){const[h,_]=d[f],[v,g]=p[f],x=[g/_,v/h];for(let y=0;y<l[f].length;++y)for(let w=0;w<l[f][y].length;++w)for(let b=0;b<l[f][y][w].length;++b)l[f][y][w][b]*=x[b%2]}return new a.Tensor("float32",Float32Array.from(l.flat(1/0)),m)}add_input_labels(l,d){let p=(0,s.calculateDimensions)(l);if(p.length===2)p=[1,...p],l=[l];else if(p.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(p.some((u,m)=>u!==d.dims[m]))throw Error(`The first ${p.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new a.Tensor("int64",l.flat(1/0).map(BigInt),p)}async _call(l,{input_points:d=null,input_labels:p=null,input_boxes:u=null}={}){const m=await super._call(l);if(d&&(m.input_points=this.reshape_input_points(d,m.original_sizes,m.reshaped_input_sizes)),p){if(!m.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");m.input_labels=this.add_input_labels(p,m.input_points)}return u&&(m.input_boxes=this.reshape_input_points(u,m.original_sizes,m.reshaped_input_sizes,!0)),m}async post_process_masks(l,d,p,{mask_threshold:u=0,binarize:m=!0,pad_size:f=null}={}){const h=[];f=f??this.pad_size??this.size;const _=[f.height,f.width];for(let v=0;v<d.length;++v){const g=d[v],x=p[v];let y=await(0,a.interpolate_4d)(l[v],{mode:"bilinear",size:_});if(y=y.slice(null,null,[0,x[0]],[0,x[1]]),y=await(0,a.interpolate_4d)(y,{mode:"bilinear",size:g}),m){const w=y.data,b=new Uint8Array(w.length);for(let C=0;C<w.length;++C)w[C]>u&&(b[C]=1);y=new a.Tensor("bool",b,y.dims)}h.push(y)}return h}generate_crop_boxes(l,d,{crop_n_layers:p=0,overlap_ratio:u=512/1500,points_per_crop:m=32,crop_n_points_downscale_factor:f=1}={}){}}},"./src/models/sam/processing_sam.js":(e,t,r)=>{r.r(t),r.d(t,{SamProcessor:()=>a});var n=r("./src/base/processing_utils.js"),s=r("./src/models/auto/image_processing_auto.js");class a extends n.Processor{async _call(...i){return await this.image_processor(...i)}post_process_masks(...i){return this.image_processor.post_process_masks(...i)}reshape_input_points(...i){return this.image_processor.reshape_input_points(...i)}}le(a,"image_processor_class",s.AutoImageProcessor)},"./src/models/sam2/image_processing_sam2.js":(e,t,r)=>{r.r(t),r.d(t,{Sam2ImageProcessor:()=>n.SamImageProcessor});var n=r("./src/models/sam/image_processing_sam.js")},"./src/models/sam2/processing_sam2.js":(e,t,r)=>{r.r(t),r.d(t,{Sam2Processor:()=>s,Sam2VideoProcessor:()=>a});var n=r("./src/models/sam/processing_sam.js");class s extends n.SamProcessor{}class a extends s{}},"./src/models/sam3/image_processing_sam3.js":(e,t,r)=>{r.r(t),r.d(t,{Sam3ImageProcessor:()=>n.Sam2ImageProcessor});var n=r("./src/models/sam2/image_processing_sam2.js")},"./src/models/seamless_m4t/feature_extraction_seamless_m4t.js":(e,t,r)=>{r.r(t),r.d(t,{SeamlessM4TFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js"),a=r("./src/utils/audio.js");class o extends n.FeatureExtractor{constructor(l){super(l);const d=this.config.sampling_rate,p=(0,a.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(d/2),d,null,"kaldi",!0);this.mel_filters=p,this.window=(0,a.window_function)(400,"povey",{periodic:!1})}async _extract_fbank_features(l,d){return l=l.map(p=>p*32768),(0,a.spectrogram)(l,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:d,transpose:!0})}async _call(l,{padding:d=!0,pad_to_multiple_of:p=2,do_normalize_per_mel_bins:u=!0,return_attention_mask:m=!0}={}){(0,n.validate_audio_inputs)(l,"SeamlessM4TFeatureExtractor");let f=await this._extract_fbank_features(l,this.config.max_length);if(u){const[b,C]=f.dims,E=f.data;for(let P=0;P<C;++P){let I=0;for(let B=0;B<b;++B)I+=E[B*C+P];const $=I/b;let z=0;for(let B=0;B<b;++B)z+=(E[B*C+P]-$)**2;z/=b-1;const D=Math.sqrt(z+1e-7);for(let B=0;B<b;++B){const U=B*C+P;E[U]=(E[U]-$)/D}}}let h;if(d){const[b,C]=f.dims,E=f.data,P=b%p;if(P>0){const I=new Float32Array(C*(b+P));I.set(E),I.fill(this.config.padding_value,E.length);const $=b+P;f=new s.Tensor(f.type,I,[$,C]),m&&(h=new s.Tensor("int64",new BigInt64Array($),[1,$]),h.data.fill(1n,0,b))}}const[_,v]=f.dims,g=this.config.stride;if(_%g!==0)throw new Error(`The number of frames (${_}) must be a multiple of the stride (${g}).`);const y=f.view(1,Math.floor(_/g),v*g),w={input_features:y};if(m){const b=y.dims[1],C=new BigInt64Array(b);if(h){const E=h.data;for(let P=1,I=0;P<_;P+=g,++I)C[I]=E[P]}else C.fill(1n);w.attention_mask=new s.Tensor("int64",C,[1,b])}return w}}},"./src/models/segformer/image_processing_segformer.js":(e,t,r)=>{r.r(t),r.d(t,{SegformerFeatureExtractor:()=>a,SegformerImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_semantic_segmentation(...i){return(0,n.post_process_semantic_segmentation)(...i)}}class a extends s{}},"./src/models/siglip/image_processing_siglip.js":(e,t,r)=>{r.r(t),r.d(t,{SiglipImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}},"./src/models/smolvlm/image_processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMImageProcessor:()=>n.Idefics3ImageProcessor});var n=r("./src/models/idefics3/image_processing_idefics3.js")},"./src/models/smolvlm/processing_smolvlm.js":(e,t,r)=>{r.r(t),r.d(t,{SmolVLMProcessor:()=>n.Idefics3Processor});var n=r("./src/models/idefics3/processing_idefics3.js")},"./src/models/snac/feature_extraction_snac.js":(e,t,r)=>{r.r(t),r.d(t,{SnacFeatureExtractor:()=>s});var n=r("./src/models/dac/feature_extraction_dac.js");class s extends n.DacFeatureExtractor{}},"./src/models/speecht5/feature_extraction_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5FeatureExtractor:()=>s});var n=r("./src/base/feature_extraction_utils.js");class s extends n.FeatureExtractor{}},"./src/models/speecht5/processing_speecht5.js":(e,t,r)=>{r.r(t),r.d(t,{SpeechT5Processor:()=>o});var n=r("./src/base/processing_utils.js"),s=r("./src/tokenizers.js"),a=r("./src/models/auto/feature_extraction_auto.js");class o extends n.Processor{async _call(l){return await this.feature_extractor(l)}}le(o,"tokenizer_class",s.AutoTokenizer),le(o,"feature_extractor_class",a.AutoFeatureExtractor)},"./src/models/swin2sr/image_processing_swin2sr.js":(e,t,r)=>{r.r(t),r.d(t,{Swin2SRImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{pad_image(o,i,l,d={}){const[p,u,m]=i;return super.pad_image(o,i,{width:u+(l-u%l)%l,height:p+(l-p%l)%l},{mode:"symmetric",center:!1,constant_values:-1,...d})}}},"./src/models/ultravox/processing_ultravox.js":(e,t,r)=>{r.r(t),r.d(t,{UltravoxProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/processing_utils.js");class o extends a.Processor{async _call(l,d=null,p={}){if(Array.isArray(l))throw new Error("Batched inputs are not supported yet.");let u={};if(d){const f=d.length,{input_features:h}=await this.feature_extractor(d,{...p,max_length:f}),_=Math.round(f/this.config.encoder_ds_factor+1e-4),v=1+Math.ceil(_/this.config.stack_factor);u.audio_token_len=[v],u.audio_values=h;const g=this.config.audio_placeholder;if(!l.includes(g))throw new Error(`The input text does not contain the image token ${g}.`);l=l.replaceAll(g,g.repeat(v))}return{...this.tokenizer(l,{add_special_tokens:!1,...p}),...u}}}le(o,"tokenizer_class",s.AutoTokenizer),le(o,"feature_extractor_class",n.AutoFeatureExtractor),le(o,"uses_processor_config",!0)},"./src/models/vit/image_processing_vit.js":(e,t,r)=>{r.r(t),r.d(t,{ViTFeatureExtractor:()=>a,ViTImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{}class a extends s{}},"./src/models/vitmatte/image_processing_vitmatte.js":(e,t,r)=>{r.r(t),r.d(t,{VitMatteImageProcessor:()=>a});var n=r("./src/base/image_processors_utils.js"),s=r("./src/utils/tensor.js");class a extends n.ImageProcessor{async _call(i,l){Array.isArray(i)||(i=[i]),Array.isArray(l)||(l=[l]);const d=await Promise.all(i.map(m=>this.preprocess(m))),p=await Promise.all(l.map(m=>this.preprocess(m,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:(0,s.stack)(d.map((m,f)=>(0,s.cat)([m.pixel_values,p[f].pixel_values],0)),0),original_sizes:d.map(m=>m.original_size),reshaped_input_sizes:d.map(m=>m.reshaped_input_size)}}}},"./src/models/vitpose/image_processing_vitpose.js":(e,t,r)=>{r.r(t),r.d(t,{VitPoseImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_pose_estimation(o,i,{threshold:l=null}={}){const d=o.tolist(),[p,u,m,f]=o.dims,h=[];for(let _=0;_<p;++_){const v=d[_],g=i[_],x=[];for(let y=0;y<g.length;++y){const w=g[y],b=[],C=[],E=[],P=w.at(-2)/f,I=w.at(-1)/m;for(let $=0;$<v.length;++$){let[z,D]=[0,0],B=0,U=-1/0;const q=v[$];for(let Z=0;Z<q.length;++Z){const K=q[Z];for(let ee=0;ee<K.length;++ee){const oe=K[ee];B+=oe,U=Math.max(U,oe),z+=(ee+.5)*oe,D+=Z*oe}}if(l!=null&&U<l)continue;const X=[P*z/B,I*D/B];b.push(X),E.push($),C.push(U)}x.push({bbox:w,scores:C,labels:E,keypoints:b})}h.push(x)}return h}}},"./src/models/voxtral/processing_voxtral.js":(e,t,r)=>{r.r(t),r.d(t,{VoxtralProcessor:()=>u});var n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/processing_utils.js"),o=r("./src/utils/tensor.js");const i="[AUDIO]",l="[BEGIN_AUDIO]",d=375;function p(m,f){const h=[];for(let _=0;_<m.length;_+=f)h.push(m.subarray(_,Math.min(_+f,m.length)));return h}class u extends a.Processor{async _call(f,h=null,_={}){if(Array.isArray(f))throw new Error("Batched inputs are not supported yet.");const v={};if(h){if(!f.includes(i))throw new Error(`The input text does not contain the audio token ${i}.`);Array.isArray(h)||(h=[h]);const x=f.split(i),y=x.length-1;if(y!==h.length)throw new Error(`The number of audio inputs (${h.length}) does not match the number of audio tokens in the text (${y}).`);const w=this.feature_extractor.config.n_samples,b=h.map($=>p($,w)),C=b.map($=>$.length),E=b.flat(),P=(await Promise.all(E.map($=>this.feature_extractor($,_)))).map($=>$.input_features);v.audio_values=P.length>1?(0,o.cat)(P,0):P[0];let I=x[0];for(let $=0;$<C.length;++$){I+=l;for(let z=0;z<C[$];++z)I+=i.repeat(d);I+=x[$+1]}f=I}return{...this.tokenizer(f,{add_special_tokens:!1,..._}),...v}}}le(u,"tokenizer_class",s.AutoTokenizer),le(u,"feature_extractor_class",n.AutoFeatureExtractor),le(u,"uses_processor_config",!1)},"./src/models/wav2vec2/feature_extraction_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2FeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js"),s=r("./src/utils/tensor.js");class a extends n.FeatureExtractor{_zero_mean_unit_var_norm(i){const d=i.reduce((u,m)=>u+m,0)/i.length,p=i.reduce((u,m)=>u+(m-d)**2,0)/i.length;return i.map(u=>(u-d)/Math.sqrt(p+1e-7))}async _call(i){(0,n.validate_audio_inputs)(i,"Wav2Vec2FeatureExtractor"),i instanceof Float64Array&&(i=new Float32Array(i));let l=i;this.config.do_normalize&&(l=this._zero_mean_unit_var_norm(l));const d=[1,l.length];return{input_values:new s.Tensor("float32",l,d),attention_mask:new s.Tensor("int64",new BigInt64Array(l.length).fill(1n),d)}}}},"./src/models/wav2vec2/processing_wav2vec2.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2Processor:()=>o});var n=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/base/processing_utils.js");class o extends a.Processor{async _call(l){return await this.feature_extractor(l)}}le(o,"tokenizer_class",n.AutoTokenizer),le(o,"feature_extractor_class",s.AutoFeatureExtractor)},"./src/models/wav2vec2_with_lm/processing_wav2vec2_with_lm.js":(e,t,r)=>{r.r(t),r.d(t,{Wav2Vec2ProcessorWithLM:()=>o});var n=r("./src/tokenizers.js"),s=r("./src/models/auto/feature_extraction_auto.js"),a=r("./src/base/processing_utils.js");class o extends a.Processor{async _call(l){return await this.feature_extractor(l)}}le(o,"tokenizer_class",n.AutoTokenizer),le(o,"feature_extractor_class",s.AutoFeatureExtractor)},"./src/models/wespeaker/feature_extraction_wespeaker.js":(e,t,r)=>{r.r(t),r.d(t,{WeSpeakerFeatureExtractor:()=>a});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var s=r("./src/utils/audio.js");class a extends n.FeatureExtractor{constructor(i){super(i);const l=this.config.sampling_rate,d=(0,s.mel_filter_bank)(257,this.config.num_mel_bins,20,Math.floor(l/2),l,null,"kaldi",!0);this.mel_filters=d,this.window=(0,s.window_function)(400,"hamming",{periodic:!1}),this.min_num_frames=this.config.min_num_frames}async _extract_fbank_features(i){return i=i.map(l=>l*32768),(0,s.spectrogram)(i,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,transpose:!0,min_num_frames:this.min_num_frames})}async _call(i){(0,n.validate_audio_inputs)(i,"WeSpeakerFeatureExtractor");const l=(await this._extract_fbank_features(i)).unsqueeze_(0);if(this.config.fbank_centering_span===null){const d=l.mean(1).data,p=l.data,[u,m,f]=l.dims;for(let h=0;h<u;++h){const _=h*m*f,v=h*f;for(let g=0;g<m;++g){const x=_+g*f;for(let y=0;y<f;++y)p[x+y]-=d[v+y]}}}return{input_features:l}}}},"./src/models/whisper/common_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WHISPER_LANGUAGE_MAPPING:()=>s,WHISPER_TO_LANGUAGE_CODE_MAPPING:()=>a,whisper_language_to_code:()=>o});const n=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],s=new Map(n),a=new Map([...n.map(([i,l])=>[l,i]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);function o(i){i=i.toLowerCase();let l=a.get(i);if(l===void 0){const d=i.match(/^<\|([a-z]{2})\|>$/);if(d&&(i=d[1]),s.has(i))l=i;else{const u=i.length===2?s.keys():s.values();throw new Error(`Language "${i}" is not supported. Must be one of: ${JSON.stringify(Array.from(u))}`)}}return l}},"./src/models/whisper/feature_extraction_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperFeatureExtractor:()=>o});var n=r("./src/base/feature_extraction_utils.js");r("./src/utils/tensor.js");var s=r("./src/utils/audio.js"),a=r("./src/utils/maths.js");class o extends n.FeatureExtractor{constructor(l){var d;super(l),(d=this.config).mel_filters??(d.mel_filters=(0,s.mel_filter_bank)(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney")),this.window=(0,s.window_function)(this.config.n_fft,"hann")}async _extract_fbank_features(l){const d=await(0,s.spectrogram)(l,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:Math.min(Math.floor(l.length/this.config.hop_length),this.config.nb_max_frames)}),p=d.data,u=(0,a.max)(p)[0];for(let m=0;m<p.length;++m)p[m]=(Math.max(p[m],u-8)+4)/4;return d}async _call(l,{max_length:d=null}={}){(0,n.validate_audio_inputs)(l,"WhisperFeatureExtractor");let p;const u=d??this.config.n_samples;return l.length>u?(l.length>this.config.n_samples&&console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),p=l.slice(0,u)):(p=new Float32Array(u),p.set(l)),{input_features:(await this._extract_fbank_features(p)).unsqueeze_(0)}}}},"./src/models/whisper/generation_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperGenerationConfig:()=>s});var n=r("./src/generation/configuration_utils.js");class s extends n.GenerationConfig{constructor(){super(...arguments);le(this,"return_timestamps",null);le(this,"return_token_timestamps",null);le(this,"num_frames",null);le(this,"alignment_heads",null);le(this,"task",null);le(this,"language",null);le(this,"no_timestamps_token_id",null);le(this,"prompt_ids",null);le(this,"is_multilingual",null);le(this,"lang_to_id",null);le(this,"task_to_id",null);le(this,"max_initial_timestamp_index",1)}}},"./src/models/whisper/processing_whisper.js":(e,t,r)=>{r.r(t),r.d(t,{WhisperProcessor:()=>o});var n=r("./src/models/auto/feature_extraction_auto.js"),s=r("./src/tokenizers.js"),a=r("./src/base/processing_utils.js");class o extends a.Processor{async _call(l){return await this.feature_extractor(l)}}le(o,"tokenizer_class",s.AutoTokenizer),le(o,"feature_extractor_class",n.AutoFeatureExtractor)},"./src/models/yolos/image_processing_yolos.js":(e,t,r)=>{r.r(t),r.d(t,{YolosFeatureExtractor:()=>a,YolosImageProcessor:()=>s});var n=r("./src/base/image_processors_utils.js");class s extends n.ImageProcessor{post_process_object_detection(...i){return(0,n.post_process_object_detection)(...i)}}class a extends s{}},"./src/ops/registry.js":(e,t,r)=>{r.r(t),r.d(t,{TensorOpRegistry:()=>o});var n=r("./src/backends/onnx.js"),s=r("./src/utils/tensor.js");const a=async(i,l,d)=>{const p=await(0,n.createInferenceSession)(new Uint8Array(i),l);return async u=>{const m=(0,n.isONNXProxy)(),f=Object.fromEntries(Object.entries(u).map(([_,v])=>[_,(m?v.clone():v).ort_tensor])),h=await(0,n.runInferenceSession)(p,f);return Array.isArray(d)?d.map(_=>new s.Tensor(h[_])):new s.Tensor(h[d])}};class o{static get nearest_interpolate_4d(){return this._nearest_interpolate_4d||(this._nearest_interpolate_4d=a([8,10,18,0,58,129,1,10,41,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,18,10,4,109,111,100,101,34,7,110,101,97,114,101,115,116,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,21],this.session_options,"y")),this._nearest_interpolate_4d}static get bilinear_interpolate_4d(){return this._bilinear_interpolate_4d||(this._bilinear_interpolate_4d=a([8,9,18,0,58,128,1,10,40,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,17,10,4,109,111,100,101,34,6,108,105,110,101,97,114,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bilinear_interpolate_4d}static get bicubic_interpolate_4d(){return this._bicubic_interpolate_4d||(this._bicubic_interpolate_4d=a([8,9,18,0,58,127,10,39,10,1,120,10,0,10,0,10,1,115,18,1,121,34,6,82,101,115,105,122,101,42,16,10,4,109,111,100,101,34,5,99,117,98,105,99,160,1,3,18,1,114,90,31,10,1,120,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,90,15,10,1,115,18,10,10,8,8,7,18,4,10,2,8,4,98,31,10,1,121,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,99,10,3,18,1,104,10,3,18,1,119,66,2,16,20],this.session_options,"y")),this._bicubic_interpolate_4d}static get matmul(){return this._matmul||(this._matmul=a([8,9,18,0,58,55,10,17,10,1,97,10,1,98,18,1,99,34,6,77,97,116,77,117,108,18,1,114,90,9,10,1,97,18,4,10,2,8,1,90,9,10,1,98,18,4,10,2,8,1,98,9,10,1,99,18,4,10,2,8,1,66,2,16,20],this.session_options,"c")),this._matmul}static get stft(){return this._stft||(this._stft=a([8,7,18,0,58,148,1,10,38,10,1,115,10,1,106,10,1,119,10,1,108,18,1,111,34,4,83,84,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,115,90,26,10,1,115,18,21,10,19,8,1,18,15,10,3,18,1,98,10,3,18,1,115,10,3,18,1,99,90,11,10,1,106,18,6,10,4,8,7,18,0,90,16,10,1,119,18,11,10,9,8,1,18,5,10,3,18,1,119,90,11,10,1,108,18,6,10,4,8,7,18,0,98,31,10,1,111,18,26,10,24,8,1,18,20,10,3,18,1,98,10,3,18,1,102,10,3,18,1,100,10,3,18,1,99,66,2,16,17],this.session_options,"o")),this._stft}static get rfft(){return this._rfft||(this._rfft=a([8,9,18,0,58,97,10,33,10,1,120,10,0,10,1,97,18,1,121,34,3,68,70,84,42,15,10,8,111,110,101,115,105,100,101,100,24,1,160,1,2,18,1,100,90,21,10,1,120,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,90,11,10,1,97,18,6,10,4,8,7,18,0,98,21,10,1,121,18,16,10,14,8,1,18,10,10,3,18,1,115,10,3,18,1,99,66,2,16,20],this.session_options,"y")),this._rfft}static get top_k(){return this._top_k||(this._top_k=a([8,10,18,0,58,73,10,18,10,1,120,10,1,107,18,1,118,18,1,105,34,4,84,111,112,75,18,1,116,90,9,10,1,120,18,4,10,2,8,1,90,15,10,1,107,18,10,10,8,8,7,18,4,10,2,8,1,98,9,10,1,118,18,4,10,2,8,1,98,9,10,1,105,18,4,10,2,8,7,66,2,16,21],this.session_options,["v","i"])),this._top_k}static get slice(){return this._slice||(this._slice=a([8,7,18,0,58,96,10,25,10,1,120,10,1,115,10,1,101,10,1,97,10,1,116,18,1,121,34,5,83,108,105,99,101,18,1,114,90,9,10,1,120,18,4,10,2,8,1,90,9,10,1,115,18,4,10,2,8,7,90,9,10,1,101,18,4,10,2,8,7,90,9,10,1,97,18,4,10,2,8,7,90,9,10,1,116,18,4,10,2,8,7,98,9,10,1,121,18,4,10,2,8,1,66,2,16,13],this.session_options,"y")),this._slice}}le(o,"session_options",{})},"./src/pipelines.js":(e,t,r)=>{r.r(t),r.d(t,{AudioClassificationPipeline:()=>D,AutomaticSpeechRecognitionPipeline:()=>U,BackgroundRemovalPipeline:()=>K,DepthEstimationPipeline:()=>ce,DocumentQuestionAnsweringPipeline:()=>G,FeatureExtractionPipeline:()=>$,FillMaskPipeline:()=>y,ImageClassificationPipeline:()=>X,ImageFeatureExtractionPipeline:()=>z,ImageSegmentationPipeline:()=>Z,ImageToImagePipeline:()=>Q,ImageToTextPipeline:()=>q,ObjectDetectionPipeline:()=>oe,Pipeline:()=>_,QuestionAnsweringPipeline:()=>x,SummarizationPipeline:()=>b,Text2TextGenerationPipeline:()=>w,TextClassificationPipeline:()=>v,TextGenerationPipeline:()=>P,TextToAudioPipeline:()=>R,TokenClassificationPipeline:()=>g,TranslationPipeline:()=>C,ZeroShotAudioClassificationPipeline:()=>B,ZeroShotClassificationPipeline:()=>I,ZeroShotImageClassificationPipeline:()=>ee,ZeroShotObjectDetectionPipeline:()=>ae,pipeline:()=>we});var n=r("./src/tokenizers.js"),s=r("./src/models.js"),a=r("./src/models/auto/processing_auto.js");r("./src/base/processing_utils.js");var o=r("./src/utils/generic.js"),i=r("./src/utils/core.js"),l=r("./src/utils/maths.js"),d=r("./src/utils/audio.js"),p=r("./src/utils/tensor.js"),u=r("./src/utils/image.js");async function m(Me){return Array.isArray(Me)||(Me=[Me]),await Promise.all(Me.map(te=>u.RawImage.read(te)))}async function f(Me,te){return Array.isArray(Me)||(Me=[Me]),await Promise.all(Me.map(F=>typeof F=="string"||F instanceof URL?(0,d.read_audio)(F,te):F instanceof Float64Array?new Float32Array(F):F))}function h(Me,te){te&&(Me=Me.map(Ee=>Ee|0));const[F,ue,xe,be]=Me;return{xmin:F,ymin:ue,xmax:xe,ymax:be}}class _ extends o.Callable{constructor({task:te,model:F,tokenizer:ue=null,processor:xe=null}){super(),this.task=te,this.model=F,this.tokenizer=ue,this.processor=xe}async dispose(){await this.model.dispose()}}class v extends _{constructor(te){super(te)}async _call(te,{top_k:F=1}={}){const ue=this.tokenizer(te,{padding:!0,truncation:!0}),xe=await this.model(ue),be=this.model.config.problem_type==="multi_label_classification"?Ae=>Ae.sigmoid():Ae=>new p.Tensor("float32",(0,l.softmax)(Ae.data),Ae.dims),Ee=this.model.config.id2label,ye=[];for(const Ae of xe.logits){const Ce=be(Ae),De=await(0,p.topk)(Ce,F),Be=De[0].tolist(),Se=De[1].tolist().map((it,et)=>({label:Ee?Ee[it]:`LABEL_${it}`,score:Be[et]}));F===1?ye.push(...Se):ye.push(Se)}return Array.isArray(te)||F===1?ye:ye[0]}}class g extends _{constructor(te){super(te)}async _call(te,{ignore_labels:F=["O"]}={}){const ue=Array.isArray(te),xe=this.tokenizer(ue?te:[te],{padding:!0,truncation:!0}),Ee=(await this.model(xe)).logits,ye=this.model.config.id2label,Ae=[];for(let Ce=0;Ce<Ee.dims[0];++Ce){const De=xe.input_ids[Ce],Be=Ee[Ce],Ze=[];for(let Se=0;Se<Be.dims[0];++Se){const it=Be[Se],et=(0,l.max)(it.data)[1],lt=ye?ye[et]:`LABEL_${et}`;if(F.includes(lt))continue;const st=this.tokenizer.decode([De[Se].item()],{skip_special_tokens:!0});if(st==="")continue;const Re=(0,l.softmax)(it.data);Ze.push({entity:lt,score:Re[et],index:Se,word:st})}Ae.push(Ze)}return ue?Ae:Ae[0]}}class x extends _{constructor(te){super(te)}async _call(te,F,{top_k:ue=1}={}){const xe=this.tokenizer(te,{text_pair:F,padding:!0,truncation:!0}),{start_logits:be,end_logits:Ee}=await this.model(xe),ye=xe.input_ids.tolist(),Ae=xe.attention_mask.tolist(),Ce=this.tokenizer.all_special_ids,De=[];for(let Be=0;Be<be.dims[0];++Be){const Ze=ye[Be],Se=Ze.findIndex(Qe=>Qe==this.tokenizer.sep_token_id);Ae[Be].map((Qe,Pt)=>Qe==1&&(Pt===0||Pt>Se&&Ce.findIndex(Mt=>Mt==Ze[Pt])===-1));const it=be[Be].tolist(),et=Ee[Be].tolist();for(let Qe=1;Qe<it.length;++Qe)(Ae[Be]==0||Qe<=Se||Ce.findIndex(Pt=>Pt==Ze[Qe])!==-1)&&(it[Qe]=-1/0,et[Qe]=-1/0);const lt=(0,l.softmax)(it).map((Qe,Pt)=>[Qe,Pt]),st=(0,l.softmax)(et).map((Qe,Pt)=>[Qe,Pt]);lt[0][0]=0,st[0][0]=0;const Re=(0,i.product)(lt,st).filter(Qe=>Qe[0][1]<=Qe[1][1]).map(Qe=>[Qe[0][1],Qe[1][1],Qe[0][0]*Qe[1][0]]).sort((Qe,Pt)=>Pt[2]-Qe[2]);for(let Qe=0;Qe<Math.min(Re.length,ue);++Qe){const[Pt,Mt,Wt]=Re[Qe],vt=Ze.slice(Pt,Mt+1),wr=this.tokenizer.decode(vt,{skip_special_tokens:!0});De.push({answer:wr,score:Wt})}}return ue===1?De[0]:De}}class y extends _{constructor(te){super(te)}async _call(te,{top_k:F=5}={}){const ue=this.tokenizer(te,{padding:!0,truncation:!0}),{logits:xe}=await this.model(ue),be=[],Ee=ue.input_ids.tolist();for(let ye=0;ye<Ee.length;++ye){const Ae=Ee[ye],Ce=Ae.findIndex(it=>it==this.tokenizer.mask_token_id);if(Ce===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const De=xe[ye][Ce],Be=await(0,p.topk)(new p.Tensor("float32",(0,l.softmax)(De.data),De.dims),F),Ze=Be[0].tolist(),Se=Be[1].tolist();be.push(Se.map((it,et)=>{const lt=Ae.slice();return lt[Ce]=it,{score:Ze[et],token:Number(it),token_str:this.tokenizer.decode([it]),sequence:this.tokenizer.decode(lt,{skip_special_tokens:!0})}}))}return Array.isArray(te)?be:be[0]}}class w extends _{constructor(F){super(F);le(this,"_key","generated_text")}async _call(F,ue={}){Array.isArray(F)||(F=[F]),this.model.config.prefix&&(F=F.map(Ce=>this.model.config.prefix+Ce));const xe=this.model.config.task_specific_params;xe&&xe[this.task]&&xe[this.task].prefix&&(F=F.map(Ce=>xe[this.task].prefix+Ce));const be=this.tokenizer,Ee={padding:!0,truncation:!0};let ye;this instanceof C&&"_build_translation_inputs"in be?ye=be._build_translation_inputs(F,Ee,ue):ye=be(F,Ee);const Ae=await this.model.generate({...ye,...ue});return be.batch_decode(Ae,{skip_special_tokens:!0}).map(Ce=>({[this._key]:Ce}))}}class b extends w{constructor(F){super(F);le(this,"_key","summary_text")}}class C extends w{constructor(F){super(F);le(this,"_key","translation_text")}}function E(Me){return Array.isArray(Me)&&Me.every(te=>"role"in te&&"content"in te)}class P extends _{constructor(te){super(te)}async _call(te,F={}){let ue=!1,xe=!1,be=F.add_special_tokens??(this.tokenizer.add_bos_token||this.tokenizer.add_eos_token)??!1,Ee;if(typeof te=="string")Ee=te=[te];else if(Array.isArray(te)&&te.every(Se=>typeof Se=="string"))ue=!0,Ee=te;else{if(E(te))te=[te];else if(Array.isArray(te)&&te.every(E))ue=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");xe=!0,Ee=te.map(Se=>this.tokenizer.apply_chat_template(Se,{tokenize:!1,add_generation_prompt:!0})),be=!1}const ye=xe?!1:F.return_full_text??!0;this.tokenizer.padding_side="left";const Ae=this.tokenizer(Ee,{add_special_tokens:be,padding:!0,truncation:!0}),Ce=await this.model.generate({...Ae,...F}),De=this.tokenizer.batch_decode(Ce,{skip_special_tokens:!0});let Be;!ye&&Ae.input_ids.dims.at(-1)>0&&(Be=this.tokenizer.batch_decode(Ae.input_ids,{skip_special_tokens:!0}).map(Se=>Se.length));const Ze=Array.from({length:te.length},Se=>[]);for(let Se=0;Se<De.length;++Se){const it=Math.floor(Se/Ce.dims[0]*te.length);Be&&(De[Se]=De[Se].slice(Be[it])),Ze[it].push({generated_text:xe?[...te[it],{role:"assistant",content:De[Se]}]:De[Se]})}return!ue&&Ze.length===1?Ze[0]:Ze}}class I extends _{constructor(te){super(te),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([F,ue])=>[F.toLowerCase(),ue])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(te,F,{hypothesis_template:ue="This example is {}.",multi_label:xe=!1}={}){const be=Array.isArray(te);be||(te=[te]),Array.isArray(F)||(F=[F]);const Ee=F.map(Ce=>ue.replace("{}",Ce)),ye=xe||F.length===1,Ae=[];for(const Ce of te){const De=[];for(const Se of Ee){const it=this.tokenizer(Ce,{text_pair:Se,padding:!0,truncation:!0}),et=await this.model(it);ye?De.push([et.logits.data[this.contradiction_id],et.logits.data[this.entailment_id]]):De.push(et.logits.data[this.entailment_id])}const Ze=(ye?De.map(Se=>(0,l.softmax)(Se)[1]):(0,l.softmax)(De)).map((Se,it)=>[Se,it]).sort((Se,it)=>it[0]-Se[0]);Ae.push({sequence:Ce,labels:Ze.map(Se=>F[Se[1]]),scores:Ze.map(Se=>Se[0])})}return be?Ae:Ae[0]}}class $ extends _{constructor(te){super(te)}async _call(te,{pooling:F="none",normalize:ue=!1,quantize:xe=!1,precision:be="binary"}={}){const Ee=this.tokenizer(te,{padding:!0,truncation:!0}),ye=await this.model(Ee);let Ae=ye.last_hidden_state??ye.logits??ye.token_embeddings;switch(F){case"none":break;case"mean":Ae=(0,p.mean_pooling)(Ae,Ee.attention_mask);break;case"first_token":case"cls":Ae=Ae.slice(null,0);break;case"last_token":case"eos":Ae=Ae.slice(null,-1);break;default:throw Error(`Pooling method '${F}' not supported.`)}return ue&&(Ae=Ae.normalize(2,-1)),xe&&(Ae=(0,p.quantize_embeddings)(Ae,be)),Ae}}class z extends _{constructor(te){super(te)}async _call(te,{pool:F=null}={}){const ue=await m(te),{pixel_values:xe}=await this.processor(ue),be=await this.model({pixel_values:xe});let Ee;if(F){if(!("pooler_output"in be))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Ee=be.pooler_output}else Ee=be.last_hidden_state??be.logits??be.image_embeds;return Ee}}class D extends _{constructor(te){super(te)}async _call(te,{top_k:F=5}={}){const ue=this.processor.feature_extractor.config.sampling_rate,xe=await f(te,ue),be=this.model.config.id2label,Ee=[];for(const ye of xe){const Ae=await this.processor(ye),De=(await this.model(Ae)).logits[0],Be=await(0,p.topk)(new p.Tensor("float32",(0,l.softmax)(De.data),De.dims),F),Ze=Be[0].tolist(),it=Be[1].tolist().map((et,lt)=>({label:be?be[et]:`LABEL_${et}`,score:Ze[lt]}));Ee.push(it)}return Array.isArray(te)?Ee:Ee[0]}}class B extends _{constructor(te){super(te)}async _call(te,F,{hypothesis_template:ue="This is a sound of {}."}={}){const xe=!Array.isArray(te);xe&&(te=[te]);const be=F.map(De=>ue.replace("{}",De)),Ee=this.tokenizer(be,{padding:!0,truncation:!0}),ye=this.processor.feature_extractor.config.sampling_rate,Ae=await f(te,ye),Ce=[];for(const De of Ae){const Be=await this.processor(De),Ze=await this.model({...Ee,...Be}),Se=(0,l.softmax)(Ze.logits_per_audio.data);Ce.push([...Se].map((it,et)=>({score:it,label:F[et]})))}return xe?Ce[0]:Ce}}class U extends _{constructor(te){super(te)}async _call(te,F={}){switch(this.model.config.model_type){case"whisper":case"lite-whisper":return this._call_whisper(te,F);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":case"parakeet_ctc":return this._call_wav2vec2(te,F);case"moonshine":return this._call_moonshine(te,F);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(te,F){F.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),F.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const ue=!Array.isArray(te);ue&&(te=[te]);const xe=this.processor.feature_extractor.config.sampling_rate,be=await f(te,xe),Ee=[];for(const ye of be){const Ae=await this.processor(ye),De=(await this.model(Ae)).logits[0],Be=[];for(const Se of De)Be.push((0,l.max)(Se.data)[1]);const Ze=this.tokenizer.decode(Be,{skip_special_tokens:!0}).trim();Ee.push({text:Ze})}return ue?Ee[0]:Ee}async _call_whisper(te,F){const ue=F.return_timestamps??!1,xe=F.chunk_length_s??0,be=F.force_full_sequences??!1;let Ee=F.stride_length_s??null;const ye={...F};ue==="word"&&(ye.return_token_timestamps=!0,ye.return_timestamps=!1);const Ae=!Array.isArray(te);Ae&&(te=[te]);const Ce=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,De=this.processor.feature_extractor.config.hop_length,Be=this.processor.feature_extractor.config.sampling_rate,Ze=await f(te,Be),Se=[];for(const it of Ze){let et=[];if(xe>0){if(Ee===null)Ee=xe/6;else if(xe<=Ee)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const Re=Be*xe,Qe=Be*Ee,Pt=Re-2*Qe;let Mt=0;for(;;){const Wt=Mt+Re,vt=it.subarray(Mt,Wt),wr=await this.processor(vt),Yr=Mt===0,Br=Wt>=it.length;if(et.push({stride:[vt.length,Yr?0:Qe,Br?0:Qe],input_features:wr.input_features,is_last:Br}),Br)break;Mt+=Pt}}else et=[{stride:[it.length,0,0],input_features:(await this.processor(it)).input_features,is_last:!0}];for(const Re of et){ye.num_frames=Math.floor(Re.stride[0]/De);const Qe=await this.model.generate({inputs:Re.input_features,...ye});ue==="word"?(Re.tokens=Qe.sequences.tolist()[0],Re.token_timestamps=Qe.token_timestamps.tolist()[0].map(Pt=>(0,l.round)(Pt,2))):Re.tokens=Qe[0].tolist(),Re.stride=Re.stride.map(Pt=>Pt/Be)}const[lt,st]=this.tokenizer._decode_asr(et,{time_precision:Ce,return_timestamps:ue,force_full_sequences:be});Se.push({text:lt,...st})}return Ae?Se[0]:Se}async _call_moonshine(te,F){const ue=!Array.isArray(te);ue&&(te=[te]);const xe=this.processor.feature_extractor.config.sampling_rate,be=await f(te,xe),Ee=[];for(const ye of be){const Ae=await this.processor(ye),Ce=Math.floor(ye.length/xe)*6,De=await this.model.generate({max_new_tokens:Ce,...F,...Ae}),Be=this.processor.batch_decode(De,{skip_special_tokens:!0})[0];Ee.push({text:Be})}return ue?Ee[0]:Ee}}class q extends _{constructor(te){super(te)}async _call(te,F={}){const ue=Array.isArray(te),xe=await m(te),{pixel_values:be}=await this.processor(xe),Ee=[];for(const ye of be){ye.dims=[1,...ye.dims];const Ae=await this.model.generate({inputs:ye,...F}),Ce=this.tokenizer.batch_decode(Ae,{skip_special_tokens:!0}).map(De=>({generated_text:De.trim()}));Ee.push(Ce)}return ue?Ee:Ee[0]}}class X extends _{constructor(te){super(te)}async _call(te,{top_k:F=5}={}){const ue=await m(te),{pixel_values:xe}=await this.processor(ue),be=await this.model({pixel_values:xe}),Ee=this.model.config.id2label,ye=[];for(const Ae of be.logits){const Ce=await(0,p.topk)(new p.Tensor("float32",(0,l.softmax)(Ae.data),Ae.dims),F),De=Ce[0].tolist(),Ze=Ce[1].tolist().map((Se,it)=>({label:Ee?Ee[Se]:`LABEL_${Se}`,score:De[it]}));ye.push(Ze)}return Array.isArray(te)?ye:ye[0]}}class Z extends _{constructor(te){super(te),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(te,{threshold:F=.5,mask_threshold:ue=.5,overlap_mask_area_threshold:xe=.8,label_ids_to_fuse:be=null,target_sizes:Ee=null,subtask:ye=null}={}){if(Array.isArray(te)&&te.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const Ce=await m(te),De=Ce.map(Re=>[Re.height,Re.width]),Be=await this.processor(Ce),{inputNames:Ze,outputNames:Se}=this.model.sessions.model;if(!Ze.includes("pixel_values")){if(Ze.length!==1)throw Error(`Expected a single input name, but got ${Ze.length} inputs: ${Ze}.`);const Re=Ze[0];if(Re in Be)throw Error(`Input name ${Re} already exists in the inputs.`);Be[Re]=Be.pixel_values}const it=await this.model(Be);let et=null;if(ye!==null)et=this.subtasks_mapping[ye];else if(this.processor.image_processor){for(const[Re,Qe]of Object.entries(this.subtasks_mapping))if(Qe in this.processor.image_processor){et=this.processor.image_processor[Qe].bind(this.processor.image_processor),ye=Re;break}}const lt=this.model.config.id2label,st=[];if(ye)if(ye==="panoptic"||ye==="instance"){const Re=et(it,F,ue,xe,be,Ee??De)[0],Qe=Re.segmentation;for(const Pt of Re.segments_info){const Mt=new Uint8ClampedArray(Qe.data.length);for(let vt=0;vt<Qe.data.length;++vt)Qe.data[vt]===Pt.id&&(Mt[vt]=255);const Wt=new u.RawImage(Mt,Qe.dims[1],Qe.dims[0],1);st.push({score:Pt.score,label:lt[Pt.label_id],mask:Wt})}}else if(ye==="semantic"){const{segmentation:Re,labels:Qe}=et(it,Ee??De)[0];for(const Pt of Qe){const Mt=new Uint8ClampedArray(Re.data.length);for(let vt=0;vt<Re.data.length;++vt)Re.data[vt]===Pt&&(Mt[vt]=255);const Wt=new u.RawImage(Mt,Re.dims[1],Re.dims[0],1);st.push({score:null,label:lt[Pt],mask:Wt})}}else throw Error(`Subtask ${ye} not supported.`);else{const Qe=it[Se[0]];for(let Pt=0;Pt<De.length;++Pt){const Mt=De[Pt],Wt=Qe[Pt];Wt.data.some(wr=>wr<-1e-5||wr>1+1e-5)&&Wt.sigmoid_();const vt=await u.RawImage.fromTensor(Wt.mul_(255).to("uint8")).resize(Mt[1],Mt[0]);st.push({label:null,score:null,mask:vt})}}return st}}class K extends Z{constructor(te){super(te)}async _call(te,F={}){if(Array.isArray(te)&&te.length!==1)throw Error("Background removal pipeline currently only supports a batch size of 1.");const xe=await m(te),be=await super._call(te,F);return xe.map((ye,Ae)=>{const Ce=ye.clone();return Ce.putAlpha(be[Ae].mask),Ce})}}class ee extends _{constructor(te){super(te)}async _call(te,F,{hypothesis_template:ue="This is a photo of {}"}={}){const xe=Array.isArray(te),be=await m(te),Ee=F.map(Ze=>ue.replace("{}",Ze)),ye=this.tokenizer(Ee,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Ae}=await this.processor(be),Ce=await this.model({...ye,pixel_values:Ae}),De=this.model.config.model_type==="siglip"?Ze=>Ze.sigmoid().data:Ze=>(0,l.softmax)(Ze.data),Be=[];for(const Ze of Ce.logits_per_image){const it=[...De(Ze)].map((et,lt)=>({score:et,label:F[lt]}));it.sort((et,lt)=>lt.score-et.score),Be.push(it)}return xe?Be:Be[0]}}class oe extends _{constructor(te){super(te)}async _call(te,{threshold:F=.9,percentage:ue=!1}={}){const xe=Array.isArray(te);if(xe&&te.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const be=await m(te),Ee=ue?null:be.map(Se=>[Se.height,Se.width]),{pixel_values:ye,pixel_mask:Ae}=await this.processor(be),Ce=await this.model({pixel_values:ye,pixel_mask:Ae}),De=this.processor.image_processor.post_process_object_detection(Ce,F,Ee),Be=this.model.config.id2label,Ze=De.map(Se=>Se.boxes.map((it,et)=>({score:Se.scores[et],label:Be[Se.classes[et]],box:h(it,!ue)})));return xe?Ze:Ze[0]}}class ae extends _{constructor(te){super(te)}async _call(te,F,{threshold:ue=.1,top_k:xe=null,percentage:be=!1}={}){const Ee=Array.isArray(te),ye=await m(te),Ae=this.tokenizer(F,{padding:!0,truncation:!0}),Ce=await this.processor(ye),De=[];for(let Be=0;Be<ye.length;++Be){const Ze=ye[Be],Se=be?null:[[Ze.height,Ze.width]],it=Ce.pixel_values[Be].unsqueeze_(0),et=await this.model({...Ae,pixel_values:it});let lt;if("post_process_grounded_object_detection"in this.processor){const st=this.processor.post_process_grounded_object_detection(et,Ae.input_ids,{box_threshold:ue,text_threshold:ue,target_sizes:Se})[0];lt=st.boxes.map((Re,Qe)=>({score:st.scores[Qe],label:st.labels[Qe],box:h(Re,!be)}))}else{const st=this.processor.image_processor.post_process_object_detection(et,ue,Se,!0)[0];lt=st.boxes.map((Re,Qe)=>({score:st.scores[Qe],label:F[st.classes[Qe]],box:h(Re,!be)}))}lt.sort((st,Re)=>Re.score-st.score),xe!==null&&(lt=lt.slice(0,xe)),De.push(lt)}return Ee?De:De[0]}}class G extends _{constructor(te){super(te)}async _call(te,F,ue={}){const xe=(await m(te))[0],{pixel_values:be}=await this.processor(xe),Ee=`<s_docvqa><s_question>${F}</s_question><s_answer>`,ye=this.tokenizer(Ee,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Ae=await this.model.generate({inputs:be,max_length:this.model.config.decoder.max_position_embeddings,decoder_input_ids:ye,...ue}),De=this.tokenizer.batch_decode(Ae)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Be=null;return De&&De.length>=2&&(Be=De[1].trim()),[{answer:Be}]}}class R extends _{constructor(F){super(F);le(this,"DEFAULT_VOCODER_ID","Xenova/speecht5_hifigan");this.vocoder=F.vocoder??null}async _prepare_speaker_embeddings(F){if((typeof F=="string"||F instanceof URL)&&(F=new Float32Array(await(await fetch(F)).arrayBuffer())),F instanceof Float32Array)F=new p.Tensor("float32",F,[F.length]);else if(!(F instanceof p.Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");return F}async _call(F,{speaker_embeddings:ue=null,num_inference_steps:xe,speed:be}={}){return this.processor?this._call_text_to_spectrogram(F,{speaker_embeddings:ue}):this.model.config.model_type==="supertonic"?this._call_supertonic(F,{speaker_embeddings:ue,num_inference_steps:xe,speed:be}):this._call_text_to_waveform(F)}async _call_supertonic(F,{speaker_embeddings:ue,num_inference_steps:xe,speed:be}){if(!ue)throw new Error("Speaker embeddings must be provided for Supertonic models.");ue=await this._prepare_speaker_embeddings(ue);const{sampling_rate:Ee,style_dim:ye}=this.model.config;ue=ue.view(1,-1,ye);const Ae=this.tokenizer(F,{padding:!0,truncation:!0}),{waveform:Ce}=await this.model.generate_speech({...Ae,style:ue,num_inference_steps:xe,speed:be});return new d.RawAudio(Ce.data,Ee)}async _call_text_to_waveform(F){const ue=this.tokenizer(F,{padding:!0,truncation:!0}),{waveform:xe}=await this.model(ue),be=this.model.config.sampling_rate;return new d.RawAudio(xe.data,be)}async _call_text_to_spectrogram(F,{speaker_embeddings:ue}){this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await s.AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{dtype:"fp32"}));const{input_ids:xe}=this.tokenizer(F,{padding:!0,truncation:!0});ue=await this._prepare_speaker_embeddings(ue),ue=ue.view(1,-1);const{waveform:be}=await this.model.generate_speech(xe,ue,{vocoder:this.vocoder}),Ee=this.processor.feature_extractor.config.sampling_rate;return new d.RawAudio(be.data,Ee)}}class Q extends _{constructor(te){super(te)}async _call(te){const F=await m(te),ue=await this.processor(F),xe=await this.model(ue),be=[];for(const Ee of xe.reconstruction){const ye=Ee.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");be.push(u.RawImage.fromTensor(ye))}return be.length>1?be:be[0]}}class ce extends _{constructor(te){super(te)}async _call(te){const F=await m(te),ue=await this.processor(F),{predicted_depth:xe}=await this.model(ue),be=[];for(let Ee=0;Ee<F.length;++Ee){const ye=xe[Ee],[Ae,Ce]=ye.dims.slice(-2),[De,Be]=F[Ee].size,Ze=(await(0,p.interpolate_4d)(ye.view(1,1,Ae,Ce),{size:[Be,De],mode:"bilinear"})).view(Be,De),Se=Ze.min().item(),it=Ze.max().item(),et=Ze.sub(Se).div_(it-Se).mul_(255).to("uint8").unsqueeze(0),lt=u.RawImage.fromTensor(et);be.push({predicted_depth:Ze,depth:lt})}return be.length>1?be:be[0]}}const ne=Object.freeze({"text-classification":{tokenizer:n.AutoTokenizer,pipeline:v,model:s.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:n.AutoTokenizer,pipeline:g,model:s.AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:n.AutoTokenizer,pipeline:x,model:s.AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:n.AutoTokenizer,pipeline:y,model:s.AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:n.AutoTokenizer,pipeline:b,model:s.AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:n.AutoTokenizer,pipeline:C,model:s.AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:n.AutoTokenizer,pipeline:w,model:s.AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:n.AutoTokenizer,pipeline:P,model:s.AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:n.AutoTokenizer,pipeline:I,model:s.AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:D,model:s.AutoModelForAudioClassification,processor:a.AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:n.AutoTokenizer,pipeline:B,model:s.AutoModel,processor:a.AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:n.AutoTokenizer,pipeline:U,model:[s.AutoModelForSpeechSeq2Seq,s.AutoModelForCTC],processor:a.AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:n.AutoTokenizer,pipeline:R,model:[s.AutoModelForTextToWaveform,s.AutoModelForTextToSpectrogram],processor:[a.AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:n.AutoTokenizer,pipeline:q,model:s.AutoModelForVision2Seq,processor:a.AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:X,model:s.AutoModelForImageClassification,processor:a.AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:Z,model:[s.AutoModelForImageSegmentation,s.AutoModelForSemanticSegmentation,s.AutoModelForUniversalSegmentation],processor:a.AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"background-removal":{pipeline:K,model:[s.AutoModelForImageSegmentation,s.AutoModelForSemanticSegmentation,s.AutoModelForUniversalSegmentation],processor:a.AutoProcessor,default:{model:"Xenova/modnet"},type:"image"},"zero-shot-image-classification":{tokenizer:n.AutoTokenizer,pipeline:ee,model:s.AutoModel,processor:a.AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:oe,model:s.AutoModelForObjectDetection,processor:a.AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:n.AutoTokenizer,pipeline:ae,model:s.AutoModelForZeroShotObjectDetection,processor:a.AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:n.AutoTokenizer,pipeline:G,model:s.AutoModelForDocumentQuestionAnswering,processor:a.AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:Q,model:s.AutoModelForImageToImage,processor:a.AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:ce,model:s.AutoModelForDepthEstimation,processor:a.AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:n.AutoTokenizer,pipeline:$,model:s.AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:a.AutoProcessor,pipeline:z,model:[s.AutoModelForImageFeatureExtraction,s.AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),me=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function we(Me,te=null,{progress_callback:F=null,config:ue=null,cache_dir:xe=null,local_files_only:be=!1,revision:Ee="main",device:ye=null,dtype:Ae=null,subfolder:Ce="onnx",use_external_data_format:De=null,model_file_name:Be=null,session_options:Ze={}}={}){Me=me[Me]??Me;const Se=ne[Me.split("_",1)[0]];if(!Se)throw Error(`Unsupported pipeline: ${Me}. Must be one of [${Object.keys(ne)}]`);te||(te=Se.default.model,console.log(`No model specified. Using default model: "${te}".`));const it={progress_callback:F,config:ue,cache_dir:xe,local_files_only:be,revision:Ee,device:ye,dtype:Ae,subfolder:Ce,use_external_data_format:De,model_file_name:Be,session_options:Ze},et=new Map([["tokenizer",Se.tokenizer],["model",Se.model],["processor",Se.processor]]),lt=await Ne(et,te,it);lt.task=Me,(0,i.dispatchCallback)(F,{status:"ready",task:Me,model:te});const st=Se.pipeline;return new st(lt)}async function Ne(Me,te,F){const ue=Object.create(null),xe=[];for(const[be,Ee]of Me.entries()){if(!Ee)continue;let ye;Array.isArray(Ee)?ye=new Promise(async(Ae,Ce)=>{var Be,Ze;let De;for(const Se of Ee){if(Se===null){Ae(null);return}try{Ae(await Se.from_pretrained(te,F));return}catch(it){if((Be=it.message)!=null&&Be.includes("Unsupported model type"))De=it;else if((Ze=it.message)!=null&&Ze.includes("Could not locate file"))De=it;else{Ce(it);return}}}Ce(De)}):ye=Ee.from_pretrained(te,F),ue[be]=ye,xe.push(ye)}await Promise.all(xe);for(const[be,Ee]of Object.entries(ue))ue[be]=await Ee;return ue}},"./src/tokenizers.js":(e,t,r)=>{r.r(t),r.d(t,{AlbertTokenizer:()=>mt,AutoTokenizer:()=>Xi,BartTokenizer:()=>Yt,BertTokenizer:()=>Xt,BlenderbotSmallTokenizer:()=>go,BlenderbotTokenizer:()=>gr,BloomTokenizer:()=>Vr,CLIPTokenizer:()=>Vn,CamembertTokenizer:()=>pt,CodeGenTokenizer:()=>ho,CodeLlamaTokenizer:()=>Fs,CohereTokenizer:()=>qi,ConvBertTokenizer:()=>de,DebertaTokenizer:()=>se,DebertaV2Tokenizer:()=>H,DistilBertTokenizer:()=>Fe,ElectraTokenizer:()=>St,Ernie4_5_Tokenizer:()=>Qi,EsmTokenizer:()=>mn,FalconTokenizer:()=>Ra,GPT2Tokenizer:()=>dt,GPTNeoXTokenizer:()=>za,GemmaTokenizer:()=>cs,Grok1Tokenizer:()=>Dn,HerbertTokenizer:()=>re,LlamaTokenizer:()=>Wr,M2M100Tokenizer:()=>Or,MBart50Tokenizer:()=>Bn,MBartTokenizer:()=>hr,MPNetTokenizer:()=>yn,MarianTokenizer:()=>Ge,MgpstrTokenizer:()=>Ki,MobileBertTokenizer:()=>Kt,NllbTokenizer:()=>Jr,NougatTokenizer:()=>_s,PreTrainedTokenizer:()=>He,Qwen2Tokenizer:()=>Rs,RoFormerTokenizer:()=>Pe,RobertaTokenizer:()=>Zn,SiglipTokenizer:()=>Ue,SpeechT5Tokenizer:()=>ia,SqueezeBertTokenizer:()=>N,T5Tokenizer:()=>Ot,TokenizerModel:()=>z,VitsTokenizer:()=>Hi,Wav2Vec2CTCTokenizer:()=>ut,WhisperTokenizer:()=>Bs,XLMRobertaTokenizer:()=>Ls,XLMTokenizer:()=>It,is_chinese_char:()=>y});var n=r("./src/utils/generic.js"),s=r("./src/utils/core.js"),a=r("./src/utils/hub.js"),o=r("./src/utils/maths.js"),i=r("./src/utils/tensor.js"),l=r("./src/utils/data-structures.js"),d=r("./node_modules/@huggingface/jinja/dist/index.js"),p=r("./src/models/whisper/common_whisper.js");async function u(_e,O){const Y=await Promise.all([(0,a.getModelJSON)(_e,"tokenizer.json",!0,O),(0,a.getModelJSON)(_e,"tokenizer_config.json",!0,O)]);return O.legacy!==null&&(Y[1].legacy=O.legacy),Y}function m(_e,O){const Y=[];let ie=0;for(const fe of _e.matchAll(O)){const ge=fe[0];ie<fe.index&&Y.push(_e.slice(ie,fe.index)),ge.length>0&&Y.push(ge),ie=fe.index+ge.length}return ie<_e.length&&Y.push(_e.slice(ie)),Y}function f(_e,O=!0){if(_e.Regex!==void 0){let Y=_e.Regex.replace(/\\([#&~])/g,"$1");for(const[ie,fe]of I)Y=Y.replaceAll(ie,fe);return new RegExp(Y,"gu")}else if(_e.String!==void 0){const Y=(0,s.escapeRegExp)(_e.String);return new RegExp(O?Y:`(${Y})`,"gu")}else return console.warn("Unknown pattern type:",_e),null}function h(_e){return new Map(Object.entries(_e))}function _(_e){const O=_e.dims;switch(O.length){case 1:return _e.tolist();case 2:if(O[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return _e.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${O.length}.`)}}function v(_e){return _e.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function g(_e){return _e.replace(new RegExp("\\p{M}","gu"),"")}function x(_e){return g(_e.toLowerCase())}function y(_e){return _e>=19968&&_e<=40959||_e>=13312&&_e<=19903||_e>=131072&&_e<=173791||_e>=173824&&_e<=177983||_e>=177984&&_e<=178207||_e>=178208&&_e<=183983||_e>=63744&&_e<=64255||_e>=194560&&_e<=195103}function w(_e,O,Y){const ie=[];let fe=0;for(;fe<_e.length;){if(ie.push(_e[fe]),(O.get(_e[fe])??Y)!==Y){++fe;continue}for(;++fe<_e.length&&(O.get(_e[fe])??Y)===Y;)O.get(ie.at(-1))!==Y&&(ie[ie.length-1]+=_e[fe])}return ie}function b(_e){return _e.match(/\S+/g)||[]}const C="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",E=new RegExp(`^[${C}]+$`,"gu"),P=".,!?",I=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"],["(?i:[sdmt]|ll|ve|re)","(?:[sS]|[dD]|[mM]|[tT]|[lL][lL]|[vV][eE]|[rR][eE])"],["[^\\r\\n\\p{L}\\p{N}]?+","[^\\r\\n\\p{L}\\p{N}]?"],["[^\\s\\p{L}\\p{N}]++","[^\\s\\p{L}\\p{N}]+"],[` ?[^(\\s|[${P}])]+`,` ?[^\\s${P}]+`]]);class ${constructor(O){this.content=O.content,this.id=O.id,this.single_word=O.single_word??!1,this.lstrip=O.lstrip??!1,this.rstrip=O.rstrip??!1,this.special=O.special??!1,this.normalized=O.normalized??null}}class z extends n.Callable{constructor(O){super(),this.config=O,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(O,...Y){switch(O.type){case"WordPiece":return new D(O);case"Unigram":return new B(O,...Y);case"BPE":return new X(O);default:if(O.vocab)return Array.isArray(O.vocab)?new B(O,...Y):Object.hasOwn(O,"continuing_subword_prefix")&&Object.hasOwn(O,"unk_token")?Object.hasOwn(O,"merges")?new X(O):new D(O):new Z(O,...Y);throw new Error(`Unknown TokenizerModel type: ${O.type}`)}}_call(O){return O=this.encode(O),this.fuse_unk&&(O=w(O,this.tokens_to_ids,this.unk_token_id)),O}encode(O){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(O){return O.map(Y=>this.tokens_to_ids.get(Y)??this.unk_token_id)}convert_ids_to_tokens(O){return O.map(Y=>this.vocab[Y]??this.unk_token)}}class D extends z{constructor(O){super(O),this.tokens_to_ids=h(O.vocab),this.unk_token_id=this.tokens_to_ids.get(O.unk_token),this.unk_token=O.unk_token,this.max_input_chars_per_word=O.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[Y,ie]of this.tokens_to_ids)this.vocab[ie]=Y}encode(O){const Y=[];for(const ie of O){const fe=[...ie];if(fe.length>this.max_input_chars_per_word){Y.push(this.unk_token);continue}let ge=!1,$e=0;const qe=[];for(;$e<fe.length;){let at=fe.length,Je=null;for(;$e<at;){let ct=fe.slice($e,at).join("");if($e>0&&(ct=this.config.continuing_subword_prefix+ct),this.tokens_to_ids.has(ct)){Je=ct;break}--at}if(Je===null){ge=!0;break}qe.push(Je),$e=at}ge?Y.push(this.unk_token):Y.push(...qe)}return Y}}class B extends z{constructor(O,Y){super(O);const ie=O.vocab.length;this.vocab=new Array(ie),this.scores=new Array(ie);for(let fe=0;fe<ie;++fe)[this.vocab[fe],this.scores[fe]]=O.vocab[fe];this.unk_token_id=O.unk_id,this.unk_token=this.vocab[O.unk_id],this.tokens_to_ids=new Map(this.vocab.map((fe,ge)=>[fe,ge])),this.bos_token=" ",this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=Y.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.unk_token=this.vocab[this.unk_token_id],this.minScore=(0,o.min)(this.scores)[0],this.unk_score=this.minScore-10,this.scores[this.unk_token_id]=this.unk_score,this.trie=new l.CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(O){const Y=O.chars,ie=1;let fe=0;for(;fe<Y.length;){let ge=!1;const $e=Y.slice(fe).join(""),qe=this.trie.commonPrefixSearch($e);for(const at of qe){const Je=this.tokens_to_ids.get(at),ct=this.scores[Je],$t=(0,s.len)(at);O.insert(fe,$t,ct,Je),!ge&&$t===ie&&(ge=!0)}ge||O.insert(fe,ie,this.unk_score,this.unk_token_id),fe+=ie}}tokenize(O){const Y=new l.TokenLattice(O,this.bos_token_id,this.eos_token_id);return this.populateNodes(Y),Y.tokens()}encode(O){const Y=[];for(const ie of O){const fe=this.tokenize(ie);Y.push(...fe)}return Y}}const U=(()=>{const _e=[...Array.from({length:94},(fe,ge)=>ge+33),...Array.from({length:12},(fe,ge)=>ge+161),...Array.from({length:82},(fe,ge)=>ge+174)],O=_e.slice();let Y=0;for(let fe=0;fe<256;++fe)_e.includes(fe)||(_e.push(fe),O.push(256+Y),Y+=1);const ie=O.map(fe=>String.fromCharCode(fe));return Object.fromEntries(_e.map((fe,ge)=>[fe,ie[ge]]))})(),q=(0,s.reverseDictionary)(U);class X extends z{constructor(O){super(O),this.tokens_to_ids=h(O.vocab),this.unk_token_id=this.tokens_to_ids.get(O.unk_token),this.unk_token=O.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[ie,fe]of this.tokens_to_ids)this.vocab[fe]=ie;const Y=Array.isArray(O.merges[0]);this.merges=Y?O.merges:O.merges.map(ie=>ie.split(" ",2)),this.bpe_ranks=new Map(this.merges.map((ie,fe)=>[JSON.stringify(ie),fe])),this.end_of_word_suffix=O.end_of_word_suffix,this.continuing_subword_suffix=O.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.max_length_to_cache=256,this.cache_capacity=1e4,this.cache=new l.LRUCache(this.cache_capacity)}clear_cache(){this.cache.clear()}bpe(O){if(O.length===0)return[];const Y=this.cache.get(O);if(Y!==void 0)return Y;const ie=Array.from(O);this.end_of_word_suffix&&(ie[ie.length-1]+=this.end_of_word_suffix);let fe=[];if(ie.length>1){const ge=new l.PriorityQueue((at,Je)=>at.score<Je.score);let $e={token:ie[0],bias:0,prev:null,next:null},qe=$e;for(let at=1;at<ie.length;++at){const Je={bias:at/ie.length,token:ie[at],prev:qe,next:null};qe.next=Je,this._add_node(ge,qe),qe=Je}for(;!ge.isEmpty();){const at=ge.pop();if(at.deleted||!at.next||at.next.deleted)continue;if(at.deleted=!0,at.next.deleted=!0,at.prev){const ct={...at.prev};at.prev.deleted=!0,at.prev=ct,ct.prev?ct.prev.next=ct:$e=ct}const Je={token:at.token+at.next.token,bias:at.bias,prev:at.prev,next:at.next.next};Je.prev?(Je.prev.next=Je,this._add_node(ge,Je.prev)):$e=Je,Je.next&&(Je.next.prev=Je,this._add_node(ge,Je))}for(let at=$e;at!==null;at=at.next)fe.push(at.token)}else fe=ie;if(this.continuing_subword_suffix)for(let ge=0;ge<fe.length-1;++ge)fe[ge]+=this.continuing_subword_suffix;return O.length<this.max_length_to_cache&&this.cache.put(O,fe),fe}_add_node(O,Y){const ie=this.bpe_ranks.get(JSON.stringify([Y.token,Y.next.token]));ie!==void 0&&(Y.score=ie+Y.bias,O.push(Y))}encode(O){const Y=[];for(const ie of O){if(this.ignore_merges&&this.tokens_to_ids.has(ie)){Y.push(ie);continue}const fe=this.bpe(ie);for(const ge of fe)if(this.tokens_to_ids.has(ge))Y.push(ge);else if(this.byte_fallback){const $e=Array.from(this.text_encoder.encode(ge)).map(qe=>`<0x${qe.toString(16).toUpperCase().padStart(2,"0")}>`);$e.every(qe=>this.tokens_to_ids.has(qe))?Y.push(...$e):Y.push(this.unk_token)}else Y.push(this.unk_token)}return Y}}class Z extends z{constructor(O,Y){super(O),this.tokens_to_ids=h(Y.target_lang?O.vocab[Y.target_lang]:O.vocab),this.bos_token=Y.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=Y.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=Y.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=Y.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[ie,fe]of this.tokens_to_ids)this.vocab[fe]=ie}encode(O){return O}}class K extends n.Callable{constructor(O){super(),this.config=O}static fromConfig(O){if(O===null)return null;switch(O.type){case"BertNormalizer":return new Me(O);case"Precompiled":return new Br(O);case"Sequence":return new Ne(O);case"Replace":return new ee(O);case"NFC":return new ae(O);case"NFD":return new G(O);case"NFKC":return new R(O);case"NFKD":return new Q(O);case"Strip":return new ce(O);case"StripAccents":return new ne(O);case"Lowercase":return new me(O);case"Prepend":return new we(O);default:throw new Error(`Unknown Normalizer type: ${O.type}`)}}normalize(O){throw Error("normalize should be implemented in subclass.")}_call(O){return this.normalize(O)}}class ee extends K{normalize(O){const Y=f(this.config.pattern);return Y===null?O:O.replaceAll(Y,this.config.content)}}class oe extends K{constructor(){super(...arguments);le(this,"form")}normalize(Y){return Y=Y.normalize(this.form),Y}}class ae extends oe{constructor(){super(...arguments);le(this,"form","NFC")}}class G extends oe{constructor(){super(...arguments);le(this,"form","NFD")}}class R extends oe{constructor(){super(...arguments);le(this,"form","NFKC")}}class Q extends oe{constructor(){super(...arguments);le(this,"form","NFKD")}}class ce extends K{normalize(O){return this.config.strip_left&&this.config.strip_right?O=O.trim():(this.config.strip_left&&(O=O.trimStart()),this.config.strip_right&&(O=O.trimEnd())),O}}class ne extends K{normalize(O){return O=g(O),O}}class me extends K{normalize(O){return O=O.toLowerCase(),O}}class we extends K{normalize(O){return O=this.config.prepend+O,O}}class Ne extends K{constructor(O){super(O),this.normalizers=O.normalizers.map(Y=>K.fromConfig(Y))}normalize(O){return this.normalizers.reduce((Y,ie)=>ie.normalize(Y),O)}}class Me extends K{_tokenize_chinese_chars(O){const Y=[];for(let ie=0;ie<O.length;++ie){const fe=O[ie],ge=fe.charCodeAt(0);y(ge)?(Y.push(" "),Y.push(fe),Y.push(" ")):Y.push(fe)}return Y.join("")}stripAccents(O){return O.normalize("NFD").replace(new RegExp("\\p{Mn}","gu"),"")}_is_control(O){switch(O){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(O)}}_clean_text(O){const Y=[];for(const ie of O){const fe=ie.charCodeAt(0);fe===0||fe===65533||this._is_control(ie)||(/^\s$/.test(ie)?Y.push(" "):Y.push(ie))}return Y.join("")}normalize(O){return this.config.clean_text&&(O=this._clean_text(O)),this.config.handle_chinese_chars&&(O=this._tokenize_chinese_chars(O)),this.config.lowercase?(O=O.toLowerCase(),this.config.strip_accents!==!1&&(O=this.stripAccents(O))):this.config.strip_accents&&(O=this.stripAccents(O)),O}}class te extends n.Callable{static fromConfig(O){if(O===null)return null;switch(O.type){case"BertPreTokenizer":return new F(O);case"Sequence":return new Pn(O);case"Whitespace":return new br(O);case"WhitespaceSplit":return new Zr(O);case"Metaspace":return new wr(O);case"ByteLevel":return new ue(O);case"Split":return new xe(O);case"Punctuation":return new be(O);case"Digits":return new Ee(O);case"Replace":return new aa(O);case"FixedLength":return new La(O);default:throw new Error(`Unknown PreTokenizer type: ${O.type}`)}}pre_tokenize_text(O,Y){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(O,Y){return(Array.isArray(O)?O.map(ie=>this.pre_tokenize_text(ie,Y)):this.pre_tokenize_text(O,Y)).flat()}_call(O,Y){return this.pre_tokenize(O,Y)}}class F extends te{constructor(O){super(),this.pattern=new RegExp(`[^\\s${C}]+|[${C}]`,"gu")}pre_tokenize_text(O,Y){return O.trim().match(this.pattern)||[]}}class ue extends te{constructor(O){super(),this.config=O,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=U,this.text_encoder=new TextEncoder}pre_tokenize_text(O,Y){return this.add_prefix_space&&!O.startsWith(" ")&&(O=" "+O),(this.use_regex?O.match(this.pattern)||[]:[O]).map(fe=>Array.from(this.text_encoder.encode(fe),ge=>this.byte_encoder[ge]).join(""))}}class xe extends te{constructor(O){super(),this.config=O,this.pattern=f(this.config.pattern,this.config.invert)}pre_tokenize_text(O,Y){var ie;return this.pattern===null?[]:this.config.invert?O.match(this.pattern)||[]:((ie=this.config.behavior)==null?void 0:ie.toLowerCase())==="removed"?O.split(this.pattern).filter(fe=>fe):m(O,this.pattern)}}class be extends te{constructor(O){super(),this.config=O,this.pattern=new RegExp(`[^${C}]+|[${C}]+`,"gu")}pre_tokenize_text(O,Y){return O.match(this.pattern)||[]}}class Ee extends te{constructor(O){super(),this.config=O;const Y=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(Y,"gu")}pre_tokenize_text(O,Y){return O.match(this.pattern)||[]}}class ye extends n.Callable{constructor(O){super(),this.config=O}static fromConfig(O){if(O===null)return null;switch(O.type){case"TemplateProcessing":return new De(O);case"ByteLevel":return new Be(O);case"RobertaProcessing":return new Ce(O);case"BertProcessing":return new Ae(O);case"Sequence":return new Ze(O);default:throw new Error(`Unknown PostProcessor type: ${O.type}`)}}post_process(O,...Y){throw Error("post_process should be implemented in subclass.")}_call(O,...Y){return this.post_process(O,...Y)}}class Ae extends ye{constructor(O){super(O),this.cls=O.cls[0],this.sep=O.sep[0]}post_process(O,Y=null,{add_special_tokens:ie=!0}={}){ie&&(O=(0,s.mergeArrays)([this.cls],O,[this.sep]));let fe=new Array(O.length).fill(0);if(Y!==null){const ge=ie&&this instanceof Ce?[this.sep]:[],$e=ie?[this.sep]:[];O=(0,s.mergeArrays)(O,ge,Y,$e),fe=(0,s.mergeArrays)(fe,new Array(Y.length+ge.length+$e.length).fill(1))}return{tokens:O,token_type_ids:fe}}}class Ce extends Ae{}class De extends ye{constructor(O){super(O),this.single=O.single,this.pair=O.pair}post_process(O,Y=null,{add_special_tokens:ie=!0}={}){const fe=Y===null?this.single:this.pair;let ge=[],$e=[];for(const qe of fe)"SpecialToken"in qe?ie&&(ge.push(qe.SpecialToken.id),$e.push(qe.SpecialToken.type_id)):"Sequence"in qe&&(qe.Sequence.id==="A"?(ge=(0,s.mergeArrays)(ge,O),$e=(0,s.mergeArrays)($e,new Array(O.length).fill(qe.Sequence.type_id))):qe.Sequence.id==="B"&&(ge=(0,s.mergeArrays)(ge,Y),$e=(0,s.mergeArrays)($e,new Array(Y.length).fill(qe.Sequence.type_id))));return{tokens:ge,token_type_ids:$e}}}class Be extends ye{post_process(O,Y=null){return Y&&(O=(0,s.mergeArrays)(O,Y)),{tokens:O}}}class Ze extends ye{constructor(O){super(O),this.processors=O.processors.map(Y=>ye.fromConfig(Y))}post_process(O,Y=null,ie={}){let fe;for(const ge of this.processors)if(ge instanceof Be)O=ge.post_process(O).tokens,Y&&(Y=ge.post_process(Y).tokens);else{const $e=ge.post_process(O,Y,ie);O=$e.tokens,fe=$e.token_type_ids}return{tokens:O,token_type_ids:fe}}}class Se extends n.Callable{constructor(O){super(),this.config=O,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=O.trim_offsets}static fromConfig(O){if(O===null)return null;switch(O.type){case"WordPiece":return new Re(O);case"Metaspace":return new Yr(O);case"ByteLevel":return new Qe(O);case"Replace":return new it(O);case"ByteFallback":return new et(O);case"Fuse":return new lt(O);case"Strip":return new st(O);case"Sequence":return new Mt(O);case"CTC":return new Pt(O);case"BPEDecoder":return new Wt(O);default:throw new Error(`Unknown Decoder type: ${O.type}`)}}_call(O){return this.decode(O)}decode(O){return this.decode_chain(O).join("")}decode_chain(O){throw Error("`decode_chain` should be implemented in subclass.")}}class it extends Se{decode_chain(O){const Y=f(this.config.pattern);return Y===null?O:O.map(ie=>ie.replaceAll(Y,this.config.content))}}class et extends Se{constructor(O){super(O),this.text_decoder=new TextDecoder}decode_chain(O){const Y=[];let ie=[];for(const fe of O){let ge=null;if(fe.length===6&&fe.startsWith("<0x")&&fe.endsWith(">")){const $e=parseInt(fe.slice(3,5),16);isNaN($e)||(ge=$e)}if(ge!==null)ie.push(ge);else{if(ie.length>0){const $e=this.text_decoder.decode(Uint8Array.from(ie));Y.push($e),ie=[]}Y.push(fe)}}if(ie.length>0){const fe=this.text_decoder.decode(Uint8Array.from(ie));Y.push(fe),ie=[]}return Y}}class lt extends Se{decode_chain(O){return[O.join("")]}}class st extends Se{constructor(O){super(O),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(O){return O.map(Y=>{let ie=0;for(let ge=0;ge<this.start&&Y[ge]===this.content;++ge){ie=ge+1;continue}let fe=Y.length;for(let ge=0;ge<this.stop;++ge){const $e=Y.length-ge-1;if(Y[$e]===this.content){fe=$e;continue}else break}return Y.slice(ie,fe)})}}class Re extends Se{constructor(O){super(O),this.cleanup=O.cleanup}decode_chain(O){return O.map((Y,ie)=>(ie!==0&&(Y.startsWith(this.config.prefix)?Y=Y.replace(this.config.prefix,""):Y=" "+Y),this.cleanup&&(Y=v(Y)),Y))}}class Qe extends Se{constructor(O){super(O),this.byte_decoder=q,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(O){const Y=O.join(""),ie=new Uint8Array([...Y].map(ge=>this.byte_decoder[ge]));return this.text_decoder.decode(ie)}decode_chain(O){const Y=[];let ie=[];for(const fe of O)this.added_tokens.find(ge=>ge.content===fe)!==void 0?(ie.length>0&&(Y.push(this.convert_tokens_to_string(ie)),ie=[]),Y.push(fe)):ie.push(fe);return ie.length>0&&Y.push(this.convert_tokens_to_string(ie)),Y}}class Pt extends Se{constructor(O){super(O),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(O){if(O.length===0)return"";const Y=[O[0]];for(let ge=1;ge<O.length;++ge)O[ge]!==Y.at(-1)&&Y.push(O[ge]);let fe=Y.filter(ge=>ge!==this.pad_token).join("");return this.cleanup&&(fe=v(fe).replaceAll(this.word_delimiter_token," ").trim()),fe}decode_chain(O){return[this.convert_tokens_to_string(O)]}}class Mt extends Se{constructor(O){super(O),this.decoders=O.decoders.map(Y=>Se.fromConfig(Y))}decode_chain(O){return this.decoders.reduce((Y,ie)=>ie.decode_chain(Y),O)}}class Wt extends Se{constructor(O){super(O),this.suffix=this.config.suffix}decode_chain(O){return O.map((Y,ie)=>Y.replaceAll(this.suffix,ie===O.length-1?"":" "))}}class vt extends Se{decode_chain(O){let Y="";for(let ie=1;ie<O.length;ie+=2)Y+=O[ie];return[Y]}}class wr extends te{constructor(O){super(),this.replacement=O.replacement,this.strRep=O.str_rep||this.replacement,this.prepend_scheme=O.prepend_scheme??"always"}pre_tokenize_text(O,{section_index:Y=void 0}={}){let ie=O.replaceAll(" ",this.strRep);return!ie.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&Y===0)&&(ie=this.strRep+ie),[ie]}}class Yr extends Se{constructor(O){super(O),this.replacement=O.replacement}decode_chain(O){const Y=[];for(let ie=0;ie<O.length;++ie){let fe=O[ie].replaceAll(this.replacement," ");ie==0&&fe.startsWith(" ")&&(fe=fe.substring(1)),Y.push(fe)}return Y}}class Br extends K{constructor(O){super(O),this.charsmap=O.precompiled_charsmap}normalize(O){return O=O.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),O=O.replace(/[\u0009\u000A\u000C\u000D\u00A0\u1680\u2000-\u200F\u2028\u2029\u202F\u205F\u2581\u3000\uFEFF\uFFFD]/gm," "),O.includes("")?O=O.split("").map(ie=>ie.normalize("NFKC")).join(""):O=O.normalize("NFKC"),O}}class Pn extends te{constructor(O){super(),this.tokenizers=O.pretokenizers.map(Y=>te.fromConfig(Y))}pre_tokenize_text(O,Y){return this.tokenizers.reduce((ie,fe)=>fe.pre_tokenize(ie,Y),[O])}}class br extends te{constructor(O){super()}pre_tokenize_text(O,Y){return O.match(/\w+|[^\w\s]+/g)||[]}}class Zr extends te{constructor(O){super()}pre_tokenize_text(O,Y){return b(O)}}class aa extends te{constructor(O){super(),this.config=O,this.pattern=f(this.config.pattern),this.content=this.config.content}pre_tokenize_text(O,Y){return this.pattern===null?[O]:[O.replaceAll(this.pattern,this.config.content)]}}class La extends te{constructor(O){super(),this._length=O.length}pre_tokenize_text(O,Y){const ie=[];for(let fe=0;fe<O.length;fe+=this._length)ie.push(O.slice(fe,fe+this._length));return ie}}const Os=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function an(_e,O,Y,ie){for(const fe of Object.keys(_e)){const ge=O-_e[fe].length,$e=Y(fe),qe=new Array(ge).fill($e);_e[fe]=ie==="right"?(0,s.mergeArrays)(_e[fe],qe):(0,s.mergeArrays)(qe,_e[fe])}}function oa(_e,O){for(const Y of Object.keys(_e))_e[Y].length=O}class He extends n.Callable{constructor(Y,ie){super();le(this,"return_token_type_ids",!1);le(this,"padding_side","right");this.config=ie,this.normalizer=K.fromConfig(Y.normalizer),this.pre_tokenizer=te.fromConfig(Y.pre_tokenizer),this.model=z.fromConfig(Y.model,ie),this.post_processor=ye.fromConfig(Y.post_processor),this.decoder=Se.fromConfig(Y.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const fe of Y.added_tokens){const ge=new $(fe);this.added_tokens.push(ge),this.model.tokens_to_ids.set(ge.content,ge.id),this.model.vocab[ge.id]=ge.content,ge.special&&(this.special_tokens.push(ge.content),this.all_special_ids.push(ge.id))}if(this.additional_special_tokens=ie.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_splitter=new l.DictionarySplitter(this.added_tokens.map(fe=>fe.content)),this.added_tokens_map=new Map(this.added_tokens.map(fe=>[fe.content,fe])),this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.bos_token=this.getToken("bos_token"),this.bos_token_id=this.model.tokens_to_ids.get(this.bos_token),this.eos_token=this.getToken("eos_token"),this.eos_token_id=this.model.tokens_to_ids.get(this.eos_token),this.model_max_length=ie.model_max_length,this.remove_space=ie.remove_space,this.clean_up_tokenization_spaces=ie.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=ie.do_lowercase_and_remove_accent??!1,ie.padding_side&&(this.padding_side=ie.padding_side),this.add_bos_token=ie.add_bos_token,this.add_eos_token=ie.add_eos_token,this.legacy=!1,this.chat_template=ie.chat_template??null,Array.isArray(this.chat_template)){const fe=Object.create(null);for(const{name:ge,template:$e}of this.chat_template){if(typeof ge!="string"||typeof $e!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');fe[ge]=$e}this.chat_template=fe}this._compiled_template_cache=new Map}getToken(...Y){for(const ie of Y){const fe=this.config[ie];if(fe)if(typeof fe=="object"){if(fe.__type==="AddedToken")return fe.content;throw Error(`Unknown token: ${fe}`)}else return fe}return null}static async from_pretrained(Y,{progress_callback:ie=null,config:fe=null,cache_dir:ge=null,local_files_only:$e=!1,revision:qe="main",legacy:at=null}={}){const Je=await u(Y,{progress_callback:ie,config:fe,cache_dir:ge,local_files_only:$e,revision:qe,legacy:at});return new this(...Je)}_call(Y,{text_pair:ie=null,add_special_tokens:fe=!0,padding:ge=!1,truncation:$e=null,max_length:qe=null,return_tensor:at=!0,return_token_type_ids:Je=null}={}){const ct=Array.isArray(Y);let $t;if(ct){if(Y.length===0)throw Error("text array must be non-empty");if(ie!==null){if(Array.isArray(ie)){if(Y.length!==ie.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");$t=Y.map((nr,Fr)=>this._encode_plus(nr,{text_pair:ie[Fr],add_special_tokens:fe,return_token_type_ids:Je}))}else $t=Y.map(nr=>this._encode_plus(nr,{add_special_tokens:fe,return_token_type_ids:Je}))}else{if(Y==null)throw Error("text may not be null or undefined");if(Array.isArray(ie))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");$t=[this._encode_plus(Y,{text_pair:ie,add_special_tokens:fe,return_token_type_ids:Je})]}if(qe===null?qe=this.model_max_length:$e===null&&(ge===!0?(console.warn("`max_length` is ignored when `padding: true` and there is no truncation strategy. To pad to max length, use `padding: 'max_length'`."),qe=this.model_max_length):ge===!1&&(console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation: true` to explicitly truncate examples to max length."),$e=!0)),ge===!0&&(qe=Math.min((0,o.max)($t.map(nr=>nr.input_ids.length))[0],qe??1/0)),qe=Math.min(qe,this.model_max_length??1/0),ge||$e)for(let nr=0;nr<$t.length;++nr)$t[nr].input_ids.length!==qe&&($t[nr].input_ids.length>qe?$e&&oa($t[nr],qe):ge&&an($t[nr],qe,Fr=>Fr==="input_ids"?this.pad_token_id:0,this.padding_side));const Zt={};if(at){if(!(ge&&$e)&&$t.some(Fr=>{var pr;for(const Ar of Object.keys(Fr))if(Fr[Ar].length!==((pr=$t[0][Ar])==null?void 0:pr.length))return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const nr=[$t.length,$t[0].input_ids.length];for(const Fr of Object.keys($t[0]))Zt[Fr]=new i.Tensor("int64",BigInt64Array.from($t.flatMap(pr=>pr[Fr]).map(BigInt)),nr)}else{for(const nr of Object.keys($t[0]))Zt[nr]=$t.map(Fr=>Fr[nr]);if(!ct)for(const nr of Object.keys(Zt))Zt[nr]=Zt[nr][0]}return Zt}_encode_text(Y){if(Y===null)return null;const ie=this.added_tokens_splitter.split(Y);for(let ge=0;ge<ie.length;++ge){const $e=this.added_tokens_map.get(ie[ge]);$e&&($e.lstrip&&ge>0&&(ie[ge-1]=ie[ge-1].trimEnd()),$e.rstrip&&ge<ie.length-1&&(ie[ge+1]=ie[ge+1].trimStart()))}return ie.flatMap((ge,$e)=>{if(ge.length===0)return[];if(this.added_tokens_map.has(ge))return[ge];if(this.remove_space===!0&&(ge=ge.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(ge=x(ge)),this.normalizer!==null&&(ge=this.normalizer(ge)),ge.length===0)return[];const qe=this.pre_tokenizer!==null?this.pre_tokenizer(ge,{section_index:$e}):[ge];return this.model(qe)})}_encode_plus(Y,{text_pair:ie=null,add_special_tokens:fe=!0,return_token_type_ids:ge=null}={}){const{tokens:$e,token_type_ids:qe}=this._tokenize_helper(Y,{pair:ie,add_special_tokens:fe}),at=this.model.convert_tokens_to_ids($e),Je={input_ids:at,attention_mask:new Array(at.length).fill(1)};return(ge??this.return_token_type_ids)&&qe&&(Je.token_type_ids=qe),Je}_tokenize_helper(Y,{pair:ie=null,add_special_tokens:fe=!1}={}){const ge=this._encode_text(Y),$e=this._encode_text(ie);return this.post_processor?this.post_processor(ge,$e,{add_special_tokens:fe}):{tokens:(0,s.mergeArrays)(ge??[],$e??[])}}tokenize(Y,{pair:ie=null,add_special_tokens:fe=!1}={}){return this._tokenize_helper(Y,{pair:ie,add_special_tokens:fe}).tokens}encode(Y,{text_pair:ie=null,add_special_tokens:fe=!0,return_token_type_ids:ge=null}={}){return this._encode_plus(Y,{text_pair:ie,add_special_tokens:fe,return_token_type_ids:ge}).input_ids}batch_decode(Y,ie={}){return Y instanceof i.Tensor&&(Y=Y.tolist()),Y.map(fe=>this.decode(fe,ie))}decode(Y,ie={}){if(Y instanceof i.Tensor&&(Y=_(Y)),!Array.isArray(Y)||Y.length===0||!(0,s.isIntegralNumber)(Y[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(Y,ie)}decode_single(Y,{skip_special_tokens:ie=!1,clean_up_tokenization_spaces:fe=null}){let ge=this.model.convert_ids_to_tokens(Y);ie&&(ge=ge.filter(qe=>!this.special_tokens.includes(qe)));let $e=this.decoder?this.decoder(ge):ge.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&($e=$e.replaceAll(this.decoder.end_of_word_suffix," "),ie&&($e=$e.trim())),(fe??this.clean_up_tokenization_spaces)&&($e=v($e)),$e}get_chat_template({chat_template:Y=null,tools:ie=null}={}){if(this.chat_template&&typeof this.chat_template=="object"){const fe=this.chat_template;if(Y!==null&&Object.hasOwn(fe,Y))Y=fe[Y];else if(Y===null)if(ie!==null&&"tool_use"in fe)Y=fe.tool_use;else if("default"in fe)Y=fe.default;else throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(fe).sort()}.`)}else if(Y===null)if(this.chat_template)Y=this.chat_template;else throw Error("Cannot use apply_chat_template() because tokenizer.chat_template is not set and no template argument was passed! For information about writing templates and setting the tokenizer.chat_template attribute, please see the documentation at https://huggingface.co/docs/transformers/main/en/chat_templating");return Y}apply_chat_template(Y,{tools:ie=null,documents:fe=null,chat_template:ge=null,add_generation_prompt:$e=!1,tokenize:qe=!0,padding:at=!1,truncation:Je=!1,max_length:ct=null,return_tensor:$t=!0,return_dict:Zt=!1,tokenizer_kwargs:nr={},...Fr}={}){if(ge=this.get_chat_template({chat_template:ge,tools:ie}),typeof ge!="string")throw Error(`chat_template must be a string, but got ${typeof ge}`);let pr=this._compiled_template_cache.get(ge);pr===void 0&&(pr=new d.Template(ge),this._compiled_template_cache.set(ge,pr));const Ar=Object.create(null);for(const Ir of Os){const Jn=this.getToken(Ir);Jn&&(Ar[Ir]=Jn)}const Lr=pr.render({messages:Y,add_generation_prompt:$e,tools:ie,documents:fe,...Ar,...Fr});if(qe){const Ir=this._call(Lr,{add_special_tokens:!1,padding:at,truncation:Je,max_length:ct,return_tensor:$t,...nr});return Zt?Ir:Ir.input_ids}return Lr}}class Xt extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class mt extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Kt extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class N extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class se extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class H extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class re extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class de extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Pe extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Fe extends He{}class pt extends He{}class It extends He{constructor(Y,ie){super(Y,ie);le(this,"return_token_type_ids",!0);console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class St extends He{constructor(){super(...arguments);le(this,"return_token_type_ids",!0)}}class Ot extends He{}class dt extends He{}class Yt extends He{}class hr extends He{constructor(O,Y){super(O,Y),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(ie=>this.languageRegex.test(ie)),this.lang_to_token=ie=>ie}_build_translation_inputs(O,Y,ie){return zs(this,O,Y,ie)}}class Bn extends hr{}class Zn extends He{}class Vr extends He{}const on="";class Wr extends He{constructor(Y,ie){super(Y,ie);le(this,"padding_side","left");this.legacy=ie.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new wr({replacement:on,prepend_scheme:"first"}))}_encode_text(Y){if(Y===null)return null;if(this.legacy||Y.length===0)return super._encode_text(Y);let ie=super._encode_text(on+Y.replaceAll(on," "));return ie.length>1&&ie[0]===on&&this.special_tokens.includes(ie[1])&&(ie=ie.slice(1)),ie}}class Fs extends He{}class Ls extends He{}class yn extends He{}class Ra extends He{}class za extends He{}class mn extends He{}class Rs extends He{}class cs extends He{}class Dn extends He{}function zs(_e,O,Y,ie){if(!("language_codes"in _e)||!Array.isArray(_e.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in _e)||!(_e.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in _e)||typeof _e.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const fe=ie.src_lang,ge=ie.tgt_lang;if(!_e.language_codes.includes(ge))throw new Error(`Target language code "${ge}" is not valid. Must be one of: {${_e.language_codes.join(", ")}}`);if(fe!==void 0){if(!_e.language_codes.includes(fe))throw new Error(`Source language code "${fe}" is not valid. Must be one of: {${_e.language_codes.join(", ")}}`);for(const $e of _e.post_processor.config.single)if("SpecialToken"in $e&&_e.languageRegex.test($e.SpecialToken.id)){$e.SpecialToken.id=_e.lang_to_token(fe);break}}return ie.forced_bos_token_id=_e.model.convert_tokens_to_ids([_e.lang_to_token(ge)])[0],_e._call(O,Y)}class Jr extends He{constructor(O,Y){super(O,Y),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(ie=>this.languageRegex.test(ie)),this.lang_to_token=ie=>ie}_build_translation_inputs(O,Y,ie){return zs(this,O,Y,ie)}}class Or extends He{constructor(O,Y){super(O,Y),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(ie=>this.languageRegex.test(ie)).map(ie=>ie.slice(2,-2)),this.lang_to_token=ie=>`__${ie}__`}_build_translation_inputs(O,Y,ie){return zs(this,O,Y,ie)}}class Bs extends He{get timestamp_begin(){return this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1}_decode_asr(O,{return_timestamps:Y=!1,return_language:ie=!1,time_precision:fe=null,force_full_sequences:ge=!0}={}){if(fe===null)throw Error("Must specify time_precision");let $e=null;const qe=Y==="word";function at(){return{language:$e,timestamp:[null,null],text:""}}const Je=[];let ct=at(),$t=0;const Zt=this.timestamp_begin,Fr=Zt+1500;let pr=[],Ar=[],Lr=!1,Ir=null;const Jn=new Set(this.all_special_ids);for(const Mr of O){const Ur=Mr.tokens,Sn=qe?Mr.token_timestamps:null;let Vs=null,Ws=Zt;if("stride"in Mr){const[fn,Gr,Cr]=Mr.stride;if($t-=Gr,Ir=fn-Cr,Gr&&(Ws=Gr/fe+Zt),Cr)for(let en=Ur.length-1;en>=0;--en){const Un=Number(Ur[en]);if(Un>=Zt){if(Vs!==null&&(Un-Zt)*fe<Ir)break;Vs=Un}}}let kn=[],Wn=[];for(let fn=0;fn<Ur.length;++fn){const Gr=Number(Ur[fn]);if(Jn.has(Gr)){const Cr=this.decode([Gr]),en=p.WHISPER_LANGUAGE_MAPPING.get(Cr.slice(2,-2));if(en!==void 0){if($e!==null&&en!==$e&&!Y){pr.push(kn);const Un=this.findLongestCommonSequence(pr)[0],Us=this.decode(Un);ct.text=Us,Je.push(ct),pr=[],kn=[],ct=at()}$e=ct.language=en}}else if(Gr>=Zt&&Gr<=Fr){const Cr=(Gr-Zt)*fe+$t,en=(0,o.round)(Cr,2);if(Vs!==null&&Gr>=Vs)Lr=!0;else if(Lr||pr.length>0&&Gr<Ws)Lr=!1;else if(ct.timestamp[0]===null)ct.timestamp[0]=en;else if(en!==ct.timestamp[0]){ct.timestamp[1]=en,pr.push(kn),qe&&Ar.push(Wn);const[Un,Us]=this.findLongestCommonSequence(pr,Ar),Yl=this.decode(Un);ct.text=Yl,qe&&(ct.words=this.collateWordTimestamps(Un,Us,$e)),Je.push(ct),pr=[],kn=[],Ar=[],Wn=[],ct=at()}}else if(kn.push(Gr),qe){let Cr=(0,o.round)(Sn[fn]+$t,2),en;if(fn+1<Sn.length){en=(0,o.round)(Sn[fn+1]+$t,2);const Un=this.decode([Gr]);E.test(Un)&&(en=(0,o.round)(Math.min(Cr+fe,en),2))}else en=null;Wn.push([Cr,en])}}if("stride"in Mr){const[fn,Gr,Cr]=Mr.stride;$t+=fn-Cr}kn.length>0?(pr.push(kn),qe&&Ar.push(Wn)):pr.every(fn=>fn.length===0)&&(ct=at(),pr=[],kn=[],Ar=[],Wn=[])}if(pr.length>0){if(ge&&Y)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Mr,Ur]=this.findLongestCommonSequence(pr,Ar),Sn=this.decode(Mr);ct.text=Sn,qe&&(ct.words=this.collateWordTimestamps(Mr,Ur,$e)),Je.push(ct)}let pn=Object.create(null);const la=Je.map(Mr=>Mr.text).join("");if(Y||ie){for(let Mr=0;Mr<Je.length;++Mr){const Ur=Je[Mr];Y||delete Ur.timestamp,ie||delete Ur.language}if(qe){const Mr=[];for(const Ur of Je)for(const Sn of Ur.words)Mr.push(Sn);pn={chunks:Mr}}else pn={chunks:Je}}return[la,pn]}findLongestCommonSequence(O,Y=null){let ie=O[0],fe=ie.length,ge=[];const $e=Array.isArray(Y)&&Y.length>0;let qe=$e?[]:null,at=$e?Y[0]:null;for(let Je=1;Je<O.length;++Je){const ct=O[Je];let $t=0,Zt=[fe,fe,0,0];const nr=ct.length;for(let pn=1;pn<fe+nr;++pn){const la=Math.max(0,fe-pn),Mr=Math.min(fe,fe+nr-pn),Ur=ie.slice(la,Mr),Sn=Math.max(0,pn-fe),Vs=Math.min(nr,pn),Ws=ct.slice(Sn,Vs);if(Ur.length!==Ws.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");let kn;$e?kn=Ur.filter((Gr,Cr)=>Gr===Ws[Cr]&&at[la+Cr]<=Y[Je][Sn+Cr]).length:kn=Ur.filter((Gr,Cr)=>Gr===Ws[Cr]).length;const Wn=pn/1e4,fn=kn/pn+Wn;kn>1&&fn>$t&&($t=fn,Zt=[la,Mr,Sn,Vs])}const[Fr,pr,Ar,Lr]=Zt,Ir=Math.floor((pr+Fr)/2),Jn=Math.floor((Lr+Ar)/2);ge.push(...ie.slice(0,Ir)),ie=ct.slice(Jn),fe=ie.length,$e&&(qe.push(...at.slice(0,Ir)),at=Y[Je].slice(Jn))}return ge.push(...ie),$e?(qe.push(...at),[ge,qe]):[ge,[]]}collateWordTimestamps(O,Y,ie){const[fe,ge,$e]=this.combineTokensIntoWords(O,ie),qe=[];for(let at=0;at<fe.length;++at){const Je=$e[at];qe.push({text:fe[at],timestamp:[Y[Je.at(0)][0],Y[Je.at(-1)][1]]})}return qe}combineTokensIntoWords(O,Y,ie=`"'([{-`,fe=`"'.,!?:)]}`){Y=Y??"english";let ge,$e,qe;return["chinese","japanese","thai","lao","myanmar"].includes(Y)?[ge,$e,qe]=this.splitTokensOnUnicode(O):[ge,$e,qe]=this.splitTokensOnSpaces(O),this.mergePunctuations(ge,$e,qe,ie,fe)}decode(O,Y){let ie;return Y!=null&&Y.decode_with_timestamps?(O instanceof i.Tensor&&(O=_(O)),ie=this.decodeWithTimestamps(O,Y)):ie=super.decode(O,Y),ie}decodeWithTimestamps(O,Y){const ie=(Y==null?void 0:Y.time_precision)??.02,fe=Array.from(this.all_special_ids).at(-1)+1;let ge=[[]];for(let $e of O)if($e=Number($e),$e>=fe){const qe=(($e-fe)*ie).toFixed(2);ge.push(`<|${qe}|>`),ge.push([])}else ge[ge.length-1].push($e);return ge=ge.map($e=>typeof $e=="string"?$e:super.decode($e,Y)),ge.join("")}splitTokensOnUnicode(O){const Y=this.decode(O,{decode_with_timestamps:!0}),ie="",fe=[],ge=[],$e=[];let qe=[],at=[],Je=0;for(let ct=0;ct<O.length;++ct){const $t=O[ct];qe.push($t),at.push(ct);const Zt=this.decode(qe,{decode_with_timestamps:!0});(!Zt.includes(ie)||Y[Je+Zt.indexOf(ie)]===ie)&&(fe.push(Zt),ge.push(qe),$e.push(at),qe=[],at=[],Je+=Zt.length)}return[fe,ge,$e]}splitTokensOnSpaces(O){const[Y,ie,fe]=this.splitTokensOnUnicode(O),ge=[],$e=[],qe=[],at=new RegExp(`^[${C}]$`,"gu");for(let Je=0;Je<Y.length;++Je){const ct=Y[Je],$t=ie[Je],Zt=fe[Je],nr=$t[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Fr=ct.startsWith(" "),pr=ct.trim(),Ar=at.test(pr);if(nr||Fr||Ar||ge.length===0)ge.push(ct),$e.push($t),qe.push(Zt);else{const Lr=ge.length-1;ge[Lr]+=ct,$e[Lr].push(...$t),qe[Lr].push(...Zt)}}return[ge,$e,qe]}mergePunctuations(O,Y,ie,fe,ge){const $e=structuredClone(O),qe=structuredClone(Y),at=structuredClone(ie);let Je=$e.length-2,ct=$e.length-1;for(;Je>=0;)$e[Je].startsWith(" ")&&fe.includes($e[Je].trim())?($e[ct]=$e[Je]+$e[ct],qe[ct]=(0,s.mergeArrays)(qe[Je],qe[ct]),at[ct]=(0,s.mergeArrays)(at[Je],at[ct]),$e[Je]="",qe[Je]=[],at[Je]=[]):ct=Je,--Je;for(Je=0,ct=1;ct<$e.length;)!$e[Je].endsWith(" ")&&ge.includes($e[ct])?($e[Je]+=$e[ct],qe[Je]=(0,s.mergeArrays)(qe[Je],qe[ct]),at[Je]=(0,s.mergeArrays)(at[Je],at[ct]),$e[ct]="",qe[ct]=[],at[ct]=[]):Je=ct,++ct;return[$e.filter($t=>$t),qe.filter($t=>$t.length>0),at.filter($t=>$t.length>0)]}}class ho extends He{}class Vn extends He{}class Ue extends He{}class Ge extends He{constructor(O,Y){super(O,Y),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(ie=>this.languageRegex.test(ie)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(O){if(O===null)return null;const[Y,...ie]=O.trim().split(this.languageRegex);if(ie.length===0)return super._encode_text(Y);if(ie.length===2){const[fe,ge]=ie;return this.supported_language_codes.includes(fe)||console.warn(`Unsupported language code "${fe}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),(0,s.mergeArrays)([fe],super._encode_text(ge))}}}class ut extends He{}class gr extends He{}class go extends He{}class ia extends He{}class _s extends He{}class Hi extends He{constructor(O,Y){super(O,Y),this.decoder=new vt({})}}class qi extends He{}class Ki extends He{}class Qi extends He{}class Xi{static async from_pretrained(O,{progress_callback:Y=null,config:ie=null,cache_dir:fe=null,local_files_only:ge=!1,revision:$e="main",legacy:qe=null}={}){var Zt;const[at,Je]=await u(O,{progress_callback:Y,config:ie,cache_dir:fe,local_files_only:ge,revision:$e,legacy:qe}),ct=((Zt=Je.tokenizer_class)==null?void 0:Zt.replace(/Fast$/,""))??"PreTrainedTokenizer";let $t=this.TOKENIZER_CLASS_MAPPING[ct];return $t||(console.warn(`Unknown tokenizer class "${ct}", attempting to construct from base class.`),$t=He),new $t(at,Je)}}le(Xi,"TOKENIZER_CLASS_MAPPING",{T5Tokenizer:Ot,DistilBertTokenizer:Fe,CamembertTokenizer:pt,DebertaTokenizer:se,DebertaV2Tokenizer:H,BertTokenizer:Xt,HerbertTokenizer:re,ConvBertTokenizer:de,RoFormerTokenizer:Pe,XLMTokenizer:It,ElectraTokenizer:St,MobileBertTokenizer:Kt,SqueezeBertTokenizer:N,AlbertTokenizer:mt,GPT2Tokenizer:dt,BartTokenizer:Yt,MBartTokenizer:hr,MBart50Tokenizer:Bn,RobertaTokenizer:Zn,WhisperTokenizer:Bs,CodeGenTokenizer:ho,CLIPTokenizer:Vn,SiglipTokenizer:Ue,MarianTokenizer:Ge,BloomTokenizer:Vr,NllbTokenizer:Jr,M2M100Tokenizer:Or,LlamaTokenizer:Wr,CodeLlamaTokenizer:Fs,XLMRobertaTokenizer:Ls,MPNetTokenizer:yn,FalconTokenizer:Ra,GPTNeoXTokenizer:za,EsmTokenizer:mn,Wav2Vec2CTCTokenizer:ut,BlenderbotTokenizer:gr,BlenderbotSmallTokenizer:go,SpeechT5Tokenizer:ia,NougatTokenizer:_s,VitsTokenizer:Hi,Qwen2Tokenizer:Rs,GemmaTokenizer:cs,Grok1Tokenizer:Dn,CohereTokenizer:qi,MgpstrTokenizer:Ki,Ernie4_5_Tokenizer:Qi,PreTrainedTokenizer:He})},"./src/utils/audio.js":(e,t,r)=>{r.r(t),r.d(t,{RawAudio:()=>D,hamming:()=>m,hanning:()=>u,mel_filter_bank:()=>y,read_audio:()=>d,spectrogram:()=>P,window_function:()=>I});var n=r("./src/utils/hub.js"),s=r("./src/utils/maths.js"),a=r("./src/utils/core.js"),o=r("./src/env.js"),i=r("./src/utils/tensor.js"),l=r("?7992");async function d(B,U){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const q=await(await(0,n.getFile)(B)).arrayBuffer(),X=new AudioContext({sampleRate:U});typeof U>"u"&&console.warn(`No sampling rate provided, using default of ${X.sampleRate}Hz.`);const Z=await X.decodeAudioData(q);let K;if(Z.numberOfChannels===2){const ee=Math.sqrt(2),oe=Z.getChannelData(0),ae=Z.getChannelData(1);K=new Float32Array(oe.length);for(let G=0;G<Z.length;++G)K[G]=ee*(oe[G]+ae[G])/2}else K=Z.getChannelData(0);return K}function p(B,U){if(B<1)return new Float64Array;if(B===1)return new Float64Array([1]);const q=1-U,X=2*Math.PI/(B-1),Z=new Float64Array(B);for(let K=0;K<B;++K)Z[K]=U-q*Math.cos(K*X);return Z}function u(B){return p(B,.5)}function m(B){return p(B,.54)}const f={htk:B=>2595*Math.log10(1+B/700),kaldi:B=>1127*Math.log(1+B/700),slaney:(B,U=1e3,q=15,X=27/Math.log(6.4))=>B>=U?q+Math.log(B/U)*X:3*B/200};function h(B,U="htk"){const q=f[U];if(!q)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof B=="number"?q(B):B.map(X=>q(X))}const _={htk:B=>700*(10**(B/2595)-1),kaldi:B=>700*(Math.exp(B/1127)-1),slaney:(B,U=1e3,q=15,X=Math.log(6.4)/27)=>B>=q?U*Math.exp(X*(B-q)):200*B/3};function v(B,U="htk"){const q=_[U];if(!q)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof B=="number"?q(B):B.map(X=>q(X))}function g(B,U){const q=Float64Array.from({length:U.length-1},(ee,oe)=>U[oe+1]-U[oe]),X=Array.from({length:B.length},()=>new Array(U.length));for(let ee=0;ee<B.length;++ee){const oe=X[ee];for(let ae=0;ae<U.length;++ae)oe[ae]=U[ae]-B[ee]}const Z=U.length-2,K=Array.from({length:Z},()=>new Array(B.length));for(let ee=0;ee<B.length;++ee){const oe=X[ee];for(let ae=0;ae<Z;++ae){const G=-oe[ae]/q[ae],R=oe[ae+2]/q[ae+1];K[ae][ee]=Math.max(0,Math.min(G,R))}}return K}function x(B,U,q){const X=(U-B)/(q-1);return Float64Array.from({length:q},(Z,K)=>B+X*K)}function y(B,U,q,X,Z,K=null,ee="htk",oe=!1){if(K!==null&&K!=="slaney")throw new Error('norm must be one of null or "slaney"');if(B<2)throw new Error(`Require num_frequency_bins: ${B} >= 2`);if(q>X)throw new Error(`Require min_frequency: ${q} <= max_frequency: ${X}`);const ae=h(q,ee),G=h(X,ee),R=x(ae,G,U+2);let Q=v(R,ee),ce;if(oe){const me=Z/((B-1)*2);ce=h(Float64Array.from({length:B},(we,Ne)=>Ne*me),ee),Q=R}else ce=x(0,Math.floor(Z/2),B);const ne=g(ce,Q);if(K!==null&&K==="slaney")for(let me=0;me<U;++me){const we=ne[me],Ne=2/(Q[me+2]-Q[me]);for(let Me=0;Me<B;++Me)we[Me]*=Ne}return ne}function w(B,U,q){const X=new B.constructor(B.length+U+q),Z=B.length-1;for(let K=0;K<B.length;++K)X[U+K]=B[K];for(let K=1;K<=U;++K)X[U-K]=B[(0,a.calculateReflectOffset)(K,Z)];for(let K=1;K<=q;++K)X[Z+U+K]=B[(0,a.calculateReflectOffset)(Z-K,Z)];return X}function b(B,U,q,X,Z){if(q<=0)throw new Error("reference must be greater than zero");if(X<=0)throw new Error("min_value must be greater than zero");q=Math.max(X,q);const K=Math.log10(q);for(let ee=0;ee<B.length;++ee)B[ee]=U*Math.log10(Math.max(X,B[ee])-K);if(Z!==null){if(Z<=0)throw new Error("db_range must be greater than zero");const ee=(0,s.max)(B)[0]-Z;for(let oe=0;oe<B.length;++oe)B[oe]=Math.max(B[oe],ee)}return B}function C(B,U=1,q=1e-5,X=null){return b(B,20,U,q,X)}function E(B,U=1,q=1e-10,X=null){return b(B,10,U,q,X)}async function P(B,U,q,X,{fft_length:Z=null,power:K=1,center:ee=!0,pad_mode:oe="reflect",onesided:ae=!0,preemphasis:G=null,preemphasis_htk_flavor:R=!0,mel_filters:Q=null,mel_floor:ce=1e-10,log_mel:ne=null,reference:me=1,min_value:we=1e-10,db_range:Ne=null,remove_dc_offset:Me=null,min_num_frames:te=null,max_num_frames:F=null,do_pad:ue=!0,transpose:xe=!1,mel_offset:be=0}={}){const Ee=U.length;if(Z===null&&(Z=q),q>Z)throw Error(`frame_length (${q}) may not be larger than fft_length (${Z})`);if(Ee!==q)throw new Error(`Length of the window (${Ee}) must equal frame_length (${q})`);if(X<=0)throw new Error("hop_length must be greater than zero");if(K===null&&Q!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(!R)throw new Error("`preemphasis_htk_flavor=false` is not currently supported.");if(ee)switch(oe){case"reflect":{const Re=Math.floor((Z-1)/2)+1;B=w(B,Re,Re);break}case"constant":{const Re=Math.floor(Z/2),Qe=new B.constructor(B.length+2*Re);Qe.set(B,Re),B=Qe;break}default:throw new Error(`pad_mode="${oe}" not implemented yet.`)}let ye=Math.floor(1+Math.floor((B.length-q)/X));te!==null&&ye<te&&(ye=te);const Ae=ae?Math.floor(Z/2)+1:Z;let Ce=ye,De=ye;F!==null&&(F>ye?ue&&(De=F):De=Ce=F);const Be=new s.FFT(Z),Ze=new Float64Array(Z),Se=new Float64Array(Be.outputBufferSize),it=new Float32Array(Ae*De);for(let Re=0;Re<Ce;++Re){const Qe=Re*X,Pt=Math.min(B.length-Qe,q);Pt!==q&&Ze.fill(0,0,q);for(let Mt=0;Mt<Pt;++Mt)Ze[Mt]=B[Qe+Mt];if(Me){let Mt=0;for(let vt=0;vt<Pt;++vt)Mt+=Ze[vt];const Wt=Mt/Pt;for(let vt=0;vt<Pt;++vt)Ze[vt]-=Wt}if(G!==null){for(let Mt=Pt-1;Mt>=1;--Mt)Ze[Mt]-=G*Ze[Mt-1];Ze[0]*=1-G}for(let Mt=0;Mt<U.length;++Mt)Ze[Mt]*=U[Mt];Be.realTransform(Se,Ze);for(let Mt=0;Mt<Ae;++Mt){const Wt=Mt<<1;it[Mt*De+Re]=Se[Wt]**2+Se[Wt+1]**2}}if(K!==null&&K!==2){const Re=K/2;for(let Qe=0;Qe<it.length;++Qe)it[Qe]**=Re}const et=Q.length;let lt=await(0,i.matmul)(new i.Tensor("float32",Q.flat(),[et,Ae]),new i.Tensor("float32",it,[Ae,De]));xe&&(lt=lt.transpose(1,0));const st=lt.data;for(let Re=0;Re<st.length;++Re)st[Re]=be+Math.max(ce,st[Re]);if(K!==null&&ne!==null){const Re=Math.min(st.length,Ce*et);switch(ne){case"log":for(let Qe=0;Qe<Re;++Qe)st[Qe]=Math.log(st[Qe]);break;case"log10":for(let Qe=0;Qe<Re;++Qe)st[Qe]=Math.log10(st[Qe]);break;case"dB":if(K===1)C(st,me,we,Ne);else if(K===2)E(st,me,we,Ne);else throw new Error(`Cannot use log_mel option '${ne}' with power ${K}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${ne}'`)}}return lt}function I(B,U,{periodic:q=!0,frame_length:X=null,center:Z=!0}={}){const K=q?B+1:B;let ee;switch(U){case"boxcar":ee=new Float64Array(K).fill(1);break;case"hann":case"hann_window":ee=u(K);break;case"hamming":ee=m(K);break;case"povey":ee=u(K).map(oe=>Math.pow(oe,.85));break;default:throw new Error(`Unknown window type ${U}.`)}if(q&&(ee=ee.subarray(0,B)),X===null)return ee;if(B>X)throw new Error(`Length of the window (${B}) may not be larger than frame_length (${X})`);return ee}function $(B,U){let q=44;const X=new ArrayBuffer(q+B.length*4),Z=new DataView(X);z(Z,0,"RIFF"),Z.setUint32(4,36+B.length*4,!0),z(Z,8,"WAVE"),z(Z,12,"fmt "),Z.setUint32(16,16,!0),Z.setUint16(20,3,!0),Z.setUint16(22,1,!0),Z.setUint32(24,U,!0),Z.setUint32(28,U*4,!0),Z.setUint16(32,4,!0),Z.setUint16(34,32,!0),z(Z,36,"data"),Z.setUint32(40,B.length*4,!0);for(let K=0;K<B.length;++K,q+=4)Z.setFloat32(q,B[K],!0);return X}function z(B,U,q){for(let X=0;X<q.length;++X)B.setUint8(U+X,q.charCodeAt(X))}class D{constructor(U,q){this.audio=U,this.sampling_rate=q}toWav(){return $(this.audio,this.sampling_rate)}toBlob(){const U=this.toWav();return new Blob([U],{type:"audio/wav"})}async save(U){let q;if(o.apis.IS_BROWSER_ENV){if(o.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save a file from a Web Worker.");q=a.saveBlob}else if(o.apis.IS_FS_AVAILABLE)q=async(X,Z)=>{let K=await Z.arrayBuffer();l.writeFileSync(X,Buffer.from(K))};else throw new Error("Unable to save because filesystem is disabled in this environment.");await q(U,this.toBlob())}}},"./src/utils/constants.js":(e,t,r)=>{r.r(t),r.d(t,{CHAT_TEMPLATE_NAME:()=>l,CONFIG_NAME:()=>s,FEATURE_EXTRACTOR_NAME:()=>a,GENERATION_CONFIG_NAME:()=>d,GITHUB_ISSUE_URL:()=>n,IMAGE_PROCESSOR_NAME:()=>o,PROCESSOR_NAME:()=>i});const n="https://github.com/huggingface/transformers.js/issues/new/choose",s="config.json",a="preprocessor_config.json",o=a,i="processor_config.json",l="chat_template.jinja",d="generation_config.json"},"./src/utils/core.js":(e,t,r)=>{r.r(t),r.d(t,{calculateDimensions:()=>d,calculateReflectOffset:()=>f,count:()=>g,dispatchCallback:()=>n,escapeRegExp:()=>a,isIntegralNumber:()=>i,isNullishDimension:()=>l,isTypedArray:()=>o,len:()=>v,mergeArrays:()=>u,pick:()=>_,pop:()=>p,product:()=>m,reverseDictionary:()=>s,saveBlob:()=>h});function n(x,y){x&&x(y)}function s(x){return Object.fromEntries(Object.entries(x).map(([y,w])=>[w,y]))}function a(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(x){var y,w,b;return((b=(w=(y=x==null?void 0:x.prototype)==null?void 0:y.__proto__)==null?void 0:w.constructor)==null?void 0:b.name)==="TypedArray"}function i(x){return Number.isInteger(x)||typeof x=="bigint"}function l(x){return x==null||x===-1}function d(x){const y=[];let w=x;for(;Array.isArray(w);)y.push(w.length),w=w[0];return y}function p(x,y,w=void 0){const b=x[y];if(b!==void 0)return delete x[y],b;if(w===void 0)throw Error(`Key ${y} does not exist in object.`);return w}function u(...x){return Array.prototype.concat.apply([],x)}function m(...x){return x.reduce((y,w)=>y.flatMap(b=>w.map(C=>[b,C])))}function f(x,y){return Math.abs((x+y)%(2*y)-y)}function h(x,y){const w=URL.createObjectURL(y),b=document.createElement("a");b.href=w,b.download=x,b.click(),b.remove(),URL.revokeObjectURL(w)}function _(x,y){return Object.assign({},...y.map(w=>{if(x[w]!==void 0)return{[w]:x[w]}}))}function v(x){let y=0;for(const w of x)++y;return y}function g(x,y){let w=0;for(const b of x)b===y&&++w;return w}},"./src/utils/data-structures.js":(e,t,r)=>{r.r(t),r.d(t,{CharTrie:()=>s,DictionarySplitter:()=>l,LRUCache:()=>d,PriorityQueue:()=>n,TokenLattice:()=>o});class n{constructor(u=(f,h)=>f>h,m=1/0){this._heap=[],this._comparator=u,this._maxSize=m}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...u){return this.extend(u)}extend(u){for(const m of u)if(this.size<this._maxSize)this._heap.push(m),this._siftUp();else{const f=this._smallest();this._comparator(m,this._heap[f])&&(this._heap[f]=m,this._siftUpFrom(f))}return this.size}pop(){const u=this.peek(),m=this.size-1;return m>0&&this._swap(0,m),this._heap.pop(),this._siftDown(),u}replace(u){const m=this.peek();return this._heap[0]=u,this._siftDown(),m}_parent(u){return(u+1>>>1)-1}_left(u){return(u<<1)+1}_right(u){return u+1<<1}_greater(u,m){return this._comparator(this._heap[u],this._heap[m])}_swap(u,m){const f=this._heap[u];this._heap[u]=this._heap[m],this._heap[m]=f}_siftUp(){this._siftUpFrom(this.size-1)}_siftUpFrom(u){for(;u>0&&this._greater(u,this._parent(u));)this._swap(u,this._parent(u)),u=this._parent(u)}_siftDown(){let u=0;for(;this._left(u)<this.size&&this._greater(this._left(u),u)||this._right(u)<this.size&&this._greater(this._right(u),u);){const m=this._right(u)<this.size&&this._greater(this._right(u),this._left(u))?this._right(u):this._left(u);this._swap(u,m),u=m}}_smallest(){return 2**Math.floor(Math.log2(this.size))-1}}class s{constructor(){this.root=a.default()}extend(u){for(const m of u)this.push(m)}push(u){let m=this.root;for(const f of u){let h=m.children.get(f);h===void 0&&(h=a.default(),m.children.set(f,h)),m=h}m.isLeaf=!0}*commonPrefixSearch(u){let m=this.root;if(m===void 0)return;let f="";for(const h of u){if(f+=h,m=m.children.get(h),m===void 0)return;m.isLeaf&&(yield f)}}}class a{constructor(u,m){this.isLeaf=u,this.children=m}static default(){return new a(!1,new Map)}}class o{constructor(u,m,f){this.chars=Array.from(u),this.len=this.chars.length,this.bosTokenId=m,this.eosTokenId=f,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const h=new i(this.bosTokenId,0,0,0,0),_=new i(this.eosTokenId,1,this.len,0,0);this.nodes.push(h.clone()),this.nodes.push(_.clone()),this.beginNodes[this.len].push(_),this.endNodes[0].push(h)}insert(u,m,f,h){const _=this.nodes.length,v=new i(h,_,u,m,f);this.beginNodes[u].push(v),this.endNodes[u+m].push(v),this.nodes.push(v)}viterbi(){const u=this.len;let m=0;for(;m<=u;){if(this.beginNodes[m].length==0)return[];for(let g of this.beginNodes[m]){g.prev=null;let x=0,y=null;for(let w of this.endNodes[m]){const b=w.backtraceScore+g.score;(y===null||b>x)&&(y=w.clone(),x=b)}if(y!==null)g.prev=y,g.backtraceScore=x;else return[]}++m}const f=[],_=this.beginNodes[u][0].prev;if(_===null)return[];let v=_.clone();for(;v.prev!==null;)f.push(v.clone()),v=v.clone().prev.clone();return f.reverse(),f}piece(u){return this.chars.slice(u.pos,u.pos+u.length).join("")}tokens(){return this.viterbi().map(m=>this.piece(m))}tokenIds(){return this.viterbi().map(m=>m.tokenId)}}class i{constructor(u,m,f,h,_){this.tokenId=u,this.nodeId=m,this.pos=f,this.length=h,this.score=_,this.prev=null,this.backtraceScore=0}clone(){const u=new i(this.tokenId,this.nodeId,this.pos,this.length,this.score);return u.prev=this.prev,u.backtraceScore=this.backtraceScore,u}}class l{constructor(u){this.trie=this._buildTrie(u)}_buildTrie(u){var f;const m=Object.create(null);for(const h of u){let _=m;for(let v=0;v<h.length;++v)_=_[f=h[v]]??(_[f]=Object.create(null));_.end=h}return m}split(u){const m=[],f=u.length;let h=0,_=0;for(;_<f;){let v=this.trie,g=null,x=_;for(;x<f&&(v=v[u[x]]);)v.end&&(g=v.end),++x;g?(_>h&&m.push(u.slice(h,_)),m.push(g),_+=g.length,h=_):++_}return h<f&&m.push(u.slice(h)),m}}class d{constructor(u){this.capacity=u,this.cache=new Map}get(u){if(!this.cache.has(u))return;const m=this.cache.get(u);return this.cache.delete(u),this.cache.set(u,m),m}put(u,m){this.cache.has(u)&&this.cache.delete(u),this.cache.set(u,m),this.cache.size>this.capacity&&this.cache.delete(this.cache.keys().next().value)}clear(){this.cache.clear()}}},"./src/utils/devices.js":(e,t,r)=>{r.r(t),r.d(t,{DEVICE_TYPES:()=>n});const n=Object.freeze({auto:"auto",gpu:"gpu",cpu:"cpu",wasm:"wasm",webgpu:"webgpu",cuda:"cuda",dml:"dml",webnn:"webnn","webnn-npu":"webnn-npu","webnn-gpu":"webnn-gpu","webnn-cpu":"webnn-cpu"})},"./src/utils/dtypes.js":(e,t,r)=>{r.r(t),r.d(t,{DATA_TYPES:()=>o,DEFAULT_DEVICE_DTYPE_MAPPING:()=>i,DEFAULT_DTYPE_SUFFIX_MAPPING:()=>l,isWebGpuFp16Supported:()=>a});var n=r("./src/env.js"),s=r("./src/utils/devices.js");const a=function(){let d;return async function(){if(d===void 0)if(!n.apis.IS_WEBGPU_AVAILABLE)d=!1;else try{d=(await navigator.gpu.requestAdapter()).features.has("shader-f16")}catch{d=!1}return d}}(),o=Object.freeze({auto:"auto",fp32:"fp32",fp16:"fp16",q8:"q8",int8:"int8",uint8:"uint8",q4:"q4",bnb4:"bnb4",q4f16:"q4f16"}),i=Object.freeze({[s.DEVICE_TYPES.wasm]:o.q8}),l=Object.freeze({[o.fp32]:"",[o.fp16]:"_fp16",[o.int8]:"_int8",[o.uint8]:"_uint8",[o.q8]:"_quantized",[o.q4]:"_q4",[o.q4f16]:"_q4f16",[o.bnb4]:"_bnb4"})},"./src/utils/generic.js":(e,t,r)=>{r.r(t),r.d(t,{Callable:()=>n});const n=class{constructor(){let s=function(...a){return s._call(...a)};return Object.setPrototypeOf(s,new.target.prototype)}_call(...s){throw Error("Must implement _call method in subclass")}}},"./src/utils/hub.js":(e,t,r)=>{r.r(t),r.d(t,{MAX_EXTERNAL_DATA_CHUNKS:()=>i,getFile:()=>f,getModelFile:()=>x,getModelJSON:()=>w,getModelText:()=>y});var n=r("?7992"),s=r("?5af5"),a=r("./src/env.js"),o=r("./src/utils/core.js");const i=100,l={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};class d{constructor(P){if(this.filePath=P,this.headers=new Headers,this.exists=n.existsSync(P),this.exists){this.status=200,this.statusText="OK";let I=n.statSync(P);this.headers.set("content-length",I.size.toString()),this.updateContentType();const $=n.createReadStream(P);this.body=new ReadableStream({start(z){$.on("data",D=>z.enqueue(D)),$.on("end",()=>z.close()),$.on("error",D=>z.error(D))},cancel(){$.destroy()}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const P=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",l[P]??"application/octet-stream")}clone(){let P=new d(this.filePath);return P.exists=this.exists,P.status=this.status,P.statusText=this.statusText,P.headers=new Headers(this.headers),P}async arrayBuffer(){return(await n.promises.readFile(this.filePath)).buffer}async blob(){const P=await n.promises.readFile(this.filePath);return new Blob([P],{type:this.headers.get("content-type")})}async text(){return await n.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function p(E,P=null,I=null){let $;try{$=new URL(E)}catch{return!1}return!(P&&!P.includes($.protocol)||I&&!I.includes($.hostname))}const u=/^(\b[\w\-.]+\b\/)?\b[\w\-.]{1,96}\b$/;function m(E){return!(!u.test(E)||E.includes("..")||E.includes("--")||E.endsWith(".git")||E.endsWith(".ipynb"))}async function f(E){var P;if(a.env.useFS&&!p(E,["http:","https:","blob:"]))return new d(E instanceof URL?E.protocol==="file:"?E.pathname:E.toString():E);if(typeof process<"u"&&((P=process==null?void 0:process.release)==null?void 0:P.name)==="node"){const I=!!(wo!=null&&wo.TESTING_REMOTELY),$=a.env.version,z=new Headers;if(z.set("User-Agent",`transformers.js/${$}; is_ci/${I};`),p(E,["http:","https:"],["huggingface.co","hf.co"])){const B=(wo==null?void 0:wo.HF_TOKEN)??(wo==null?void 0:wo.HF_ACCESS_TOKEN);B&&z.set("Authorization",`Bearer ${B}`)}return fetch(E,{headers:z})}else return fetch(E)}const h={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function _(E,P,I){if(!I)return null;const $=h[E]??`Error (${E}) occurred while trying to load file`;throw Error(`${$}: "${P}".`)}class v{constructor(P){this.path=P}async match(P){let I=s.join(this.path,P),$=new d(I);if($.exists)return $}async put(P,I,$=void 0){let z=s.join(this.path,P);try{const D=I.headers.get("Content-Length"),B=parseInt(D??"0");let U=0;await n.promises.mkdir(s.dirname(z),{recursive:!0});const q=n.createWriteStream(z),X=I.body.getReader();for(;;){const{done:Z,value:K}=await X.read();if(Z)break;await new Promise((oe,ae)=>{q.write(K,G=>{if(G){ae(G);return}oe()})}),U+=K.length;const ee=B?U/B*100:0;$==null||$({progress:ee,loaded:U,total:B})}q.close()}catch(D){try{await n.promises.unlink(z)}catch{}throw D}}}async function g(E,...P){for(let I of P)try{let $=await E.match(I);if($)return $}catch{continue}}async function x(E,P,I=!0,$={},z=!1){if(!a.env.allowLocalModels){if($.local_files_only)throw Error("Invalid configuration detected: local models are disabled (`env.allowLocalModels=false`) but you have requested to only use local models (`local_files_only=true`).");if(!a.env.allowRemoteModels)throw Error("Invalid configuration detected: both local and remote models are disabled. Fix by setting `env.allowLocalModels` or `env.allowRemoteModels` to `true`.")}(0,o.dispatchCallback)($.progress_callback,{status:"initiate",name:E,file:P});let D;if(!D&&a.env.useCustomCache){if(!a.env.customCache)throw Error("`env.useCustomCache=true`, but `env.customCache` is not defined.");if(!a.env.customCache.match||!a.env.customCache.put)throw new Error("`env.customCache` must be an object which implements the `match` and `put` functions of the Web Cache API. For more information, see https://developer.mozilla.org/en-US/docs/Web/API/Cache");D=a.env.customCache}if(!D&&a.env.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{D=await caches.open("transformers-cache")}catch(ce){console.warn("An error occurred while opening the browser cache:",ce)}}if(!D&&a.env.useFSCache){if(!a.apis.IS_FS_AVAILABLE)throw Error("File System Cache is not available in this environment.");D=new v($.cache_dir??a.env.cacheDir)}const B=$.revision??"main",U=C(E,P),q=m(E),X=q?C(a.env.localModelPath,U):U,Z=C(a.env.remoteHost,a.env.remotePathTemplate.replaceAll("{model}",E).replaceAll("{revision}",encodeURIComponent(B)),P);let K;const ee=D instanceof v?B==="main"?U:C(E,B,P):Z;let oe=!1,ae;D&&(ae=await g(D,X,ee));const G=ae!==void 0;if(ae===void 0){if(a.env.allowLocalModels)if(p(U,["http:","https:"])){if($.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${U}.`);if(!a.env.allowRemoteModels)throw new Error(`\`env.allowRemoteModels=false\`, but attempted to load a remote file from: ${U}.`)}else try{ae=await f(X),K=X}catch(ne){console.warn(`Unable to load from local path "${X}": "${ne}"`)}if(ae===void 0||ae.status===404){if($.local_files_only||!a.env.allowRemoteModels){if(I)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${X}".`);return null}if(!q)throw Error(`Local file missing at "${X}" and download aborted due to invalid model ID "${E}".`);if(ae=await f(Z),ae.status!==200)return _(ae.status,Z,I);K=ee}oe=D&&typeof Response<"u"&&ae instanceof Response&&ae.status===200}(0,o.dispatchCallback)($.progress_callback,{status:"download",name:E,file:P});let R;if(!(a.apis.IS_NODE_ENV&&z)){let ce;$.progress_callback?G&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(ce=new Uint8Array(await ae.arrayBuffer()),(0,o.dispatchCallback)($.progress_callback,{status:"progress",name:E,file:P,progress:100,loaded:ce.length,total:ce.length})):ce=await b(ae,ne=>{(0,o.dispatchCallback)($.progress_callback,{status:"progress",name:E,file:P,...ne})}):ce=new Uint8Array(await ae.arrayBuffer()),R=ce}if(oe&&K&&await D.match(K)===void 0)if(R)await D.put(K,new Response(R,{headers:ae.headers})).catch(ce=>{console.warn(`Unable to add response to browser cache: ${ce}.`)});else{const ce=$.progress_callback?ne=>(0,o.dispatchCallback)($.progress_callback,{status:"progress",name:E,file:P,...ne}):void 0;await D.put(K,ae,ce)}if((0,o.dispatchCallback)($.progress_callback,{status:"done",name:E,file:P}),R){if(!a.apis.IS_NODE_ENV&&z)throw new Error("Cannot return path in a browser environment.");return R}if(ae instanceof d)return ae.filePath;const Q=await(D==null?void 0:D.match(K));if(Q instanceof d)return Q.filePath;if(Q instanceof Response)return new Uint8Array(await Q.arrayBuffer());if(typeof Q=="string")return Q;throw new Error("Unable to get model file path or buffer.")}async function y(E,P,I=!0,$={}){const z=await x(E,P,I,$,!1);return z===null?null:new TextDecoder("utf-8").decode(z)}async function w(E,P,I=!0,$={}){const z=await y(E,P,I,$);return z===null?{}:JSON.parse(z)}async function b(E,P){const I=E.headers.get("Content-Length");I===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let $=parseInt(I??"0"),z=new Uint8Array($),D=0;const B=E.body.getReader();async function U(){const{done:q,value:X}=await B.read();if(q)return;const Z=D+X.length;if(Z>$){$=Z;const ee=new Uint8Array($);ee.set(z),z=ee}z.set(X,D),D=Z;const K=D/$*100;return P({progress:K,loaded:D,total:$}),U()}return await U(),z}function C(...E){return E=E.map((P,I)=>(I&&(P=P.replace(new RegExp("^/"),"")),I!==E.length-1&&(P=P.replace(new RegExp("/$"),"")),P)),E.join("/")}},"./src/utils/image.js":(e,t,r)=>{r.r(t),r.d(t,{RawImage:()=>h,load_image:()=>_});var n=r("./src/utils/core.js"),s=r("./src/utils/hub.js"),a=r("./src/env.js"),o=r("./src/utils/tensor.js"),i=r("?2b25");let l,d,p;const u=a.apis.IS_BROWSER_ENV||a.apis.IS_WEBWORKER_ENV;if(u)l=(v,g)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(v,g)},p=self.createImageBitmap,d=self.ImageData;else if(i)p=async v=>{const x=(await v.metadata()).channels,{data:y,info:w}=await v.rotate().raw().toBuffer({resolveWithObject:!0}),b=new h(new Uint8ClampedArray(y),w.width,w.height,w.channels);return x!==void 0&&x!==w.channels&&b.convert(x),b};else throw new Error("Unable to load image processing library.");const m={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},f=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class h{constructor(g,x,y,w){this.data=g,this.width=x,this.height=y,this.channels=w}get size(){return[this.width,this.height]}static async read(g){if(g instanceof h)return g;if(typeof g=="string"||g instanceof URL)return await this.fromURL(g);if(g instanceof Blob)return await this.fromBlob(g);if(typeof HTMLCanvasElement<"u"&&g instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&g instanceof OffscreenCanvas)return this.fromCanvas(g);throw new Error(`Unsupported input type: ${typeof g}`)}static fromCanvas(g){if(!u)throw new Error("fromCanvas() is only supported in browser environments.");const y=g.getContext("2d").getImageData(0,0,g.width,g.height).data;return new h(y,g.width,g.height,4)}static async fromURL(g){const x=await(0,s.getFile)(g);if(x.status!==200)throw new Error(`Unable to read image from "${g}" (${x.status} ${x.statusText})`);const y=await x.blob();return this.fromBlob(y)}static async fromBlob(g){if(u){const x=await p(g),y=l(x.width,x.height).getContext("2d");return y.drawImage(x,0,0),new this(y.getImageData(0,0,x.width,x.height).data,x.width,x.height,4)}else{const x=i(await g.arrayBuffer());return await p(x)}}static fromTensor(g,x="CHW"){if(g.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${g.dims.length} dimensions.`);if(x==="CHW")g=g.transpose(1,2,0);else if(x!=="HWC")throw new Error(`Unsupported channel format: ${x}`);if(!(g.data instanceof Uint8ClampedArray||g.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${g.type}`);switch(g.dims[2]){case 1:case 2:case 3:case 4:return new h(g.data,g.dims[1],g.dims[0],g.dims[2]);default:throw new Error(`Unsupported number of channels: ${g.dims[2]}`)}}grayscale(){if(this.channels===1)return this;const g=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let x=0,y=0;x<this.data.length;x+=this.channels){const w=this.data[x],b=this.data[x+1],C=this.data[x+2];g[y++]=Math.round(.2989*w+.587*b+.114*C)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,1)}rgb(){if(this.channels===3)return this;const g=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let x=0,y=0;x<this.data.length;++x)g[y++]=this.data[x],g[y++]=this.data[x],g[y++]=this.data[x];break;case 4:for(let x=0,y=0;x<this.data.length;x+=4)g[y++]=this.data[x],g[y++]=this.data[x+1],g[y++]=this.data[x+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,3)}rgba(){if(this.channels===4)return this;const g=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let x=0,y=0;x<this.data.length;++x)g[y++]=this.data[x],g[y++]=this.data[x],g[y++]=this.data[x],g[y++]=255;break;case 3:for(let x=0,y=0;x<this.data.length;x+=3)g[y++]=this.data[x],g[y++]=this.data[x+1],g[y++]=this.data[x+2],g[y++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(g,this.width,this.height,4)}putAlpha(g){if(g.width!==this.width||g.height!==this.height)throw new Error(`Expected mask size to be ${this.width}x${this.height}, but got ${g.width}x${g.height}`);if(g.channels!==1)throw new Error(`Expected mask to have 1 channel, but got ${g.channels}`);const x=this.data,y=g.data,w=this.width*this.height;if(this.channels===3){const b=new Uint8ClampedArray(w*4);for(let C=0,E=0,P=0;C<w;++C)b[P++]=x[E++],b[P++]=x[E++],b[P++]=x[E++],b[P++]=y[C];return this._update(b,this.width,this.height,4)}else if(this.channels===4){for(let b=0;b<w;++b)x[4*b+3]=y[b];return this}throw new Error(`Expected image to have 3 or 4 channels, but got ${this.channels}`)}async resize(g,x,{resample:y=2}={}){if(this.width===g&&this.height===x)return this;let w=m[y]??y;const b=(0,n.isNullishDimension)(g),C=(0,n.isNullishDimension)(x);if(b&&C)return this;if(b?g=x/this.height*this.width:C&&(x=g/this.width*this.height),u){const E=this.channels,P=this.toCanvas(),I=l(g,x).getContext("2d");return I.drawImage(P,0,0,g,x),new h(I.getImageData(0,0,g,x).data,g,x,4).convert(E)}else{let E=this.toSharp();switch(w){case"box":case"hamming":(w==="box"||w==="hamming")&&(console.warn(`Resampling method ${w} is not yet supported. Using bilinear instead.`),w="bilinear");case"nearest":case"bilinear":case"bicubic":E=E.affine([g/this.width,0,0,x/this.height],{interpolator:w});break;case"lanczos":E=E.resize({width:g,height:x,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${w} is not supported.`)}return await p(E)}}async pad([g,x,y,w]){if(g=Math.max(g,0),x=Math.max(x,0),y=Math.max(y,0),w=Math.max(w,0),g===0&&x===0&&y===0&&w===0)return this;if(u){const b=this.channels,C=this.toCanvas(),E=this.width+g+x,P=this.height+y+w,I=l(E,P).getContext("2d");return I.drawImage(C,0,0,this.width,this.height,g,y,this.width,this.height),new h(I.getImageData(0,0,E,P).data,E,P,4).convert(b)}else{const b=this.toSharp().extend({left:g,right:x,top:y,bottom:w});return await p(b)}}async crop([g,x,y,w]){if(g=Math.max(g,0),x=Math.max(x,0),y=Math.min(y,this.width-1),w=Math.min(w,this.height-1),g===0&&x===0&&y===this.width-1&&w===this.height-1)return this;const b=y-g+1,C=w-x+1;if(u){const E=this.channels,P=this.toCanvas(),I=l(b,C).getContext("2d");return I.drawImage(P,g,x,b,C,0,0,b,C),new h(I.getImageData(0,0,b,C).data,b,C,4).convert(E)}else{const E=this.toSharp().extract({left:g,top:x,width:b,height:C});return await p(E)}}async center_crop(g,x){if(this.width===g&&this.height===x)return this;const y=(this.width-g)/2,w=(this.height-x)/2;if(u){const b=this.channels,C=this.toCanvas(),E=l(g,x).getContext("2d");let P=0,I=0,$=0,z=0;return y>=0?P=y:$=-y,w>=0?I=w:z=-w,E.drawImage(C,P,I,g,x,$,z,g,x),new h(E.getImageData(0,0,g,x).data,g,x,4).convert(b)}else{let b=this.toSharp();if(y>=0&&w>=0)b=b.extract({left:Math.floor(y),top:Math.floor(w),width:g,height:x});else if(y<=0&&w<=0){const C=Math.floor(-w),E=Math.floor(-y);b=b.extend({top:C,left:E,right:g-this.width-E,bottom:x-this.height-C})}else{let C=[0,0],E=0;w<0?(C[0]=Math.floor(-w),C[1]=x-this.height-C[0]):E=Math.floor(w);let P=[0,0],I=0;y<0?(P[0]=Math.floor(-y),P[1]=g-this.width-P[0]):I=Math.floor(y),b=b.extend({top:C[0],bottom:C[1],left:P[0],right:P[1]}).extract({left:I,top:E,width:g,height:x})}return await p(b)}}async toBlob(g="image/png",x=1){if(!u)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:g,quality:x})}toTensor(g="CHW"){let x=new o.Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(g!=="HWC")if(g==="CHW")x=x.permute(2,0,1);else throw new Error(`Unsupported channel format: ${g}`);return x}toCanvas(){if(!u)throw new Error("toCanvas() is only supported in browser environments.");const g=this.clone().rgba(),x=l(g.width,g.height),y=new d(g.data,g.width,g.height);return x.getContext("2d").putImageData(y,0,0),x}split(){const{data:g,width:x,height:y,channels:w}=this,b=g.constructor,C=g.length/w,E=Array.from({length:w},()=>new b(C));for(let P=0;P<C;++P){const I=w*P;for(let $=0;$<w;++$)E[$][P]=g[I+$]}return E.map(P=>new h(P,x,y,1))}_update(g,x,y,w=null){return this.data=g,this.width=x,this.height=y,w!==null&&(this.channels=w),this}clone(){return new h(this.data.slice(),this.width,this.height,this.channels)}convert(g){if(this.channels===g)return this;switch(g){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(g){if(u){if(a.apis.IS_WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const x=g.split(".").pop().toLowerCase(),y=f.get(x)??"image/png",w=await this.toBlob(y);(0,n.saveBlob)(g,w)}else{if(a.apis.IS_FS_AVAILABLE)return await this.toSharp().toFile(g);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(u)throw new Error("toSharp() is only supported in server-side environments.");return i(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}const _=h.read.bind(h)},"./src/utils/maths.js":(e,t,r)=>{r.r(t),r.d(t,{FFT:()=>_,bankers_round:()=>x,cos_sim:()=>l,dot:()=>i,dynamic_time_warping:()=>y,interpolate_data:()=>n,log_softmax:()=>o,magnitude:()=>d,max:()=>u,medianFilter:()=>v,min:()=>p,permute_data:()=>s,round:()=>g,softmax:()=>a});function n(w,[b,C,E],[P,I],$="bilinear",z=!1){const D=I/E,B=P/C,U=new w.constructor(P*I*b),q=C*E,X=P*I;for(let Z=0;Z<P;++Z)for(let K=0;K<I;++K){const ee=Z*I+K,oe=(K+.5)/D-.5,ae=(Z+.5)/B-.5;let G=Math.floor(oe),R=Math.floor(ae);const Q=Math.min(G+1,E-1),ce=Math.min(R+1,C-1);G=Math.max(G,0),R=Math.max(R,0);const ne=oe-G,me=ae-R,we=(1-ne)*(1-me),Ne=ne*(1-me),Me=(1-ne)*me,te=ne*me,F=R*E,ue=ce*E,xe=F+G,be=F+Q,Ee=ue+G,ye=ue+Q;for(let Ae=0;Ae<b;++Ae){const Ce=Ae*q;U[Ae*X+ee]=we*w[Ce+xe]+Ne*w[Ce+be]+Me*w[Ce+Ee]+te*w[Ce+ye]}}return U}function s(w,b,C){const E=new Array(C.length),P=new Array(C.length);for(let z=C.length-1,D=1;z>=0;--z)P[z]=D,E[z]=b[C[z]],D*=E[z];const I=C.map((z,D)=>P[C.indexOf(D)]),$=new w.constructor(w.length);for(let z=0;z<w.length;++z){let D=0;for(let B=b.length-1,U=z;B>=0;--B)D+=U%b[B]*I[B],U=Math.floor(U/b[B]);$[D]=w[z]}return[$,E]}function a(w){const b=u(w)[0],C=w.map(I=>Math.exp(I-b)),E=C.reduce((I,$)=>I+$,0);return C.map(I=>I/E)}function o(w){const b=u(w)[0];let C=0;for(let I=0;I<w.length;++I)C+=Math.exp(w[I]-b);const E=Math.log(C);return w.map(I=>I-b-E)}function i(w,b){let C=0;for(let E=0;E<w.length;++E)C+=w[E]*b[E];return C}function l(w,b){const C=i(w,b),E=d(w),P=d(b);return C/(E*P)}function d(w){return Math.sqrt(w.reduce((b,C)=>b+C*C,0))}function p(w){if(w.length===0)throw Error("Array must not be empty");let b=w[0],C=0;for(let E=1;E<w.length;++E)w[E]<b&&(b=w[E],C=E);return[b,C]}function u(w){if(w.length===0)throw Error("Array must not be empty");let b=w[0],C=0;for(let E=1;E<w.length;++E)w[E]>b&&(b=w[E],C=E);return[b,C]}function m(w){return w>0&&(w&w-1)===0}class f{constructor(b){if(this.size=b|0,this.size<=1||!m(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=b<<1,this.table=new Float64Array(this.size*2);for(let E=0;E<this.table.length;E+=2){const P=Math.PI*E/this.size;this.table[E]=Math.cos(P),this.table[E+1]=-Math.sin(P)}let C=0;for(let E=1;this.size>E;E<<=1)++C;this._width=C%2===0?C-1:C,this._bitrev=new Int32Array(1<<this._width);for(let E=0;E<this._bitrev.length;++E){this._bitrev[E]=0;for(let P=0;P<this._width;P+=2){const I=this._width-P-2;this._bitrev[E]|=(E>>>P&3)<<I}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(b,C){const E=C||new Array(b.length>>>1);for(let P=0;P<b.length;P+=2)E[P>>>1]=b[P];return E}toComplexArray(b,C){const E=C||this.createComplexArray();for(let P=0;P<E.length;P+=2)E[P]=b[P>>>1],E[P+1]=0;return E}transform(b,C){if(b===C)throw new Error("Input and output buffers must be different");this._transform4(b,C,1)}realTransform(b,C){if(b===C)throw new Error("Input and output buffers must be different");this._realTransform4(b,C,1)}inverseTransform(b,C){if(b===C)throw new Error("Input and output buffers must be different");this._transform4(b,C,-1);for(let E=0;E<b.length;++E)b[E]/=this.size}_transform4(b,C,E){const P=this._csize;let $=1<<this._width,z=P/$<<1,D,B;const U=this._bitrev;if(z===4)for(D=0,B=0;D<P;D+=z,++B){const X=U[B];this._singleTransform2(C,b,D,X,$)}else for(D=0,B=0;D<P;D+=z,++B){const X=U[B];this._singleTransform4(C,b,D,X,$,E)}const q=this.table;for($>>=2;$>=2;$>>=2){z=P/$<<1;const X=z>>>2;for(D=0;D<P;D+=z){const Z=D+X-1;for(let K=D,ee=0;K<Z;K+=2,ee+=$){const oe=K,ae=oe+X,G=ae+X,R=G+X,Q=b[oe],ce=b[oe+1],ne=b[ae],me=b[ae+1],we=b[G],Ne=b[G+1],Me=b[R],te=b[R+1],F=q[ee],ue=E*q[ee+1],xe=ne*F-me*ue,be=ne*ue+me*F,Ee=q[2*ee],ye=E*q[2*ee+1],Ae=we*Ee-Ne*ye,Ce=we*ye+Ne*Ee,De=q[3*ee],Be=E*q[3*ee+1],Ze=Me*De-te*Be,Se=Me*Be+te*De,it=Q+Ae,et=ce+Ce,lt=Q-Ae,st=ce-Ce,Re=xe+Ze,Qe=be+Se,Pt=E*(xe-Ze),Mt=E*(be-Se);b[oe]=it+Re,b[oe+1]=et+Qe,b[ae]=lt+Mt,b[ae+1]=st-Pt,b[G]=it-Re,b[G+1]=et-Qe,b[R]=lt-Mt,b[R+1]=st+Pt}}}}_singleTransform2(b,C,E,P,I){const $=b[P],z=b[P+1],D=b[P+I],B=b[P+I+1];C[E]=$+D,C[E+1]=z+B,C[E+2]=$-D,C[E+3]=z-B}_singleTransform4(b,C,E,P,I,$){const z=I*2,D=I*3,B=b[P],U=b[P+1],q=b[P+I],X=b[P+I+1],Z=b[P+z],K=b[P+z+1],ee=b[P+D],oe=b[P+D+1],ae=B+Z,G=U+K,R=B-Z,Q=U-K,ce=q+ee,ne=X+oe,me=$*(q-ee),we=$*(X-oe);C[E]=ae+ce,C[E+1]=G+ne,C[E+2]=R+we,C[E+3]=Q-me,C[E+4]=ae-ce,C[E+5]=G-ne,C[E+6]=R-we,C[E+7]=Q+me}_realTransform4(b,C,E){const P=this._csize;let $=1<<this._width,z=P/$<<1,D,B;const U=this._bitrev;if(z===4)for(D=0,B=0;D<P;D+=z,++B){const Z=U[B];this._singleRealTransform2(C,b,D,Z>>>1,$>>>1)}else for(D=0,B=0;D<P;D+=z,++B){const Z=U[B];this._singleRealTransform4(C,b,D,Z>>>1,$>>>1,E)}const q=this.table;for($>>=2;$>=2;$>>=2){z=P/$<<1;const Z=z>>>1,K=Z>>>1,ee=K>>>1;for(D=0;D<P;D+=z)for(let oe=0,ae=0;oe<=ee;oe+=2,ae+=$){const G=D+oe,R=G+K,Q=R+K,ce=Q+K,ne=b[G],me=b[G+1],we=b[R],Ne=b[R+1],Me=b[Q],te=b[Q+1],F=b[ce],ue=b[ce+1],xe=ne,be=me,Ee=q[ae],ye=E*q[ae+1],Ae=we*Ee-Ne*ye,Ce=we*ye+Ne*Ee,De=q[2*ae],Be=E*q[2*ae+1],Ze=Me*De-te*Be,Se=Me*Be+te*De,it=q[3*ae],et=E*q[3*ae+1],lt=F*it-ue*et,st=F*et+ue*it,Re=xe+Ze,Qe=be+Se,Pt=xe-Ze,Mt=be-Se,Wt=Ae+lt,vt=Ce+st,wr=E*(Ae-lt),Yr=E*(Ce-st);if(b[G]=Re+Wt,b[G+1]=Qe+vt,b[R]=Pt+Yr,b[R+1]=Mt-wr,oe===0){b[Q]=Re-Wt,b[Q+1]=Qe-vt;continue}if(oe===ee)continue;const Br=D+K-oe,Pn=D+Z-oe;b[Br]=Pt-E*Yr,b[Br+1]=-Mt-E*wr,b[Pn]=Re-E*Wt,b[Pn+1]=-Qe+E*vt}}const X=P>>>1;for(let Z=2;Z<X;Z+=2)b[P-Z]=b[Z],b[P-Z+1]=-b[Z+1]}_singleRealTransform2(b,C,E,P,I){const $=b[P],z=b[P+I];C[E]=$+z,C[E+1]=0,C[E+2]=$-z,C[E+3]=0}_singleRealTransform4(b,C,E,P,I,$){const z=I*2,D=I*3,B=b[P],U=b[P+I],q=b[P+z],X=b[P+D],Z=B+q,K=B-q,ee=U+X,oe=$*(U-X);C[E]=Z+ee,C[E+1]=0,C[E+2]=K,C[E+3]=-oe,C[E+4]=Z-ee,C[E+5]=0,C[E+6]=K,C[E+7]=oe}}class h{constructor(b){const C=2*(b-1),E=2*(2*b-1),P=2**Math.ceil(Math.log2(E));this.bufferSize=P,this._a=C;const I=new Float64Array(E),$=new Float64Array(P);this._chirpBuffer=new Float64Array(P),this._buffer1=new Float64Array(P),this._buffer2=new Float64Array(P),this._outBuffer1=new Float64Array(P),this._outBuffer2=new Float64Array(P);const z=-2*Math.PI/b,D=Math.cos(z),B=Math.sin(z);for(let U=0;U<E>>1;++U){const q=(U+1-b)**2/2,X=Math.sqrt(D**2+B**2)**q,Z=q*Math.atan2(B,D),K=2*U;I[K]=X*Math.cos(Z),I[K+1]=X*Math.sin(Z),$[K]=I[K],$[K+1]=-I[K+1]}this._slicedChirpBuffer=I.subarray(C,E),this._f=new f(P>>1),this._f.transform(this._chirpBuffer,$)}_transform(b,C,E){const P=this._buffer1,I=this._buffer2,$=this._outBuffer1,z=this._outBuffer2,D=this._chirpBuffer,B=this._slicedChirpBuffer,U=this._a;if(E)for(let q=0;q<B.length;q+=2){const X=q+1,Z=q>>1,K=C[Z];P[q]=K*B[q],P[X]=K*B[X]}else for(let q=0;q<B.length;q+=2){const X=q+1;P[q]=C[q]*B[q]-C[X]*B[X],P[X]=C[q]*B[X]+C[X]*B[q]}this._f.transform($,P);for(let q=0;q<D.length;q+=2){const X=q+1;I[q]=$[q]*D[q]-$[X]*D[X],I[X]=$[q]*D[X]+$[X]*D[q]}this._f.inverseTransform(z,I);for(let q=0;q<z.length;q+=2){const X=z[q+U],Z=z[q+U+1],K=B[q],ee=B[q+1];b[q]=X*K-Z*ee,b[q+1]=X*ee+Z*K}}transform(b,C){this._transform(b,C,!1)}realTransform(b,C){this._transform(b,C,!0)}}class _{constructor(b){this.fft_length=b,this.isPowerOfTwo=m(b),this.isPowerOfTwo?(this.fft=new f(b),this.outputBufferSize=2*b):(this.fft=new h(b),this.outputBufferSize=this.fft.bufferSize)}realTransform(b,C){this.fft.realTransform(b,C)}transform(b,C){this.fft.transform(b,C)}}function v(w,b){if(b%2===0||b<=0)throw new Error("Window size must be a positive odd number");const C=new w.constructor(w.length),E=new w.constructor(b),P=Math.floor(b/2);for(let I=0;I<w.length;++I){let $=0;for(let z=-P;z<=P;++z){let D=I+z;D<0?D=Math.abs(D):D>=w.length&&(D=2*(w.length-1)-D),E[$++]=w[D]}E.sort(),C[I]=E[P]}return C}function g(w,b){const C=Math.pow(10,b);return Math.round(w*C)/C}function x(w){const b=Math.round(w);return Math.abs(w)%1===.5?b%2===0?b:b-1:b}function y(w){const b=w.length,C=w[0].length,E=[b+1,C+1],P=Array.from({length:E[0]},()=>Array(E[1]).fill(1/0));P[0][0]=0;const I=Array.from({length:E[0]},()=>Array(E[1]).fill(-1));for(let U=1;U<E[1];++U)for(let q=1;q<E[0];++q){const X=P[q-1][U-1],Z=P[q-1][U],K=P[q][U-1];let ee,oe;X<Z&&X<K?(ee=X,oe=0):Z<X&&Z<K?(ee=Z,oe=1):(ee=K,oe=2),P[q][U]=w[q-1][U-1]+ee,I[q][U]=oe}for(let U=0;U<E[1];++U)I[0][U]=2;for(let U=0;U<E[0];++U)I[U][0]=1;let $=b,z=C,D=[],B=[];for(;$>0||z>0;)switch(D.push($-1),B.push(z-1),I[$][z]){case 0:--$,--z;break;case 1:--$;break;case 2:--z;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${$}, ${z}]. Please file a bug report.`)}return D.reverse(),B.reverse(),[D,B]}},"./src/utils/tensor.js":(e,t,r)=>{r.r(t),r.d(t,{DataTypeMap:()=>o,Tensor:()=>i,cat:()=>C,full:()=>B,full_like:()=>U,interpolate:()=>p,interpolate_4d:()=>u,layer_norm:()=>x,matmul:()=>m,mean:()=>$,mean_pooling:()=>g,ones:()=>q,ones_like:()=>X,permute:()=>d,quantize_embeddings:()=>ae,rand:()=>ee,randn:()=>oe,rfft:()=>f,slice:()=>v,stack:()=>E,std_mean:()=>I,topk:()=>h,zeros:()=>Z,zeros_like:()=>K});var n=r("./src/utils/maths.js"),s=r("./src/backends/onnx.js"),a=r("./src/ops/registry.js");const o=Object.freeze({float32:Float32Array,float16:typeof Float16Array<"u"?Float16Array:Uint16Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array,uint4:Uint8Array,int4:Int8Array});class i{constructor(...R){le(this,"ort_tensor");return(0,s.isONNXTensor)(R[0])?this.ort_tensor=R[0]:this.ort_tensor=new s.Tensor(R[0],R[1],R[2]),new Proxy(this,{get:(Q,ce)=>{if(typeof ce=="string"){let ne=Number(ce);if(Number.isInteger(ne))return Q._getitem(ne)}return Q[ce]},set:(Q,ce,ne)=>Q[ce]=ne})}get dims(){return this.ort_tensor.dims}set dims(R){this.ort_tensor.dims=R}get type(){return this.ort_tensor.type}get data(){return this.ort_tensor.data}get size(){return this.ort_tensor.size}get location(){return this.ort_tensor.location}dispose(){this.ort_tensor.dispose()}*[Symbol.iterator](){const[R,...Q]=this.dims;if(Q.length>0){const ce=Q.reduce((ne,me)=>ne*me);for(let ne=0;ne<R;++ne)yield this._subarray(ne,ce,Q)}else yield*this.data}_getitem(R){const[Q,...ce]=this.dims;if(R=b(R,Q),ce.length>0){const ne=ce.reduce((me,we)=>me*we);return this._subarray(R,ne,ce)}else return new i(this.type,[this.data[R]],ce)}indexOf(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)if(Q[ce]==R)return ce;return-1}_subarray(R,Q,ce){const ne=R*Q,me=(R+1)*Q,we="subarray"in this.data?this.data.subarray(ne,me):this.data.slice(ne,me);return new i(this.type,we,ce)}item(){const R=this.data;if(R.length!==1)throw new Error(`a Tensor with ${R.length} elements cannot be converted to Scalar`);return R[0]}tolist(){return l(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){const R=this.data;for(let Q=0;Q<R.length;++Q)R[Q]=1/(1+Math.exp(-R[Q]));return this}map(R){return this.clone().map_(R)}map_(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)Q[ce]=R(Q[ce],ce,Q);return this}mul(R){return this.clone().mul_(R)}mul_(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)Q[ce]*=R;return this}div(R){return this.clone().div_(R)}div_(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)Q[ce]/=R;return this}add(R){return this.clone().add_(R)}add_(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)Q[ce]+=R;return this}sub(R){return this.clone().sub_(R)}sub_(R){const Q=this.data;for(let ce=0;ce<Q.length;++ce)Q[ce]-=R;return this}clone(){return new i(this.type,this.data.slice(),this.dims.slice())}slice(...R){const Q=[],ce=[];for(let F=0;F<this.dims.length;++F){let ue=R[F];if(ue==null)ce.push([0,this.dims[F]]),Q.push(this.dims[F]);else if(typeof ue=="number")ue=b(ue,this.dims[F],F),ce.push([ue,ue+1]);else if(Array.isArray(ue)&&ue.length===2){let[xe,be]=ue;if(xe=xe===null?0:b(xe,this.dims[F],F,!1),be=be===null?this.dims[F]:b(be,this.dims[F],F,!1),xe>be)throw new Error(`Invalid slice: ${ue}`);const Ee=[Math.max(xe,0),Math.min(be,this.dims[F])];ce.push(Ee),Q.push(Ee[1]-Ee[0])}else throw new Error(`Invalid slice: ${ue}`)}const ne=ce.map(([F,ue])=>ue-F),me=ne.reduce((F,ue)=>F*ue),we=this.data,Ne=new we.constructor(me),Me=this.stride();let te=!0;for(let F=1;F<ne.length;++F)if(ce[F][0]!==0||ce[F][1]!==this.dims[F]){te=!1;break}if(te){const F=ce[0][0]*Me[0],ue=ce[0][1]*Me[0];if(ArrayBuffer.isView(we))Ne.set(we.subarray(F,ue));else if(Array.isArray(we)){const xe=we.slice(F,ue);for(let be=0;be<xe.length;++be)Ne[be]=xe[be]}else throw new Error("Unsupported data type for slicing")}else for(let F=0;F<me;++F){let ue=0;for(let xe=ne.length-1,be=F;xe>=0;--xe){const Ee=ne[xe];ue+=(be%Ee+ce[xe][0])*Me[xe],be=Math.floor(be/Ee)}Ne[F]=we[ue]}return new i(this.type,Ne,Q)}permute(...R){return d(this,R)}transpose(...R){return this.permute(...R)}sum(R=null,Q=!1){return this.norm(1,R,Q)}norm(R="fro",Q=null,ce=!1){if(R==="fro")R=2;else if(typeof R=="string")throw Error(`Unsupported norm: ${R}`);const ne=this.data,me=(te,F)=>te+F**R;if(Q===null){const te=ne.reduce(me,0)**(1/R);return new i(this.type,[te],[])}const[we,Ne,Me]=P(me,this,Q,ce);if(R!==1)for(let te=0;te<Ne.length;++te)Ne[te]=Ne[te]**(1/R);return new i(we,Ne,Me)}normalize_(R=2,Q=1){Q=b(Q,this.dims.length);const ce=this.norm(R,Q,!0),ne=this.data,me=ce.data;for(let we=0;we<ne.length;++we){let Ne=0;for(let Me=this.dims.length-1,te=we,F=1;Me>=0;--Me){const ue=this.dims[Me];if(Me!==Q){const xe=te%ue;Ne+=xe*F,F*=this.dims[Me]}te=Math.floor(te/ue)}ne[we]/=me[Ne]}return this}normalize(R=2,Q=1){return this.clone().normalize_(R,Q)}stride(){return z(this.dims)}squeeze(R=null){return new i(this.type,this.data,y(this.dims,R))}squeeze_(R=null){return this.dims=y(this.dims,R),this}unsqueeze(R=null){return new i(this.type,this.data,w(this.dims,R))}unsqueeze_(R=null){return this.dims=w(this.dims,R),this}flatten_(R=0,Q=-1){Q=(Q+this.dims.length)%this.dims.length;let ce=this.dims.slice(0,R),ne=this.dims.slice(R,Q+1),me=this.dims.slice(Q+1);return this.dims=[...ce,ne.reduce((we,Ne)=>we*Ne,1),...me],this}flatten(R=0,Q=-1){return this.clone().flatten_(R,Q)}view(...R){let Q=-1;for(let ne=0;ne<R.length;++ne)if(R[ne]===-1){if(Q!==-1)throw new Error("Only one dimension can be inferred");Q=ne}const ce=this.data;if(Q!==-1){const ne=R.reduce((me,we,Ne)=>Ne!==Q?me*we:me,1);R[Q]=ce.length/ne}return new i(this.type,ce,R)}neg_(){const R=this.data;for(let Q=0;Q<R.length;++Q)R[Q]=-R[Q];return this}neg(){return this.clone().neg_()}gt(R){const Q=new Uint8Array(this.data.length),ce=this.data;for(let ne=0;ne<ce.length;++ne)Q[ne]=ce[ne]>R?1:0;return new i("bool",Q,this.dims)}lt(R){const Q=new Uint8Array(this.data.length),ce=this.data;for(let ne=0;ne<ce.length;++ne)Q[ne]=ce[ne]<R?1:0;return new i("bool",Q,this.dims)}clamp_(R,Q){const ce=this.data;for(let ne=0;ne<ce.length;++ne)ce[ne]=Math.min(Math.max(ce[ne],R),Q);return this}clamp(R,Q){return this.clone().clamp_(R,Q)}round_(){const R=this.data;for(let Q=0;Q<R.length;++Q)R[Q]=Math.round(R[Q]);return this}round(){return this.clone().round_()}mean(R=null,Q=!1){return $(this,R,Q)}min(R=null,Q=!1){if(R===null){const we=(0,n.min)(this.data)[0];return new i(this.type,[we],[])}const[ce,ne,me]=P((we,Ne)=>Math.min(we,Ne),this,R,Q,1/0);return new i(ce,ne,me)}max(R=null,Q=!1){if(R===null){const we=(0,n.max)(this.data)[0];return new i(this.type,[we],[])}const[ce,ne,me]=P((we,Ne)=>Math.max(we,Ne),this,R,Q,-1/0);return new i(ce,ne,me)}argmin(R=null,Q=!1){if(R!==null)throw new Error("`dim !== null` not yet implemented.");const ce=(0,n.min)(this.data)[1];return new i("int64",[BigInt(ce)],[])}argmax(R=null,Q=!1){if(R!==null)throw new Error("`dim !== null` not yet implemented.");const ce=(0,n.max)(this.data)[1];return new i("int64",[BigInt(ce)],[])}to(R){if(this.type===R)return this;if(!o.hasOwnProperty(R))throw new Error(`Unsupported type: ${R}`);let Q;const ce=["int64","uint64"].includes(this.type),ne=["int64","uint64"].includes(R);return ce&&!ne?Q=Number:!ce&&ne&&(["float16","float32","float64"].includes(this.type)?Q=me=>BigInt(Math.floor(me)):Q=BigInt),new i(R,o[R].from(this.data,Q),this.dims)}}function l(G,R){const Q=G.length,ce=R.reduce((me,we)=>me*we);if(Q!==ce)throw Error(`cannot reshape array of size ${Q} into shape (${R})`);let ne=G;for(let me=R.length-1;me>=0;me--)ne=ne.reduce((we,Ne)=>{let Me=we[we.length-1];return Me.length<R[me]?Me.push(Ne):we.push([Ne]),we},[[]]);return ne[0]}function d(G,R){const[Q,ce]=(0,n.permute_data)(G.data,G.dims,R);return new i(G.type,Q,ce)}function p(G,[R,Q],ce="bilinear",ne=!1){const me=G.dims.at(-3)??1,we=G.dims.at(-2),Ne=G.dims.at(-1);let Me=(0,n.interpolate_data)(G.data,[me,we,Ne],[R,Q],ce,ne);return new i(G.type,Me,[me,R,Q])}async function u(G,{size:R=null,mode:Q="bilinear"}={}){if(G.dims.length!==4)throw new Error("`interpolate_4d` currently only supports 4D input.");if(!R)throw new Error("`interpolate_4d` requires a `size` argument.");let ce;if(R.length===2)ce=[...G.dims.slice(0,2),...R];else if(R.length===3)ce=[G.dims[0],...R];else if(R.length===4)ce=R;else throw new Error("`size` must be of length 2, 3, or 4.");let ne;if(Q==="nearest")ne=await a.TensorOpRegistry.nearest_interpolate_4d;else if(Q==="bilinear")ne=await a.TensorOpRegistry.bilinear_interpolate_4d;else if(Q==="bicubic")ne=await a.TensorOpRegistry.bicubic_interpolate_4d;else throw new Error(`Unsupported mode: ${Q}`);const me=new i("int64",new BigInt64Array(ce.map(BigInt)),[ce.length]);return await ne({x:G,s:me})}async function m(G,R){return await(await a.TensorOpRegistry.matmul)({a:G,b:R})}async function f(G,R){return await(await a.TensorOpRegistry.rfft)({x:G,a:R})}async function h(G,R){const Q=await a.TensorOpRegistry.top_k;return R==null?R=G.dims.at(-1):R=Math.min(R,G.dims.at(-1)),await Q({x:G,k:new i("int64",[BigInt(R)],[1])})}const _=G=>new i("int64",G,[G.length]);async function v(G,R,Q,ce,ne){return await(await a.TensorOpRegistry.slice)({x:G,s:_(R),e:_(Q),a:_(ce),t:_(ne??new Array(ce.length).fill(1))})}function g(G,R){const Q=G.data,ce=R.data,ne=[G.dims[0],G.dims[2]],me=new Q.constructor(ne[0]*ne[1]),[we,Ne,Me]=G.dims;let te=0;for(let F=0;F<we;++F){const ue=F*Me*Ne;for(let xe=0;xe<Me;++xe){let be=0,Ee=0;const ye=F*Ne,Ae=ue+xe;for(let De=0;De<Ne;++De){const Be=Number(ce[ye+De]);Ee+=Be,be+=Q[Ae+De*Me]*Be}const Ce=be/Ee;me[te++]=Ce}}return new i(G.type,me,ne)}function x(G,R,{eps:Q=1e-5}={}){if(G.dims.length!==2)throw new Error("`layer_norm` currently only supports 2D input.");const[ce,ne]=G.dims;if(R.length!==1&&R[0]!==ne)throw new Error("`normalized_shape` must be a 1D array with shape `[input.dims[1]]`.");const[me,we]=I(G,1,0,!0),Ne=me.data,Me=we.data,te=G.data,F=new te.constructor(te.length);for(let ue=0;ue<ce;++ue){const xe=ue*ne;for(let be=0;be<ne;++be){const Ee=xe+be;F[Ee]=(te[Ee]-Me[ue])/(Ne[ue]+Q)}}return new i(G.type,F,G.dims)}function y(G,R){return G=G.slice(),R===null?G=G.filter(Q=>Q!==1):typeof R=="number"?G[R]===1&&G.splice(R,1):Array.isArray(R)&&(G=G.filter((Q,ce)=>Q!==1||!R.includes(ce))),G}function w(G,R){return R=b(R,G.length+1),G=G.slice(),G.splice(R,0,1),G}function b(G,R,Q=null,ce=!0){if(G<-R||G>=R){if(ce)throw new Error(`IndexError: index ${G} is out of bounds for dimension${Q===null?"":" "+Q} with size ${R}`);return G<-R?0:R}return G<0&&(G=(G%R+R)%R),G}function C(G,R=0){R=b(R,G[0].dims.length);const Q=G[0].dims.slice();Q[R]=G.reduce((we,Ne)=>we+Ne.dims[R],0);const ce=Q.reduce((we,Ne)=>we*Ne,1),ne=new G[0].data.constructor(ce),me=G[0].type;if(R===0){let we=0;for(const Ne of G){const Me=Ne.data;ne.set(Me,we),we+=Me.length}}else{let we=0;for(let Ne=0;Ne<G.length;++Ne){const{data:Me,dims:te}=G[Ne];for(let F=0;F<Me.length;++F){let ue=0;for(let xe=te.length-1,be=F,Ee=1;xe>=0;--xe){const ye=te[xe];let Ae=be%ye;xe===R&&(Ae+=we),ue+=Ae*Ee,Ee*=Q[xe],be=Math.floor(be/ye)}ne[ue]=Me[F]}we+=te[R]}}return new i(me,ne,Q)}function E(G,R=0){return C(G.map(Q=>Q.unsqueeze(R)),R)}function P(G,R,Q=null,ce=!1,ne=null){const me=R.data,we=R.dims;Q=b(Q,we.length);const Ne=we.slice();Ne[Q]=1;const Me=new me.constructor(me.length/we[Q]);ne!==null&&Me.fill(ne);for(let te=0;te<me.length;++te){let F=0;for(let ue=we.length-1,xe=te,be=1;ue>=0;--ue){const Ee=we[ue];if(ue!==Q){const ye=xe%Ee;F+=ye*be,be*=Ne[ue]}xe=Math.floor(xe/Ee)}Me[F]=G(Me[F],me[te],te,F)}return ce||Ne.splice(Q,1),[R.type,Me,Ne]}function I(G,R=null,Q=1,ce=!1){const ne=G.data,me=G.dims;if(R===null){const be=ne.reduce((Ce,De)=>Ce+De,0)/ne.length,Ee=Math.sqrt(ne.reduce((Ce,De)=>Ce+(De-be)**2,0)/(ne.length-Q)),ye=new i(G.type,[be],[]);return[new i(G.type,[Ee],[]),ye]}R=b(R,me.length);const we=$(G,R,ce),Ne=we.data,[Me,te,F]=P((xe,be,Ee,ye)=>xe+(be-Ne[ye])**2,G,R,ce);for(let xe=0;xe<te.length;++xe)te[xe]=Math.sqrt(te[xe]/(me[R]-Q));return[new i(Me,te,F),we]}function $(G,R=null,Q=!1){const ce=G.dims,ne=G.data;if(R===null){const Me=ne.reduce((te,F)=>te+F,0);return new i(G.type,[Me/ne.length],[])}R=b(R,ce.length);const[me,we,Ne]=P((Me,te)=>Me+te,G,R,Q);if(ce[R]!==1)for(let Me=0;Me<we.length;++Me)we[Me]/=ce[R];return new i(me,we,Ne)}function z(G){const R=new Array(G.length);for(let Q=G.length-1,ce=1;Q>=0;--Q)R[Q]=ce,ce*=G[Q];return R}function D(G,R,Q,ce){const ne=G.reduce((me,we)=>me*we,1);return new i(Q,new ce(ne).fill(R),G)}function B(G,R){let Q,ce;if(typeof R=="number")Q="float32",ce=Float32Array;else if(typeof R=="bigint")Q="int64",ce=BigInt64Array;else if(typeof R=="boolean")Q="bool",ce=Uint8Array;else throw new Error(`Unsupported data type: ${typeof R}`);return D(G,R,Q,ce)}function U(G,R){return B(G.dims,R)}function q(G){return D(G,1n,"int64",BigInt64Array)}function X(G){return q(G.dims)}function Z(G){return D(G,0n,"int64",BigInt64Array)}function K(G){return Z(G.dims)}function ee(G){const R=G.reduce((Q,ce)=>Q*ce,1);return new i("float32",Float32Array.from({length:R},()=>Math.random()),G)}function oe(G){const R=G.reduce((ce,ne)=>ce*ne,1);function Q(){const ce=1-Math.random(),ne=1-Math.random();return Math.sqrt(-2*Math.log(ce))*Math.cos(2*Math.PI*ne)}return new i("float32",Float32Array.from({length:R},()=>Q()),G)}function ae(G,R){if(G.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(G.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(R))throw new Error("The precision must be either 'binary' or 'ubinary'");const Q=R==="binary",ce=Q?"int8":"uint8",ne=Q?Int8Array:Uint8Array,me=G.data,we=new ne(me.length/8);for(let Ne=0;Ne<me.length;++Ne){const Me=me[Ne]>0?1:0,te=Math.floor(Ne/8),F=Ne%8;we[te]|=Me<<7-F,Q&&F===0&&(we[te]-=128)}return new i(ce,we,[G.dims[0],G.dims[1]/8])}},"./src/utils/video.js":(e,t,r)=>{r.r(t),r.d(t,{RawVideo:()=>o,RawVideoFrame:()=>a,load_video:()=>i});var n=r("./src/utils/image.js"),s=r("./src/env.js");class a{constructor(d,p){this.image=d,this.timestamp=p}}class o{constructor(d,p){d.length>0&&d[0]instanceof n.RawImage&&(d=d.map((u,m)=>new a(u,(m+1)/(d.length+1)*p))),this.frames=d,this.duration=p}get width(){return this.frames[0].image.width}get height(){return this.frames[0].image.height}get fps(){return this.frames.length/this.duration}}async function i(l,{num_frames:d=null,fps:p=null}={}){if(!s.apis.IS_BROWSER_ENV)throw new Error("`load_video` is currently only supported in browser environments.");if(d==null&&p==null)throw new Error("Either num_frames or fps must be provided.");const u=[],m=document.createElement("video");if(m.crossOrigin="anonymous",m.muted=!0,typeof l=="string")m.src=l;else if(l instanceof Blob)m.src=URL.createObjectURL(l);else if(l instanceof HTMLVideoElement)m.src=l.src;else throw new Error("Invalid URL or video element provided.");if(await new Promise(y=>m.onloadedmetadata=y),m.seekable.start(0)===m.seekable.end(0)){const w=await(await fetch(m.src)).blob();m.src=URL.createObjectURL(w),await new Promise(b=>m.onloadedmetadata=b)}const f=m.duration;let h,_;d!=null?(h=d,_=d===1?0:f/(d-1)):(_=1/p,h=Math.floor(f/_));let v=[];for(let y=0;y<h;++y)v.push(d===1?f/2:y*_);const g=document.createElement("canvas");g.width=m.videoWidth,g.height=m.videoHeight;const x=g.getContext("2d",{willReadFrequently:!0});for(const y of v){m.currentTime=y,await new Promise(E=>{m.onseeked=E}),x.drawImage(m,0,0,g.width,g.height);const w=x.getImageData(0,0,g.width,g.height),b=new n.RawImage(w.data,g.width,g.height,4),C=new a(b,y);u.push(C)}return m.remove(),new o(u,f)}}},bI={};function lr(e){var t=bI[e];if(t!==void 0)return t.exports;var r=bI[e]={exports:{}};return _Q[e](r,r.exports,lr),r.exports}(()=>{var e=Object.getPrototypeOf?r=>Object.getPrototypeOf(r):r=>r.__proto__,t;lr.t=function(r,n){if(n&1&&(r=this(r)),n&8||typeof r=="object"&&r&&(n&4&&r.__esModule||n&16&&typeof r.then=="function"))return r;var s=Object.create(null);lr.r(s);var a={};t=t||[null,e({}),e([]),e(e)];for(var o=n&2&&r;typeof o=="object"&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach(i=>a[i]=()=>r[i]);return a.default=()=>r,lr.d(s,a),s}})();lr.d=(e,t)=>{for(var r in t)lr.o(t,r)&&!lr.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};lr.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);lr.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var T={};(()=>{/*!*****************************!*\
  !*** ./src/transformers.js ***!
  \*****************************/lr.r(T),lr.d(T,{ASTFeatureExtractor:()=>u.ASTFeatureExtractor,ASTForAudioClassification:()=>r.ASTForAudioClassification,ASTModel:()=>r.ASTModel,ASTPreTrainedModel:()=>r.ASTPreTrainedModel,AlbertForMaskedLM:()=>r.AlbertForMaskedLM,AlbertForQuestionAnswering:()=>r.AlbertForQuestionAnswering,AlbertForSequenceClassification:()=>r.AlbertForSequenceClassification,AlbertModel:()=>r.AlbertModel,AlbertPreTrainedModel:()=>r.AlbertPreTrainedModel,AlbertTokenizer:()=>n.AlbertTokenizer,ArceeForCausalLM:()=>r.ArceeForCausalLM,ArceeModel:()=>r.ArceeModel,ArceePreTrainedModel:()=>r.ArceePreTrainedModel,AudioClassificationPipeline:()=>t.AudioClassificationPipeline,AutoConfig:()=>s.AutoConfig,AutoFeatureExtractor:()=>m.AutoFeatureExtractor,AutoImageProcessor:()=>_.AutoImageProcessor,AutoModel:()=>r.AutoModel,AutoModelForAudioClassification:()=>r.AutoModelForAudioClassification,AutoModelForAudioFrameClassification:()=>r.AutoModelForAudioFrameClassification,AutoModelForAudioTextToText:()=>r.AutoModelForAudioTextToText,AutoModelForCTC:()=>r.AutoModelForCTC,AutoModelForCausalLM:()=>r.AutoModelForCausalLM,AutoModelForDepthEstimation:()=>r.AutoModelForDepthEstimation,AutoModelForDocumentQuestionAnswering:()=>r.AutoModelForDocumentQuestionAnswering,AutoModelForImageClassification:()=>r.AutoModelForImageClassification,AutoModelForImageFeatureExtraction:()=>r.AutoModelForImageFeatureExtraction,AutoModelForImageMatting:()=>r.AutoModelForImageMatting,AutoModelForImageSegmentation:()=>r.AutoModelForImageSegmentation,AutoModelForImageTextToText:()=>r.AutoModelForImageTextToText,AutoModelForImageToImage:()=>r.AutoModelForImageToImage,AutoModelForMaskGeneration:()=>r.AutoModelForMaskGeneration,AutoModelForMaskedLM:()=>r.AutoModelForMaskedLM,AutoModelForNormalEstimation:()=>r.AutoModelForNormalEstimation,AutoModelForObjectDetection:()=>r.AutoModelForObjectDetection,AutoModelForPoseEstimation:()=>r.AutoModelForPoseEstimation,AutoModelForQuestionAnswering:()=>r.AutoModelForQuestionAnswering,AutoModelForSemanticSegmentation:()=>r.AutoModelForSemanticSegmentation,AutoModelForSeq2SeqLM:()=>r.AutoModelForSeq2SeqLM,AutoModelForSequenceClassification:()=>r.AutoModelForSequenceClassification,AutoModelForSpeechSeq2Seq:()=>r.AutoModelForSpeechSeq2Seq,AutoModelForTextToSpectrogram:()=>r.AutoModelForTextToSpectrogram,AutoModelForTextToWaveform:()=>r.AutoModelForTextToWaveform,AutoModelForTokenClassification:()=>r.AutoModelForTokenClassification,AutoModelForUniversalSegmentation:()=>r.AutoModelForUniversalSegmentation,AutoModelForVision2Seq:()=>r.AutoModelForVision2Seq,AutoModelForXVector:()=>r.AutoModelForXVector,AutoModelForZeroShotObjectDetection:()=>r.AutoModelForZeroShotObjectDetection,AutoProcessor:()=>x.AutoProcessor,AutoTokenizer:()=>n.AutoTokenizer,AutomaticSpeechRecognitionPipeline:()=>t.AutomaticSpeechRecognitionPipeline,BackgroundRemovalPipeline:()=>t.BackgroundRemovalPipeline,BartForConditionalGeneration:()=>r.BartForConditionalGeneration,BartForSequenceClassification:()=>r.BartForSequenceClassification,BartModel:()=>r.BartModel,BartPretrainedModel:()=>r.BartPretrainedModel,BartTokenizer:()=>n.BartTokenizer,BaseModelOutput:()=>r.BaseModelOutput,BaseStreamer:()=>y.BaseStreamer,BeitFeatureExtractor:()=>h.BeitFeatureExtractor,BeitForImageClassification:()=>r.BeitForImageClassification,BeitModel:()=>r.BeitModel,BeitPreTrainedModel:()=>r.BeitPreTrainedModel,BertForMaskedLM:()=>r.BertForMaskedLM,BertForQuestionAnswering:()=>r.BertForQuestionAnswering,BertForSequenceClassification:()=>r.BertForSequenceClassification,BertForTokenClassification:()=>r.BertForTokenClassification,BertModel:()=>r.BertModel,BertPreTrainedModel:()=>r.BertPreTrainedModel,BertTokenizer:()=>n.BertTokenizer,BitImageProcessor:()=>h.BitImageProcessor,BlenderbotForConditionalGeneration:()=>r.BlenderbotForConditionalGeneration,BlenderbotModel:()=>r.BlenderbotModel,BlenderbotPreTrainedModel:()=>r.BlenderbotPreTrainedModel,BlenderbotSmallForConditionalGeneration:()=>r.BlenderbotSmallForConditionalGeneration,BlenderbotSmallModel:()=>r.BlenderbotSmallModel,BlenderbotSmallPreTrainedModel:()=>r.BlenderbotSmallPreTrainedModel,BlenderbotSmallTokenizer:()=>n.BlenderbotSmallTokenizer,BlenderbotTokenizer:()=>n.BlenderbotTokenizer,BloomForCausalLM:()=>r.BloomForCausalLM,BloomModel:()=>r.BloomModel,BloomPreTrainedModel:()=>r.BloomPreTrainedModel,BloomTokenizer:()=>n.BloomTokenizer,CLIPFeatureExtractor:()=>h.CLIPFeatureExtractor,CLIPImageProcessor:()=>h.CLIPImageProcessor,CLIPModel:()=>r.CLIPModel,CLIPPreTrainedModel:()=>r.CLIPPreTrainedModel,CLIPSegForImageSegmentation:()=>r.CLIPSegForImageSegmentation,CLIPSegModel:()=>r.CLIPSegModel,CLIPSegPreTrainedModel:()=>r.CLIPSegPreTrainedModel,CLIPTextModel:()=>r.CLIPTextModel,CLIPTextModelWithProjection:()=>r.CLIPTextModelWithProjection,CLIPTokenizer:()=>n.CLIPTokenizer,CLIPVisionModel:()=>r.CLIPVisionModel,CLIPVisionModelWithProjection:()=>r.CLIPVisionModelWithProjection,CamembertForMaskedLM:()=>r.CamembertForMaskedLM,CamembertForQuestionAnswering:()=>r.CamembertForQuestionAnswering,CamembertForSequenceClassification:()=>r.CamembertForSequenceClassification,CamembertForTokenClassification:()=>r.CamembertForTokenClassification,CamembertModel:()=>r.CamembertModel,CamembertPreTrainedModel:()=>r.CamembertPreTrainedModel,CamembertTokenizer:()=>n.CamembertTokenizer,CausalLMOutput:()=>r.CausalLMOutput,CausalLMOutputWithPast:()=>r.CausalLMOutputWithPast,ChineseCLIPFeatureExtractor:()=>h.ChineseCLIPFeatureExtractor,ChineseCLIPModel:()=>r.ChineseCLIPModel,ChineseCLIPPreTrainedModel:()=>r.ChineseCLIPPreTrainedModel,ClapAudioModelWithProjection:()=>r.ClapAudioModelWithProjection,ClapFeatureExtractor:()=>u.ClapFeatureExtractor,ClapModel:()=>r.ClapModel,ClapPreTrainedModel:()=>r.ClapPreTrainedModel,ClapTextModelWithProjection:()=>r.ClapTextModelWithProjection,ClassifierFreeGuidanceLogitsProcessor:()=>b.ClassifierFreeGuidanceLogitsProcessor,CodeGenForCausalLM:()=>r.CodeGenForCausalLM,CodeGenModel:()=>r.CodeGenModel,CodeGenPreTrainedModel:()=>r.CodeGenPreTrainedModel,CodeGenTokenizer:()=>n.CodeGenTokenizer,CodeLlamaTokenizer:()=>n.CodeLlamaTokenizer,CohereForCausalLM:()=>r.CohereForCausalLM,CohereModel:()=>r.CohereModel,CoherePreTrainedModel:()=>r.CoherePreTrainedModel,CohereTokenizer:()=>n.CohereTokenizer,ConvBertForMaskedLM:()=>r.ConvBertForMaskedLM,ConvBertForQuestionAnswering:()=>r.ConvBertForQuestionAnswering,ConvBertForSequenceClassification:()=>r.ConvBertForSequenceClassification,ConvBertForTokenClassification:()=>r.ConvBertForTokenClassification,ConvBertModel:()=>r.ConvBertModel,ConvBertPreTrainedModel:()=>r.ConvBertPreTrainedModel,ConvBertTokenizer:()=>n.ConvBertTokenizer,ConvNextFeatureExtractor:()=>h.ConvNextFeatureExtractor,ConvNextForImageClassification:()=>r.ConvNextForImageClassification,ConvNextImageProcessor:()=>h.ConvNextImageProcessor,ConvNextModel:()=>r.ConvNextModel,ConvNextPreTrainedModel:()=>r.ConvNextPreTrainedModel,ConvNextV2ForImageClassification:()=>r.ConvNextV2ForImageClassification,ConvNextV2Model:()=>r.ConvNextV2Model,ConvNextV2PreTrainedModel:()=>r.ConvNextV2PreTrainedModel,DFineForObjectDetection:()=>r.DFineForObjectDetection,DFineModel:()=>r.DFineModel,DFinePreTrainedModel:()=>r.DFinePreTrainedModel,DINOv3ConvNextModel:()=>r.DINOv3ConvNextModel,DINOv3ConvNextPreTrainedModel:()=>r.DINOv3ConvNextPreTrainedModel,DINOv3ViTImageProcessor:()=>h.DINOv3ViTImageProcessor,DINOv3ViTModel:()=>r.DINOv3ViTModel,DINOv3ViTPreTrainedModel:()=>r.DINOv3ViTPreTrainedModel,DPTFeatureExtractor:()=>h.DPTFeatureExtractor,DPTForDepthEstimation:()=>r.DPTForDepthEstimation,DPTImageProcessor:()=>h.DPTImageProcessor,DPTModel:()=>r.DPTModel,DPTPreTrainedModel:()=>r.DPTPreTrainedModel,DacDecoderModel:()=>r.DacDecoderModel,DacDecoderOutput:()=>r.DacDecoderOutput,DacEncoderModel:()=>r.DacEncoderModel,DacEncoderOutput:()=>r.DacEncoderOutput,DacFeatureExtractor:()=>u.DacFeatureExtractor,DacModel:()=>r.DacModel,DacPreTrainedModel:()=>r.DacPreTrainedModel,DataTypeMap:()=>l.DataTypeMap,DebertaForMaskedLM:()=>r.DebertaForMaskedLM,DebertaForQuestionAnswering:()=>r.DebertaForQuestionAnswering,DebertaForSequenceClassification:()=>r.DebertaForSequenceClassification,DebertaForTokenClassification:()=>r.DebertaForTokenClassification,DebertaModel:()=>r.DebertaModel,DebertaPreTrainedModel:()=>r.DebertaPreTrainedModel,DebertaTokenizer:()=>n.DebertaTokenizer,DebertaV2ForMaskedLM:()=>r.DebertaV2ForMaskedLM,DebertaV2ForQuestionAnswering:()=>r.DebertaV2ForQuestionAnswering,DebertaV2ForSequenceClassification:()=>r.DebertaV2ForSequenceClassification,DebertaV2ForTokenClassification:()=>r.DebertaV2ForTokenClassification,DebertaV2Model:()=>r.DebertaV2Model,DebertaV2PreTrainedModel:()=>r.DebertaV2PreTrainedModel,DebertaV2Tokenizer:()=>n.DebertaV2Tokenizer,DecisionTransformerModel:()=>r.DecisionTransformerModel,DecisionTransformerPreTrainedModel:()=>r.DecisionTransformerPreTrainedModel,DeiTFeatureExtractor:()=>h.DeiTFeatureExtractor,DeiTForImageClassification:()=>r.DeiTForImageClassification,DeiTImageProcessor:()=>h.DeiTImageProcessor,DeiTModel:()=>r.DeiTModel,DeiTPreTrainedModel:()=>r.DeiTPreTrainedModel,DepthAnythingForDepthEstimation:()=>r.DepthAnythingForDepthEstimation,DepthAnythingPreTrainedModel:()=>r.DepthAnythingPreTrainedModel,DepthEstimationPipeline:()=>t.DepthEstimationPipeline,DepthProForDepthEstimation:()=>r.DepthProForDepthEstimation,DepthProPreTrainedModel:()=>r.DepthProPreTrainedModel,DetrFeatureExtractor:()=>h.DetrFeatureExtractor,DetrForObjectDetection:()=>r.DetrForObjectDetection,DetrForSegmentation:()=>r.DetrForSegmentation,DetrImageProcessor:()=>h.DetrImageProcessor,DetrModel:()=>r.DetrModel,DetrObjectDetectionOutput:()=>r.DetrObjectDetectionOutput,DetrPreTrainedModel:()=>r.DetrPreTrainedModel,DetrSegmentationOutput:()=>r.DetrSegmentationOutput,Dinov2ForImageClassification:()=>r.Dinov2ForImageClassification,Dinov2Model:()=>r.Dinov2Model,Dinov2PreTrainedModel:()=>r.Dinov2PreTrainedModel,Dinov2WithRegistersForImageClassification:()=>r.Dinov2WithRegistersForImageClassification,Dinov2WithRegistersModel:()=>r.Dinov2WithRegistersModel,Dinov2WithRegistersPreTrainedModel:()=>r.Dinov2WithRegistersPreTrainedModel,DistilBertForMaskedLM:()=>r.DistilBertForMaskedLM,DistilBertForQuestionAnswering:()=>r.DistilBertForQuestionAnswering,DistilBertForSequenceClassification:()=>r.DistilBertForSequenceClassification,DistilBertForTokenClassification:()=>r.DistilBertForTokenClassification,DistilBertModel:()=>r.DistilBertModel,DistilBertPreTrainedModel:()=>r.DistilBertPreTrainedModel,DistilBertTokenizer:()=>n.DistilBertTokenizer,DocumentQuestionAnsweringPipeline:()=>t.DocumentQuestionAnsweringPipeline,DonutFeatureExtractor:()=>h.DonutFeatureExtractor,DonutImageProcessor:()=>h.DonutImageProcessor,DonutSwinModel:()=>r.DonutSwinModel,DonutSwinPreTrainedModel:()=>r.DonutSwinPreTrainedModel,EdgeTamModel:()=>r.EdgeTamModel,EfficientNetForImageClassification:()=>r.EfficientNetForImageClassification,EfficientNetImageProcessor:()=>h.EfficientNetImageProcessor,EfficientNetModel:()=>r.EfficientNetModel,EfficientNetPreTrainedModel:()=>r.EfficientNetPreTrainedModel,ElectraForMaskedLM:()=>r.ElectraForMaskedLM,ElectraForQuestionAnswering:()=>r.ElectraForQuestionAnswering,ElectraForSequenceClassification:()=>r.ElectraForSequenceClassification,ElectraForTokenClassification:()=>r.ElectraForTokenClassification,ElectraModel:()=>r.ElectraModel,ElectraPreTrainedModel:()=>r.ElectraPreTrainedModel,ElectraTokenizer:()=>n.ElectraTokenizer,EncodecFeatureExtractor:()=>u.EncodecFeatureExtractor,EosTokenCriteria:()=>w.EosTokenCriteria,Ernie4_5_ForCausalLM:()=>r.Ernie4_5_ForCausalLM,Ernie4_5_Model:()=>r.Ernie4_5_Model,Ernie4_5_PretrainedModel:()=>r.Ernie4_5_PretrainedModel,Ernie4_5_Tokenizer:()=>n.Ernie4_5_Tokenizer,EsmForMaskedLM:()=>r.EsmForMaskedLM,EsmForSequenceClassification:()=>r.EsmForSequenceClassification,EsmForTokenClassification:()=>r.EsmForTokenClassification,EsmModel:()=>r.EsmModel,EsmPreTrainedModel:()=>r.EsmPreTrainedModel,EsmTokenizer:()=>n.EsmTokenizer,ExaoneForCausalLM:()=>r.ExaoneForCausalLM,ExaoneModel:()=>r.ExaoneModel,ExaonePreTrainedModel:()=>r.ExaonePreTrainedModel,FFT:()=>d.FFT,FalconForCausalLM:()=>r.FalconForCausalLM,FalconModel:()=>r.FalconModel,FalconPreTrainedModel:()=>r.FalconPreTrainedModel,FalconTokenizer:()=>n.FalconTokenizer,FastViTForImageClassification:()=>r.FastViTForImageClassification,FastViTModel:()=>r.FastViTModel,FastViTPreTrainedModel:()=>r.FastViTPreTrainedModel,FeatureExtractionPipeline:()=>t.FeatureExtractionPipeline,FeatureExtractor:()=>p.FeatureExtractor,FillMaskPipeline:()=>t.FillMaskPipeline,Florence2ForConditionalGeneration:()=>r.Florence2ForConditionalGeneration,Florence2PreTrainedModel:()=>r.Florence2PreTrainedModel,Florence2Processor:()=>g.Florence2Processor,ForcedBOSTokenLogitsProcessor:()=>b.ForcedBOSTokenLogitsProcessor,ForcedEOSTokenLogitsProcessor:()=>b.ForcedEOSTokenLogitsProcessor,GLPNFeatureExtractor:()=>h.GLPNFeatureExtractor,GLPNForDepthEstimation:()=>r.GLPNForDepthEstimation,GLPNModel:()=>r.GLPNModel,GLPNPreTrainedModel:()=>r.GLPNPreTrainedModel,GPT2LMHeadModel:()=>r.GPT2LMHeadModel,GPT2Model:()=>r.GPT2Model,GPT2PreTrainedModel:()=>r.GPT2PreTrainedModel,GPT2Tokenizer:()=>n.GPT2Tokenizer,GPTBigCodeForCausalLM:()=>r.GPTBigCodeForCausalLM,GPTBigCodeModel:()=>r.GPTBigCodeModel,GPTBigCodePreTrainedModel:()=>r.GPTBigCodePreTrainedModel,GPTJForCausalLM:()=>r.GPTJForCausalLM,GPTJModel:()=>r.GPTJModel,GPTJPreTrainedModel:()=>r.GPTJPreTrainedModel,GPTNeoForCausalLM:()=>r.GPTNeoForCausalLM,GPTNeoModel:()=>r.GPTNeoModel,GPTNeoPreTrainedModel:()=>r.GPTNeoPreTrainedModel,GPTNeoXForCausalLM:()=>r.GPTNeoXForCausalLM,GPTNeoXModel:()=>r.GPTNeoXModel,GPTNeoXPreTrainedModel:()=>r.GPTNeoXPreTrainedModel,GPTNeoXTokenizer:()=>n.GPTNeoXTokenizer,Gemma2ForCausalLM:()=>r.Gemma2ForCausalLM,Gemma2Model:()=>r.Gemma2Model,Gemma2PreTrainedModel:()=>r.Gemma2PreTrainedModel,Gemma3ForCausalLM:()=>r.Gemma3ForCausalLM,Gemma3Model:()=>r.Gemma3Model,Gemma3PreTrainedModel:()=>r.Gemma3PreTrainedModel,Gemma3nAudioFeatureExtractor:()=>u.Gemma3nAudioFeatureExtractor,Gemma3nForConditionalGeneration:()=>r.Gemma3nForConditionalGeneration,Gemma3nPreTrainedModel:()=>r.Gemma3nPreTrainedModel,Gemma3nProcessor:()=>g.Gemma3nProcessor,GemmaForCausalLM:()=>r.GemmaForCausalLM,GemmaModel:()=>r.GemmaModel,GemmaPreTrainedModel:()=>r.GemmaPreTrainedModel,GemmaTokenizer:()=>n.GemmaTokenizer,GlmForCausalLM:()=>r.GlmForCausalLM,GlmModel:()=>r.GlmModel,GlmPreTrainedModel:()=>r.GlmPreTrainedModel,GraniteForCausalLM:()=>r.GraniteForCausalLM,GraniteModel:()=>r.GraniteModel,GraniteMoeHybridForCausalLM:()=>r.GraniteMoeHybridForCausalLM,GraniteMoeHybridModel:()=>r.GraniteMoeHybridModel,GraniteMoeHybridPreTrainedModel:()=>r.GraniteMoeHybridPreTrainedModel,GranitePreTrainedModel:()=>r.GranitePreTrainedModel,Grok1Tokenizer:()=>n.Grok1Tokenizer,GroundingDinoForObjectDetection:()=>r.GroundingDinoForObjectDetection,GroundingDinoImageProcessor:()=>h.GroundingDinoImageProcessor,GroundingDinoPreTrainedModel:()=>r.GroundingDinoPreTrainedModel,GroundingDinoProcessor:()=>g.GroundingDinoProcessor,GroupViTModel:()=>r.GroupViTModel,GroupViTPreTrainedModel:()=>r.GroupViTPreTrainedModel,HeliumForCausalLM:()=>r.HeliumForCausalLM,HeliumModel:()=>r.HeliumModel,HeliumPreTrainedModel:()=>r.HeliumPreTrainedModel,HerbertTokenizer:()=>n.HerbertTokenizer,HieraForImageClassification:()=>r.HieraForImageClassification,HieraModel:()=>r.HieraModel,HieraPreTrainedModel:()=>r.HieraPreTrainedModel,HubertForCTC:()=>r.HubertForCTC,HubertForSequenceClassification:()=>r.HubertForSequenceClassification,HubertModel:()=>r.HubertModel,HubertPreTrainedModel:()=>r.HubertPreTrainedModel,IJepaForImageClassification:()=>r.IJepaForImageClassification,IJepaModel:()=>r.IJepaModel,IJepaPreTrainedModel:()=>r.IJepaPreTrainedModel,Idefics3ForConditionalGeneration:()=>r.Idefics3ForConditionalGeneration,Idefics3ImageProcessor:()=>h.Idefics3ImageProcessor,Idefics3PreTrainedModel:()=>r.Idefics3PreTrainedModel,Idefics3Processor:()=>g.Idefics3Processor,ImageClassificationPipeline:()=>t.ImageClassificationPipeline,ImageFeatureExtractionPipeline:()=>t.ImageFeatureExtractionPipeline,ImageFeatureExtractor:()=>u.ImageFeatureExtractor,ImageMattingOutput:()=>r.ImageMattingOutput,ImageProcessor:()=>f.ImageProcessor,ImageSegmentationPipeline:()=>t.ImageSegmentationPipeline,ImageToImagePipeline:()=>t.ImageToImagePipeline,ImageToTextPipeline:()=>t.ImageToTextPipeline,InterruptableStoppingCriteria:()=>w.InterruptableStoppingCriteria,JAISLMHeadModel:()=>r.JAISLMHeadModel,JAISModel:()=>r.JAISModel,JAISPreTrainedModel:()=>r.JAISPreTrainedModel,JinaCLIPImageProcessor:()=>h.JinaCLIPImageProcessor,JinaCLIPModel:()=>r.JinaCLIPModel,JinaCLIPPreTrainedModel:()=>r.JinaCLIPPreTrainedModel,JinaCLIPProcessor:()=>g.JinaCLIPProcessor,JinaCLIPTextModel:()=>r.JinaCLIPTextModel,JinaCLIPVisionModel:()=>r.JinaCLIPVisionModel,Lfm2ForCausalLM:()=>r.Lfm2ForCausalLM,Lfm2Model:()=>r.Lfm2Model,Lfm2PreTrainedModel:()=>r.Lfm2PreTrainedModel,LiteWhisperForConditionalGeneration:()=>r.LiteWhisperForConditionalGeneration,Llama4ForCausalLM:()=>r.Llama4ForCausalLM,Llama4PreTrainedModel:()=>r.Llama4PreTrainedModel,LlamaForCausalLM:()=>r.LlamaForCausalLM,LlamaModel:()=>r.LlamaModel,LlamaPreTrainedModel:()=>r.LlamaPreTrainedModel,LlamaTokenizer:()=>n.LlamaTokenizer,LlavaForConditionalGeneration:()=>r.LlavaForConditionalGeneration,LlavaOnevisionForConditionalGeneration:()=>r.LlavaOnevisionForConditionalGeneration,LlavaOnevisionImageProcessor:()=>h.LlavaOnevisionImageProcessor,LlavaPreTrainedModel:()=>r.LlavaPreTrainedModel,LlavaProcessor:()=>g.LlavaProcessor,LlavaQwen2ForCausalLM:()=>r.LlavaQwen2ForCausalLM,LogitsProcessor:()=>b.LogitsProcessor,LogitsProcessorList:()=>b.LogitsProcessorList,LogitsWarper:()=>b.LogitsWarper,LongT5ForConditionalGeneration:()=>r.LongT5ForConditionalGeneration,LongT5Model:()=>r.LongT5Model,LongT5PreTrainedModel:()=>r.LongT5PreTrainedModel,M2M100ForConditionalGeneration:()=>r.M2M100ForConditionalGeneration,M2M100Model:()=>r.M2M100Model,M2M100PreTrainedModel:()=>r.M2M100PreTrainedModel,M2M100Tokenizer:()=>n.M2M100Tokenizer,MBart50Tokenizer:()=>n.MBart50Tokenizer,MBartForCausalLM:()=>r.MBartForCausalLM,MBartForConditionalGeneration:()=>r.MBartForConditionalGeneration,MBartForSequenceClassification:()=>r.MBartForSequenceClassification,MBartModel:()=>r.MBartModel,MBartPreTrainedModel:()=>r.MBartPreTrainedModel,MBartTokenizer:()=>n.MBartTokenizer,MPNetForMaskedLM:()=>r.MPNetForMaskedLM,MPNetForQuestionAnswering:()=>r.MPNetForQuestionAnswering,MPNetForSequenceClassification:()=>r.MPNetForSequenceClassification,MPNetForTokenClassification:()=>r.MPNetForTokenClassification,MPNetModel:()=>r.MPNetModel,MPNetPreTrainedModel:()=>r.MPNetPreTrainedModel,MPNetTokenizer:()=>n.MPNetTokenizer,MT5ForConditionalGeneration:()=>r.MT5ForConditionalGeneration,MT5Model:()=>r.MT5Model,MT5PreTrainedModel:()=>r.MT5PreTrainedModel,MarianMTModel:()=>r.MarianMTModel,MarianModel:()=>r.MarianModel,MarianPreTrainedModel:()=>r.MarianPreTrainedModel,MarianTokenizer:()=>n.MarianTokenizer,Mask2FormerImageProcessor:()=>h.Mask2FormerImageProcessor,MaskFormerFeatureExtractor:()=>h.MaskFormerFeatureExtractor,MaskFormerForInstanceSegmentation:()=>r.MaskFormerForInstanceSegmentation,MaskFormerImageProcessor:()=>h.MaskFormerImageProcessor,MaskFormerModel:()=>r.MaskFormerModel,MaskFormerPreTrainedModel:()=>r.MaskFormerPreTrainedModel,MaskedLMOutput:()=>r.MaskedLMOutput,MaxLengthCriteria:()=>w.MaxLengthCriteria,Metric3DForDepthEstimation:()=>r.Metric3DForDepthEstimation,Metric3DPreTrainedModel:()=>r.Metric3DPreTrainedModel,Metric3Dv2ForDepthEstimation:()=>r.Metric3Dv2ForDepthEstimation,Metric3Dv2PreTrainedModel:()=>r.Metric3Dv2PreTrainedModel,MgpstrForSceneTextRecognition:()=>r.MgpstrForSceneTextRecognition,MgpstrModelOutput:()=>r.MgpstrModelOutput,MgpstrPreTrainedModel:()=>r.MgpstrPreTrainedModel,MgpstrProcessor:()=>g.MgpstrProcessor,MgpstrTokenizer:()=>n.MgpstrTokenizer,MimiDecoderModel:()=>r.MimiDecoderModel,MimiDecoderOutput:()=>r.MimiDecoderOutput,MimiEncoderModel:()=>r.MimiEncoderModel,MimiEncoderOutput:()=>r.MimiEncoderOutput,MimiModel:()=>r.MimiModel,MimiPreTrainedModel:()=>r.MimiPreTrainedModel,MinLengthLogitsProcessor:()=>b.MinLengthLogitsProcessor,MinNewTokensLengthLogitsProcessor:()=>b.MinNewTokensLengthLogitsProcessor,MistralForCausalLM:()=>r.MistralForCausalLM,MistralModel:()=>r.MistralModel,MistralPreTrainedModel:()=>r.MistralPreTrainedModel,MobileBertForMaskedLM:()=>r.MobileBertForMaskedLM,MobileBertForQuestionAnswering:()=>r.MobileBertForQuestionAnswering,MobileBertForSequenceClassification:()=>r.MobileBertForSequenceClassification,MobileBertModel:()=>r.MobileBertModel,MobileBertPreTrainedModel:()=>r.MobileBertPreTrainedModel,MobileBertTokenizer:()=>n.MobileBertTokenizer,MobileLLMForCausalLM:()=>r.MobileLLMForCausalLM,MobileLLMModel:()=>r.MobileLLMModel,MobileLLMPreTrainedModel:()=>r.MobileLLMPreTrainedModel,MobileNetV1FeatureExtractor:()=>h.MobileNetV1FeatureExtractor,MobileNetV1ForImageClassification:()=>r.MobileNetV1ForImageClassification,MobileNetV1ForSemanticSegmentation:()=>r.MobileNetV1ForSemanticSegmentation,MobileNetV1ImageProcessor:()=>h.MobileNetV1ImageProcessor,MobileNetV1Model:()=>r.MobileNetV1Model,MobileNetV1PreTrainedModel:()=>r.MobileNetV1PreTrainedModel,MobileNetV2FeatureExtractor:()=>h.MobileNetV2FeatureExtractor,MobileNetV2ForImageClassification:()=>r.MobileNetV2ForImageClassification,MobileNetV2ForSemanticSegmentation:()=>r.MobileNetV2ForSemanticSegmentation,MobileNetV2ImageProcessor:()=>h.MobileNetV2ImageProcessor,MobileNetV2Model:()=>r.MobileNetV2Model,MobileNetV2PreTrainedModel:()=>r.MobileNetV2PreTrainedModel,MobileNetV3FeatureExtractor:()=>h.MobileNetV3FeatureExtractor,MobileNetV3ForImageClassification:()=>r.MobileNetV3ForImageClassification,MobileNetV3ForSemanticSegmentation:()=>r.MobileNetV3ForSemanticSegmentation,MobileNetV3ImageProcessor:()=>h.MobileNetV3ImageProcessor,MobileNetV3Model:()=>r.MobileNetV3Model,MobileNetV3PreTrainedModel:()=>r.MobileNetV3PreTrainedModel,MobileNetV4FeatureExtractor:()=>h.MobileNetV4FeatureExtractor,MobileNetV4ForImageClassification:()=>r.MobileNetV4ForImageClassification,MobileNetV4ForSemanticSegmentation:()=>r.MobileNetV4ForSemanticSegmentation,MobileNetV4ImageProcessor:()=>h.MobileNetV4ImageProcessor,MobileNetV4Model:()=>r.MobileNetV4Model,MobileNetV4PreTrainedModel:()=>r.MobileNetV4PreTrainedModel,MobileViTFeatureExtractor:()=>h.MobileViTFeatureExtractor,MobileViTForImageClassification:()=>r.MobileViTForImageClassification,MobileViTImageProcessor:()=>h.MobileViTImageProcessor,MobileViTModel:()=>r.MobileViTModel,MobileViTPreTrainedModel:()=>r.MobileViTPreTrainedModel,MobileViTV2ForImageClassification:()=>r.MobileViTV2ForImageClassification,MobileViTV2Model:()=>r.MobileViTV2Model,MobileViTV2PreTrainedModel:()=>r.MobileViTV2PreTrainedModel,ModelOutput:()=>r.ModelOutput,ModernBertDecoderForCausalLM:()=>r.ModernBertDecoderForCausalLM,ModernBertDecoderModel:()=>r.ModernBertDecoderModel,ModernBertDecoderPreTrainedModel:()=>r.ModernBertDecoderPreTrainedModel,ModernBertForMaskedLM:()=>r.ModernBertForMaskedLM,ModernBertForSequenceClassification:()=>r.ModernBertForSequenceClassification,ModernBertForTokenClassification:()=>r.ModernBertForTokenClassification,ModernBertModel:()=>r.ModernBertModel,ModernBertPreTrainedModel:()=>r.ModernBertPreTrainedModel,Moondream1ForConditionalGeneration:()=>r.Moondream1ForConditionalGeneration,MoonshineFeatureExtractor:()=>u.MoonshineFeatureExtractor,MoonshineForConditionalGeneration:()=>r.MoonshineForConditionalGeneration,MoonshineModel:()=>r.MoonshineModel,MoonshinePreTrainedModel:()=>r.MoonshinePreTrainedModel,MoonshineProcessor:()=>g.MoonshineProcessor,MptForCausalLM:()=>r.MptForCausalLM,MptModel:()=>r.MptModel,MptPreTrainedModel:()=>r.MptPreTrainedModel,MultiModalityCausalLM:()=>r.MultiModalityCausalLM,MultiModalityPreTrainedModel:()=>r.MultiModalityPreTrainedModel,MusicgenForCausalLM:()=>r.MusicgenForCausalLM,MusicgenForConditionalGeneration:()=>r.MusicgenForConditionalGeneration,MusicgenModel:()=>r.MusicgenModel,MusicgenPreTrainedModel:()=>r.MusicgenPreTrainedModel,NanoChatForCausalLM:()=>r.NanoChatForCausalLM,NanoChatModel:()=>r.NanoChatModel,NanoChatPreTrainedModel:()=>r.NanoChatPreTrainedModel,NeoBertForMaskedLM:()=>r.NeoBertForMaskedLM,NeoBertForQuestionAnswering:()=>r.NeoBertForQuestionAnswering,NeoBertForSequenceClassification:()=>r.NeoBertForSequenceClassification,NeoBertForTokenClassification:()=>r.NeoBertForTokenClassification,NeoBertModel:()=>r.NeoBertModel,NeoBertPreTrainedModel:()=>r.NeoBertPreTrainedModel,NllbTokenizer:()=>n.NllbTokenizer,NoBadWordsLogitsProcessor:()=>b.NoBadWordsLogitsProcessor,NoRepeatNGramLogitsProcessor:()=>b.NoRepeatNGramLogitsProcessor,NomicBertModel:()=>r.NomicBertModel,NomicBertPreTrainedModel:()=>r.NomicBertPreTrainedModel,NougatImageProcessor:()=>h.NougatImageProcessor,NougatTokenizer:()=>n.NougatTokenizer,OPTForCausalLM:()=>r.OPTForCausalLM,OPTModel:()=>r.OPTModel,OPTPreTrainedModel:()=>r.OPTPreTrainedModel,ObjectDetectionPipeline:()=>t.ObjectDetectionPipeline,Olmo2ForCausalLM:()=>r.Olmo2ForCausalLM,Olmo2Model:()=>r.Olmo2Model,Olmo2PreTrainedModel:()=>r.Olmo2PreTrainedModel,OlmoForCausalLM:()=>r.OlmoForCausalLM,OlmoModel:()=>r.OlmoModel,OlmoPreTrainedModel:()=>r.OlmoPreTrainedModel,OpenELMForCausalLM:()=>r.OpenELMForCausalLM,OpenELMModel:()=>r.OpenELMModel,OpenELMPreTrainedModel:()=>r.OpenELMPreTrainedModel,OwlViTFeatureExtractor:()=>h.OwlViTFeatureExtractor,OwlViTForObjectDetection:()=>r.OwlViTForObjectDetection,OwlViTImageProcessor:()=>h.OwlViTImageProcessor,OwlViTModel:()=>r.OwlViTModel,OwlViTPreTrainedModel:()=>r.OwlViTPreTrainedModel,OwlViTProcessor:()=>g.OwlViTProcessor,Owlv2ForObjectDetection:()=>r.Owlv2ForObjectDetection,Owlv2ImageProcessor:()=>h.Owlv2ImageProcessor,Owlv2Model:()=>r.Owlv2Model,Owlv2PreTrainedModel:()=>r.Owlv2PreTrainedModel,PaliGemmaForConditionalGeneration:()=>r.PaliGemmaForConditionalGeneration,PaliGemmaPreTrainedModel:()=>r.PaliGemmaPreTrainedModel,PaliGemmaProcessor:()=>g.PaliGemmaProcessor,ParakeetFeatureExtractor:()=>u.ParakeetFeatureExtractor,ParakeetForCTC:()=>r.ParakeetForCTC,ParakeetPreTrainedModel:()=>r.ParakeetPreTrainedModel,PatchTSMixerForPrediction:()=>r.PatchTSMixerForPrediction,PatchTSMixerModel:()=>r.PatchTSMixerModel,PatchTSMixerPreTrainedModel:()=>r.PatchTSMixerPreTrainedModel,PatchTSTForPrediction:()=>r.PatchTSTForPrediction,PatchTSTModel:()=>r.PatchTSTModel,PatchTSTPreTrainedModel:()=>r.PatchTSTPreTrainedModel,Phi3ForCausalLM:()=>r.Phi3ForCausalLM,Phi3Model:()=>r.Phi3Model,Phi3PreTrainedModel:()=>r.Phi3PreTrainedModel,Phi3VForCausalLM:()=>r.Phi3VForCausalLM,Phi3VImageProcessor:()=>h.Phi3VImageProcessor,Phi3VPreTrainedModel:()=>r.Phi3VPreTrainedModel,Phi3VProcessor:()=>g.Phi3VProcessor,PhiForCausalLM:()=>r.PhiForCausalLM,PhiModel:()=>r.PhiModel,PhiPreTrainedModel:()=>r.PhiPreTrainedModel,Pipeline:()=>t.Pipeline,PreTrainedModel:()=>r.PreTrainedModel,PreTrainedTokenizer:()=>n.PreTrainedTokenizer,PretrainedConfig:()=>s.PretrainedConfig,PretrainedMixin:()=>r.PretrainedMixin,Processor:()=>v.Processor,PvtForImageClassification:()=>r.PvtForImageClassification,PvtImageProcessor:()=>h.PvtImageProcessor,PvtModel:()=>r.PvtModel,PvtPreTrainedModel:()=>r.PvtPreTrainedModel,PyAnnoteFeatureExtractor:()=>u.PyAnnoteFeatureExtractor,PyAnnoteForAudioFrameClassification:()=>r.PyAnnoteForAudioFrameClassification,PyAnnoteModel:()=>r.PyAnnoteModel,PyAnnotePreTrainedModel:()=>r.PyAnnotePreTrainedModel,PyAnnoteProcessor:()=>g.PyAnnoteProcessor,QuestionAnsweringModelOutput:()=>r.QuestionAnsweringModelOutput,QuestionAnsweringPipeline:()=>t.QuestionAnsweringPipeline,Qwen2ForCausalLM:()=>r.Qwen2ForCausalLM,Qwen2Model:()=>r.Qwen2Model,Qwen2PreTrainedModel:()=>r.Qwen2PreTrainedModel,Qwen2Tokenizer:()=>n.Qwen2Tokenizer,Qwen2VLForConditionalGeneration:()=>r.Qwen2VLForConditionalGeneration,Qwen2VLImageProcessor:()=>h.Qwen2VLImageProcessor,Qwen2VLPreTrainedModel:()=>r.Qwen2VLPreTrainedModel,Qwen2VLProcessor:()=>g.Qwen2VLProcessor,Qwen3ForCausalLM:()=>r.Qwen3ForCausalLM,Qwen3Model:()=>r.Qwen3Model,Qwen3PreTrainedModel:()=>r.Qwen3PreTrainedModel,RFDetrForObjectDetection:()=>r.RFDetrForObjectDetection,RFDetrModel:()=>r.RFDetrModel,RFDetrObjectDetectionOutput:()=>r.RFDetrObjectDetectionOutput,RFDetrPreTrainedModel:()=>r.RFDetrPreTrainedModel,RTDetrForObjectDetection:()=>r.RTDetrForObjectDetection,RTDetrImageProcessor:()=>h.RTDetrImageProcessor,RTDetrModel:()=>r.RTDetrModel,RTDetrObjectDetectionOutput:()=>r.RTDetrObjectDetectionOutput,RTDetrPreTrainedModel:()=>r.RTDetrPreTrainedModel,RTDetrV2ForObjectDetection:()=>r.RTDetrV2ForObjectDetection,RTDetrV2Model:()=>r.RTDetrV2Model,RTDetrV2ObjectDetectionOutput:()=>r.RTDetrV2ObjectDetectionOutput,RTDetrV2PreTrainedModel:()=>r.RTDetrV2PreTrainedModel,RawAudio:()=>a.RawAudio,RawImage:()=>o.RawImage,RawVideo:()=>i.RawVideo,RawVideoFrame:()=>i.RawVideoFrame,RepetitionPenaltyLogitsProcessor:()=>b.RepetitionPenaltyLogitsProcessor,ResNetForImageClassification:()=>r.ResNetForImageClassification,ResNetModel:()=>r.ResNetModel,ResNetPreTrainedModel:()=>r.ResNetPreTrainedModel,RoFormerForMaskedLM:()=>r.RoFormerForMaskedLM,RoFormerForQuestionAnswering:()=>r.RoFormerForQuestionAnswering,RoFormerForSequenceClassification:()=>r.RoFormerForSequenceClassification,RoFormerForTokenClassification:()=>r.RoFormerForTokenClassification,RoFormerModel:()=>r.RoFormerModel,RoFormerPreTrainedModel:()=>r.RoFormerPreTrainedModel,RoFormerTokenizer:()=>n.RoFormerTokenizer,RobertaForMaskedLM:()=>r.RobertaForMaskedLM,RobertaForQuestionAnswering:()=>r.RobertaForQuestionAnswering,RobertaForSequenceClassification:()=>r.RobertaForSequenceClassification,RobertaForTokenClassification:()=>r.RobertaForTokenClassification,RobertaModel:()=>r.RobertaModel,RobertaPreTrainedModel:()=>r.RobertaPreTrainedModel,RobertaTokenizer:()=>n.RobertaTokenizer,Sam2ImageProcessor:()=>h.Sam2ImageProcessor,Sam2ImageSegmentationOutput:()=>r.Sam2ImageSegmentationOutput,Sam2Model:()=>r.Sam2Model,Sam2PreTrainedModel:()=>r.Sam2PreTrainedModel,Sam2Processor:()=>g.Sam2Processor,Sam2VideoProcessor:()=>g.Sam2VideoProcessor,Sam3ImageProcessor:()=>h.Sam3ImageProcessor,Sam3TrackerModel:()=>r.Sam3TrackerModel,SamImageProcessor:()=>h.SamImageProcessor,SamImageSegmentationOutput:()=>r.SamImageSegmentationOutput,SamModel:()=>r.SamModel,SamPreTrainedModel:()=>r.SamPreTrainedModel,SamProcessor:()=>g.SamProcessor,SapiensForDepthEstimation:()=>r.SapiensForDepthEstimation,SapiensForNormalEstimation:()=>r.SapiensForNormalEstimation,SapiensForSemanticSegmentation:()=>r.SapiensForSemanticSegmentation,SapiensPreTrainedModel:()=>r.SapiensPreTrainedModel,SeamlessM4TFeatureExtractor:()=>u.SeamlessM4TFeatureExtractor,SegformerFeatureExtractor:()=>h.SegformerFeatureExtractor,SegformerForImageClassification:()=>r.SegformerForImageClassification,SegformerForSemanticSegmentation:()=>r.SegformerForSemanticSegmentation,SegformerImageProcessor:()=>h.SegformerImageProcessor,SegformerModel:()=>r.SegformerModel,SegformerPreTrainedModel:()=>r.SegformerPreTrainedModel,Seq2SeqLMOutput:()=>r.Seq2SeqLMOutput,SequenceClassifierOutput:()=>r.SequenceClassifierOutput,SiglipImageProcessor:()=>h.SiglipImageProcessor,SiglipModel:()=>r.SiglipModel,SiglipPreTrainedModel:()=>r.SiglipPreTrainedModel,SiglipTextModel:()=>r.SiglipTextModel,SiglipTokenizer:()=>n.SiglipTokenizer,SiglipVisionModel:()=>r.SiglipVisionModel,SmolLM3ForCausalLM:()=>r.SmolLM3ForCausalLM,SmolLM3Model:()=>r.SmolLM3Model,SmolLM3PreTrainedModel:()=>r.SmolLM3PreTrainedModel,SmolVLMForConditionalGeneration:()=>r.SmolVLMForConditionalGeneration,SmolVLMImageProcessor:()=>h.SmolVLMImageProcessor,SmolVLMProcessor:()=>g.SmolVLMProcessor,SnacDecoderModel:()=>r.SnacDecoderModel,SnacEncoderModel:()=>r.SnacEncoderModel,SnacFeatureExtractor:()=>u.SnacFeatureExtractor,SnacModel:()=>r.SnacModel,SnacPreTrainedModel:()=>r.SnacPreTrainedModel,SpeechT5FeatureExtractor:()=>u.SpeechT5FeatureExtractor,SpeechT5ForSpeechToText:()=>r.SpeechT5ForSpeechToText,SpeechT5ForTextToSpeech:()=>r.SpeechT5ForTextToSpeech,SpeechT5HifiGan:()=>r.SpeechT5HifiGan,SpeechT5Model:()=>r.SpeechT5Model,SpeechT5PreTrainedModel:()=>r.SpeechT5PreTrainedModel,SpeechT5Processor:()=>g.SpeechT5Processor,SpeechT5Tokenizer:()=>n.SpeechT5Tokenizer,SqueezeBertForMaskedLM:()=>r.SqueezeBertForMaskedLM,SqueezeBertForQuestionAnswering:()=>r.SqueezeBertForQuestionAnswering,SqueezeBertForSequenceClassification:()=>r.SqueezeBertForSequenceClassification,SqueezeBertModel:()=>r.SqueezeBertModel,SqueezeBertPreTrainedModel:()=>r.SqueezeBertPreTrainedModel,SqueezeBertTokenizer:()=>n.SqueezeBertTokenizer,StableLmForCausalLM:()=>r.StableLmForCausalLM,StableLmModel:()=>r.StableLmModel,StableLmPreTrainedModel:()=>r.StableLmPreTrainedModel,Starcoder2ForCausalLM:()=>r.Starcoder2ForCausalLM,Starcoder2Model:()=>r.Starcoder2Model,Starcoder2PreTrainedModel:()=>r.Starcoder2PreTrainedModel,StoppingCriteria:()=>w.StoppingCriteria,StoppingCriteriaList:()=>w.StoppingCriteriaList,StyleTextToSpeech2Model:()=>r.StyleTextToSpeech2Model,StyleTextToSpeech2PreTrainedModel:()=>r.StyleTextToSpeech2PreTrainedModel,SummarizationPipeline:()=>t.SummarizationPipeline,SupertonicForConditionalGeneration:()=>r.SupertonicForConditionalGeneration,SupertonicPreTrainedModel:()=>r.SupertonicPreTrainedModel,SuppressTokensAtBeginLogitsProcessor:()=>b.SuppressTokensAtBeginLogitsProcessor,Swin2SRForImageSuperResolution:()=>r.Swin2SRForImageSuperResolution,Swin2SRImageProcessor:()=>h.Swin2SRImageProcessor,Swin2SRModel:()=>r.Swin2SRModel,Swin2SRPreTrainedModel:()=>r.Swin2SRPreTrainedModel,SwinForImageClassification:()=>r.SwinForImageClassification,SwinForSemanticSegmentation:()=>r.SwinForSemanticSegmentation,SwinModel:()=>r.SwinModel,SwinPreTrainedModel:()=>r.SwinPreTrainedModel,T5ForConditionalGeneration:()=>r.T5ForConditionalGeneration,T5Model:()=>r.T5Model,T5PreTrainedModel:()=>r.T5PreTrainedModel,T5Tokenizer:()=>n.T5Tokenizer,TableTransformerForObjectDetection:()=>r.TableTransformerForObjectDetection,TableTransformerModel:()=>r.TableTransformerModel,TableTransformerObjectDetectionOutput:()=>r.TableTransformerObjectDetectionOutput,TableTransformerPreTrainedModel:()=>r.TableTransformerPreTrainedModel,TemperatureLogitsWarper:()=>b.TemperatureLogitsWarper,Tensor:()=>l.Tensor,Text2TextGenerationPipeline:()=>t.Text2TextGenerationPipeline,TextClassificationPipeline:()=>t.TextClassificationPipeline,TextGenerationPipeline:()=>t.TextGenerationPipeline,TextStreamer:()=>y.TextStreamer,TextToAudioPipeline:()=>t.TextToAudioPipeline,TokenClassificationPipeline:()=>t.TokenClassificationPipeline,TokenClassifierOutput:()=>r.TokenClassifierOutput,TokenizerModel:()=>n.TokenizerModel,TopKLogitsWarper:()=>b.TopKLogitsWarper,TopPLogitsWarper:()=>b.TopPLogitsWarper,TrOCRForCausalLM:()=>r.TrOCRForCausalLM,TrOCRPreTrainedModel:()=>r.TrOCRPreTrainedModel,TranslationPipeline:()=>t.TranslationPipeline,UltravoxModel:()=>r.UltravoxModel,UltravoxPreTrainedModel:()=>r.UltravoxPreTrainedModel,UltravoxProcessor:()=>g.UltravoxProcessor,UniSpeechForCTC:()=>r.UniSpeechForCTC,UniSpeechForSequenceClassification:()=>r.UniSpeechForSequenceClassification,UniSpeechModel:()=>r.UniSpeechModel,UniSpeechPreTrainedModel:()=>r.UniSpeechPreTrainedModel,UniSpeechSatForAudioFrameClassification:()=>r.UniSpeechSatForAudioFrameClassification,UniSpeechSatForCTC:()=>r.UniSpeechSatForCTC,UniSpeechSatForSequenceClassification:()=>r.UniSpeechSatForSequenceClassification,UniSpeechSatModel:()=>r.UniSpeechSatModel,UniSpeechSatPreTrainedModel:()=>r.UniSpeechSatPreTrainedModel,VLChatProcessor:()=>g.VLChatProcessor,VLMImageProcessor:()=>h.VLMImageProcessor,VaultGemmaForCausalLM:()=>r.VaultGemmaForCausalLM,VaultGemmaModel:()=>r.VaultGemmaModel,VaultGemmaPreTrainedModel:()=>r.VaultGemmaPreTrainedModel,ViTFeatureExtractor:()=>h.ViTFeatureExtractor,ViTForImageClassification:()=>r.ViTForImageClassification,ViTImageProcessor:()=>h.ViTImageProcessor,ViTMAEModel:()=>r.ViTMAEModel,ViTMAEPreTrainedModel:()=>r.ViTMAEPreTrainedModel,ViTMSNForImageClassification:()=>r.ViTMSNForImageClassification,ViTMSNModel:()=>r.ViTMSNModel,ViTMSNPreTrainedModel:()=>r.ViTMSNPreTrainedModel,ViTModel:()=>r.ViTModel,ViTPreTrainedModel:()=>r.ViTPreTrainedModel,VisionEncoderDecoderModel:()=>r.VisionEncoderDecoderModel,VitMatteForImageMatting:()=>r.VitMatteForImageMatting,VitMatteImageProcessor:()=>h.VitMatteImageProcessor,VitMattePreTrainedModel:()=>r.VitMattePreTrainedModel,VitPoseForPoseEstimation:()=>r.VitPoseForPoseEstimation,VitPoseImageProcessor:()=>h.VitPoseImageProcessor,VitPosePreTrainedModel:()=>r.VitPosePreTrainedModel,VitsModel:()=>r.VitsModel,VitsModelOutput:()=>r.VitsModelOutput,VitsPreTrainedModel:()=>r.VitsPreTrainedModel,VitsTokenizer:()=>n.VitsTokenizer,VoxtralForConditionalGeneration:()=>r.VoxtralForConditionalGeneration,VoxtralProcessor:()=>g.VoxtralProcessor,Wav2Vec2BertForCTC:()=>r.Wav2Vec2BertForCTC,Wav2Vec2BertForSequenceClassification:()=>r.Wav2Vec2BertForSequenceClassification,Wav2Vec2BertModel:()=>r.Wav2Vec2BertModel,Wav2Vec2BertPreTrainedModel:()=>r.Wav2Vec2BertPreTrainedModel,Wav2Vec2CTCTokenizer:()=>n.Wav2Vec2CTCTokenizer,Wav2Vec2FeatureExtractor:()=>u.Wav2Vec2FeatureExtractor,Wav2Vec2ForAudioFrameClassification:()=>r.Wav2Vec2ForAudioFrameClassification,Wav2Vec2ForCTC:()=>r.Wav2Vec2ForCTC,Wav2Vec2ForSequenceClassification:()=>r.Wav2Vec2ForSequenceClassification,Wav2Vec2Model:()=>r.Wav2Vec2Model,Wav2Vec2PreTrainedModel:()=>r.Wav2Vec2PreTrainedModel,Wav2Vec2Processor:()=>g.Wav2Vec2Processor,Wav2Vec2ProcessorWithLM:()=>g.Wav2Vec2ProcessorWithLM,WavLMForAudioFrameClassification:()=>r.WavLMForAudioFrameClassification,WavLMForCTC:()=>r.WavLMForCTC,WavLMForSequenceClassification:()=>r.WavLMForSequenceClassification,WavLMForXVector:()=>r.WavLMForXVector,WavLMModel:()=>r.WavLMModel,WavLMPreTrainedModel:()=>r.WavLMPreTrainedModel,WeSpeakerFeatureExtractor:()=>u.WeSpeakerFeatureExtractor,WeSpeakerResNetModel:()=>r.WeSpeakerResNetModel,WeSpeakerResNetPreTrainedModel:()=>r.WeSpeakerResNetPreTrainedModel,WhisperFeatureExtractor:()=>u.WhisperFeatureExtractor,WhisperForConditionalGeneration:()=>r.WhisperForConditionalGeneration,WhisperModel:()=>r.WhisperModel,WhisperPreTrainedModel:()=>r.WhisperPreTrainedModel,WhisperProcessor:()=>g.WhisperProcessor,WhisperTextStreamer:()=>y.WhisperTextStreamer,WhisperTimeStampLogitsProcessor:()=>b.WhisperTimeStampLogitsProcessor,WhisperTokenizer:()=>n.WhisperTokenizer,XLMForQuestionAnswering:()=>r.XLMForQuestionAnswering,XLMForSequenceClassification:()=>r.XLMForSequenceClassification,XLMForTokenClassification:()=>r.XLMForTokenClassification,XLMModel:()=>r.XLMModel,XLMPreTrainedModel:()=>r.XLMPreTrainedModel,XLMRobertaForMaskedLM:()=>r.XLMRobertaForMaskedLM,XLMRobertaForQuestionAnswering:()=>r.XLMRobertaForQuestionAnswering,XLMRobertaForSequenceClassification:()=>r.XLMRobertaForSequenceClassification,XLMRobertaForTokenClassification:()=>r.XLMRobertaForTokenClassification,XLMRobertaModel:()=>r.XLMRobertaModel,XLMRobertaPreTrainedModel:()=>r.XLMRobertaPreTrainedModel,XLMRobertaTokenizer:()=>n.XLMRobertaTokenizer,XLMTokenizer:()=>n.XLMTokenizer,XLMWithLMHeadModel:()=>r.XLMWithLMHeadModel,XVectorOutput:()=>r.XVectorOutput,YolosFeatureExtractor:()=>h.YolosFeatureExtractor,YolosForObjectDetection:()=>r.YolosForObjectDetection,YolosImageProcessor:()=>h.YolosImageProcessor,YolosModel:()=>r.YolosModel,YolosObjectDetectionOutput:()=>r.YolosObjectDetectionOutput,YolosPreTrainedModel:()=>r.YolosPreTrainedModel,ZeroShotAudioClassificationPipeline:()=>t.ZeroShotAudioClassificationPipeline,ZeroShotClassificationPipeline:()=>t.ZeroShotClassificationPipeline,ZeroShotImageClassificationPipeline:()=>t.ZeroShotImageClassificationPipeline,ZeroShotObjectDetectionPipeline:()=>t.ZeroShotObjectDetectionPipeline,bankers_round:()=>d.bankers_round,cat:()=>l.cat,cos_sim:()=>d.cos_sim,dot:()=>d.dot,dynamic_time_warping:()=>d.dynamic_time_warping,env:()=>e.env,full:()=>l.full,full_like:()=>l.full_like,getCacheShapes:()=>s.getCacheShapes,hamming:()=>a.hamming,hanning:()=>a.hanning,interpolate:()=>l.interpolate,interpolate_4d:()=>l.interpolate_4d,interpolate_data:()=>d.interpolate_data,is_chinese_char:()=>n.is_chinese_char,layer_norm:()=>l.layer_norm,load_image:()=>o.load_image,load_video:()=>i.load_video,log_softmax:()=>d.log_softmax,magnitude:()=>d.magnitude,matmul:()=>l.matmul,max:()=>d.max,mean:()=>l.mean,mean_pooling:()=>l.mean_pooling,medianFilter:()=>d.medianFilter,mel_filter_bank:()=>a.mel_filter_bank,min:()=>d.min,ones:()=>l.ones,ones_like:()=>l.ones_like,permute:()=>l.permute,permute_data:()=>d.permute_data,pipeline:()=>t.pipeline,quantize_embeddings:()=>l.quantize_embeddings,rand:()=>l.rand,randn:()=>l.randn,read_audio:()=>a.read_audio,rfft:()=>l.rfft,round:()=>d.round,slice:()=>l.slice,softmax:()=>d.softmax,spectrogram:()=>a.spectrogram,stack:()=>l.stack,std_mean:()=>l.std_mean,topk:()=>l.topk,window_function:()=>a.window_function,zeros:()=>l.zeros,zeros_like:()=>l.zeros_like});var e=lr("./src/env.js"),t=lr("./src/pipelines.js"),r=lr("./src/models.js"),n=lr("./src/tokenizers.js"),s=lr("./src/configs.js"),a=lr("./src/utils/audio.js"),o=lr("./src/utils/image.js"),i=lr("./src/utils/video.js"),l=lr("./src/utils/tensor.js"),d=lr("./src/utils/maths.js"),p=lr("./src/base/feature_extraction_utils.js"),u=lr("./src/models/feature_extractors.js"),m=lr("./src/models/auto/feature_extraction_auto.js"),f=lr("./src/base/image_processors_utils.js"),h=lr("./src/models/image_processors.js"),_=lr("./src/models/auto/image_processing_auto.js"),v=lr("./src/base/processing_utils.js"),g=lr("./src/models/processors.js"),x=lr("./src/models/auto/processing_auto.js"),y=lr("./src/generation/streamers.js"),w=lr("./src/generation/stopping_criteria.js"),b=lr("./src/generation/logits_process.js")})();T.ASTFeatureExtractor;T.ASTForAudioClassification;T.ASTModel;T.ASTPreTrainedModel;T.AlbertForMaskedLM;T.AlbertForQuestionAnswering;T.AlbertForSequenceClassification;T.AlbertModel;T.AlbertPreTrainedModel;T.AlbertTokenizer;T.ArceeForCausalLM;T.ArceeModel;T.ArceePreTrainedModel;T.AudioClassificationPipeline;T.AutoConfig;T.AutoFeatureExtractor;T.AutoImageProcessor;T.AutoModel;T.AutoModelForAudioClassification;T.AutoModelForAudioFrameClassification;T.AutoModelForAudioTextToText;T.AutoModelForCTC;T.AutoModelForCausalLM;T.AutoModelForDepthEstimation;T.AutoModelForDocumentQuestionAnswering;T.AutoModelForImageClassification;T.AutoModelForImageFeatureExtraction;T.AutoModelForImageMatting;T.AutoModelForImageSegmentation;T.AutoModelForImageTextToText;T.AutoModelForImageToImage;T.AutoModelForMaskGeneration;T.AutoModelForMaskedLM;T.AutoModelForNormalEstimation;T.AutoModelForObjectDetection;T.AutoModelForPoseEstimation;T.AutoModelForQuestionAnswering;T.AutoModelForSemanticSegmentation;T.AutoModelForSeq2SeqLM;T.AutoModelForSequenceClassification;T.AutoModelForSpeechSeq2Seq;T.AutoModelForTextToSpectrogram;T.AutoModelForTextToWaveform;T.AutoModelForTokenClassification;T.AutoModelForUniversalSegmentation;T.AutoModelForVision2Seq;T.AutoModelForXVector;T.AutoModelForZeroShotObjectDetection;T.AutoProcessor;T.AutoTokenizer;T.AutomaticSpeechRecognitionPipeline;T.BackgroundRemovalPipeline;T.BartForConditionalGeneration;T.BartForSequenceClassification;T.BartModel;T.BartPretrainedModel;T.BartTokenizer;T.BaseModelOutput;T.BaseStreamer;T.BeitFeatureExtractor;T.BeitForImageClassification;T.BeitModel;T.BeitPreTrainedModel;T.BertForMaskedLM;T.BertForQuestionAnswering;T.BertForSequenceClassification;T.BertForTokenClassification;T.BertModel;T.BertPreTrainedModel;T.BertTokenizer;T.BitImageProcessor;T.BlenderbotForConditionalGeneration;T.BlenderbotModel;T.BlenderbotPreTrainedModel;T.BlenderbotSmallForConditionalGeneration;T.BlenderbotSmallModel;T.BlenderbotSmallPreTrainedModel;T.BlenderbotSmallTokenizer;T.BlenderbotTokenizer;T.BloomForCausalLM;T.BloomModel;T.BloomPreTrainedModel;T.BloomTokenizer;T.CLIPFeatureExtractor;T.CLIPImageProcessor;T.CLIPModel;T.CLIPPreTrainedModel;T.CLIPSegForImageSegmentation;T.CLIPSegModel;T.CLIPSegPreTrainedModel;T.CLIPTextModel;T.CLIPTextModelWithProjection;T.CLIPTokenizer;T.CLIPVisionModel;T.CLIPVisionModelWithProjection;T.CamembertForMaskedLM;T.CamembertForQuestionAnswering;T.CamembertForSequenceClassification;T.CamembertForTokenClassification;T.CamembertModel;T.CamembertPreTrainedModel;T.CamembertTokenizer;T.CausalLMOutput;T.CausalLMOutputWithPast;T.ChineseCLIPFeatureExtractor;T.ChineseCLIPModel;T.ChineseCLIPPreTrainedModel;T.ClapAudioModelWithProjection;T.ClapFeatureExtractor;T.ClapModel;T.ClapPreTrainedModel;T.ClapTextModelWithProjection;T.ClassifierFreeGuidanceLogitsProcessor;T.CodeGenForCausalLM;T.CodeGenModel;T.CodeGenPreTrainedModel;T.CodeGenTokenizer;T.CodeLlamaTokenizer;T.CohereForCausalLM;T.CohereModel;T.CoherePreTrainedModel;T.CohereTokenizer;T.ConvBertForMaskedLM;T.ConvBertForQuestionAnswering;T.ConvBertForSequenceClassification;T.ConvBertForTokenClassification;T.ConvBertModel;T.ConvBertPreTrainedModel;T.ConvBertTokenizer;T.ConvNextFeatureExtractor;T.ConvNextForImageClassification;T.ConvNextImageProcessor;T.ConvNextModel;T.ConvNextPreTrainedModel;T.ConvNextV2ForImageClassification;T.ConvNextV2Model;T.ConvNextV2PreTrainedModel;T.DFineForObjectDetection;T.DFineModel;T.DFinePreTrainedModel;T.DINOv3ConvNextModel;T.DINOv3ConvNextPreTrainedModel;T.DINOv3ViTImageProcessor;T.DINOv3ViTModel;T.DINOv3ViTPreTrainedModel;T.DPTFeatureExtractor;T.DPTForDepthEstimation;T.DPTImageProcessor;T.DPTModel;T.DPTPreTrainedModel;T.DacDecoderModel;T.DacDecoderOutput;T.DacEncoderModel;T.DacEncoderOutput;T.DacFeatureExtractor;T.DacModel;T.DacPreTrainedModel;T.DataTypeMap;T.DebertaForMaskedLM;T.DebertaForQuestionAnswering;T.DebertaForSequenceClassification;T.DebertaForTokenClassification;T.DebertaModel;T.DebertaPreTrainedModel;T.DebertaTokenizer;T.DebertaV2ForMaskedLM;T.DebertaV2ForQuestionAnswering;T.DebertaV2ForSequenceClassification;T.DebertaV2ForTokenClassification;T.DebertaV2Model;T.DebertaV2PreTrainedModel;T.DebertaV2Tokenizer;T.DecisionTransformerModel;T.DecisionTransformerPreTrainedModel;T.DeiTFeatureExtractor;T.DeiTForImageClassification;T.DeiTImageProcessor;T.DeiTModel;T.DeiTPreTrainedModel;T.DepthAnythingForDepthEstimation;T.DepthAnythingPreTrainedModel;T.DepthEstimationPipeline;T.DepthProForDepthEstimation;T.DepthProPreTrainedModel;T.DetrFeatureExtractor;T.DetrForObjectDetection;T.DetrForSegmentation;T.DetrImageProcessor;T.DetrModel;T.DetrObjectDetectionOutput;T.DetrPreTrainedModel;T.DetrSegmentationOutput;T.Dinov2ForImageClassification;T.Dinov2Model;T.Dinov2PreTrainedModel;T.Dinov2WithRegistersForImageClassification;T.Dinov2WithRegistersModel;T.Dinov2WithRegistersPreTrainedModel;T.DistilBertForMaskedLM;T.DistilBertForQuestionAnswering;T.DistilBertForSequenceClassification;T.DistilBertForTokenClassification;T.DistilBertModel;T.DistilBertPreTrainedModel;T.DistilBertTokenizer;T.DocumentQuestionAnsweringPipeline;T.DonutFeatureExtractor;T.DonutImageProcessor;T.DonutSwinModel;T.DonutSwinPreTrainedModel;T.EdgeTamModel;T.EfficientNetForImageClassification;T.EfficientNetImageProcessor;T.EfficientNetModel;T.EfficientNetPreTrainedModel;T.ElectraForMaskedLM;T.ElectraForQuestionAnswering;T.ElectraForSequenceClassification;T.ElectraForTokenClassification;T.ElectraModel;T.ElectraPreTrainedModel;T.ElectraTokenizer;T.EncodecFeatureExtractor;T.EosTokenCriteria;T.Ernie4_5_ForCausalLM;T.Ernie4_5_Model;T.Ernie4_5_PretrainedModel;T.Ernie4_5_Tokenizer;T.EsmForMaskedLM;T.EsmForSequenceClassification;T.EsmForTokenClassification;T.EsmModel;T.EsmPreTrainedModel;T.EsmTokenizer;T.ExaoneForCausalLM;T.ExaoneModel;T.ExaonePreTrainedModel;T.FFT;T.FalconForCausalLM;T.FalconModel;T.FalconPreTrainedModel;T.FalconTokenizer;T.FastViTForImageClassification;T.FastViTModel;T.FastViTPreTrainedModel;T.FeatureExtractionPipeline;T.FeatureExtractor;T.FillMaskPipeline;T.Florence2ForConditionalGeneration;T.Florence2PreTrainedModel;T.Florence2Processor;T.ForcedBOSTokenLogitsProcessor;T.ForcedEOSTokenLogitsProcessor;T.GLPNFeatureExtractor;T.GLPNForDepthEstimation;T.GLPNModel;T.GLPNPreTrainedModel;T.GPT2LMHeadModel;T.GPT2Model;T.GPT2PreTrainedModel;T.GPT2Tokenizer;T.GPTBigCodeForCausalLM;T.GPTBigCodeModel;T.GPTBigCodePreTrainedModel;T.GPTJForCausalLM;T.GPTJModel;T.GPTJPreTrainedModel;T.GPTNeoForCausalLM;T.GPTNeoModel;T.GPTNeoPreTrainedModel;T.GPTNeoXForCausalLM;T.GPTNeoXModel;T.GPTNeoXPreTrainedModel;T.GPTNeoXTokenizer;T.Gemma2ForCausalLM;T.Gemma2Model;T.Gemma2PreTrainedModel;T.Gemma3ForCausalLM;T.Gemma3Model;T.Gemma3PreTrainedModel;T.Gemma3nAudioFeatureExtractor;T.Gemma3nForConditionalGeneration;T.Gemma3nPreTrainedModel;T.Gemma3nProcessor;T.GemmaForCausalLM;T.GemmaModel;T.GemmaPreTrainedModel;T.GemmaTokenizer;T.GlmForCausalLM;T.GlmModel;T.GlmPreTrainedModel;T.GraniteForCausalLM;T.GraniteModel;T.GraniteMoeHybridForCausalLM;T.GraniteMoeHybridModel;T.GraniteMoeHybridPreTrainedModel;T.GranitePreTrainedModel;T.Grok1Tokenizer;T.GroundingDinoForObjectDetection;T.GroundingDinoImageProcessor;T.GroundingDinoPreTrainedModel;T.GroundingDinoProcessor;T.GroupViTModel;T.GroupViTPreTrainedModel;T.HeliumForCausalLM;T.HeliumModel;T.HeliumPreTrainedModel;T.HerbertTokenizer;T.HieraForImageClassification;T.HieraModel;T.HieraPreTrainedModel;T.HubertForCTC;T.HubertForSequenceClassification;T.HubertModel;T.HubertPreTrainedModel;T.IJepaForImageClassification;T.IJepaModel;T.IJepaPreTrainedModel;T.Idefics3ForConditionalGeneration;T.Idefics3ImageProcessor;T.Idefics3PreTrainedModel;T.Idefics3Processor;T.ImageClassificationPipeline;T.ImageFeatureExtractionPipeline;T.ImageFeatureExtractor;T.ImageMattingOutput;T.ImageProcessor;T.ImageSegmentationPipeline;T.ImageToImagePipeline;T.ImageToTextPipeline;T.InterruptableStoppingCriteria;T.JAISLMHeadModel;T.JAISModel;T.JAISPreTrainedModel;T.JinaCLIPImageProcessor;T.JinaCLIPModel;T.JinaCLIPPreTrainedModel;T.JinaCLIPProcessor;T.JinaCLIPTextModel;T.JinaCLIPVisionModel;T.Lfm2ForCausalLM;T.Lfm2Model;T.Lfm2PreTrainedModel;T.LiteWhisperForConditionalGeneration;T.Llama4ForCausalLM;T.Llama4PreTrainedModel;T.LlamaForCausalLM;T.LlamaModel;T.LlamaPreTrainedModel;T.LlamaTokenizer;T.LlavaForConditionalGeneration;T.LlavaOnevisionForConditionalGeneration;T.LlavaOnevisionImageProcessor;T.LlavaPreTrainedModel;T.LlavaProcessor;T.LlavaQwen2ForCausalLM;T.LogitsProcessor;T.LogitsProcessorList;T.LogitsWarper;T.LongT5ForConditionalGeneration;T.LongT5Model;T.LongT5PreTrainedModel;T.M2M100ForConditionalGeneration;T.M2M100Model;T.M2M100PreTrainedModel;T.M2M100Tokenizer;T.MBart50Tokenizer;T.MBartForCausalLM;T.MBartForConditionalGeneration;T.MBartForSequenceClassification;T.MBartModel;T.MBartPreTrainedModel;T.MBartTokenizer;T.MPNetForMaskedLM;T.MPNetForQuestionAnswering;T.MPNetForSequenceClassification;T.MPNetForTokenClassification;T.MPNetModel;T.MPNetPreTrainedModel;T.MPNetTokenizer;T.MT5ForConditionalGeneration;T.MT5Model;T.MT5PreTrainedModel;T.MarianMTModel;T.MarianModel;T.MarianPreTrainedModel;T.MarianTokenizer;T.Mask2FormerImageProcessor;T.MaskFormerFeatureExtractor;T.MaskFormerForInstanceSegmentation;T.MaskFormerImageProcessor;T.MaskFormerModel;T.MaskFormerPreTrainedModel;T.MaskedLMOutput;T.MaxLengthCriteria;T.Metric3DForDepthEstimation;T.Metric3DPreTrainedModel;T.Metric3Dv2ForDepthEstimation;T.Metric3Dv2PreTrainedModel;T.MgpstrForSceneTextRecognition;T.MgpstrModelOutput;T.MgpstrPreTrainedModel;T.MgpstrProcessor;T.MgpstrTokenizer;T.MimiDecoderModel;T.MimiDecoderOutput;T.MimiEncoderModel;T.MimiEncoderOutput;T.MimiModel;T.MimiPreTrainedModel;T.MinLengthLogitsProcessor;T.MinNewTokensLengthLogitsProcessor;T.MistralForCausalLM;T.MistralModel;T.MistralPreTrainedModel;T.MobileBertForMaskedLM;T.MobileBertForQuestionAnswering;T.MobileBertForSequenceClassification;T.MobileBertModel;T.MobileBertPreTrainedModel;T.MobileBertTokenizer;T.MobileLLMForCausalLM;T.MobileLLMModel;T.MobileLLMPreTrainedModel;T.MobileNetV1FeatureExtractor;T.MobileNetV1ForImageClassification;T.MobileNetV1ForSemanticSegmentation;T.MobileNetV1ImageProcessor;T.MobileNetV1Model;T.MobileNetV1PreTrainedModel;T.MobileNetV2FeatureExtractor;T.MobileNetV2ForImageClassification;T.MobileNetV2ForSemanticSegmentation;T.MobileNetV2ImageProcessor;T.MobileNetV2Model;T.MobileNetV2PreTrainedModel;T.MobileNetV3FeatureExtractor;T.MobileNetV3ForImageClassification;T.MobileNetV3ForSemanticSegmentation;T.MobileNetV3ImageProcessor;T.MobileNetV3Model;T.MobileNetV3PreTrainedModel;T.MobileNetV4FeatureExtractor;T.MobileNetV4ForImageClassification;T.MobileNetV4ForSemanticSegmentation;T.MobileNetV4ImageProcessor;T.MobileNetV4Model;T.MobileNetV4PreTrainedModel;T.MobileViTFeatureExtractor;T.MobileViTForImageClassification;T.MobileViTImageProcessor;T.MobileViTModel;T.MobileViTPreTrainedModel;T.MobileViTV2ForImageClassification;T.MobileViTV2Model;T.MobileViTV2PreTrainedModel;T.ModelOutput;T.ModernBertDecoderForCausalLM;T.ModernBertDecoderModel;T.ModernBertDecoderPreTrainedModel;T.ModernBertForMaskedLM;T.ModernBertForSequenceClassification;T.ModernBertForTokenClassification;T.ModernBertModel;T.ModernBertPreTrainedModel;T.Moondream1ForConditionalGeneration;T.MoonshineFeatureExtractor;T.MoonshineForConditionalGeneration;T.MoonshineModel;T.MoonshinePreTrainedModel;T.MoonshineProcessor;T.MptForCausalLM;T.MptModel;T.MptPreTrainedModel;T.MultiModalityCausalLM;T.MultiModalityPreTrainedModel;T.MusicgenForCausalLM;T.MusicgenForConditionalGeneration;T.MusicgenModel;T.MusicgenPreTrainedModel;T.NanoChatForCausalLM;T.NanoChatModel;T.NanoChatPreTrainedModel;T.NeoBertForMaskedLM;T.NeoBertForQuestionAnswering;T.NeoBertForSequenceClassification;T.NeoBertForTokenClassification;T.NeoBertModel;T.NeoBertPreTrainedModel;T.NllbTokenizer;T.NoBadWordsLogitsProcessor;T.NoRepeatNGramLogitsProcessor;T.NomicBertModel;T.NomicBertPreTrainedModel;T.NougatImageProcessor;T.NougatTokenizer;T.OPTForCausalLM;T.OPTModel;T.OPTPreTrainedModel;T.ObjectDetectionPipeline;T.Olmo2ForCausalLM;T.Olmo2Model;T.Olmo2PreTrainedModel;T.OlmoForCausalLM;T.OlmoModel;T.OlmoPreTrainedModel;T.OpenELMForCausalLM;T.OpenELMModel;T.OpenELMPreTrainedModel;T.OwlViTFeatureExtractor;T.OwlViTForObjectDetection;T.OwlViTImageProcessor;T.OwlViTModel;T.OwlViTPreTrainedModel;T.OwlViTProcessor;T.Owlv2ForObjectDetection;T.Owlv2ImageProcessor;T.Owlv2Model;T.Owlv2PreTrainedModel;T.PaliGemmaForConditionalGeneration;T.PaliGemmaPreTrainedModel;T.PaliGemmaProcessor;T.ParakeetFeatureExtractor;T.ParakeetForCTC;T.ParakeetPreTrainedModel;T.PatchTSMixerForPrediction;T.PatchTSMixerModel;T.PatchTSMixerPreTrainedModel;T.PatchTSTForPrediction;T.PatchTSTModel;T.PatchTSTPreTrainedModel;T.Phi3ForCausalLM;T.Phi3Model;T.Phi3PreTrainedModel;T.Phi3VForCausalLM;T.Phi3VImageProcessor;T.Phi3VPreTrainedModel;T.Phi3VProcessor;T.PhiForCausalLM;T.PhiModel;T.PhiPreTrainedModel;T.Pipeline;T.PreTrainedModel;T.PreTrainedTokenizer;T.PretrainedConfig;T.PretrainedMixin;T.Processor;T.PvtForImageClassification;T.PvtImageProcessor;T.PvtModel;T.PvtPreTrainedModel;T.PyAnnoteFeatureExtractor;T.PyAnnoteForAudioFrameClassification;T.PyAnnoteModel;T.PyAnnotePreTrainedModel;T.PyAnnoteProcessor;T.QuestionAnsweringModelOutput;T.QuestionAnsweringPipeline;T.Qwen2ForCausalLM;T.Qwen2Model;T.Qwen2PreTrainedModel;T.Qwen2Tokenizer;T.Qwen2VLForConditionalGeneration;T.Qwen2VLImageProcessor;T.Qwen2VLPreTrainedModel;T.Qwen2VLProcessor;T.Qwen3ForCausalLM;T.Qwen3Model;T.Qwen3PreTrainedModel;T.RFDetrForObjectDetection;T.RFDetrModel;T.RFDetrObjectDetectionOutput;T.RFDetrPreTrainedModel;T.RTDetrForObjectDetection;T.RTDetrImageProcessor;T.RTDetrModel;T.RTDetrObjectDetectionOutput;T.RTDetrPreTrainedModel;T.RTDetrV2ForObjectDetection;T.RTDetrV2Model;T.RTDetrV2ObjectDetectionOutput;T.RTDetrV2PreTrainedModel;T.RawAudio;T.RawImage;T.RawVideo;T.RawVideoFrame;T.RepetitionPenaltyLogitsProcessor;T.ResNetForImageClassification;T.ResNetModel;T.ResNetPreTrainedModel;T.RoFormerForMaskedLM;T.RoFormerForQuestionAnswering;T.RoFormerForSequenceClassification;T.RoFormerForTokenClassification;T.RoFormerModel;T.RoFormerPreTrainedModel;T.RoFormerTokenizer;T.RobertaForMaskedLM;T.RobertaForQuestionAnswering;T.RobertaForSequenceClassification;T.RobertaForTokenClassification;T.RobertaModel;T.RobertaPreTrainedModel;T.RobertaTokenizer;T.Sam2ImageProcessor;T.Sam2ImageSegmentationOutput;T.Sam2Model;T.Sam2PreTrainedModel;T.Sam2Processor;T.Sam2VideoProcessor;T.Sam3ImageProcessor;T.Sam3TrackerModel;T.SamImageProcessor;T.SamImageSegmentationOutput;T.SamModel;T.SamPreTrainedModel;T.SamProcessor;T.SapiensForDepthEstimation;T.SapiensForNormalEstimation;T.SapiensForSemanticSegmentation;T.SapiensPreTrainedModel;T.SeamlessM4TFeatureExtractor;T.SegformerFeatureExtractor;T.SegformerForImageClassification;T.SegformerForSemanticSegmentation;T.SegformerImageProcessor;T.SegformerModel;T.SegformerPreTrainedModel;T.Seq2SeqLMOutput;T.SequenceClassifierOutput;T.SiglipImageProcessor;T.SiglipModel;T.SiglipPreTrainedModel;T.SiglipTextModel;T.SiglipTokenizer;T.SiglipVisionModel;T.SmolLM3ForCausalLM;T.SmolLM3Model;T.SmolLM3PreTrainedModel;T.SmolVLMForConditionalGeneration;T.SmolVLMImageProcessor;T.SmolVLMProcessor;T.SnacDecoderModel;T.SnacEncoderModel;T.SnacFeatureExtractor;T.SnacModel;T.SnacPreTrainedModel;T.SpeechT5FeatureExtractor;T.SpeechT5ForSpeechToText;T.SpeechT5ForTextToSpeech;T.SpeechT5HifiGan;T.SpeechT5Model;T.SpeechT5PreTrainedModel;T.SpeechT5Processor;T.SpeechT5Tokenizer;T.SqueezeBertForMaskedLM;T.SqueezeBertForQuestionAnswering;T.SqueezeBertForSequenceClassification;T.SqueezeBertModel;T.SqueezeBertPreTrainedModel;T.SqueezeBertTokenizer;T.StableLmForCausalLM;T.StableLmModel;T.StableLmPreTrainedModel;T.Starcoder2ForCausalLM;T.Starcoder2Model;T.Starcoder2PreTrainedModel;T.StoppingCriteria;T.StoppingCriteriaList;T.StyleTextToSpeech2Model;T.StyleTextToSpeech2PreTrainedModel;T.SummarizationPipeline;T.SupertonicForConditionalGeneration;T.SupertonicPreTrainedModel;T.SuppressTokensAtBeginLogitsProcessor;T.Swin2SRForImageSuperResolution;T.Swin2SRImageProcessor;T.Swin2SRModel;T.Swin2SRPreTrainedModel;T.SwinForImageClassification;T.SwinForSemanticSegmentation;T.SwinModel;T.SwinPreTrainedModel;T.T5ForConditionalGeneration;T.T5Model;T.T5PreTrainedModel;T.T5Tokenizer;T.TableTransformerForObjectDetection;T.TableTransformerModel;T.TableTransformerObjectDetectionOutput;T.TableTransformerPreTrainedModel;T.TemperatureLogitsWarper;T.Tensor;T.Text2TextGenerationPipeline;T.TextClassificationPipeline;T.TextGenerationPipeline;T.TextStreamer;T.TextToAudioPipeline;T.TokenClassificationPipeline;T.TokenClassifierOutput;T.TokenizerModel;T.TopKLogitsWarper;T.TopPLogitsWarper;T.TrOCRForCausalLM;T.TrOCRPreTrainedModel;T.TranslationPipeline;T.UltravoxModel;T.UltravoxPreTrainedModel;T.UltravoxProcessor;T.UniSpeechForCTC;T.UniSpeechForSequenceClassification;T.UniSpeechModel;T.UniSpeechPreTrainedModel;T.UniSpeechSatForAudioFrameClassification;T.UniSpeechSatForCTC;T.UniSpeechSatForSequenceClassification;T.UniSpeechSatModel;T.UniSpeechSatPreTrainedModel;T.VLChatProcessor;T.VLMImageProcessor;T.VaultGemmaForCausalLM;T.VaultGemmaModel;T.VaultGemmaPreTrainedModel;T.ViTFeatureExtractor;T.ViTForImageClassification;T.ViTImageProcessor;T.ViTMAEModel;T.ViTMAEPreTrainedModel;T.ViTMSNForImageClassification;T.ViTMSNModel;T.ViTMSNPreTrainedModel;T.ViTModel;T.ViTPreTrainedModel;T.VisionEncoderDecoderModel;T.VitMatteForImageMatting;T.VitMatteImageProcessor;T.VitMattePreTrainedModel;T.VitPoseForPoseEstimation;T.VitPoseImageProcessor;T.VitPosePreTrainedModel;T.VitsModel;T.VitsModelOutput;T.VitsPreTrainedModel;T.VitsTokenizer;T.VoxtralForConditionalGeneration;T.VoxtralProcessor;T.Wav2Vec2BertForCTC;T.Wav2Vec2BertForSequenceClassification;T.Wav2Vec2BertModel;T.Wav2Vec2BertPreTrainedModel;T.Wav2Vec2CTCTokenizer;T.Wav2Vec2FeatureExtractor;T.Wav2Vec2ForAudioFrameClassification;T.Wav2Vec2ForCTC;T.Wav2Vec2ForSequenceClassification;T.Wav2Vec2Model;T.Wav2Vec2PreTrainedModel;T.Wav2Vec2Processor;T.Wav2Vec2ProcessorWithLM;T.WavLMForAudioFrameClassification;T.WavLMForCTC;T.WavLMForSequenceClassification;T.WavLMForXVector;T.WavLMModel;T.WavLMPreTrainedModel;T.WeSpeakerFeatureExtractor;T.WeSpeakerResNetModel;T.WeSpeakerResNetPreTrainedModel;T.WhisperFeatureExtractor;T.WhisperForConditionalGeneration;T.WhisperModel;T.WhisperPreTrainedModel;T.WhisperProcessor;T.WhisperTextStreamer;T.WhisperTimeStampLogitsProcessor;T.WhisperTokenizer;T.XLMForQuestionAnswering;T.XLMForSequenceClassification;T.XLMForTokenClassification;T.XLMModel;T.XLMPreTrainedModel;T.XLMRobertaForMaskedLM;T.XLMRobertaForQuestionAnswering;T.XLMRobertaForSequenceClassification;T.XLMRobertaForTokenClassification;T.XLMRobertaModel;T.XLMRobertaPreTrainedModel;T.XLMRobertaTokenizer;T.XLMTokenizer;T.XLMWithLMHeadModel;T.XVectorOutput;T.YolosFeatureExtractor;T.YolosForObjectDetection;T.YolosImageProcessor;T.YolosModel;T.YolosObjectDetectionOutput;T.YolosPreTrainedModel;T.ZeroShotAudioClassificationPipeline;T.ZeroShotClassificationPipeline;T.ZeroShotImageClassificationPipeline;T.ZeroShotObjectDetectionPipeline;T.bankers_round;T.cat;T.cos_sim;T.dot;T.dynamic_time_warping;var nz=T.env;T.full;T.full_like;T.getCacheShapes;T.hamming;T.hanning;T.interpolate;T.interpolate_4d;T.interpolate_data;T.is_chinese_char;T.layer_norm;T.load_image;T.load_video;T.log_softmax;T.magnitude;T.matmul;T.max;T.mean;T.mean_pooling;T.medianFilter;T.mel_filter_bank;T.min;T.ones;T.ones_like;T.permute;T.permute_data;var xQ=T.pipeline;T.quantize_embeddings;T.rand;T.randn;T.read_audio;T.rfft;T.round;T.slice;T.softmax;T.spectrogram;T.stack;T.std_mean;T.topk;T.window_function;T.zeros;T.zeros_like;nz.allowLocalModels=!1;nz.useBrowserCache=!1;const xc=1024;function vQ(e,t,r){let n=r.naturalWidth,s=r.naturalHeight;return n>xc||s>xc?(n>s?(s=Math.round(s*xc/n),n=xc):(n=Math.round(n*xc/s),s=xc),e.width=n,e.height=s,t.drawImage(r,0,0,n,s),!0):(e.width=n,e.height=s,t.drawImage(r,0,0),!1)}const yQ=async e=>{try{console.log("Starting background removal process...");const t=await xQ("image-segmentation","Xenova/segformer-b0-finetuned-ade-512-512",{device:"webgpu"}),r=document.createElement("canvas"),n=r.getContext("2d");if(!n)throw new Error("Could not get canvas context");const s=vQ(r,n,e);console.log(`Image ${s?"was":"was not"} resized. Final dimensions: ${r.width}x${r.height}`);const a=r.toDataURL("image/jpeg",.8);console.log("Image converted to base64"),console.log("Processing with segmentation model...");const o=await t(a);if(console.log("Segmentation result:",o),!o||!Array.isArray(o)||o.length===0||!o[0].mask)throw new Error("Invalid segmentation result");const i=document.createElement("canvas");i.width=r.width,i.height=r.height;const l=i.getContext("2d");if(!l)throw new Error("Could not get output canvas context");l.drawImage(r,0,0);const d=l.getImageData(0,0,i.width,i.height),p=d.data;for(let u=0;u<o[0].mask.data.length;u++){const m=Math.round((1-o[0].mask.data[u])*255);p[u*4+3]=m}return l.putImageData(d,0,0),console.log("Mask applied successfully"),new Promise((u,m)=>{i.toBlob(f=>{f?(console.log("Successfully created final blob"),u(f)):m(new Error("Failed to create blob"))},"image/png",1)})}catch(t){throw console.error("Error removing background:",t),t}},wQ=e=>new Promise((t,r)=>{const n=new Image;n.onload=()=>t(n),n.onerror=r,n.src=URL.createObjectURL(e)});function bQ(){const[e,t]=k.useState(!1),[r,n]=k.useState(null),s=async()=>{t(!0),qr.info("Processando imagem...",{description:"Removendo fundo branco da logo. Isso pode levar alguns segundos."});try{const i=await(await fetch(fd)).blob(),l=await wQ(i),d=await yQ(l),p=URL.createObjectURL(d);n(p),qr.success("Fundo removido com sucesso!",{description:'Clique em "Baixar" para salvar a logo sem fundo.'})}catch(o){console.error("Error processing image:",o),qr.error("Erro ao processar imagem",{description:"No foi possvel remover o fundo. Tente novamente."})}finally{t(!1)}},a=()=>{if(r){const o=document.createElement("a");o.href=r,o.download="pecem-logo-sem-fundo.png",document.body.appendChild(o),o.click(),document.body.removeChild(o),qr.success("Download iniciado!")}};return c.jsx("div",{className:"min-h-screen bg-background p-8",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs(ot,{className:"p-8",children:[c.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Processador de Logo - Remover Fundo"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Logo Original"}),c.jsx("div",{className:"bg-muted rounded-lg p-4 flex items-center justify-center min-h-[200px]",children:c.jsx("img",{src:fd,alt:"Logo original",className:"max-w-full h-auto"})})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Logo Processada"}),c.jsx("div",{className:"bg-muted rounded-lg p-4 flex items-center justify-center min-h-[200px]",children:r?c.jsx("img",{src:r,alt:"Logo sem fundo",className:"max-w-full h-auto"}):c.jsx("p",{className:"text-muted-foreground",children:"Aguardando processamento..."})})]})]}),c.jsxs("div",{className:"flex gap-4 justify-center mt-8",children:[c.jsxs(ze,{onClick:s,disabled:e,size:"lg",children:[c.jsx(DU,{className:"mr-2 h-5 w-5"}),e?"Processando...":"Processar Logo"]}),r&&c.jsxs(ze,{onClick:a,variant:"secondary",size:"lg",children:[c.jsx(Ru,{className:"mr-2 h-5 w-5"}),"Baixar Logo Processada"]})]}),c.jsxs("div",{className:"mt-8 p-4 bg-muted rounded-lg",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Instrues:"}),c.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:[c.jsx("li",{children:'Clique em "Processar Logo" para remover o fundo branco'}),c.jsx("li",{children:"Aguarde alguns segundos enquanto a IA processa a imagem"}),c.jsx("li",{children:"Visualize o resultado no painel direito"}),c.jsx("li",{children:'Clique em "Baixar" para salvar a logo sem fundo'}),c.jsx("li",{children:"Substitua o arquivo em src/assets/pecem-logo.png"})]})]})]})})})}var zb="Progress",Bb=100,[MQ,bZ]=Ns(zb),[TQ,EQ]=MQ(zb),sz=k.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:a=CQ,...o}=e;(s||s===0)&&!MI(s)&&console.error(PQ(`${s}`,"Progress"));const i=MI(s)?s:Bb;n!==null&&!TI(n,i)&&console.error(SQ(`${n}`,"Progress"));const l=TI(n,i)?n:null,d=Ah(l)?a(l,i):void 0;return c.jsx(TQ,{scope:r,value:l,max:i,children:c.jsx(At.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Ah(l)?l:void 0,"aria-valuetext":d,role:"progressbar","data-state":iz(l,i),"data-value":l??void 0,"data-max":i,...o,ref:t})})});sz.displayName=zb;var az="ProgressIndicator",oz=k.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,s=EQ(az,r);return c.jsx(At.div,{"data-state":iz(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:t})});oz.displayName=az;function CQ(e,t){return`${Math.round(e/t*100)}%`}function iz(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ah(e){return typeof e=="number"}function MI(e){return Ah(e)&&!isNaN(e)&&e>0}function TI(e,t){return Ah(e)&&!isNaN(e)&&e<=t&&e>=0}function PQ(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Bb}\`.`}function SQ(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Bb} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lz=sz,kQ=oz;const Oi=k.forwardRef(({className:e,value:t,...r},n)=>c.jsx(lz,{ref:n,className:zt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:c.jsx(kQ,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Oi.displayName=lz.displayName;const jQ=Sm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Tt({className:e,variant:t,...r}){return c.jsx("div",{className:zt(jQ({variant:t}),e),...r})}const cz=({job:e,company:t,matchScore:r,showMatchScore:n=!0})=>{const s=sn(),a=(i,l)=>`R$ ${i.toLocaleString("pt-BR")} - R$ ${l.toLocaleString("pt-BR")}`,o=i=>i>=80?"bg-success text-success-foreground":i>=60?"bg-warning text-warning-foreground":"bg-muted text-muted-foreground";return c.jsx(ot,{className:"p-4 hover:shadow-lg transition-all cursor-pointer card-elevated","data-aos":"fade-up","data-aos-duration":"800",children:c.jsxs("div",{className:"space-y-3",onClick:()=>s(`/candidato/vaga/${e.id}`),role:"button",tabIndex:0,onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&s(`/candidato/vaga/${e.id}`)},"aria-label":`Ver detalhes da vaga: ${e.title} na ${t.name}`,children:[c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg text-foreground mb-1",children:e.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:t.name})]}),n&&r!==void 0&&c.jsxs(Tt,{className:`${o(r)} flex items-center gap-1`,"aria-label":`Compatibilidade de ${r}%`,children:[c.jsx(Lo,{className:"h-3 w-3","aria-hidden":"true"}),r,"% Match"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ai,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{children:e.location})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Rn,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{children:e.regime})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Tt,{variant:"outline",children:e.category}),e.restrictions.pcdExclusive&&c.jsx(Tt,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:"Exclusiva PCD"}),e.restrictions.womenExclusive&&c.jsx(Tt,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",children:"Exclusiva Mulheres"})]}),c.jsx("div",{className:"pt-2 border-t border-border",children:c.jsx("p",{className:"text-sm font-medium text-foreground",children:a(e.salary.min,e.salary.max)})}),c.jsx(ze,{className:"w-full mt-2","aria-label":`Candidatar-se para ${e.title}`,onClick:i=>{i.stopPropagation(),s(`/candidato/vaga/${e.id}`)},children:"Ver Detalhes"})]})})},Gc=({course:e,progress:t,showProgress:r=!1,compact:n=!1})=>{const s=sn(),a=p=>{switch(p){case"ead":return c.jsx($3,{className:"h-3 w-3","aria-hidden":"true"});case"presencial":return c.jsx(so,{className:"h-3 w-3","aria-hidden":"true"});case"hibrido":return c.jsx(Cs,{className:"h-3 w-3","aria-hidden":"true"});default:return c.jsx(Cs,{className:"h-3 w-3","aria-hidden":"true"})}},o=p=>{switch(p){case"ead":return"EAD";case"presencial":return"Presencial";case"hibrido":return"Hbrido";default:return p}},i=p=>{switch(p){case"basico":return"bg-success/10 text-success border-success/20";case"intermediario":return"bg-warning/10 text-warning border-warning/20";case"avancado":return"bg-destructive/10 text-destructive border-destructive/20";default:return"bg-muted text-muted-foreground"}},l=p=>{switch(p){case"basico":return"Bsico";case"intermediario":return"Intermedirio";case"avancado":return"Avanado";default:return p}},d=()=>{r&&(t==null?void 0:t.status)==="in_progress"?s(`/capacitacao/aprender/${e.id}`):r&&(t==null?void 0:t.status)==="completed"?s(`/capacitacao/curso/${e.id}`):s(`/capacitacao/curso/${e.id}`)};return n?c.jsx(ot,{className:"p-3 sm:p-4 hover:shadow-md transition-all cursor-pointer",onClick:d,role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&d()},"aria-label":`${e.title} - ${e.instructor}`,children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-sm sm:text-base truncate",children:e.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:e.instructor})]}),c.jsxs(Tt,{variant:"outline",className:"text-xs flex-shrink-0",children:[a(e.mode),c.jsx("span",{className:"ml-1",children:o(e.mode)})]})]}),r&&t&&c.jsxs("div",{className:"space-y-1",children:[c.jsx(Oi,{value:t.progressPercentage,className:"h-2"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.progressPercentage,"% concludo"]})]})]})}):c.jsx(ot,{className:"overflow-hidden hover:shadow-lg transition-all cursor-pointer card-elevated","data-aos":"fade-up","data-aos-duration":"800",children:c.jsxs("div",{onClick:d,role:"button",tabIndex:0,onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&d()},"aria-label":`Ver detalhes do curso: ${e.title}`,children:[c.jsxs("div",{className:"relative h-36 sm:h-40 md:h-48 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:[c.jsx(Cs,{className:"h-12 w-12 sm:h-14 sm:w-14 md:h-16 md:w-16 text-primary/40","aria-hidden":"true"}),c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx(Tt,{className:i(e.level),children:l(e.level)})})]}),c.jsxs("div",{className:"p-3 sm:p-4 space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-base sm:text-lg text-foreground mb-1 line-clamp-2",children:e.title}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:e.instructor})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-xs sm:text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(na,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsxs("span",{children:[e.duration,"h"]})]}),e.mode==="presencial"&&e.location&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ai,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsx("span",{className:"truncate",children:e.location})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[a(e.mode),c.jsx("span",{className:"ml-1",children:o(e.mode)})]}),c.jsx(Tt,{variant:"outline",className:"text-xs",children:e.category})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:e.description}),r&&t&&c.jsxs("div",{className:"pt-2 space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center text-xs",children:[c.jsx("span",{className:"text-muted-foreground",children:"Progresso"}),c.jsxs("span",{className:"font-medium",children:[t.progressPercentage,"%"]})]}),c.jsx(Oi,{value:t.progressPercentage,className:"h-2"})]}),c.jsxs(ze,{className:"w-full mt-2 text-xs sm:text-sm",variant:r&&(t==null?void 0:t.status)==="in_progress"?"default":"outline","aria-label":r&&(t==null?void 0:t.status)==="in_progress"?`Continuar curso ${e.title}`:r&&(t==null?void 0:t.status)==="completed"?`Revisar curso ${e.title}`:`Inscrever-se em ${e.title}`,onClick:p=>{p.stopPropagation(),d()},children:[r&&(t==null?void 0:t.status)==="in_progress"&&"Continuar Curso",r&&(t==null?void 0:t.status)==="completed"&&"Revisar Curso",r&&(t==null?void 0:t.status)==="enrolled"&&"Iniciar Curso",!r&&"Ver Detalhes"]})]})]})})},dz=k.forwardRef(({className:e,activeClassName:t,pendingClassName:r,to:n,...s},a)=>c.jsx(pq,{ref:a,to:n,className:({isActive:o,isPending:i})=>zt(e,o&&t,i&&r),...s}));dz.displayName="NavLink";const Ds=({role:e})=>{const n=e==="candidate"?[{to:"/candidato/dashboard",icon:am,label:"Incio"},{to:"/candidato/vagas",icon:Rn,label:"Vagas"},{to:"/capacitacao",icon:Js,label:"Cursos"},{to:"/candidato/perfil",icon:Ii,label:"Perfil"},{to:"/candidato/candidaturas",icon:hU,label:"Candidaturas"}]:[{to:"/empresa/dashboard",icon:am,label:"Incio"},{to:"/empresa/vagas",icon:Rn,label:"Vagas"},{to:"/empresa/candidatos",icon:Ii,label:"Talentos"}];return c.jsx("nav",{className:"bottom-nav md:hidden","aria-label":"Navegao principal",children:c.jsx("div",{className:"flex justify-around items-center h-16 px-2",children:n.map(s=>c.jsxs(dz,{to:s.to,className:"flex flex-col items-center justify-center gap-1 px-3 py-2 rounded-lg text-muted-foreground transition-colors focus-ring",activeClassName:"text-primary bg-primary/10","aria-label":s.label,children:[c.jsx(s.icon,{className:"h-5 w-5","aria-hidden":"true"}),c.jsx("span",{className:"text-xs",children:s.label})]},s.to))})})};function AQ(e,t){return k.useReducer((r,n)=>t[r][n]??r,e)}var Vb="ScrollArea",[uz,MZ]=Ns(Vb),[IQ,sa]=uz(Vb),mz=k.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:a=600,...o}=e,[i,l]=k.useState(null),[d,p]=k.useState(null),[u,m]=k.useState(null),[f,h]=k.useState(null),[_,v]=k.useState(null),[g,x]=k.useState(0),[y,w]=k.useState(0),[b,C]=k.useState(!1),[E,P]=k.useState(!1),I=tr(t,z=>l(z)),$=Am(s);return c.jsx(IQ,{scope:r,type:n,dir:$,scrollHideDelay:a,scrollArea:i,viewport:d,onViewportChange:p,content:u,onContentChange:m,scrollbarX:f,onScrollbarXChange:h,scrollbarXEnabled:b,onScrollbarXEnabledChange:C,scrollbarY:_,onScrollbarYChange:v,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:w,children:c.jsx(At.div,{dir:$,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":y+"px",...e.style}})})});mz.displayName=Vb;var pz="ScrollAreaViewport",fz=k.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:s,...a}=e,o=sa(pz,r),i=k.useRef(null),l=tr(t,i,o.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(At.div,{"data-radix-scroll-area-viewport":"",...a,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:c.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});fz.displayName=pz;var fo="ScrollAreaScrollbar",Wb=k.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=sa(fo,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=s,i=e.orientation==="horizontal";return k.useEffect(()=>(i?a(!0):o(!0),()=>{i?a(!1):o(!1)}),[i,a,o]),s.type==="hover"?c.jsx(NQ,{...n,ref:t,forceMount:r}):s.type==="scroll"?c.jsx($Q,{...n,ref:t,forceMount:r}):s.type==="auto"?c.jsx(hz,{...n,ref:t,forceMount:r}):s.type==="always"?c.jsx(Ub,{...n,ref:t}):null});Wb.displayName=fo;var NQ=k.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=sa(fo,e.__scopeScrollArea),[a,o]=k.useState(!1);return k.useEffect(()=>{const i=s.scrollArea;let l=0;if(i){const d=()=>{window.clearTimeout(l),o(!0)},p=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",d),i.addEventListener("pointerleave",p),()=>{window.clearTimeout(l),i.removeEventListener("pointerenter",d),i.removeEventListener("pointerleave",p)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx($s,{present:r||a,children:c.jsx(hz,{"data-state":a?"visible":"hidden",...n,ref:t})})}),$Q=k.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=sa(fo,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Tg(()=>l("SCROLL_END"),100),[i,l]=AQ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return k.useEffect(()=>{if(i==="idle"){const d=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[i,s.scrollHideDelay,l]),k.useEffect(()=>{const d=s.viewport,p=a?"scrollLeft":"scrollTop";if(d){let u=d[p];const m=()=>{const f=d[p];u!==f&&(l("SCROLL"),o()),u=f};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,a,l,o]),c.jsx($s,{present:r||i!=="hidden",children:c.jsx(Ub,{"data-state":i==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:Et(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Et(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),hz=k.forwardRef((e,t)=>{const r=sa(fo,e.__scopeScrollArea),{forceMount:n,...s}=e,[a,o]=k.useState(!1),i=e.orientation==="horizontal",l=Tg(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,p=r.viewport.offsetHeight<r.viewport.scrollHeight;o(i?d:p)}},10);return _d(r.viewport,l),_d(r.content,l),c.jsx($s,{present:n||a,children:c.jsx(Ub,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Ub=k.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,s=sa(fo,e.__scopeScrollArea),a=k.useRef(null),o=k.useRef(0),[i,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=yz(i.viewport,i.content),p={...n,sizes:i,onSizesChange:l,hasThumb:d>0&&d<1,onThumbChange:m=>a.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function u(m,f){return zQ(m,o.current,i,f)}return r==="horizontal"?c.jsx(DQ,{...p,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollLeft,f=EI(m,i,s.dir);a.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=u(m,s.dir))}}):r==="vertical"?c.jsx(OQ,{...p,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const m=s.viewport.scrollTop,f=EI(m,i);a.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=u(m))}}):null}),DQ=k.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=sa(fo,e.__scopeScrollArea),[o,i]=k.useState(),l=k.useRef(null),d=tr(t,l,a.onScrollbarXChange);return k.useEffect(()=>{l.current&&i(getComputedStyle(l.current))},[l]),c.jsx(_z,{"data-orientation":"horizontal",...s,ref:d,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Mg(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.x),onDragScroll:p=>e.onDragScroll(p.x),onWheelScroll:(p,u)=>{if(a.viewport){const m=a.viewport.scrollLeft+p.deltaX;e.onWheelScroll(m),bz(m,u)&&p.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Nh(o.paddingLeft),paddingEnd:Nh(o.paddingRight)}})}})}),OQ=k.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...s}=e,a=sa(fo,e.__scopeScrollArea),[o,i]=k.useState(),l=k.useRef(null),d=tr(t,l,a.onScrollbarYChange);return k.useEffect(()=>{l.current&&i(getComputedStyle(l.current))},[l]),c.jsx(_z,{"data-orientation":"vertical",...s,ref:d,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Mg(r)+"px",...e.style},onThumbPointerDown:p=>e.onThumbPointerDown(p.y),onDragScroll:p=>e.onDragScroll(p.y),onWheelScroll:(p,u)=>{if(a.viewport){const m=a.viewport.scrollTop+p.deltaY;e.onWheelScroll(m),bz(m,u)&&p.preventDefault()}},onResize:()=>{l.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Nh(o.paddingTop),paddingEnd:Nh(o.paddingBottom)}})}})}),[FQ,gz]=uz(fo),_z=k.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:i,onThumbPositionChange:l,onDragScroll:d,onWheelScroll:p,onResize:u,...m}=e,f=sa(fo,r),[h,_]=k.useState(null),v=tr(t,I=>_(I)),g=k.useRef(null),x=k.useRef(""),y=f.viewport,w=n.content-n.viewport,b=Tn(p),C=Tn(l),E=Tg(u,10);function P(I){if(g.current){const $=I.clientX-g.current.left,z=I.clientY-g.current.top;d({x:$,y:z})}}return k.useEffect(()=>{const I=$=>{const z=$.target;(h==null?void 0:h.contains(z))&&b($,w)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[y,h,w,b]),k.useEffect(C,[n,C]),_d(h,E),_d(f.content,E),c.jsx(FQ,{scope:r,scrollbar:h,hasThumb:s,onThumbChange:Tn(a),onThumbPointerUp:Tn(o),onThumbPositionChange:C,onThumbPointerDown:Tn(i),children:c.jsx(At.div,{...m,ref:v,style:{position:"absolute",...m.style},onPointerDown:Et(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),P(I))}),onPointerMove:Et(e.onPointerMove,P),onPointerUp:Et(e.onPointerUp,I=>{const $=I.target;$.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=x.current,f.viewport&&(f.viewport.style.scrollBehavior=""),g.current=null})})})}),Ih="ScrollAreaThumb",xz=k.forwardRef((e,t)=>{const{forceMount:r,...n}=e,s=gz(Ih,e.__scopeScrollArea);return c.jsx($s,{present:r||s.hasThumb,children:c.jsx(LQ,{ref:t,...n})})}),LQ=k.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...s}=e,a=sa(Ih,r),o=gz(Ih,r),{onThumbPositionChange:i}=o,l=tr(t,u=>o.onThumbChange(u)),d=k.useRef(void 0),p=Tg(()=>{d.current&&(d.current(),d.current=void 0)},100);return k.useEffect(()=>{const u=a.viewport;if(u){const m=()=>{if(p(),!d.current){const f=BQ(u,i);d.current=f,i()}};return i(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,p,i]),c.jsx(At.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Et(e.onPointerDownCapture,u=>{const f=u.target.getBoundingClientRect(),h=u.clientX-f.left,_=u.clientY-f.top;o.onThumbPointerDown({x:h,y:_})}),onPointerUp:Et(e.onPointerUp,o.onThumbPointerUp)})});xz.displayName=Ih;var Gb="ScrollAreaCorner",vz=k.forwardRef((e,t)=>{const r=sa(Gb,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?c.jsx(RQ,{...e,ref:t}):null});vz.displayName=Gb;var RQ=k.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,s=sa(Gb,r),[a,o]=k.useState(0),[i,l]=k.useState(0),d=!!(a&&i);return _d(s.scrollbarX,()=>{var u;const p=((u=s.scrollbarX)==null?void 0:u.offsetHeight)||0;s.onCornerHeightChange(p),l(p)}),_d(s.scrollbarY,()=>{var u;const p=((u=s.scrollbarY)==null?void 0:u.offsetWidth)||0;s.onCornerWidthChange(p),o(p)}),d?c.jsx(At.div,{...n,ref:t,style:{width:a,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Nh(e){return e?parseInt(e,10):0}function yz(e,t){const r=e/t;return isNaN(r)?0:r}function Mg(e){const t=yz(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function zQ(e,t,r,n="ltr"){const s=Mg(r),a=s/2,o=t||a,i=s-o,l=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-i,p=r.content-r.viewport,u=n==="ltr"?[0,p]:[p*-1,0];return wz([l,d],u)(e)}function EI(e,t,r="ltr"){const n=Mg(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,o=t.content-t.viewport,i=a-n,l=r==="ltr"?[0,o]:[o*-1,0],d=fy(e,l);return wz([0,o],[0,i])(d)}function wz(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function bz(e,t){return e>0&&e<t}var BQ=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,i=r.top!==a.top;(o||i)&&t(),r=a,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Tg(e,t){const r=Tn(e),n=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(n.current),[]),k.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function _d(e,t){const r=Tn(t);$n(()=>{let n=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(e),()=>{window.cancelAnimationFrame(n),s.unobserve(e)}}},[e,r])}var Mz=mz,VQ=fz,WQ=vz;const Tz=k.forwardRef(({className:e,children:t,...r},n)=>c.jsxs(Mz,{ref:n,className:zt("relative overflow-hidden",e),...r,children:[c.jsx(VQ,{className:"h-full w-full rounded-[inherit]",children:t}),c.jsx(Ez,{}),c.jsx(WQ,{})]}));Tz.displayName=Mz.displayName;const Ez=k.forwardRef(({className:e,orientation:t="vertical",...r},n)=>c.jsx(Wb,{ref:n,orientation:t,className:zt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:c.jsx(xz,{className:"relative flex-1 rounded-full bg-border"})}));Ez.displayName=Wb.displayName;class Ry{static calculateRecommendationScore(t,r,n){let s=0;const a=[];if(n.some(f=>f.courseId===r.id))return{course:r,score:0,reasons:["J matriculado"],priority:"low"};const i=this.analyzeMainAreaMatch(t.mainArea,r);s+=i.score,i.match&&a.push(i.reason);const l=this.analyzeCertificationGap(t,r);s+=l.score,l.hasGap&&a.push(l.reason);const d=this.analyzeSkillsAlignment(t.skills,r);s+=d.score,d.hasAlignment&&a.push(d.reason);const p=this.analyzeProfileCompleteness(t,r);s+=p.score,p.needsImprovement&&a.push(p.reason);const u=this.analyzeCareerProgression(t,r,n);s+=u.score,u.isProgression&&a.push(u.reason);let m="low";return s>=70?m="high":s>=40&&(m="medium"),{course:r,score:s,reasons:a,priority:m}}static analyzeMainAreaMatch(t,r){const s={"Operao de Equipamentos":["empilhadeira","operao","equipamentos","logstica"],Administrativa:["gesto","administrativa","supply","logstica"],"Manuteno Industrial":["nr-10","eltrica","manuteno","segurana"],"Segurana do Trabalho":["nr-","segurana","altura","epi"]}[t]||[],a=`${r.title} ${r.description} ${r.tags.join(" ")}`.toLowerCase(),o=s.filter(i=>a.includes(i.toLowerCase())).length;return o>0?{score:Math.min(30,o*10),match:!0,reason:`Alinhado com sua rea: ${t}`}:{score:0,match:!1,reason:""}}static analyzeCertificationGap(t,r){const n=r.tags.filter(s=>s.toUpperCase().includes("NR-")||s.toLowerCase().includes("certificao"));if(n.length>0){const s=t.certifications.map(o=>o.certificationId.toLowerCase());if(n.some(o=>!s.some(i=>i.includes(o.toLowerCase()))))return{score:25,hasGap:!0,reason:"Certificao que voc ainda no possui"}}return{score:0,hasGap:!1,reason:""}}static analyzeSkillsAlignment(t,r){const n=r.description.toLowerCase(),s=t.filter(a=>n.includes(a.toLowerCase()));return s.length>0?{score:Math.min(20,s.length*7),hasAlignment:!0,reason:`Complementa suas habilidades em ${s[0]}`}:{score:0,hasAlignment:!1,reason:""}}static analyzeProfileCompleteness(t,r){return t.profileCompleteness<70&&r.level==="basico"?{score:15,needsImprovement:!0,reason:"Curso bsico ideal para comear"}:t.profileCompleteness>=80&&r.level==="avancado"?{score:15,needsImprovement:!0,reason:"Nvel avanado adequado ao seu perfil"}:{score:5,needsImprovement:!1,reason:""}}static analyzeCareerProgression(t,r,n){const s=n.filter(a=>a.status==="completed").length;return s>0&&r.level==="intermediario"?{score:10,isProgression:!0,reason:"Prximo passo na sua progresso"}:s>2&&r.level==="avancado"?{score:10,isProgression:!0,reason:"Evoluo natural dos seus estudos"}:{score:0,isProgression:!1,reason:""}}static getRecommendations(t,r,n,s=6){return r.map(o=>this.calculateRecommendationScore(t,o,n)).filter(o=>o.score>0).sort((o,i)=>i.score-o.score).slice(0,s)}static getPersonalizedRoadmap(t,r,n){const s=this.getRecommendations(t,r,n,12);return{immediate:s.filter(a=>a.priority==="high").slice(0,3),shortTerm:s.filter(a=>a.priority==="medium").slice(0,4),longTerm:s.filter(a=>a.priority==="low").slice(0,5)}}}class UQ{static calculateEnhancedMatch(t,r){const n={skillAlignment:this.analyzeSkillAlignment(t,r),experienceMatch:this.analyzeExperienceMatch(t,r),certificationMatch:this.analyzeCertificationMatch(t,r),locationScore:this.analyzeLocationCompatibility(t,r),culturalFit:this.analyzeCulturalFit(t,r)},s=Math.round(n.skillAlignment*.25+n.experienceMatch*.2+n.certificationMatch*.3+n.locationScore*.15+n.culturalFit*.1),a=this.identifyStrengths(t,r,n),o=this.identifyGaps(t,r,n),i=this.generateRecommendations(o,t),l=this.predictSuccessRate(n,t);let d="low";return s>=80?d="high":s>=60&&(d="medium"),{score:s,confidence:d,strengths:a,gaps:o,recommendations:i,successPrediction:l,insights:n}}static analyzeSkillAlignment(t,r){const n=[...r.requiredSkills],s=[...r.desiredSkills],a=t.skills.map(u=>u.toLowerCase()),o={empilhadeira:["reach stacker","operao","logstica","armazenagem"],excel:["planilhas","office","dados","relatrios"],comunicao:["atendimento","relacionamento","equipe"],liderana:["gesto","coordenao","superviso"],eltrica:["manuteno","instalaes","circuitos"]};let i=0,l=0;n.forEach(u=>{const m=u.toLowerCase();if(a.some(h=>h.includes(m)||m.includes(h)))i++;else{const h=o[m]||[];a.some(v=>h.some(g=>v.includes(g)||g.includes(v)))&&(i+=.5)}}),s.forEach(u=>{const m=u.toLowerCase();a.some(h=>h.includes(m)||m.includes(h))&&l++});const d=n.length>0?i/n.length*70:70,p=s.length>0?l/s.length*30:30;return Math.min(100,Math.round(d+p))}static analyzeExperienceMatch(t,r){const n=t.experience.length;if(n>=r.restrictions.minExperience)return 100;const s=n/Math.max(1,r.restrictions.minExperience);return Math.min(100,Math.round(s*100))}static analyzeCertificationMatch(t,r){if(r.requiredCertifications.length===0)return 100;const s=t.certifications.filter(o=>new Date(o.expiryDate)>new Date).map(o=>o.certificationId.toLowerCase()),a=r.requiredCertifications.filter(o=>s.includes(o.toLowerCase()));return Math.round(a.length/r.requiredCertifications.length*100)}static analyzeLocationCompatibility(t,r){const n=`${t.location.city}, ${t.location.state}`.toLowerCase(),s=r.location.toLowerCase();return n.includes(s)||s.includes(n)?100:t.location.state==="CE"&&s.includes("ce")?70:40}static analyzeCulturalFit(t,r){let n=50;return(t.mainArea.toLowerCase().includes(r.category.toLowerCase())||r.category.toLowerCase().includes(t.mainArea.toLowerCase()))&&(n+=30),t.isPCD&&r.restrictions.pcdExclusive&&(n+=20),Math.min(100,n)}static identifyStrengths(t,r,n){const s=[];return n.certificationMatch>=80&&s.push("Todas as certificaes necessrias em dia"),n.skillAlignment>=80&&s.push("Forte alinhamento de habilidades"),n.experienceMatch===100&&s.push("Experincia acima do requisito mnimo"),n.locationScore===100&&s.push("Localizao ideal"),t.profileCompleteness>=90&&s.push("Perfil muito completo"),s}static identifyGaps(t,r,n){const s=[];return n.certificationMatch<100&&s.push("Faltam algumas certificaes obrigatrias"),n.skillAlignment<70&&s.push("Algumas habilidades importantes esto faltando"),n.experienceMatch<100&&s.push("Experincia abaixo do requisito mnimo"),t.profileCompleteness<70&&s.push("Perfil incompleto - adicione mais informaes"),s}static generateRecommendations(t,r){const n=[];return t.forEach(s=>{s.includes("certificaes")&&n.push("Complete os cursos de certificao necessrios na plataforma"),s.includes("habilidades")&&n.push("Adicione mais habilidades relevantes ao seu perfil"),s.includes("experincia")&&n.push("Destaque projetos e realizaes na sua experincia profissional"),s.includes("Perfil incompleto")&&n.push("Complete todas as sees do seu perfil para melhorar o match")}),n.length===0&&n.push("Seu perfil est timo! Candidate-se com confiana"),n}static predictSuccessRate(t,r){const n={skills:.3,certs:.25,experience:.2,profile:.15,location:.1},s=r.profileCompleteness,a=Math.round(t.skillAlignment*n.skills+t.certificationMatch*n.certs+t.experienceMatch*n.experience+s*n.profile+t.locationScore*n.location);return Math.min(100,a)}}class GQ{static async processMessage(t,r,n=[]){const s=t.toLowerCase();return this.isAboutCourses(s)?this.handleCourseQuery(s,r):this.isAboutProfile(s)?this.handleProfileQuery(r):this.isAboutCareer(s)?this.handleCareerGuidance(r):this.isAboutJobs(s)?this.handleJobQuery(s,r):this.isAboutCertifications(s)?this.handleCertificationQuery(r):this.isAboutProgress(s)?this.handleProgressQuery(r):this.handleGeneralQuery(s,r)}static analyzeProfile(t){const{candidate:r,courseProgress:n}=t,s=n.filter(p=>p.status==="completed").length,a=n.filter(p=>p.status==="in_progress"||p.status==="enrolled").length,o=r.profileCompleteness;let i="";o>=90?i=" Seu perfil est excelente! Muito completo e bem estruturado.":o>=70?i=" Seu perfil est bom, mas ainda h espao para melhorias.":i=" Seu perfil precisa de ateno. Complete mais informaes para melhorar suas chances.";const l=[];return r.skills.length<5&&l.push("Adicione mais habilidades ao seu perfil (mnimo recomendado: 5)"),r.certifications.length===0&&l.push("Obtenha certificaes para se destacar no mercado"),r.experience.length<2&&l.push("Adicione mais experincias profissionais ao seu perfil"),o<80&&l.push("Complete todas as sees do seu perfil para alcanar 80%+"),{message:`
 **Anlise do Seu Perfil**

${i}

**Estatsticas:**
- Completude do Perfil: ${o}%
- Habilidades: ${r.skills.length}
- Certificaes: ${r.certifications.length}
- Experincias: ${r.experience.length}
- Cursos Concludos: ${s}
- Cursos em Andamento: ${a}

${l.length>0?`**Recomendaes para Melhorar:**
`+l.map((p,u)=>`${u+1}. ${p}`).join(`
`):""}
    `.trim(),actionType:"profile_analysis",suggestions:["Quais cursos voc recomenda?","Como melhorar meu perfil?","Quais so minhas chances nas vagas?"]}}static provideCareerGuidance(t){const{candidate:r,courses:n,courseProgress:s}=t,a=Ry.getPersonalizedRoadmap(r,n,s);return{message:`
 **Orientao de Carreira Personalizada**

Com base no seu perfil como **${r.mainArea}**, aqui est seu plano de desenvolvimento:

** Aes Imediatas (Prximas 2 semanas):**
${a.immediate.map((i,l)=>`${l+1}. ${i.course.title} - Score: ${i.score}% - ${i.reason}`).join(`
`)||"Voc est no caminho certo! Continue seus cursos atuais."}

** Curto Prazo (1-3 meses):**
${a.shortTerm.map((i,l)=>`${l+1}. ${i.course.title} - ${i.reason}`).join(`
`)||"Foque em completar os cursos em andamento primeiro."}

** Longo Prazo (3-6 meses):**
${a.longTerm.map((i,l)=>`${l+1}. ${i.course.title} - ${i.reason}`).join(`
`)||"Continue desenvolvendo suas habilidades principais."}

**Dica Profissional:** ${this.getCareerTip(r)}
    `.trim(),actionType:"career_guidance",data:a,suggestions:["Ver cursos recomendados","Analisar meu perfil","Buscar vagas compatveis"]}}static isAboutCourses(t){return["curso","cursos","aprender","estudar","capacitao","treinamento","aula"].some(n=>t.includes(n))}static isAboutProfile(t){return["perfil","meu perfil","como estou","minha conta","meus dados"].some(n=>t.includes(n))}static isAboutCareer(t){return["carreira","crescer","desenvolvimento","orientao","futuro","plano"].some(n=>t.includes(n))}static isAboutJobs(t){return["vaga","vagas","emprego","trabalho","oportunidade"].some(n=>t.includes(n))}static isAboutCertifications(t){return["certificado","certificao","certificaes","diploma"].some(n=>t.includes(n))}static isAboutProgress(t){return["progresso","andamento","como estou indo","evoluo","status"].some(n=>t.includes(n))}static handleCourseQuery(t,r){const{candidate:n,courses:s,courseProgress:a}=r,o=Ry.getRecommendations(n,s,a,3);return{message:`
 **Sobre Seus Cursos**

Voc tem **${a.filter(d=>d.status==="in_progress"||d.status==="enrolled").length} curso(s) em andamento**.

**Cursos Recomendados para Voc:**
${o.map((d,p)=>`${p+1}. **${d.course.title}**
   - ${d.reason}
   - Prioridade: ${d.priority==="high"?" Alta":d.priority==="medium"?" Mdia":" Baixa"}`).join(`

`)}

Quer saber mais sobre algum curso especfico?
    `.trim(),actionType:"course_recommendation",data:o,suggestions:["Ver todos os cursos","Meus cursos em andamento","Como escolher um curso?"]}}static handleProfileQuery(t){return this.analyzeProfile(t)}static handleCareerGuidance(t){return this.provideCareerGuidance(t)}static handleJobQuery(t,r){const{candidate:n,jobs:s=[],applications:a=[]}=r;let i=`
 **Sobre Vagas e Oportunidades**

Voc tem **${a.filter(l=>l.status==="pending"||l.status==="in_review").length} candidatura(s) ativa(s)**.
    `.trim();if(s.length>0){const l=s[0],d=UQ.calculateEnhancedMatch(n,l);i+=`

**Melhor Vaga para Voc:**
- **${l.title}**
- Score de Match: ${d.score}%
- Confiana: ${d.confidence==="high"?" Alta":d.confidence==="medium"?" Mdia":" Baixa"}

${d.strengths.length>0?`**Seus Pontos Fortes:**
${d.strengths.map(p=>` ${p}`).join(`
`)}`:""}

${d.gaps.length>0?`
**reas para Desenvolvimento:**
${d.gaps.map(p=>` ${p}`).join(`
`)}`:""}
      `.trim()}else i+=`

Ainda no temos vagas mapeadas para voc. Complete seu perfil para receber recomendaes!`;return{message:i,actionType:"general",suggestions:["Buscar vagas","Melhorar meu match","Ver minhas candidaturas"]}}static handleCertificationQuery(t){const{candidate:r,courseProgress:n}=t,s=n.filter(l=>l.status==="completed"),a=r.certifications.filter(l=>new Date(l.expiryDate)>new Date),o=r.certifications.filter(l=>new Date(l.expiryDate)<=new Date);return{message:`
 **Suas Certificaes**

**Certificaes Vlidas:** ${a.length}
${a.map(l=>`- ${l.certificationId} (Validade: ${new Date(l.expiryDate).toLocaleDateString("pt-BR")})`).join(`
`)||"- Nenhuma certificao vlida"}

${o.length>0?`
 **Certificaes Expiradas:** ${o.length}
${o.map(l=>`- ${l.certificationId}`).join(`
`)}`:""}

**Cursos Concludos com Certificado:** ${s.filter(l=>l.certificateIssued).length}

 **Dica:** Complete mais cursos na plataforma para obter certificaes reconhecidas pelo mercado!
    `.trim(),actionType:"general",suggestions:["Ver cursos para certificao","Meus certificados","Renovar certificaes"]}}static handleProgressQuery(t){const{courseProgress:r}=t,n=r.filter(i=>i.status==="completed").length,s=r.filter(i=>i.status==="in_progress"||i.status==="enrolled").length,a=r.reduce((i,l)=>i+l.progressPercentage,0)/Math.max(r.length,1);return{message:`
 **Seu Progresso na Plataforma**

**Status Atual:**
- Cursos Concludos: ${n}
- Cursos em Andamento: ${s}
- Progresso Mdio: ${Math.round(a)}%

${s>0?" Continue focado! Voc est fazendo um timo trabalho.":""}
${n>3?" Parabns pela dedicao! Voc j concluiu vrios cursos.":""}
${n===0&&s===0?" Que tal comear um curso hoje? Vou te recomendar alguns!":""}
    `.trim(),actionType:"general",suggestions:["Ver meus cursos","Continuar estudando","Buscar novos cursos"]}}static handleGeneralQuery(t,r){return this.isGreeting(t)?{message:`Ol, ${r.candidate.name}! 

Sou sua assistente virtual. Estou aqui para ajudar voc com:

 Recomendaes de cursos personalizadas
 Anlise do seu perfil profissional
 Orientao de carreira
 Informaes sobre vagas e oportunidades
 Acompanhamento do seu progresso

Como posso ajudar voc hoje?`,actionType:"general",suggestions:["Analisar meu perfil","Recomendar cursos","Orientao de carreira","Buscar vagas"]}:{message:`Entendi que voc quer saber sobre: "${t}".

Ainda estou aprendendo! Mas posso te ajudar com:

 Cursos e capacitaes
 Anlise de perfil
 Orientao de carreira
 Vagas e oportunidades
 Seu progresso

O que voc gostaria de saber?`,actionType:"general",suggestions:["Analisar meu perfil","Ver cursos recomendados","Buscar vagas","Meu progresso"]}}static isGreeting(t){return["oi","ol","ola","bom dia","boa tarde","boa noite","hey","opa"].some(n=>t.includes(n))}static getCareerTip(t){const r=["Mantenha seu perfil sempre atualizado com suas ltimas experincias e habilidades.","Certificaes validam seu conhecimento - complete cursos para obt-las!","Networking  fundamental. Participe de eventos e conecte-se com profissionais da rea.","A prtica leva  perfeio. Aplique o que voc aprende nos cursos em projetos reais.","Esteja aberto a aprender continuamente. O mercado est sempre evoluindo."];return t.certifications.length===0?"Obtenha certificaes! Elas so diferenciais importantes no mercado de trabalho.":t.profileCompleteness<70?"Complete seu perfil! Perfis completos tm at 3x mais chances de serem vistos por recrutadores.":t.skills.length<5?"Adicione mais habilidades ao seu perfil para aumentar suas chances em processos seletivos.":r[Math.floor(Math.random()*r.length)]}static prepareWhatsAppContext(t,r,n,s){return{candidate:r,courses:n,courseProgress:s}}static formatForWhatsApp(t){return t.message.replace(/\*\*/g,"").replace(/#{1,6}\s/g,"").replace(/`/g,"").trim()}}class Hb{static searchCourses(t,r,n={}){const{fuzzyMatch:s=!0,synonyms:a=!0,minScore:o=20,maxResults:i=20}=n,d=this.normalizeText(t).split(/\s+/);return r.map(u=>{let m=0;const f=[],h=[],_=this.calculateFieldScore(u.title,d,{fuzzyMatch:s,synonyms:a});_>0&&(m+=_*.4,f.push("ttulo"),h.push(u.title));const v=this.calculateFieldScore(u.description,d,{fuzzyMatch:s,synonyms:a});v>0&&(m+=v*.25,f.push("descrio"));const g=this.calculateArrayFieldScore(u.tags,d,{fuzzyMatch:s,synonyms:a});g>0&&(m+=g*.2,f.push("tags"));const x=this.calculateFieldScore(u.category,d,{fuzzyMatch:s,synonyms:a});x>0&&(m+=x*.15,f.push("categoria"));const y=this.calculateFieldScore(u.instructor,d,{fuzzyMatch:!1,synonyms:!1});return y>0&&(m+=y*.1,f.push("instrutor")),{item:u,relevanceScore:Math.min(100,Math.round(m)),matchedFields:f,highlights:h}}).filter(u=>u.relevanceScore>=o).sort((u,m)=>m.relevanceScore-u.relevanceScore).slice(0,i)}static searchJobs(t,r,n={}){const{fuzzyMatch:s=!0,synonyms:a=!0,minScore:o=20,maxResults:i=20}=n,d=this.normalizeText(t).split(/\s+/);return r.map(u=>{let m=0;const f=[],h=[],_=this.calculateFieldScore(u.title,d,{fuzzyMatch:s,synonyms:a});_>0&&(m+=_*.35,f.push("ttulo"),h.push(u.title));const v=this.calculateFieldScore(u.description,d,{fuzzyMatch:s,synonyms:a});v>0&&(m+=v*.2,f.push("descrio"));const g=this.calculateArrayFieldScore(u.requiredSkills,d,{fuzzyMatch:s,synonyms:a});g>0&&(m+=g*.25,f.push("habilidades obrigatrias"));const x=this.calculateArrayFieldScore(u.desiredSkills,d,{fuzzyMatch:s,synonyms:a});x>0&&(m+=x*.1,f.push("habilidades desejadas"));const y=this.calculateFieldScore(u.category,d,{fuzzyMatch:s,synonyms:a});y>0&&(m+=y*.1,f.push("categoria"));const w=this.calculateFieldScore(u.location,d,{fuzzyMatch:!1,synonyms:!1});return w>0&&(m+=w*.1,f.push("localizao")),{item:u,relevanceScore:Math.min(100,Math.round(m)),matchedFields:f,highlights:h}}).filter(u=>u.relevanceScore>=o).sort((u,m)=>m.relevanceScore-u.relevanceScore).slice(0,i)}static normalizeText(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim()}static calculateFieldScore(t,r,n){const s=this.normalizeText(t);let a=0;const o=r.length;return r.forEach(i=>{if(s.includes(i)){a+=1;return}if(n.fuzzyMatch&&this.fuzzyMatch(s,i)){a+=.8;return}if(n.synonyms&&this.getSynonyms(i).some(p=>s.includes(p))){a+=.7;return}}),a/o*100}static calculateArrayFieldScore(t,r,n){const s=t.map(i=>this.normalizeText(i));let a=0;const o=r.length;return r.forEach(i=>{if(s.some(l=>l.includes(i))){a+=1;return}if(n.fuzzyMatch&&s.some(d=>this.fuzzyMatch(d,i))){a+=.8;return}if(n.synonyms){const l=this.getSynonyms(i);if(s.some(p=>l.some(u=>p.includes(u)))){a+=.7;return}}}),a/o*100}static fuzzyMatch(t,r){return r.length<4?!1:t.split(/\s+/).some(s=>{if(Math.abs(s.length-r.length)>2)return!1;let a=0;const o=r.length<=6?1:2;for(let i=0;i<Math.min(s.length,r.length);i++)if(s[i]!==r[i]&&a++,a>o)return!1;return a<=o})}static getSynonyms(t){const r=this.normalizeText(t);if(this.SYNONYMS_MAP[r])return this.SYNONYMS_MAP[r];for(const[n,s]of Object.entries(this.SYNONYMS_MAP))if(s.includes(r))return[n,...s.filter(a=>a!==r)];return[]}static extractKeywords(t){const n=this.normalizeText(t).split(/\s+/),s=new Set(["o","a","os","as","de","da","do","das","dos","em","no","na","nos","nas","para","por","com","um","uma","uns","umas","e","ou","que","qual"]);return n.filter(a=>a.length>2&&!s.has(a))}static suggestRelatedTerms(t){const r=this.extractKeywords(t),n=new Set;return r.forEach(s=>{this.getSynonyms(s).forEach(o=>n.add(o))}),Array.from(n).slice(0,5)}static autocomplete(t,r,n){const s=this.normalizeText(t);if(s.length<2)return[];const a=new Set;return r.forEach(o=>{this.normalizeText(o.title).split(/\s+/).forEach(l=>{l.startsWith(s)&&l.length>s.length&&a.add(l)}),o.tags.forEach(l=>{this.normalizeText(l).includes(s)&&a.add(l)})}),n.forEach(o=>{this.normalizeText(o.title).split(/\s+/).forEach(l=>{l.startsWith(s)&&l.length>s.length&&a.add(l)}),[...o.requiredSkills,...o.desiredSkills].forEach(l=>{this.normalizeText(l).includes(s)&&a.add(l)})}),Array.from(a).slice(0,8)}static analyzeSearchIntent(t){const r=this.normalizeText(t),n=["curso","aula","aprender","estudar","capacitao","treinamento"],s=["vaga","emprego","trabalho","oportunidade","contratao"],a=["habilidade","skill","competncia","saber"],o=["certificado","certificao","diploma"],i=n.filter(m=>r.includes(m)).length,l=s.filter(m=>r.includes(m)).length,d=a.filter(m=>r.includes(m)).length,p=o.filter(m=>r.includes(m)).length,u=Math.max(i,l,d,p);return u===0?{type:"general",confidence:50}:i===u?{type:"course",confidence:Math.min(100,i*40)}:l===u?{type:"job",confidence:Math.min(100,l*40)}:p===u?{type:"certification",confidence:Math.min(100,p*40)}:d===u?{type:"skill",confidence:Math.min(100,d*40)}:{type:"general",confidence:50}}}le(Hb,"SYNONYMS_MAP",{empilhadeira:["reach stacker","operador","movimentao","carga","armazm"],porturio:["porto","terminal","cais","doca","martimo"],operador:["operao","controle","manejo"],carga:["descarga","carregamento","movimentao"],eltrica:["eletricista","instalao","manuteno eltrica","circuito","energia"],mecnica:["mecnico","manuteno","reparo","mquina"],soldagem:["soldador","solda","metalurgia"],eletrnica:["eletrnico","automao","controle"],administrao:["administrativo","gesto","gerncia"],"recursos humanos":["rh","pessoal","gente","talentos"],contabilidade:["contador","fiscal","financeiro"],logstica:["supply chain","armazm","distribuio","estoque"],programao:["cdigo","desenvolvimento","software","programador"],ti:["tecnologia","informtica","sistemas","tech"],excel:["planilha","spreadsheet","dados","office"],word:["documento","texto","editor","office"],liderana:["lder","gesto","coordenao","superviso"],comunicao:["comunicar","relacionamento","atendimento"],"trabalho em equipe":["colaborao","time","grupo"],organizao:["organizado","planejamento","estrutura"],bsico:["iniciante","fundamental","introduo","comeo"],intermedirio:["mdio","regular","moderado"],avanado:["expert","especialista","proficiente","senior"],ead:["online","distncia","remoto","digital"],presencial:["ao vivo","fsico","local"],hbrido:["misto","blended","combinado"],segurana:["safety","proteo","preveno","epi"],nr:["norma regulamentadora","segurana do trabalho"],certificao:["certificado","diploma","qualificao","credencial"],curso:["treinamento","capacitao","formao","aula"]});const lo=[{id:"c001",name:"Joo da Silva Santos",email:"joao.santos@email.com",cpf:"123.456.789-00",phone:"(85) 98765-4321",location:{city:"So Gonalo do Amarante",state:"CE",coordinates:{lat:-3.6,lng:-38.97}},isPCD:!1,avatar:null,mainArea:"Operao de Equipamentos",profileCompleteness:85,certifications:[{certificationId:"nr-35",issueDate:"2023-01-15",expiryDate:"2025-01-15",documentUrl:null,verified:!0},{certificationId:"nr-11",issueDate:"2023-06-10",expiryDate:"2025-06-10",documentUrl:null,verified:!0},{certificationId:"nr-33",issueDate:"2024-03-20",expiryDate:"2025-03-20",documentUrl:null,verified:!0}],experience:[{position:"Operador de Empilhadeira",company:"Logstica Porto S.A.",period:"Jan 2020 - Atual"},{position:"Auxiliar de Armazenagem",company:"Terminal Porturio",period:"Mar 2018 - Dez 2019"}],skills:["Empilhadeira","Reach Stacker","Trabalho em equipe","Ateno a detalhes"],createdAt:"2024-01-10T10:00:00Z"},{id:"c002",name:"Maria Oliveira Costa",email:"maria.costa@email.com",cpf:"987.654.321-00",phone:"(85) 99876-5432",location:{city:"Caucaia",state:"CE",coordinates:{lat:-3.73,lng:-38.66}},isPCD:!0,avatar:null,mainArea:"Administrativa",profileCompleteness:95,certifications:[{certificationId:"iso-9001",issueDate:"2022-08-15",expiryDate:"2025-08-15",documentUrl:null,verified:!0},{certificationId:"primeiros-socorros",issueDate:"2023-11-05",expiryDate:"2025-11-05",documentUrl:null,verified:!0}],experience:[{position:"Assistente Administrativa",company:"Porto do Pecm",period:"Fev 2021 - Atual"}],skills:["Excel Avanado","SAP","Comunicao","Organizao"],createdAt:"2024-02-15T14:30:00Z"},{id:"c003",name:"Carlos Eduardo Ferreira",email:"carlos.ferreira@email.com",cpf:"456.789.123-00",phone:"(85) 91234-5678",location:{city:"Fortaleza",state:"CE",coordinates:{lat:-3.71,lng:-38.54}},isPCD:!1,avatar:null,mainArea:"Manuteno Industrial",profileCompleteness:75,certifications:[{certificationId:"nr-10",issueDate:"2023-05-10",expiryDate:"2025-05-10",documentUrl:null,verified:!0},{certificationId:"nr-12",issueDate:"2022-12-01",expiryDate:"2024-12-01",documentUrl:null,verified:!1}],experience:[{position:"Eletricista Industrial",company:"Manuteno Porto S.A.",period:"Mai 2019 - Atual"}],skills:["Eltrica Industrial","Manuteno Preventiva","Leitura de Projetos"],createdAt:"2024-03-20T09:15:00Z"}],co=[{id:"course-1",title:"NR-35: Trabalho em Altura - Bsico",description:"Curso completo sobre segurana em trabalhos em altura conforme NR-35. Inclui teoria, prticas e certificao oficial vlida por 2 anos.",category:"Segurana do Trabalho",thumbnail:"/courses/nr35.jpg",duration:8,mode:"hibrido",level:"basico",instructor:"Eng. Carlos Mendes",location:"Centro de Treinamento - Porto do Pecm",schedule:"Sbados, 8h s 17h",maxStudents:20,tags:["NR-35","Altura","Segurana","Certificao"],lessons:[{id:"lesson-1-1",courseId:"course-1",title:"Introduo  NR-35",description:"Conceitos bsicos e legislao",type:"video",content:"https://exemplo.com/video1",duration:45,order:1,isRequired:!0},{id:"lesson-1-2",courseId:"course-1",title:"Equipamentos de Proteo Individual",description:"EPIs obrigatrios para trabalho em altura",type:"video",content:"https://exemplo.com/video2",duration:60,order:2,isRequired:!0},{id:"lesson-1-3",courseId:"course-1",title:"Quiz de Avaliao Terica",description:"Teste seus conhecimentos",type:"quiz",content:'{"questions": []}',duration:30,order:3,isRequired:!0},{id:"lesson-1-4",courseId:"course-1",title:"Prtica em Campo",description:"Atividade presencial no centro de treinamento",type:"document",content:"/documents/pratica-nr35.pdf",duration:240,order:4,isRequired:!0}],certificateTemplate:"nr35-certificate",active:!0,publishedAt:"2025-01-15T10:00:00Z"},{id:"course-2",title:"Operao de Empilhadeira",description:"Capacitao completa para operadores de empilhadeira com certificao reconhecida pelo CIPP. Curso 100% EAD com simuladores virtuais.",category:"Operao de Equipamentos",thumbnail:"/courses/empilhadeira.jpg",duration:16,mode:"ead",level:"intermediario",instructor:"Tcnico Roberto Silva",tags:["Empilhadeira","Logstica","Operao","EAD"],lessons:[{id:"lesson-2-1",courseId:"course-2",title:"Fundamentos da Empilhadeira",description:"Tipos, componentes e funcionamento",type:"video",content:"https://exemplo.com/empilhadeira1",duration:90,order:1,isRequired:!0},{id:"lesson-2-2",courseId:"course-2",title:"Normas de Segurana",description:"Procedimentos seguros de operao",type:"text",content:"<h1>Normas de Segurana</h1><p>...</p>",duration:60,order:2,isRequired:!0},{id:"lesson-2-3",courseId:"course-2",title:"Simulador Virtual - Nvel 1",description:"Prticas bsicas no simulador",type:"video",content:"https://exemplo.com/simulador1",duration:120,order:3,isRequired:!0},{id:"lesson-2-4",courseId:"course-2",title:"Simulador Virtual - Nvel 2",description:"Operaes avanadas",type:"video",content:"https://exemplo.com/simulador2",duration:120,order:4,isRequired:!0},{id:"lesson-2-5",courseId:"course-2",title:"Avaliao Final",description:"Prova terica e prtica virtual",type:"quiz",content:'{"questions": []}',duration:90,order:5,isRequired:!0}],certificateTemplate:"empilhadeira-certificate",active:!0,publishedAt:"2025-01-10T08:00:00Z"},{id:"course-3",title:"Acessibilidade e Incluso no Ambiente Porturio",description:"Curso sobre boas prticas de incluso de pessoas com deficincia no ambiente de trabalho porturio. Contedo com audiodescrio e LIBRAS.",category:"Desenvolvimento Pessoal",thumbnail:"/courses/inclusao.jpg",duration:4,mode:"ead",level:"basico",instructor:"Dra. Ana Paula Costa",tags:["PCD","Incluso","Acessibilidade","Diversidade"],lessons:[{id:"lesson-3-1",courseId:"course-3",title:"Fundamentos da Incluso",description:"Histria e legislao sobre PCD",type:"video",content:"https://exemplo.com/inclusao1",duration:60,order:1,isRequired:!0},{id:"lesson-3-2",courseId:"course-3",title:"Adaptaes no Ambiente Porturio",description:"Tecnologias assistivas e adaptaes",type:"video",content:"https://exemplo.com/inclusao2",duration:45,order:2,isRequired:!0},{id:"lesson-3-3",courseId:"course-3",title:"Comunicao Inclusiva",description:"Dicas para melhor comunicao",type:"text",content:"<h1>Comunicao Inclusiva</h1><p>...</p>",duration:30,order:3,isRequired:!0},{id:"lesson-3-4",courseId:"course-3",title:"Quiz de Conhecimentos",description:"Avaliao final",type:"quiz",content:'{"questions": []}',duration:25,order:4,isRequired:!0}],certificateTemplate:"inclusao-certificate",active:!0,publishedAt:"2025-01-20T09:00:00Z"},{id:"course-4",title:"NR-10: Segurana em Instalaes Eltricas",description:"Treinamento presencial completo sobre segurana em instalaes e servios com eletricidade conforme NR-10.",category:"Segurana do Trabalho",thumbnail:"/courses/nr10.jpg",duration:40,mode:"presencial",level:"intermediario",instructor:"Eng. Eltrico Fernando Alves",location:"Auditrio CIPP - Porto do Pecm",schedule:"Segunda a Sexta, 18h s 22h (2 semanas)",maxStudents:15,tags:["NR-10","Eltrica","Segurana","Certificao"],lessons:[{id:"lesson-4-1",courseId:"course-4",title:"Mdulo 1 - Introduo",description:"Riscos eltricos e medidas de controle",type:"document",content:"/documents/nr10-modulo1.pdf",duration:240,order:1,isRequired:!0},{id:"lesson-4-2",courseId:"course-4",title:"Mdulo 2 - EPIs e EPCs",description:"Equipamentos de proteo",type:"document",content:"/documents/nr10-modulo2.pdf",duration:240,order:2,isRequired:!0},{id:"lesson-4-3",courseId:"course-4",title:"Mdulo 3 - Primeiros Socorros",description:"Atendimento a vtimas de choque eltrico",type:"document",content:"/documents/nr10-modulo3.pdf",duration:240,order:3,isRequired:!0},{id:"lesson-4-4",courseId:"course-4",title:"Mdulo 4 - Prticas",description:"Atividades prticas supervisionadas",type:"document",content:"/documents/nr10-modulo4.pdf",duration:480,order:4,isRequired:!0},{id:"lesson-4-5",courseId:"course-4",title:"Avaliao Final",description:"Prova terica e prtica",type:"quiz",content:'{"questions": []}',duration:120,order:5,isRequired:!0}],certificateTemplate:"nr10-certificate",active:!0,publishedAt:"2025-01-05T10:00:00Z"},{id:"course-5",title:"Logstica Porturia e Supply Chain",description:"Fundamentos da logstica porturia, processos de importao/exportao e gesto da cadeia de suprimentos.",category:"Gesto e Logstica",thumbnail:"/courses/logistica.jpg",duration:12,mode:"ead",level:"avancado",instructor:"MBA Juliana Rodrigues",tags:["Logstica","Porto","Supply Chain","Gesto"],lessons:[{id:"lesson-5-1",courseId:"course-5",title:"Introduo  Logstica Porturia",description:"Conceitos fundamentais",type:"video",content:"https://exemplo.com/logistica1",duration:90,order:1,isRequired:!0},{id:"lesson-5-2",courseId:"course-5",title:"Processos de Importao",description:"Documentao e fluxos",type:"video",content:"https://exemplo.com/logistica2",duration:120,order:2,isRequired:!0},{id:"lesson-5-3",courseId:"course-5",title:"Processos de Exportao",description:"Procedimentos e normas",type:"video",content:"https://exemplo.com/logistica3",duration:120,order:3,isRequired:!0},{id:"lesson-5-4",courseId:"course-5",title:"Supply Chain Management",description:"Gesto da cadeia de suprimentos",type:"text",content:"<h1>Supply Chain</h1><p>...</p>",duration:90,order:4,isRequired:!0},{id:"lesson-5-5",courseId:"course-5",title:"Tecnologias na Logstica 4.0",description:"Inovaes e tendncias",type:"video",content:"https://exemplo.com/logistica4",duration:90,order:5,isRequired:!0},{id:"lesson-5-6",courseId:"course-5",title:"Avaliao Final",description:"Projeto prtico",type:"quiz",content:'{"questions": []}',duration:120,order:6,isRequired:!0}],certificateTemplate:"logistica-certificate",active:!0,publishedAt:"2025-01-12T10:00:00Z"},{id:"course-6",title:"LIBRAS Bsico para o Ambiente de Trabalho",description:"Aprenda os fundamentos da Lngua Brasileira de Sinais para melhor comunicao com colegas surdos no ambiente porturio.",category:"Desenvolvimento Pessoal",thumbnail:"/courses/libras.jpg",duration:20,mode:"hibrido",level:"basico",instructor:"Prof. Marcos Lima (Surdo)",location:"Centro de Treinamento - Porto do Pecm",schedule:"Teras e Quintas, 19h s 21h",maxStudents:25,tags:["LIBRAS","Incluso","Comunicao","Acessibilidade"],lessons:[{id:"lesson-6-1",courseId:"course-6",title:"Alfabeto Manual e Nmeros",description:"Primeiros passos em LIBRAS",type:"video",content:"https://exemplo.com/libras1",duration:60,order:1,isRequired:!0},{id:"lesson-6-2",courseId:"course-6",title:"Cumprimentos e Apresentaes",description:"Sinais bsicos do dia a dia",type:"video",content:"https://exemplo.com/libras2",duration:60,order:2,isRequired:!0},{id:"lesson-6-3",courseId:"course-6",title:"Vocabulrio do Porto",description:"Sinais especficos do ambiente porturio",type:"video",content:"https://exemplo.com/libras3",duration:90,order:3,isRequired:!0},{id:"lesson-6-4",courseId:"course-6",title:"Prtica Presencial 1",description:"Conversao bsica",type:"document",content:"/documents/libras-pratica1.pdf",duration:120,order:4,isRequired:!0},{id:"lesson-6-5",courseId:"course-6",title:"Prtica Presencial 2",description:"Simulaes de situaes reais",type:"document",content:"/documents/libras-pratica2.pdf",duration:120,order:5,isRequired:!0},{id:"lesson-6-6",courseId:"course-6",title:"Avaliao Prtica",description:"Demonstrao de aprendizado",type:"quiz",content:'{"questions": []}',duration:60,order:6,isRequired:!0}],certificateTemplate:"libras-certificate",active:!0,publishedAt:"2025-01-18T10:00:00Z"}],mo=[{id:"progress-1",userId:"c001",courseId:"course-1",enrolledAt:"2025-01-16T10:00:00Z",startedAt:"2025-01-16T10:30:00Z",completedAt:"2025-01-20T16:45:00Z",lastAccessedAt:"2025-01-20T16:45:00Z",completedLessons:["lesson-1-1","lesson-1-2","lesson-1-3","lesson-1-4"],progressPercentage:100,quizScores:{"lesson-1-3":95},status:"completed",certificateIssued:!0},{id:"progress-2",userId:"c001",courseId:"course-2",enrolledAt:"2025-01-18T14:00:00Z",startedAt:"2025-01-18T14:30:00Z",completedAt:null,lastAccessedAt:"2025-01-22T20:15:00Z",completedLessons:["lesson-2-1","lesson-2-2","lesson-2-3"],progressPercentage:60,quizScores:{},status:"in_progress",certificateIssued:!1},{id:"progress-3",userId:"c001",courseId:"course-5",enrolledAt:"2025-01-20T09:00:00Z",startedAt:null,completedAt:null,lastAccessedAt:"2025-01-20T09:00:00Z",completedLessons:[],progressPercentage:0,quizScores:{},status:"enrolled",certificateIssued:!1},{id:"progress-4",userId:"c002",courseId:"course-3",enrolledAt:"2025-01-21T11:00:00Z",startedAt:"2025-01-21T11:30:00Z",completedAt:"2025-01-21T15:45:00Z",lastAccessedAt:"2025-01-21T15:45:00Z",completedLessons:["lesson-3-1","lesson-3-2","lesson-3-3","lesson-3-4"],progressPercentage:100,quizScores:{"lesson-3-4":100},status:"completed",certificateIssued:!0},{id:"progress-5",userId:"c002",courseId:"course-6",enrolledAt:"2025-01-19T10:00:00Z",startedAt:"2025-01-19T10:30:00Z",completedAt:null,lastAccessedAt:"2025-01-22T19:30:00Z",completedLessons:["lesson-6-1","lesson-6-2","lesson-6-3"],progressPercentage:50,quizScores:{},status:"in_progress",certificateIssued:!1},{id:"progress-6",userId:"c002",courseId:"course-5",enrolledAt:"2025-01-15T14:00:00Z",startedAt:"2025-01-15T14:20:00Z",completedAt:null,lastAccessedAt:"2025-01-21T18:00:00Z",completedLessons:["lesson-5-1","lesson-5-2"],progressPercentage:33,quizScores:{},status:"in_progress",certificateIssued:!1},{id:"progress-7",userId:"c003",courseId:"course-4",enrolledAt:"2025-01-08T09:00:00Z",startedAt:"2025-01-08T18:00:00Z",completedAt:null,lastAccessedAt:"2025-01-22T21:45:00Z",completedLessons:["lesson-4-1","lesson-4-2","lesson-4-3","lesson-4-4"],progressPercentage:80,quizScores:{},status:"in_progress",certificateIssued:!1},{id:"progress-8",userId:"c003",courseId:"course-2",enrolledAt:"2025-01-12T10:00:00Z",startedAt:"2025-01-12T10:45:00Z",completedAt:"2025-01-17T22:30:00Z",lastAccessedAt:"2025-01-17T22:30:00Z",completedLessons:["lesson-2-1","lesson-2-2","lesson-2-3","lesson-2-4","lesson-2-5"],progressPercentage:100,quizScores:{"lesson-2-5":88},status:"completed",certificateIssued:!0},{id:"progress-9",userId:"c003",courseId:"course-3",enrolledAt:"2025-01-21T16:00:00Z",startedAt:"2025-01-21T16:30:00Z",completedAt:null,lastAccessedAt:"2025-01-22T20:00:00Z",completedLessons:["lesson-3-1","lesson-3-2"],progressPercentage:50,quizScores:{},status:"in_progress",certificateIssued:!1}],HQ=()=>{const[e,t]=k.useState(!1),[r,n]=k.useState([]),[s,a]=k.useState(""),[o,i]=k.useState(!1),[l,d]=k.useState(["Analisar meu perfil","Recomendar cursos","Orientao de carreira","Buscar vagas"]),p=k.useRef(null),u=ls(),m=()=>{var v;(v=p.current)==null||v.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{m()},[r]),k.useEffect(()=>{if(e&&r.length===0&&u){const v=lo.find(g=>g.id===u.id);if(v){const g={role:"assistant",content:`Ol, ${v.name.split(" ")[0]}! 

Sou sua assistente virtual. Estou aqui para ajudar voc com:

 Recomendaes de cursos personalizadas
 Anlise do seu perfil profissional
 Orientao de carreira
 Informaes sobre vagas e oportunidades

Como posso ajudar voc hoje?`,timestamp:new Date};n([g])}}},[e,r.length,u]);const f=async()=>{if(!s.trim()||!u)return;const v={role:"user",content:s,timestamp:new Date};n(g=>[...g,v]),a(""),i(!0);try{const g=lo.find(C=>C.id===u.id),x=mo.filter(C=>C.userId===u.id),y={candidate:g,courses:co,courseProgress:x},w=await GQ.processMessage(s,y,r),b={role:"assistant",content:w.message,timestamp:new Date};n(C=>[...C,b]),w.suggestions&&d(w.suggestions)}catch{const x={role:"assistant",content:"Desculpe, ocorreu um erro ao processar sua mensagem. Tente novamente.",timestamp:new Date};n(y=>[...y,x])}finally{i(!1)}},h=v=>{a(v)},_=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),f())};return u?c.jsxs(c.Fragment,{children:[!e&&c.jsxs(ze,{onClick:()=>t(!0),className:"fixed bottom-20 md:bottom-6 right-4 md:right-6 h-14 w-14 rounded-full shadow-lg z-50 hover:scale-110 transition-transform",size:"icon","aria-label":"Abrir assistente virtual",children:[c.jsx(PU,{className:"h-6 w-6"}),c.jsxs("span",{className:"absolute -top-1 -right-1 flex h-5 w-5",children:[c.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),c.jsx("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-primary items-center justify-center",children:c.jsx(dd,{className:"h-3 w-3 text-primary-foreground"})})]})]}),e&&c.jsxs(ot,{className:"fixed bottom-20 md:bottom-6 right-4 md:right-6 w-[calc(100vw-2rem)] md:w-96 h-[500px] md:h-[600px] shadow-2xl z-50 flex flex-col",children:[c.jsxs("div",{className:"bg-primary text-primary-foreground p-4 rounded-t-lg flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx(Bx,{className:"h-6 w-6"}),c.jsx("span",{className:"absolute bottom-0 right-0 h-2 w-2 rounded-full bg-green-400 border-2 border-primary"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-sm",children:"Assistente Virtual"}),c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:[c.jsx(dd,{className:"h-2 w-2 mr-1"}),"Powered by IA"]})]})]}),c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"text-primary-foreground hover:bg-primary-foreground/20 h-8 w-8","aria-label":"Fechar chat",children:c.jsx(Ol,{className:"h-4 w-4"})})]}),c.jsxs(Tz,{className:"flex-1 p-4 space-y-4",children:[r.map((v,g)=>c.jsxs("div",{className:`flex gap-2 ${v.role==="user"?"justify-end":"justify-start"}`,children:[v.role==="assistant"&&c.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:c.jsx(Bx,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${v.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:v.content}),c.jsx("span",{className:"text-xs opacity-70 mt-1 block",children:v.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]}),v.role==="user"&&c.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary flex items-center justify-center",children:c.jsx(Ii,{className:"h-4 w-4 text-primary-foreground"})})]},g)),o&&c.jsxs("div",{className:"flex gap-2 justify-start",children:[c.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:c.jsx(Bx,{className:"h-4 w-4 text-primary"})}),c.jsx("div",{className:"bg-muted rounded-lg p-3",children:c.jsx(eS,{className:"h-4 w-4 animate-spin text-primary"})})]}),c.jsx("div",{ref:p})]}),l.length>0&&r.length<=1&&c.jsxs("div",{className:"px-4 py-2 border-t",children:[c.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Sugestes:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((v,g)=>c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>h(v),className:"text-xs",children:v},g))})]}),c.jsxs("div",{className:"p-4 border-t",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(dn,{value:s,onChange:v=>a(v.target.value),onKeyPress:_,placeholder:"Digite sua mensagem...",className:"flex-1",disabled:o}),c.jsx(ze,{onClick:f,disabled:!s.trim()||o,size:"icon","aria-label":"Enviar mensagem",children:o?c.jsx(eS,{className:"h-4 w-4 animate-spin"}):c.jsx(IU,{className:"h-4 w-4"})})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Assistente virtual com IA para te ajudar"})]})]})]}):null},$h=[{id:"nr-10",name:"NR-10 - Segurana em Instalaes Eltricas",category:"safety",validityPeriod:24,issuingBody:"SESI"},{id:"nr-11",name:"NR-11 - Operao de Empilhadeira",category:"operational",validityPeriod:24,issuingBody:"SENAI"},{id:"nr-33",name:"NR-33 - Trabalho em Espaos Confinados",category:"safety",validityPeriod:12,issuingBody:"SESI"},{id:"nr-35",name:"NR-35 - Trabalho em Altura",category:"safety",validityPeriod:24,issuingBody:"SESI"},{id:"mopp",name:"MOPP - Movimentao de Produtos Perigosos",category:"operational",validityPeriod:60,issuingBody:"DETRAN-CE"},{id:"nr-12",name:"NR-12 - Segurana em Mquinas e Equipamentos",category:"safety",validityPeriod:24,issuingBody:"SENAI"},{id:"nr-18",name:"NR-18 - Condies e Meio Ambiente na Indstria da Construo",category:"safety",validityPeriod:24,issuingBody:"SESI"},{id:"cnh-d",name:"CNH Categoria D",category:"operational",validityPeriod:60,issuingBody:"DETRAN-CE"},{id:"iso-9001",name:"ISO 9001 - Gesto da Qualidade",category:"technical",validityPeriod:36,issuingBody:"Bureau Veritas"},{id:"primeiros-socorros",name:"Primeiros Socorros",category:"safety",validityPeriod:24,issuingBody:"Cruz Vermelha"}];function js(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Wl(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Cz=6048e5,qQ=864e5;let KQ={};function Eg(){return KQ}function _m(e,t){var i,l,d,p;const r=Eg(),n=(t==null?void 0:t.weekStartsOn)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,s=js(e),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Dh(e){return _m(e,{weekStartsOn:1})}function Pz(e){const t=js(e),r=t.getFullYear(),n=Wl(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Dh(n),a=Wl(e,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const o=Dh(a);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function CI(e){const t=js(e);return t.setHours(0,0,0,0),t}function PI(e){const t=js(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Sz(e,t){const r=CI(e),n=CI(t),s=+r-PI(r),a=+n-PI(n);return Math.round((s-a)/qQ)}function QQ(e){const t=Pz(e),r=Wl(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Dh(r)}function XQ(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function YQ(e){if(!XQ(e)&&typeof e!="number")return!1;const t=js(e);return!isNaN(Number(t))}function kz(e,t){const r=js(e),n=js(t),s=SI(r,n),a=Math.abs(Sz(r,n));r.setDate(r.getDate()-s*a);const o=+(SI(r,n)===-s),i=s*(a-o);return i===0?0:i}function SI(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function ZQ(e){const t=js(e),r=Wl(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const JQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},eX=(e,t,r)=>{let n;const s=JQ[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Hc(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const tX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sX={date:Hc({formats:tX,defaultWidth:"full"}),time:Hc({formats:rX,defaultWidth:"full"}),dateTime:Hc({formats:nX,defaultWidth:"full"})},aX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oX=(e,t,r,n)=>aX[e];function Ya(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=r!=null&&r.width?String(r.width):o;s=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[i]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const iX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cX={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dX={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mX={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pX=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},fX={ordinalNumber:pX,era:Ya({values:iX,defaultWidth:"wide"}),quarter:Ya({values:lX,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ya({values:cX,defaultWidth:"wide"}),day:Ya({values:dX,defaultWidth:"wide"}),dayPeriod:Ya({values:uX,defaultWidth:"wide",formattingValues:mX,defaultFormattingWidth:"wide"})};function Za(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?gX(i,u=>u.test(o)):hX(i,u=>u.test(o));let d;d=e.valueCallback?e.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;const p=t.slice(o.length);return{value:d,rest:p}}}function hX(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function gX(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function jz(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const i=t.slice(s.length);return{value:o,rest:i}}}const _X=/^(\d+)(th|st|nd|rd)?/i,xX=/\d+/i,vX={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yX={any:[/^b/i,/^(a|c)/i]},wX={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bX={any:[/1/i,/2/i,/3/i,/4/i]},MX={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},TX={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},EX={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},CX={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PX={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},SX={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kX={ordinalNumber:jz({matchPattern:_X,parsePattern:xX,valueCallback:e=>parseInt(e,10)}),era:Za({matchPatterns:vX,defaultMatchWidth:"wide",parsePatterns:yX,defaultParseWidth:"any"}),quarter:Za({matchPatterns:wX,defaultMatchWidth:"wide",parsePatterns:bX,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Za({matchPatterns:MX,defaultMatchWidth:"wide",parsePatterns:TX,defaultParseWidth:"any"}),day:Za({matchPatterns:EX,defaultMatchWidth:"wide",parsePatterns:CX,defaultParseWidth:"any"}),dayPeriod:Za({matchPatterns:PX,defaultMatchWidth:"any",parsePatterns:SX,defaultParseWidth:"any"})},jX={code:"en-US",formatDistance:eX,formatLong:sX,formatRelative:oX,localize:fX,match:kX,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AX(e){const t=js(e);return Sz(t,ZQ(t))+1}function IX(e){const t=js(e),r=+Dh(t)-+QQ(t);return Math.round(r/Cz)+1}function Az(e,t){var p,u,m,f;const r=js(e),n=r.getFullYear(),s=Eg(),a=(t==null?void 0:t.firstWeekContainsDate)??((u=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:u.firstWeekContainsDate)??s.firstWeekContainsDate??((f=(m=s.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Wl(e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const i=_m(o,t),l=Wl(e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const d=_m(l,t);return r.getTime()>=i.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function NX(e,t){var i,l,d,p;const r=Eg(),n=(t==null?void 0:t.firstWeekContainsDate)??((l=(i=t==null?void 0:t.locale)==null?void 0:i.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,s=Az(e,t),a=Wl(e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),_m(a,t)}function $X(e,t){const r=js(e),n=+_m(r,t)-+NX(r,t);return Math.round(n/Cz)+1}function _r(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const ni={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return _r(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):_r(r+1,2)},d(e,t){return _r(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return _r(e.getHours()%12||12,t.length)},H(e,t){return _r(e.getHours(),t.length)},m(e,t){return _r(e.getMinutes(),t.length)},s(e,t){return _r(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return _r(s,t.length)}},vc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},kI={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return ni.y(e,t)},Y:function(e,t,r,n){const s=Az(e,n),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return _r(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):_r(a,t.length)},R:function(e,t){const r=Pz(e);return _r(r,t.length)},u:function(e,t){const r=e.getFullYear();return _r(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return _r(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return _r(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return ni.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return _r(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=$X(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):_r(s,t.length)},I:function(e,t,r){const n=IX(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):_r(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):ni.d(e,t)},D:function(e,t,r){const n=AX(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):_r(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return _r(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return _r(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return _r(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=vc.noon:n===0?s=vc.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=vc.evening:n>=12?s=vc.afternoon:n>=4?s=vc.morning:s=vc.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return ni.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):ni.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):_r(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):_r(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):ni.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):ni.s(e,t)},S:function(e,t){return ni.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return AI(n);case"XXXX":case"XX":return gl(n);case"XXXXX":case"XXX":default:return gl(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return AI(n);case"xxxx":case"xx":return gl(n);case"xxxxx":case"xxx":default:return gl(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jI(n,":");case"OOOO":default:return"GMT"+gl(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jI(n,":");case"zzzz":default:return"GMT"+gl(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return _r(n,t.length)},T:function(e,t,r){const n=e.getTime();return _r(n,t.length)}};function jI(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+_r(a,2)}function AI(e,t){return e%60===0?(e>0?"-":"+")+_r(Math.abs(e)/60,2):gl(e,t)}function gl(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=_r(Math.trunc(n/60),2),a=_r(n%60,2);return r+s+t+a}const II=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Iz=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DX=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return II(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",II(n,t)).replace("{{time}}",Iz(s,t))},OX={p:Iz,P:DX},FX=/^D+$/,LX=/^Y+$/,RX=["D","DD","YY","YYYY"];function zX(e){return FX.test(e)}function BX(e){return LX.test(e)}function VX(e,t,r){const n=WX(e,t,r);if(console.warn(n),RX.includes(e))throw new RangeError(n)}function WX(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const UX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HX=/^'([^]*?)'?$/,qX=/''/g,KX=/[a-zA-Z]/;function xd(e,t,r){var p,u,m,f,h,_,v,g;const n=Eg(),s=(r==null?void 0:r.locale)??n.locale??jX,a=(r==null?void 0:r.firstWeekContainsDate)??((u=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(m=n.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((_=(h=r==null?void 0:r.locale)==null?void 0:h.options)==null?void 0:_.weekStartsOn)??n.weekStartsOn??((g=(v=n.locale)==null?void 0:v.options)==null?void 0:g.weekStartsOn)??0,i=js(e);if(!YQ(i))throw new RangeError("Invalid time value");let l=t.match(GX).map(x=>{const y=x[0];if(y==="p"||y==="P"){const w=OX[y];return w(x,s.formatLong)}return x}).join("").match(UX).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:QX(x)};if(kI[y])return{isToken:!0,value:x};if(y.match(KX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(i,l));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const y=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&BX(y)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&zX(y))&&VX(y,t,String(e));const w=kI[y[0]];return w(i,y,s.localize,d)}).join("")}function QX(e){const t=e.match(HX);return t?t[1].replace(qX,"'"):e}const Cg=(e,t)=>{let r=0;const n=[],s=[];let a=!1;const i=e.certifications.filter(d=>{const u=new Date(d.expiryDate)>new Date;return u||(a=!0),u&&d.verified}).map(d=>d.certificationId);if(t.requiredCertifications.length>0)if(t.requiredCertifications.every(p=>{const u=i.includes(p);if(!u){const m=$h.find(f=>f.id===p);m&&n.push(m.name)}return u}))r+=60;else{const p=t.requiredCertifications.filter(u=>i.includes(u)).length;r+=p/t.requiredCertifications.length*60}else r+=60;if(t.requiredSkills.length>0){const d=e.skills.map(u=>u.toLowerCase()),p=t.requiredSkills.filter(u=>d.some(m=>m.includes(u.toLowerCase())));t.requiredSkills.forEach(u=>{p.find(m=>m.toLowerCase()===u.toLowerCase())||s.push(u)}),r+=p.length/t.requiredSkills.length*30}else r+=30;const l=YX(e.location.coordinates,{lat:-3.6,lng:-38.97});return l<20?r+=10:l<50&&(r+=5),{score:Math.round(r),missingCertifications:n,missingSkills:s,hasExpiredCertifications:a}},zf=e=>{const t=new Date(e.expiryDate),n=kz(t,new Date);return n<0?"expired":n<60?"expiring":"active"},XX=e=>kz(new Date(e.expiryDate),new Date);function YX(e,t){const n=_f(t.lat-e.lat),s=_f(t.lng-e.lng),a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(_f(e.lat))*Math.cos(_f(t.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function _f(e){return e*(Math.PI/180)}const Fi=[{id:"job001",companyId:"comp001",title:"Operador de Empilhadeira",description:"Responsvel pela movimentao de cargas no terminal porturio, operando empilhadeira e reach stacker. Deve seguir rigorosamente os procedimentos de segurana e manter o equipamento em boas condies.",category:"Operao de Equipamentos",location:"So Gonalo do Amarante - CE",requiredCertifications:["nr-11","nr-35"],requiredSkills:["Empilhadeira","Trabalho em equipe"],desiredSkills:["Reach Stacker","Experincia em terminal porturio"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!0,minExperience:2},salary:{min:3500,max:4500},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Seguro de Vida"],active:!0,publishedAt:"2024-11-01T08:00:00Z"},{id:"job002",companyId:"comp002",title:"Assistente Administrativa - PCD",description:"Atuar no suporte administrativo ao departamento operacional, incluindo controle de documentao, lanamentos em sistema e atendimento interno. Vaga exclusiva para pessoas com deficincia.",category:"Administrativa",location:"Porto do Pecm - CE",requiredCertifications:[],requiredSkills:["Excel Bsico","Comunicao"],desiredSkills:["SAP","Excel Avanado","Ingls"],restrictions:{pcdExclusive:!0,womenExclusive:!1,noColorBlindness:!1,minExperience:0},salary:{min:2200,max:2800},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Vale Alimentao"],active:!0,publishedAt:"2024-11-05T10:00:00Z"},{id:"job003",companyId:"comp003",title:"Eletricista Industrial",description:"Executar manutenes preventivas e corretivas em sistemas eltricos industriais, painis de comando, motores e equipamentos. Deve possuir experincia comprovada em ambiente industrial.",category:"Manuteno Industrial",location:"So Gonalo do Amarante - CE",requiredCertifications:["nr-10","nr-12"],requiredSkills:["Eltrica Industrial","Leitura de Projetos"],desiredSkills:["Manuteno Preventiva","CLP"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!0,minExperience:3},salary:{min:4e3,max:5500},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","PLR"],active:!0,publishedAt:"2024-11-10T09:00:00Z"},{id:"job004",companyId:"comp002",title:"Supervisor de Operaes Porturias",description:"Coordenar equipes de operao porturia, garantindo o cumprimento de metas de produtividade e segurana. Controlar a movimentao de cargas e equipamentos.",category:"Operao de Equipamentos",location:"Porto do Pecm - CE",requiredCertifications:["nr-35","nr-33"],requiredSkills:["Liderana","Gesto de equipes","Conhecimento em operao porturia"],desiredSkills:["Ingls","Excel Avanado"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:5},salary:{min:6e3,max:8e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Plano Odontolgico","PLR"],active:!0,publishedAt:"2024-11-12T14:00:00Z"},{id:"job005",companyId:"comp004",title:"Analista de Segurana do Trabalho",description:"Planejar e executar programas de preveno de acidentes, realizar inspees de segurana, ministrar treinamentos e garantir conformidade com as normas regulamentadoras.",category:"Segurana do Trabalho",location:"Porto do Pecm - CE",requiredCertifications:["primeiros-socorros"],requiredSkills:["Conhecimento em NRs","Elaborao de relatrios","Comunicao"],desiredSkills:["CIPA","Excel Avanado","Power BI"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:2},salary:{min:4500,max:6e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Vale Alimentao"],active:!0,publishedAt:"2024-11-08T11:00:00Z"},{id:"job006",companyId:"comp001",title:"Analista de Recursos Humanos - Exclusiva Mulheres",description:"Responsvel por processos de recrutamento e seleo, treinamento e desenvolvimento, clima organizacional e gesto de pessoas. Vaga exclusiva para mulheres em programa de diversidade e incluso.",category:"Administrativa",location:"Porto do Pecm - CE",requiredCertifications:[],requiredSkills:["Recrutamento e Seleo","Excel","Comunicao"],desiredSkills:["Ingls","Power BI","Gesto de pessoas"],restrictions:{pcdExclusive:!1,womenExclusive:!0,noColorBlindness:!1,minExperience:1},salary:{min:3500,max:5e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Auxlio Creche"],active:!0,publishedAt:"2024-11-15T10:00:00Z"},{id:"job007",companyId:"comp003",title:"Coordenadora de Logstica - Exclusiva Mulheres",description:"Coordenar operaes logsticas porturias, gesto de estoques, planejamento de rotas e controle de cargas. Programa de incentivo  liderana feminina no setor porturio.",category:"Logstica e Armazenagem",location:"So Gonalo do Amarante - CE",requiredCertifications:[],requiredSkills:["Gesto de equipes","Logstica","Excel Avanado"],desiredSkills:["WMS","Power BI","Ingls"],restrictions:{pcdExclusive:!1,womenExclusive:!0,noColorBlindness:!1,minExperience:3},salary:{min:5500,max:7500},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","PLR","Auxlio Creche"],active:!0,publishedAt:"2024-11-16T09:00:00Z"},{id:"job008",companyId:"comp002",title:"Mecnico de Manuteno",description:"Realizar manuteno preventiva e corretiva em equipamentos porturios, incluindo guindastes, empilhadeiras e sistemas hidrulicos. Garantir o funcionamento adequado dos equipamentos.",category:"Manuteno Industrial",location:"Porto do Pecm - CE",requiredCertifications:["nr-12"],requiredSkills:["Mecnica Industrial","Leitura de manuais tcnicos"],desiredSkills:["Solda","Hidrulica","Pneumtica"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:2},salary:{min:3200,max:4800},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade"],active:!0,publishedAt:"2024-11-18T08:30:00Z"},{id:"job009",companyId:"comp004",title:"Auxiliar de Armazm - PCD",description:"Auxiliar nas atividades de recebimento, conferncia, armazenagem e expedio de materiais. Organizar produtos no estoque e manter o ambiente de trabalho limpo. Vaga exclusiva PCD.",category:"Logstica e Armazenagem",location:"So Gonalo do Amarante - CE",requiredCertifications:[],requiredSkills:["Organizao","Trabalho em equipe"],desiredSkills:["Excel Bsico","Experincia em estoque"],restrictions:{pcdExclusive:!0,womenExclusive:!1,noColorBlindness:!1,minExperience:0},salary:{min:1800,max:2400},regime:"CLT",benefits:["Vale Transporte","Vale Refeio"],active:!0,publishedAt:"2024-11-19T10:00:00Z"},{id:"job010",companyId:"comp001",title:"Analista de TI - Infraestrutura",description:"Responsvel pela administrao e manuteno da infraestrutura de TI, servidores, redes e sistemas. Implementar solues de segurana da informao e backup.",category:"Tecnologia da Informao",location:"Porto do Pecm - CE",requiredCertifications:[],requiredSkills:["Redes","Windows Server","Linux"],desiredSkills:["VMware","AWS","Segurana da Informao","Ingls"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:2},salary:{min:4500,max:6500},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Home Office parcial"],active:!0,publishedAt:"2024-11-20T09:15:00Z"},{id:"job011",companyId:"comp003",title:"Operador de Guindaste",description:"Operar guindastes mveis e fixos para movimentao de cargas pesadas no terminal porturio. Realizar inspees dirias e manter a segurana operacional.",category:"Operao de Equipamentos",location:"Porto do Pecm - CE",requiredCertifications:["nr-11","nr-35"],requiredSkills:["Operao de Guindaste","Ateno aos detalhes"],desiredSkills:["Experincia em terminal porturio","Ingls tcnico"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!0,minExperience:3},salary:{min:4200,max:6e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","PLR","Seguro de Vida"],active:!0,publishedAt:"2024-11-21T07:00:00Z"},{id:"job012",companyId:"comp002",title:"Assistente Financeiro",description:"Auxiliar nas rotinas do departamento financeiro, incluindo contas a pagar e receber, conciliao bancria, emisso de notas fiscais e relatrios financeiros.",category:"Administrativa",location:"So Gonalo do Amarante - CE",requiredCertifications:[],requiredSkills:["Excel Intermedirio","Organizao","Ateno aos detalhes"],desiredSkills:["SAP","Conhecimento contbil","Power BI"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:1},salary:{min:2500,max:3500},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Vale Alimentao"],active:!0,publishedAt:"2024-11-22T11:00:00Z"},{id:"job013",companyId:"comp004",title:"Tcnico de Segurana do Trabalho",description:"Acompanhar atividades operacionais, realizar DDS (Dilogo Dirio de Segurana), investigar acidentes e incidentes, elaborar relatrios e garantir uso de EPIs.",category:"Segurana do Trabalho",location:"Porto do Pecm - CE",requiredCertifications:["nr-35"],requiredSkills:["Conhecimento em NRs","Comunicao","Trabalho em equipe"],desiredSkills:["CIPA","Primeiros Socorros","Excel"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:1},salary:{min:3e3,max:4200},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade"],active:!0,publishedAt:"2024-11-23T08:00:00Z"},{id:"job014",companyId:"comp001",title:"Encarregado de Produo",description:"Supervisionar equipes de produo, controlar indicadores de desempenho, garantir cumprimento de metas e padres de qualidade. Resolver problemas operacionais do dia a dia.",category:"Operao de Equipamentos",location:"So Gonalo do Amarante - CE",requiredCertifications:[],requiredSkills:["Liderana","Gesto de equipes","Conhecimento em processos produtivos"],desiredSkills:["Excel Avanado","Lean Manufacturing","5S"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:4},salary:{min:5e3,max:7e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","PLR"],active:!0,publishedAt:"2024-11-17T13:00:00Z"},{id:"job015",companyId:"comp003",title:"Auxiliar Administrativo - Exclusiva Mulheres",description:"Realizar atividades administrativas diversas como atendimento telefnico, arquivo de documentos, elaborao de planilhas e suporte s demais reas. Vaga para promover diversidade de gnero.",category:"Administrativa",location:"Porto do Pecm - CE",requiredCertifications:[],requiredSkills:["Excel Bsico","Comunicao","Organizao"],desiredSkills:["Atendimento ao cliente","Pacote Office"],restrictions:{pcdExclusive:!1,womenExclusive:!0,noColorBlindness:!1,minExperience:0},salary:{min:1900,max:2600},regime:"CLT",benefits:["Vale Transporte","Vale Refeio"],active:!0,publishedAt:"2024-11-14T09:30:00Z"},{id:"job016",companyId:"comp002",title:"Conferente de Carga",description:"Conferir cargas de entrada e sada, verificar documentao fiscal, identificar avarias e registrar informaes no sistema. Garantir a preciso das operaes logsticas.",category:"Logstica e Armazenagem",location:"So Gonalo do Amarante - CE",requiredCertifications:[],requiredSkills:["Ateno aos detalhes","Excel Bsico","Organizao"],desiredSkills:["WMS","SAP","Experincia em terminal"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!1,minExperience:1},salary:{min:2200,max:3e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio"],active:!0,publishedAt:"2024-11-13T10:45:00Z"},{id:"job017",companyId:"comp004",title:"Soldador",description:"Executar servios de solda em estruturas metlicas, equipamentos e tubulaes. Realizar manuteno e reparos em peas metlicas seguindo normas tcnicas e de segurana.",category:"Manuteno Industrial",location:"Porto do Pecm - CE",requiredCertifications:["nr-35"],requiredSkills:["Solda MIG","Solda TIG","Leitura de desenhos tcnicos"],desiredSkills:["Solda Eltrica","Caldeiraria","NR-34"],restrictions:{pcdExclusive:!1,womenExclusive:!1,noColorBlindness:!0,minExperience:2},salary:{min:3500,max:5e3},regime:"CLT",benefits:["Vale Transporte","Vale Refeio","Plano de Sade","Insalubridade"],active:!0,publishedAt:"2024-11-11T08:15:00Z"}],Pg=[{id:"comp001",name:"Logstica Porto S.A.",logo:null,segment:"Logstica e Armazenagem",location:"So Gonalo do Amarante - CE"},{id:"comp002",name:"Terminal Pecm Container",logo:null,segment:"Operao Porturia",location:"Porto do Pecm - CE"},{id:"comp003",name:"Manuteno Industrial Nordeste",logo:null,segment:"Manuteno e Servios",location:"So Gonalo do Amarante - CE"},{id:"comp004",name:"Porto do Pecm S.A.",logo:null,segment:"Administrao Porturia",location:"Porto do Pecm - CE"}],ZX=()=>{const e=sn(),t=ls(),[r,n]=k.useState(null),[s,a]=k.useState([]),[o,i]=k.useState([]),[l,d]=k.useState(0),[p,u]=k.useState(0);if(k.useEffect(()=>{if(!t){e("/login");return}const _=lo.find(v=>v.id===t.id);if(_){n(_);const v=Fi.filter(b=>b.active).map(b=>{const C=Pg.find(P=>P.id===b.companyId),E=Cg(_,b);return{job:b,company:C,matchScore:E.score}}).filter(b=>b.matchScore>=50).sort((b,C)=>C.matchScore-b.matchScore).slice(0,5);a(v);const g=mo.filter(b=>b.userId===t.id),x=g.filter(b=>b.status==="in_progress"||b.status==="enrolled").length,y=g.filter(b=>b.status==="completed").length;d(x),u(y);const w=Ry.getRecommendations(_,co,g,3);i(w)}},[t,e]),!r)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("p",{children:"Carregando..."})});const m=r.certifications.filter(_=>zf(_)==="active").length,f=r.certifications.filter(_=>zf(_)==="expiring").length,h=r.certifications.filter(_=>zf(_)==="expired").length;return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto flex justify-between items-center gap-2",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold truncate",children:["Ol, ",r.name.split(" ")[0],"!"]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Bem-vindo de volta"})]}),c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("currentUser"),e("/")},children:"Sair"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[c.jsxs(ot,{className:"p-4 sm:p-6","data-aos":"fade-up","data-aos-duration":"800",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-1",children:"Status do Perfil"}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Complete seu perfil para aumentar suas chances"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ii,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary","aria-hidden":"true"}),c.jsxs("span",{className:"text-xl sm:text-2xl font-bold text-primary",children:[r.profileCompleteness,"%"]})]})]}),c.jsx(Oi,{value:r.profileCompleteness,className:"mb-4"}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4 mt-4 sm:mt-6",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[c.jsx(sm,{className:"h-5 w-5 sm:h-6 sm:w-6 mx-auto mb-1 sm:mb-2 text-primary","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.experience.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Experincias"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[c.jsx(om,{className:"h-5 w-5 sm:h-6 sm:w-6 mx-auto mb-1 sm:mb-2 text-primary","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.certifications.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Certificaes"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[c.jsx(Lo,{className:"h-5 w-5 sm:h-6 sm:w-6 mx-auto mb-1 sm:mb-2 text-primary","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.skills.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Habilidades"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-muted rounded-lg",children:[c.jsx(Nn,{className:"h-5 w-5 sm:h-6 sm:w-6 mx-auto mb-1 sm:mb-2 text-success","aria-hidden":"true"}),c.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:[r.profileCompleteness,"%"]}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Completo"})]})]}),c.jsx(ze,{className:"w-full mt-4",variant:"outline",onClick:()=>e("/candidato/perfil"),children:"Completar Perfil"})]}),c.jsxs(ot,{className:"p-4 sm:p-6 bg-gradient-to-br from-primary/10 via-primary/5 to-background border-primary/20 relative overflow-hidden cursor-pointer hover:shadow-lg transition-all","data-aos":"fade-up","data-aos-delay":"100","data-aos-duration":"800",onClick:()=>e("/capacitacao"),role:"button",tabIndex:0,onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&e("/capacitacao")},children:[c.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4",children:c.jsx(dd,{className:"h-16 w-16 sm:h-20 sm:w-20 text-primary/10","aria-hidden":"true"})}),c.jsxs("div",{className:"relative z-10",children:[c.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 mb-4",children:[c.jsx("div",{className:"p-2 sm:p-3 bg-primary/10 rounded-lg flex-shrink-0",children:c.jsx(Js,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-bold",children:"Capacitao Profissional"}),c.jsx(Tt,{variant:"secondary",className:"text-xs",children:"Novo"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Desenvolva novas habilidades e conquiste certificaes para impulsionar sua carreira"})]})]}),(l>0||p>0)&&c.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 mb-4",children:[c.jsx("div",{className:"p-2 sm:p-3 bg-background/50 rounded-lg border border-primary/10",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(na,{className:"h-4 w-4 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-base sm:text-lg font-bold",children:l}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Em andamento"})]})]})}),c.jsx("div",{className:"p-2 sm:p-3 bg-background/50 rounded-lg border border-success/10",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Nn,{className:"h-4 w-4 text-success flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"text-base sm:text-lg font-bold",children:p}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Concludos"})]})]})})]}),c.jsxs(ze,{className:"w-full",size:"lg",children:[c.jsx(Js,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),l>0?"Continuar Aprendendo":"Explorar Cursos"]})]})]}),o.length>0&&c.jsxs("div",{"data-aos":"fade-up","data-aos-delay":"150","data-aos-duration":"800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(NU,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Cursos Recomendados para Voc"}),c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:[c.jsx(dd,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"IA"]})]}),c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/capacitacao"),children:"Ver Todos"})]}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-3",children:o.map(_=>c.jsxs("div",{className:"relative",children:[c.jsx(Gc,{course:_.course}),c.jsx("div",{className:"absolute top-2 left-2 z-10",children:c.jsxs(Tt,{variant:_.priority==="high"?"destructive":_.priority==="medium"?"default":"secondary",className:"text-xs font-semibold shadow-md",children:[_.score,"% Match"]})})]},_.course.id))}),o[0]&&c.jsx(ot,{className:"p-3 sm:p-4 bg-primary/5 border-primary/20",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary mt-0.5 flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs sm:text-sm font-medium text-primary mb-1",children:"Por que este curso  perfeito para voc:"}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:o[0].reason})]})]})})]}),c.jsxs(ot,{className:"p-4 sm:p-6","data-aos":"fade-up","data-aos-delay":"200","data-aos-duration":"800",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Certificaes em Destaque"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 md:gap-4 mb-4",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 md:p-4 bg-success/10 rounded-lg border border-success/20",children:[c.jsx(Nn,{className:"h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 mx-auto mb-1 sm:mb-2 text-success","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-success",children:m}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Ativas"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 md:p-4 bg-warning/10 rounded-lg border border-warning/20",children:[c.jsx(na,{className:"h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 mx-auto mb-1 sm:mb-2 text-warning","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-warning",children:f}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Expirando"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 md:p-4 bg-danger/10 rounded-lg border border-danger/20",children:[c.jsx(Y0,{className:"h-6 w-6 sm:h-7 sm:w-7 md:h-8 md:w-8 mx-auto mb-1 sm:mb-2 text-danger","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold text-danger",children:h}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Expiradas"})]})]}),f>0&&c.jsx("div",{className:"bg-warning/10 border border-warning/20 rounded-lg p-3 sm:p-4 mb-4",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Y0,{className:"h-4 w-4 sm:h-5 sm:w-5 text-warning mt-0.5 flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm sm:text-base font-medium text-warning",children:"Ateno!"}),c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Voc tem ",f," certificao(es) expirando nos prximos 60 dias. Renove-as para no perder oportunidades."]})]})]})}),c.jsx(ze,{className:"w-full",variant:"outline",onClick:()=>e("/candidato/perfil"),children:"Ver Todas as Certificaes"})]}),c.jsxs("div",{"data-aos":"fade-up","data-aos-delay":"400","data-aos-duration":"800",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-3 sm:mb-4",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Vagas Recomendadas para Voc"}),c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/candidato/vagas"),children:"Ver Todas"})]}),s.length>0?c.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:s.map(({job:_,company:v,matchScore:g})=>c.jsx(cz,{job:_,company:v,matchScore:g,showMatchScore:!0},_.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Lo,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhuma vaga recomendada no momento. Complete seu perfil para receber melhores recomendaes!"}),c.jsx(ze,{onClick:()=>e("/candidato/perfil"),children:"Completar Perfil"})]})]})]}),c.jsx(Ds,{role:"candidate"}),c.jsx(HQ,{})]})};var Sg="Tabs",[JX,TZ]=Ns(Sg,[_g]),Nz=_g(),[eY,qb]=JX(Sg),$z=k.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:i,activationMode:l="automatic",...d}=e,p=Am(i),[u,m]=Fo({prop:n,onChange:s,defaultProp:a??"",caller:Sg});return c.jsx(eY,{scope:r,baseId:Io(),value:u,onValueChange:m,orientation:o,dir:p,activationMode:l,children:c.jsx(At.div,{dir:p,"data-orientation":o,...d,ref:t})})});$z.displayName=Sg;var Dz="TabsList",Oz=k.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=qb(Dz,r),o=Nz(r);return c.jsx(iO,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:c.jsx(At.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});Oz.displayName=Dz;var Fz="TabsTrigger",Lz=k.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,o=qb(Fz,r),i=Nz(r),l=Bz(o.baseId,n),d=Vz(o.baseId,n),p=n===o.value;return c.jsx(lO,{asChild:!0,...i,focusable:!s,active:p,children:c.jsx(At.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":d,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:Et(e.onMouseDown,u=>{!s&&u.button===0&&u.ctrlKey===!1?o.onValueChange(n):u.preventDefault()}),onKeyDown:Et(e.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(n)}),onFocus:Et(e.onFocus,()=>{const u=o.activationMode!=="manual";!p&&!s&&u&&o.onValueChange(n)})})})});Lz.displayName=Fz;var Rz="TabsContent",zz=k.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=e,i=qb(Rz,r),l=Bz(i.baseId,n),d=Vz(i.baseId,n),p=n===i.value,u=k.useRef(p);return k.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx($s,{present:s||p,children:({present:m})=>c.jsx(At.div,{"data-state":p?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:u.current?"0s":void 0},children:m&&a})})});zz.displayName=Rz;function Bz(e,t){return`${e}-trigger-${t}`}function Vz(e,t){return`${e}-content-${t}`}var tY=$z,Wz=Oz,Uz=Lz,Gz=zz;const Kb=tY,kg=k.forwardRef(({className:e,...t},r)=>c.jsx(Wz,{ref:r,className:zt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));kg.displayName=Wz.displayName;const eo=k.forwardRef(({className:e,...t},r)=>c.jsx(Uz,{ref:r,className:zt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));eo.displayName=Uz.displayName;const to=k.forwardRef(({className:e,...t},r)=>c.jsx(Gz,{ref:r,className:zt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));to.displayName=Gz.displayName;var jg="Dialog",[Hz,EZ]=Ns(jg),[rY,Fa]=Hz(jg),qz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,i=k.useRef(null),l=k.useRef(null),[d,p]=Fo({prop:n,defaultProp:s??!1,onChange:a,caller:jg});return c.jsx(rY,{scope:t,triggerRef:i,contentRef:l,contentId:Io(),titleId:Io(),descriptionId:Io(),open:d,onOpenChange:p,onOpenToggle:k.useCallback(()=>p(u=>!u),[p]),modal:o,children:r})};qz.displayName=jg;var Kz="DialogTrigger",Qz=k.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fa(Kz,r),a=tr(t,s.triggerRef);return c.jsx(At.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Yb(s.open),...n,ref:a,onClick:Et(e.onClick,s.onOpenToggle)})});Qz.displayName=Kz;var Qb="DialogPortal",[nY,Xz]=Hz(Qb,{forceMount:void 0}),Yz=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=Fa(Qb,t);return c.jsx(nY,{scope:t,forceMount:r,children:k.Children.map(n,o=>c.jsx($s,{present:r||a.open,children:c.jsx(Jh,{asChild:!0,container:s,children:o})}))})};Yz.displayName=Qb;var Oh="DialogOverlay",Zz=k.forwardRef((e,t)=>{const r=Xz(Oh,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Fa(Oh,e.__scopeDialog);return a.modal?c.jsx($s,{present:n||a.open,children:c.jsx(aY,{...s,ref:t})}):null});Zz.displayName=Oh;var sY=ld("DialogOverlay.RemoveScroll"),aY=k.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fa(Oh,r);return c.jsx(lb,{as:sY,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(At.div,{"data-state":Yb(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ul="DialogContent",Jz=k.forwardRef((e,t)=>{const r=Xz(Ul,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Fa(Ul,e.__scopeDialog);return c.jsx($s,{present:n||a.open,children:a.modal?c.jsx(oY,{...s,ref:t}):c.jsx(iY,{...s,ref:t})})});Jz.displayName=Ul;var oY=k.forwardRef((e,t)=>{const r=Fa(Ul,e.__scopeDialog),n=k.useRef(null),s=tr(t,r.contentRef,n);return k.useEffect(()=>{const a=n.current;if(a)return CO(a)},[]),c.jsx(eB,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Et(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Et(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,i=o.button===0&&o.ctrlKey===!0;(o.button===2||i)&&a.preventDefault()}),onFocusOutside:Et(e.onFocusOutside,a=>a.preventDefault())})}),iY=k.forwardRef((e,t)=>{const r=Fa(Ul,e.__scopeDialog),n=k.useRef(!1),s=k.useRef(!1);return c.jsx(eB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,i;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(i=r.triggerRef.current)==null||i.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var l,d;(l=e.onInteractOutside)==null||l.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),eB=k.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,i=Fa(Ul,r),l=k.useRef(null),d=tr(t,l);return MO(),c.jsxs(c.Fragment,{children:[c.jsx(ib,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:c.jsx(Cm,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Yb(i.open),...o,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(lY,{titleId:i.titleId}),c.jsx(dY,{contentRef:l,descriptionId:i.descriptionId})]})]})}),Xb="DialogTitle",tB=k.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fa(Xb,r);return c.jsx(At.h2,{id:s.titleId,...n,ref:t})});tB.displayName=Xb;var rB="DialogDescription",nB=k.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fa(rB,r);return c.jsx(At.p,{id:s.descriptionId,...n,ref:t})});nB.displayName=rB;var sB="DialogClose",aB=k.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Fa(sB,r);return c.jsx(At.button,{type:"button",...n,ref:t,onClick:Et(e.onClick,()=>s.onOpenChange(!1))})});aB.displayName=sB;function Yb(e){return e?"open":"closed"}var oB="DialogTitleWarning",[CZ,iB]=yW(oB,{contentName:Ul,titleName:Xb,docsSlug:"dialog"}),lY=({titleId:e})=>{const t=iB(oB),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},cY="DialogDescriptionWarning",dY=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iB(cY).contentName}}.`;return k.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},lB=qz,cB=Qz,dB=Yz,Ag=Zz,Ig=Jz,Ng=tB,$g=nB,uB=aB;const Zb=lB,uY=cB,mY=dB,mB=k.forwardRef(({className:e,...t},r)=>c.jsx(Ag,{ref:r,className:zt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));mB.displayName=Ag.displayName;const Dg=k.forwardRef(({className:e,children:t,...r},n)=>c.jsxs(mY,{children:[c.jsx(mB,{}),c.jsxs(Ig,{ref:n,className:zt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,c.jsxs(uB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[c.jsx(Ol,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Dg.displayName=Ig.displayName;const Og=({className:e,...t})=>c.jsx("div",{className:zt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Og.displayName="DialogHeader";const Fg=({className:e,...t})=>c.jsx("div",{className:zt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fg.displayName="DialogFooter";const Lg=k.forwardRef(({className:e,...t},r)=>c.jsx(Ng,{ref:r,className:zt("text-lg font-semibold leading-none tracking-tight",e),...t}));Lg.displayName=Ng.displayName;const pB=k.forwardRef(({className:e,...t},r)=>c.jsx($g,{ref:r,className:zt("text-sm text-muted-foreground",e),...t}));pB.displayName=$g.displayName;const pY=({certification:e,name:t,showDetails:r=!1})=>{const n=zf(e),s=XX(e),o=(()=>{switch(n){case"active":return{variant:"default",className:"bg-success text-success-foreground",icon:Nn,label:"Ativa",ariaLabel:`Certificao ${t} ativa, vlida at ${new Date(e.expiryDate).toLocaleDateString("pt-BR")}`};case"expiring":return{variant:"default",className:"bg-warning text-warning-foreground",icon:na,label:`Expira em ${s} dias`,ariaLabel:`Certificao ${t} expirando, vlida por mais ${s} dias`};case"expired":return{variant:"destructive",className:"bg-danger text-danger-foreground",icon:Y0,label:"Expirada",ariaLabel:`Certificao ${t} expirada desde ${new Date(e.expiryDate).toLocaleDateString("pt-BR")}`}}})(),i=o.icon;return c.jsxs(Tt,{variant:o.variant,className:`${o.className} flex items-center gap-1`,"aria-label":o.ariaLabel,children:[c.jsx(i,{className:"h-3 w-3","aria-hidden":"true"}),r?o.label:t]})},fY=()=>{const e=sn(),t=ls(),[r,n]=k.useState(null),[s,a]=k.useState(!1),[o,i]=k.useState({certificationId:"",issueDate:"",expiryDate:""});if(k.useEffect(()=>{if(!t){e("/login");return}const d=lo.find(p=>p.id===t.id);d&&n(d)},[t,e]),!r)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const l=()=>{if(!o.certificationId||!o.issueDate||!o.expiryDate){qr.error("Preencha todos os campos");return}qr.success("Certificao adicionada com sucesso!"),a(!1),i({certificationId:"",issueDate:"",expiryDate:""})};return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto flex justify-between items-center gap-2",children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Meu Perfil"}),c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>e("/candidato/dashboard"),children:"Voltar"})]})}),c.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:c.jsxs(Kb,{defaultValue:"personal",className:"space-y-4 sm:space-y-6",children:[c.jsxs(kg,{className:"grid w-full grid-cols-4","data-aos":"fade-down","data-aos-duration":"800",children:[c.jsxs(eo,{value:"personal",className:"text-xs sm:text-sm",children:[c.jsx(Ii,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Dados Pessoais"}),c.jsx("span",{className:"sm:hidden",children:"Dados"})]}),c.jsxs(eo,{value:"certifications",className:"text-xs sm:text-sm",children:[c.jsx(om,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Certificaes"}),c.jsx("span",{className:"sm:hidden",children:"Cert."})]}),c.jsxs(eo,{value:"experience",className:"text-xs sm:text-sm",children:[c.jsx(Rn,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Experincia"}),c.jsx("span",{className:"sm:hidden",children:"Exp."})]}),c.jsxs(eo,{value:"skills",className:"text-xs sm:text-sm",children:[c.jsx(Ka,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Habilidades"}),c.jsx("span",{className:"sm:hidden",children:"Skills"})]})]}),c.jsx(to,{value:"personal",children:c.jsxs(ot,{className:"p-4 sm:p-6","data-aos":"fade-up","data-aos-duration":"800",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Dados Pessoais"}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"name",children:"Nome Completo"}),c.jsx(dn,{id:"name",defaultValue:r.name,"aria-label":"Nome completo"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"phone",children:"Telefone"}),c.jsx(dn,{id:"phone",defaultValue:r.phone,"aria-label":"Nmero de telefone"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"email",children:"E-mail"}),c.jsx(dn,{id:"email",type:"email",defaultValue:r.email,disabled:!0,"aria-label":"Endereo de e-mail"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"city",children:"Cidade"}),c.jsx(dn,{id:"city",defaultValue:r.location.city,"aria-label":"Cidade"})]}),c.jsxs("div",{className:"md:col-span-2 flex items-center space-x-2",children:[c.jsx(gg,{id:"isPCD",checked:r.isPCD}),c.jsx(kr,{htmlFor:"isPCD",className:"cursor-pointer",children:"Sou pessoa com deficincia (PCD)"})]})]}),c.jsx(ze,{className:"mt-6",onClick:()=>qr.success("Dados atualizados!"),children:"Salvar Alteraes"})]})}),c.jsx(to,{value:"certifications",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Minhas Certificaes"}),c.jsxs(Zb,{open:s,onOpenChange:a,children:[c.jsx(uY,{asChild:!0,children:c.jsxs(ze,{size:"sm",children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Adicionar Certificao"}),c.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})}),c.jsxs(Dg,{children:[c.jsx(Og,{children:c.jsx(Lg,{children:"Adicionar Nova Certificao"})}),c.jsxs("div",{className:"space-y-4 py-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"cert-type",children:"Tipo de Certificao"}),c.jsxs(oo,{value:o.certificationId,onValueChange:d=>i({...o,certificationId:d}),children:[c.jsx(ka,{id:"cert-type",children:c.jsx(io,{placeholder:"Selecione..."})}),c.jsx(ja,{children:$h.map(d=>c.jsx(cr,{value:d.id,children:d.name},d.id))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"issue-date",children:"Data de Emisso"}),c.jsx(dn,{id:"issue-date",type:"date",value:o.issueDate,onChange:d=>i({...o,issueDate:d.target.value})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"expiry-date",children:"Data de Validade"}),c.jsx(dn,{id:"expiry-date",type:"date",value:o.expiryDate,onChange:d=>i({...o,expiryDate:d.target.value})})]})]}),c.jsxs(Fg,{children:[c.jsx(ze,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),c.jsx(ze,{onClick:l,children:"Salvar"})]})]})]})]}),r.certifications.length>0?c.jsx("div",{className:"grid gap-3 sm:gap-4",children:r.certifications.map((d,p)=>{const u=$h.find(m=>m.id===d.certificationId);return u?c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-2",children:[c.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:u.name}),c.jsx(pY,{certification:d,name:u.name,showDetails:!0})]}),c.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Emisso:"})," ",xd(new Date(d.issueDate),"dd/MM/yyyy")]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Validade:"})," ",xd(new Date(d.expiryDate),"dd/MM/yyyy")]}),c.jsxs("p",{children:[c.jsx("strong",{children:"rgo Emissor:"})," ",u.issuingBody]})]}),d.documentUrl&&c.jsxs(ze,{variant:"link",className:"px-0 mt-2",children:[c.jsx(sm,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Ver Documento"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ze,{variant:"ghost",size:"icon","aria-label":"Editar certificao",children:c.jsx(Z0,{className:"h-4 w-4"})}),c.jsx(ze,{variant:"ghost",size:"icon","aria-label":"Remover certificao",onClick:()=>qr.success("Certificao removida!"),children:c.jsx(nS,{className:"h-4 w-4"})})]})]})},p):null})}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(om,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Voc ainda no adicionou certificaes"}),c.jsxs(ze,{onClick:()=>a(!0),children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Adicionar Primeira Certificao"]})]})]})}),c.jsx(to,{value:"experience",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 sm:gap-0",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Experincia Profissional"}),c.jsxs(ze,{size:"sm",children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),c.jsx("span",{className:"hidden sm:inline",children:"Adicionar Experincia"}),c.jsx("span",{className:"sm:hidden",children:"Adicionar"})]})]}),r.experience.map((d,p)=>c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:d.position}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:d.company}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:d.period})]}),c.jsxs("div",{className:"flex gap-1 sm:gap-2 flex-shrink-0",children:[c.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Editar experincia",children:c.jsx(Z0,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),c.jsx(ze,{variant:"ghost",size:"icon",className:"h-8 w-8","aria-label":"Remover experincia",children:c.jsx(nS,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})]})},p))]})}),c.jsx(to,{value:"skills",children:c.jsxs(ot,{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-4",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Habilidades e Competncias"}),c.jsxs(ze,{variant:"outline",size:"sm",children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Adicionar"]})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:r.skills.map((d,p)=>c.jsx(Tt,{variant:"secondary",className:"text-sm px-3 py-1",children:d},p))})]})})]})}),c.jsx(Ds,{role:"candidate"})]})},fB=lB,hB=cB,hY=dB,gB=k.forwardRef(({className:e,...t},r)=>c.jsx(Ag,{className:zt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));gB.displayName=Ag.displayName;const gY=Sm("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Jb=k.forwardRef(({side:e="right",className:t,children:r,...n},s)=>c.jsxs(hY,{children:[c.jsx(gB,{}),c.jsxs(Ig,{ref:s,className:zt(gY({side:e}),t),...n,children:[r,c.jsxs(uB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[c.jsx(Ol,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jb.displayName=Ig.displayName;const e1=({className:e,...t})=>c.jsx("div",{className:zt("flex flex-col space-y-2 text-center sm:text-left",e),...t});e1.displayName="SheetHeader";const t1=k.forwardRef(({className:e,...t},r)=>c.jsx(Ng,{ref:r,className:zt("text-lg font-semibold text-foreground",e),...t}));t1.displayName=Ng.displayName;const _Y=k.forwardRef(({className:e,...t},r)=>c.jsx($g,{ref:r,className:zt("text-sm text-muted-foreground",e),...t}));_Y.displayName=$g.displayName;const xY=()=>{const e=sn(),t=ls(),[r,n]=k.useState(null),[s,a]=k.useState([]),[o,i]=k.useState(""),[l,d]=k.useState("all"),[p,u]=k.useState(!1);if(k.useEffect(()=>{if(!t){e("/login");return}const h=lo.find(_=>_.id===t.id);h&&n(h)},[t,e]),k.useEffect(()=>{if(!r)return;let h=Fi.filter(v=>v.active);h=h.filter(v=>v.restrictions.womenExclusive?r.gender==="feminino":!0),o&&o.length>=2&&(h=Hb.searchJobs(o,h,{fuzzyMatch:!0,synonyms:!0,minScore:20,maxResults:100}).map(g=>g.item));let _=h.map(v=>{const g=Pg.find(y=>y.id===v.companyId),x=Cg(r,v);return{job:v,company:g,matchScore:x.score}});l!=="all"&&(_=_.filter(({job:v})=>v.category===l)),p&&(_=_.filter(({matchScore:v})=>v===100)),o||_.sort((v,g)=>g.matchScore-v.matchScore),a(_)},[r,o,l,p]),!r)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const m=["all",...new Set(Fi.map(h=>h.category))],f=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"category",children:"Categoria"}),c.jsxs(oo,{value:l,onValueChange:d,children:[c.jsx(ka,{id:"category",children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todas as categorias"}),m.slice(1).map(h=>c.jsx(cr,{value:h,children:h},h))]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(gg,{id:"fullMatch",checked:p,onCheckedChange:h=>u(h)}),c.jsx(kr,{htmlFor:"fullMatch",className:"cursor-pointer",children:"Apenas vagas que atendo 100%"})]}),c.jsx(ze,{variant:"outline",className:"w-full",onClick:()=>{i(""),d("all"),u(!1)},children:"Limpar Filtros"})]});return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsx("div",{className:"container mx-auto",children:c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Buscar Vagas"})})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsx("div",{className:"mb-6 space-y-4","data-aos":"fade-down","data-aos-duration":"800",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground","aria-hidden":"true"}),c.jsx(dn,{type:"search",placeholder:"Busca inteligente: cargo, habilidades, empresa...",className:"pl-10 pr-12",value:o,onChange:h=>i(h.target.value),"aria-label":"Buscar vagas com IA"}),o&&c.jsxs(Tt,{variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs",children:[c.jsx(dd,{className:"h-2 w-2 mr-1"}),"IA"]})]}),c.jsxs(fB,{children:[c.jsx(hB,{asChild:!0,children:c.jsxs(ze,{variant:"outline",size:"icon",className:"md:hidden",children:[c.jsx(D3,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Abrir filtros"})]})}),c.jsxs(Jb,{children:[c.jsx(e1,{children:c.jsx(t1,{children:"Filtros"})}),c.jsx("div",{className:"mt-6",children:c.jsx(f,{})})]})]})]})}),c.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[c.jsx("aside",{className:"hidden md:block",children:c.jsxs(ot,{className:"p-4 sticky top-4",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Filtros"}),c.jsx(f,{})]})}),c.jsxs("div",{className:"md:col-span-3 space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," vaga(s) encontrada(s)"]})}),s.length>0?c.jsx("div",{className:"grid gap-4",children:s.map(({job:h,company:_,matchScore:v})=>c.jsx(cz,{job:h,company:_,matchScore:v,showMatchScore:!0},h.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(cd,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhuma vaga encontrada com os filtros selecionados"}),c.jsx(ze,{variant:"outline",onClick:()=>{i(""),d("all"),u(!1)},children:"Limpar Filtros"})]})]})]})]}),c.jsx(Ds,{role:"candidate"})]})};var vY="Separator",NI="horizontal",yY=["horizontal","vertical"],_B=k.forwardRef((e,t)=>{const{decorative:r,orientation:n=NI,...s}=e,a=wY(n)?n:NI,i=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return c.jsx(At.div,{"data-orientation":a,...i,...s,ref:t})});_B.displayName=vY;function wY(e){return yY.includes(e)}var xB=_B;const Rg=k.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>c.jsx(xB,{ref:s,decorative:r,orientation:t,className:zt("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Rg.displayName=xB.displayName;const bY={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},MY=(e,t,r)=>{let n;const s=bY[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"em "+n:"h "+n:n},TY={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},EY={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},CY={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PY={date:Hc({formats:TY,defaultWidth:"full"}),time:Hc({formats:EY,defaultWidth:"full"}),dateTime:Hc({formats:CY,defaultWidth:"full"})},SY={lastWeek:e=>{const t=e.getDay();return"'"+(t===0||t===6?"ltimo":"ltima")+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},kY=(e,t,r,n)=>{const s=SY[e];return typeof s=="function"?s(t):s},jY={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},AY={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},IY={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},NY={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},$Y={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},DY={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},OY=(e,t)=>{const r=Number(e);return(t==null?void 0:t.unit)==="week"?r+"":r+""},FY={ordinalNumber:OY,era:Ya({values:jY,defaultWidth:"wide"}),quarter:Ya({values:AY,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ya({values:IY,defaultWidth:"wide"}),day:Ya({values:NY,defaultWidth:"wide"}),dayPeriod:Ya({values:$Y,defaultWidth:"wide",formattingValues:DY,defaultFormattingWidth:"wide"})},LY=/^(\d+)[o]?/i,RY=/\d+/i,zY={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},BY={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},VY={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},WY={any:[/1/i,/2/i,/3/i,/4/i]},UY={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},GY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},HY={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},qY={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},KY={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},QY={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},XY={ordinalNumber:jz({matchPattern:LY,parsePattern:RY,valueCallback:e=>parseInt(e,10)}),era:Za({matchPatterns:zY,defaultMatchWidth:"wide",parsePatterns:BY,defaultParseWidth:"any"}),quarter:Za({matchPatterns:VY,defaultMatchWidth:"wide",parsePatterns:WY,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Za({matchPatterns:UY,defaultMatchWidth:"wide",parsePatterns:GY,defaultParseWidth:"any"}),day:Za({matchPatterns:HY,defaultMatchWidth:"wide",parsePatterns:qY,defaultParseWidth:"any"}),dayPeriod:Za({matchPatterns:KY,defaultMatchWidth:"any",parsePatterns:QY,defaultParseWidth:"any"})},r1={code:"pt-BR",formatDistance:MY,formatLong:PY,formatRelative:kY,localize:FY,match:XY,options:{weekStartsOn:0,firstWeekContainsDate:1}},YY=()=>{const{id:e}=pg(),t=sn(),r=ls(),[n,s]=k.useState(null),[a,o]=k.useState(null),[i,l]=k.useState(null),[d,p]=k.useState(null),[u,m]=k.useState(!1);if(k.useEffect(()=>{if(!r){t("/login");return}const v=Fi.find(g=>g.id===e);if(v){s(v);const g=Pg.find(y=>y.id===v.companyId);o(g);const x=lo.find(y=>y.id===r.id);if(x){l(x);const y=Cg(x,v);p(y)}}},[e,r,t]),!n||!a||!i||!d)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const f=()=>{qr.success("Candidatura enviada com sucesso!"),m(!1),t("/candidato/candidaturas")},h=(v,g)=>`R$ ${v.toLocaleString("pt-BR")} - R$ ${g.toLocaleString("pt-BR")}`,_=v=>v>=80?"text-success":v>=60?"text-warning":"text-danger";return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t(-1),"aria-label":"Voltar",className:"flex-shrink-0",children:c.jsx(bd,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t("/candidato/dashboard"),"aria-label":"Ir para o incio",className:"flex-shrink-0",children:c.jsx(am,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),c.jsx("h1",{className:"text-base sm:text-xl md:text-2xl font-bold truncate",children:"Detalhes da Vaga"})]})}),c.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[c.jsxs(ot,{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-3xl font-bold mb-2",children:n.title}),c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-4",children:[c.jsx(gU,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{className:"font-medium",children:a.name})]})]}),c.jsxs(Tt,{className:`${d.score>=80?"bg-success":d.score>=60?"bg-warning":"bg-muted"} text-white flex items-center gap-1 text-lg px-4 py-2`,children:[c.jsx(Lo,{className:"h-4 w-4","aria-hidden":"true"}),d.score,"% Match"]})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ai,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Localizao"}),c.jsx("p",{className:"font-medium",children:n.location})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Rn,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Regime"}),c.jsx("p",{className:"font-medium",children:n.regime})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(bU,{className:"h-5 w-5 text-primary","aria-hidden":"true"}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-muted-foreground",children:"Faixa Salarial"}),c.jsx("p",{className:"font-medium",children:h(n.salary.min,n.salary.max)})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[c.jsx(Tt,{variant:"outline",children:n.category}),n.restrictions.pcdExclusive&&c.jsx(Tt,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:"Exclusiva PCD"}),n.restrictions.noColorBlindness&&c.jsx(Tt,{variant:"secondary",children:"No aceita daltonismo"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ze,{className:"flex-1",size:"lg",onClick:()=>m(!0),children:"Candidatar-se"}),c.jsx(ze,{variant:"outline",size:"icon","aria-label":"Compartilhar vaga",children:c.jsx(zw,{className:"h-4 w-4"})})]})]}),c.jsxs(ot,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Requisitos e Compatibilidade"}),n.requiredCertifications.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"font-medium mb-3",children:"Certificaes Obrigatrias"}),c.jsx("div",{className:"space-y-2",children:n.requiredCertifications.map(v=>{const g=$h.find(y=>y.id===v);if(!g)return null;const x=i.certifications.some(y=>y.certificationId===v&&new Date(y.expiryDate)>new Date);return c.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50",children:[x?c.jsx(Nn,{className:"h-5 w-5 text-success flex-shrink-0","aria-hidden":"true"}):c.jsx(mh,{className:"h-5 w-5 text-danger flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:x?"text-success":"text-danger",children:g.name}),c.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:x?"Voc possui":"Voc no possui"})]},v)})}),d.missingCertifications.length>0&&c.jsxs("div",{className:"mt-4 p-4 bg-danger/10 border border-danger/20 rounded-lg",children:[c.jsx("p",{className:"text-sm text-danger font-medium mb-2",children:"Certificaes faltantes:"}),c.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:d.missingCertifications.map((v,g)=>c.jsxs("li",{children:[" ",v]},g))})]})]}),n.requiredSkills.length>0&&c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-3",children:"Habilidades Obrigatrias"}),c.jsx("div",{className:"space-y-2",children:n.requiredSkills.map((v,g)=>{const x=i.skills.some(y=>y.toLowerCase().includes(v.toLowerCase()));return c.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50",children:[x?c.jsx(Nn,{className:"h-5 w-5 text-success flex-shrink-0","aria-hidden":"true"}):c.jsx(mh,{className:"h-5 w-5 text-danger flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:x?"text-success":"text-danger",children:v}),c.jsx("span",{className:"text-xs text-muted-foreground ml-auto",children:x?"Voc possui":"Voc no possui"})]},g)})})]})]}),c.jsxs(ot,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Descrio da Vaga"}),c.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description})]}),n.desiredSkills.length>0&&c.jsxs(ot,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Requisitos Desejveis"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.desiredSkills.map((v,g)=>c.jsx(Tt,{variant:"outline",children:v},g))})]}),c.jsxs(ot,{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Informaes Adicionais"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium mb-2",children:"Benefcios"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.benefits.map((v,g)=>c.jsx(Tt,{variant:"secondary",children:v},g))})]}),c.jsx(Rg,{}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Data de Publicao:"}),c.jsx("p",{className:"font-medium mt-1",children:xd(new Date(n.publishedAt),"dd 'de' MMMM 'de' yyyy",{locale:r1})})]}),n.restrictions.minExperience>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-muted-foreground",children:"Experincia Mnima:"}),c.jsxs("p",{className:"font-medium mt-1",children:[n.restrictions.minExperience," ano(s)"]})]})]})]})]})]}),c.jsx(Zb,{open:u,onOpenChange:m,children:c.jsxs(Dg,{children:[c.jsx(Og,{children:c.jsx(Lg,{children:"Confirmar Candidatura"})}),c.jsxs("div",{className:"py-4",children:[c.jsxs("p",{className:"mb-4",children:["Voc est se candidatando para a vaga de ",c.jsx("strong",{children:n.title})," na empresa ",c.jsx("strong",{children:a.name}),"."]}),c.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[c.jsx("p",{className:"text-sm font-medium mb-2",children:"Seu perfil ser enviado com:"}),c.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[c.jsxs("li",{children:[" ",i.certifications.length," certificao(es)"]}),c.jsxs("li",{children:[" ",i.experience.length," experincia(s) profissional(is)"]}),c.jsxs("li",{children:[" ",i.skills.length," habilidade(s)"]}),c.jsxs("li",{children:[" Score de compatibilidade: ",c.jsxs("span",{className:_(d.score),children:[d.score,"%"]})]})]})]})]}),c.jsxs(Fg,{children:[c.jsx(ze,{variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),c.jsx(ze,{onClick:f,children:"Confirmar Candidatura"})]})]})}),c.jsx(Ds,{role:"candidate"})]})},xm=[{id:"app001",jobId:"job001",candidateId:"c001",matchScore:90,status:"pending",appliedAt:"2024-11-15T10:30:00Z"},{id:"app002",jobId:"job002",candidateId:"c002",matchScore:95,status:"viewed",appliedAt:"2024-11-16T14:20:00Z"},{id:"app003",jobId:"job003",candidateId:"c003",matchScore:70,status:"pending",appliedAt:"2024-11-17T09:15:00Z"}],ZY=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]);k.useEffect(()=>{if(!t){e("/login");return}const a=xm.filter(o=>o.candidateId===t.id).map(o=>{const i=Fi.find(d=>d.id===o.jobId),l=i?Pg.find(d=>d.id===i.companyId):null;return{application:o,job:i,company:l}}).filter(o=>o.job&&o.company);n(a)},[t,e]);const s=a=>{switch(a){case"pending":return{icon:na,label:"Pendente",className:"bg-muted text-muted-foreground",description:"Aguardando anlise da empresa"};case"viewed":return{icon:Nn,label:"Visualizada",className:"bg-primary/10 text-primary",description:"A empresa visualizou seu perfil"};case"interview":return{icon:Nn,label:"Em Entrevista",className:"bg-success text-success-foreground",description:"Voc foi selecionado para entrevista"};case"rejected":return{icon:mh,label:"No selecionado",className:"bg-danger/10 text-danger",description:"No foi selecionado para esta vaga"};case"hired":return{icon:Nn,label:"Contratado",className:"bg-success text-success-foreground",description:"Parabns! Voc foi contratado"}}};return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-4 px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsx("h1",{className:"text-2xl font-bold",children:"Minhas Candidaturas"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Acompanhe o status das suas candidaturas"})]})}),c.jsx("main",{className:"container mx-auto px-4 py-6",children:r.length>0?c.jsx("div",{className:"space-y-4",children:r.map(({application:a,job:o,company:i})=>{const l=s(a.status),d=l.icon;return c.jsxs(ot,{className:"p-4 hover:shadow-lg transition-all",children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg mb-1",children:o.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:i.name})]}),c.jsxs(Tt,{className:l.className,children:[c.jsx(d,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),l.label]})]}),c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:l.description}),c.jsxs("div",{className:"flex justify-between items-center pt-3 border-t",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Candidatura enviada em"," ",xd(new Date(a.appliedAt),"dd/MM/yyyy 's' HH:mm",{locale:r1})]}),c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>e(`/candidato/vaga/${o.id}`),children:"Ver Detalhes"})]}),a.matchScore&&c.jsx("div",{className:"mt-3 pt-3 border-t",children:c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Score de compatibilidade:"}),c.jsxs(Tt,{variant:"outline",children:[a.matchScore,"% Match"]})]})})]},a.id)})}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Rn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Nenhuma candidatura ainda"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Voc ainda no se candidatou a nenhuma vaga. Explore as oportunidades disponveis!"}),c.jsx(ze,{onClick:()=>e("/candidato/vagas"),children:"Buscar Vagas"})]})}),c.jsx(Ds,{role:"candidate"})]})},JY=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]),[s,a]=k.useState(new Map),[o,i]=k.useState(0),[l,d]=k.useState(0);if(k.useEffect(()=>{if(!t){e("/login");return}const m=Fi.filter(v=>v.companyId===t.id&&v.active);n(m);const f=new Map;m.forEach(v=>{const g=xm.filter(x=>x.jobId===v.id).length;f.set(v.id,g)}),a(f);const h=new Set(mo.filter(v=>v.status==="in_progress"||v.status==="enrolled").map(v=>v.userId)).size,_=mo.filter(v=>v.status==="completed"&&v.certificateIssued).length;i(h),d(_)},[t,e]),!t)return null;const p=Array.from(s.values()).reduce((m,f)=>m+f,0),u=xm.filter(m=>r.some(f=>f.id===m.jobId)&&m.status==="pending").length;return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto flex justify-between items-center gap-2",children:[c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold truncate",children:"Dashboard Empresa"}),c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:["Bem-vindo, ",t.name]})]}),c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{localStorage.removeItem("currentUser"),e("/")},children:"Sair"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-3 md:gap-4",children:[c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:c.jsx(Rn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary","aria-hidden":"true"})}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Vagas Ativas"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:c.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary","aria-hidden":"true"})}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:p}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Candidaturas"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:c.jsx(Lo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-warning","aria-hidden":"true"})}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:u}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Pendentes"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx("div",{className:"flex items-center justify-between mb-1 sm:mb-2",children:c.jsx(Lo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-success","aria-hidden":"true"})}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.length>0?Math.round(p/r.length):0}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Mdia/Vaga"})]})]}),c.jsxs(ot,{className:"p-4 sm:p-6",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Aes Rpidas"}),c.jsxs("div",{className:"grid sm:grid-cols-3 gap-3 sm:gap-4",children:[c.jsxs(ze,{className:"h-auto py-3 sm:py-4 flex flex-col gap-2 text-sm sm:text-base",onClick:()=>alert("Funcionalidade em desenvolvimento"),children:[c.jsx(_i,{className:"h-5 w-5 sm:h-6 sm:w-6","aria-hidden":"true"}),c.jsx("span",{children:"Publicar Nova Vaga"})]}),c.jsxs(ze,{variant:"outline",className:"h-auto py-3 sm:py-4 flex flex-col gap-2 text-sm sm:text-base",onClick:()=>e("/empresa/candidatos"),children:[c.jsx(so,{className:"h-5 w-5 sm:h-6 sm:w-6","aria-hidden":"true"}),c.jsx("span",{children:"Buscar Talentos"})]}),c.jsxs(ze,{variant:"outline",className:"h-auto py-3 sm:py-4 flex flex-col gap-2 text-sm sm:text-base",onClick:()=>e("/empresa/vagas"),children:[c.jsx(Rn,{className:"h-5 w-5 sm:h-6 sm:w-6","aria-hidden":"true"}),c.jsx("span",{children:"Gerenciar Vagas"})]})]})]}),c.jsxs(ot,{className:"p-4 sm:p-6 bg-gradient-to-br from-success/5 to-primary/5 border-success/20",children:[c.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 mb-4",children:[c.jsx("div",{className:"p-2 sm:p-3 bg-success/10 rounded-lg flex-shrink-0",children:c.jsx(Js,{className:"h-6 w-6 sm:h-8 sm:w-8 text-success","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-1",children:"Desenvolvimento de Talentos"}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Candidatos ativos na plataforma de capacitao"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[c.jsxs("div",{className:"p-3 sm:p-4 bg-background/50 rounded-lg border border-primary/10",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Js,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Estudando Agora"})]}),c.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-primary",children:o}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"candidatos ativos"})]}),c.jsxs("div",{className:"p-3 sm:p-4 bg-background/50 rounded-lg border border-success/10",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Ka,{className:"h-4 w-4 sm:h-5 sm:w-5 text-success flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Certificados"})]}),c.jsx("div",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-success",children:l}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"emitidos"})]})]}),c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-primary/5 rounded-lg border border-primary/10",children:c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[" ",c.jsx("strong",{children:"Dica:"})," Candidatos em capacitao demonstram proatividade e interesse em desenvolvimento profissional. Explore o perfil deles para encontrar talentos qualificados!"]})})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2 mb-3 sm:mb-4",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Vagas Recentes"}),c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/empresa/vagas"),children:"Ver Todas"})]}),r.length>0?c.jsx("div",{className:"grid gap-3 sm:gap-4",children:r.slice(0,5).map(m=>c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[c.jsx("h3",{className:"font-semibold text-base sm:text-lg mb-1",children:m.title}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2",children:m.category}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Tt,{variant:"outline",className:"text-xs",children:m.regime}),c.jsx(Tt,{variant:"outline",className:"text-xs",children:m.location})]})]}),c.jsxs("div",{className:"text-center sm:text-right w-full sm:w-auto",children:[c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-primary",children:s.get(m.id)||0}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"candidatos"})]})]}),c.jsxs("div",{className:"mt-3 sm:mt-4 flex gap-2",children:[c.jsx(ze,{variant:"outline",size:"sm",className:"flex-1 text-xs sm:text-sm",onClick:()=>e(`/candidato/vaga/${m.id}`),children:"Ver Vaga"}),c.jsx(ze,{size:"sm",className:"flex-1 text-xs sm:text-sm",onClick:()=>e(`/empresa/vaga/${m.id}/candidatos`),children:"Ver Candidatos"})]})]},m.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Rn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma vaga publicada"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Comece publicando sua primeira vaga para atrair talentos qualificados"}),c.jsxs(ze,{onClick:()=>e("/empresa/vagas/nova"),children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Publicar Primeira Vaga"]})]})]})]}),c.jsx(Ds,{role:"company"})]})},eZ=()=>{const e=sn(),t=ls(),[r,n]=k.useState(""),[s,a]=k.useState([]),[o,i]=k.useState("all"),[l,d]=k.useState("all");if(k.useEffect(()=>{if(!t){e("/login");return}let m=lo.map(f=>{const h=mo.filter(w=>w.userId===f.id),_=h.filter(w=>w.status==="in_progress"||w.status==="enrolled").length,v=h.filter(w=>w.status==="completed").length,g=h.filter(w=>w.status==="completed"&&w.certificateIssued).length,x=h.length>0?Math.round(h.reduce((w,b)=>w+b.progressPercentage,0)/h.length):0,y=h.sort((w,b)=>new Date(b.lastAccessedAt).getTime()-new Date(w.lastAccessedAt).getTime()).slice(0,3).map(w=>({course:co.find(b=>b.id===w.courseId),progress:w})).filter(w=>w.course);return{candidate:f,coursesInProgress:_,coursesCompleted:v,certificatesEarned:g,totalProgressPercentage:x,recentCourses:y}});if(r){const f=r.toLowerCase();m=m.filter(h=>h.candidate.name.toLowerCase().includes(f)||h.candidate.mainArea.toLowerCase().includes(f)||h.candidate.skills.some(_=>_.toLowerCase().includes(f)))}o!=="all"&&(m=m.filter(f=>f.candidate.mainArea===o)),l==="studying"?m=m.filter(f=>f.coursesInProgress>0):l==="certified"&&(m=m.filter(f=>f.certificatesEarned>0)),m.sort((f,h)=>{const _=f.coursesInProgress*2+f.coursesCompleted;return h.coursesInProgress*2+h.coursesCompleted-_}),a(m)},[t,e,r,o,l]),!t)return null;const p=["all",...new Set(lo.map(u=>u.mainArea))];return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/empresa/dashboard"),className:"mb-2",children:" Voltar ao Dashboard"}),c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Buscar Talentos"}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Explore candidatos e seus desempenhos na plataforma de capacitao"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Ii,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:lo.length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Total de Candidatos"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Js,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-primary",children:s.filter(u=>u.coursesInProgress>0).length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Estudando Ativamente"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Ka,{className:"h-4 w-4 sm:h-5 sm:w-5 text-success mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-success",children:s.reduce((u,m)=>u+m.certificatesEarned,0)}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Certificados Emitidos"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Lo,{className:"h-4 w-4 sm:h-5 sm:w-5 text-warning mb-2","aria-hidden":"true"}),c.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-warning",children:[Math.round(s.reduce((u,m)=>u+m.totalProgressPercentage,0)/Math.max(1,s.length)),"%"]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Progresso Mdio"})]})]}),c.jsx(ot,{className:"p-4 mb-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground","aria-hidden":"true"}),c.jsx(dn,{type:"search",placeholder:"Buscar por nome, rea ou habilidades...",className:"pl-10",value:r,onChange:u=>n(u.target.value)})]}),c.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(Rn,{className:"h-4 w-4","aria-hidden":"true"}),"rea de Atuao"]}),c.jsxs(oo,{value:o,onValueChange:i,children:[c.jsx(ka,{children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todas as reas"}),p.slice(1).map(u=>c.jsx(cr,{value:u,children:u},u))]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(MU,{className:"h-4 w-4","aria-hidden":"true"}),"Status de Capacitao"]}),c.jsxs(oo,{value:l,onValueChange:d,children:[c.jsx(ka,{children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todos os candidatos"}),c.jsx(cr,{value:"studying",children:"Estudando ativamente"}),c.jsx(cr,{value:"certified",children:"Com certificados"})]})]})]})]})]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.length," candidato(s) encontrado(s)"]})}),s.length>0?c.jsx("div",{className:"space-y-4",children:s.map(({candidate:u,coursesInProgress:m,coursesCompleted:f,certificatesEarned:h,totalProgressPercentage:_,recentCourses:v})=>c.jsx(ot,{className:"p-4 hover:shadow-lg transition-all",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"flex items-start justify-between gap-2 mb-2",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg",children:u.name}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Rn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),u.mainArea]}),c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Ai,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),u.location.city,", ",u.location.state]}),u.isPCD&&c.jsx(Tt,{variant:"secondary",className:"text-xs",children:"PCD"})]})]})}),u.skills.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[u.skills.slice(0,5).map((g,x)=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:g},x)),u.skills.length>5&&c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:["+",u.skills.length-5]})]})]}),c.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-1 gap-4 sm:w-32 text-center sm:text-right",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-primary",children:m}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Em Progresso"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-success",children:f}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Concludos"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-warning",children:h}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Certificados"})]})]})]}),v.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Cs,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("span",{className:"text-sm font-medium",children:"Cursos Recentes"})]}),v.map(({course:g,progress:x})=>c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:g.title}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx(Tt,{variant:"outline",className:"text-xs",children:g.category}),x.status==="completed"?c.jsxs(Tt,{variant:"secondary",className:"text-xs bg-success/10 text-success",children:[c.jsx(Nn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"Concludo"]}):c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:[c.jsx(na,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"Em andamento"]})]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"text-sm font-bold text-primary",children:[x.progressPercentage,"%"]})})]}),c.jsx(Oi,{value:x.progressPercentage,className:"h-2"})]},x.id))]}),c.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[c.jsx(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>e(`/candidato/perfil?id=${u.id}`),children:"Ver Perfil Completo"}),c.jsx(ze,{size:"sm",className:"flex-1",onClick:()=>{e("/empresa/dashboard")},children:"Entrar em Contato"})]})]})},u.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(cd,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum candidato encontrado com os filtros selecionados"}),c.jsx(ze,{variant:"outline",onClick:()=>{n(""),i("all"),d("all")},children:"Limpar Filtros"})]})]})]}),c.jsx(Ds,{role:"company"})]})},tZ=()=>{const e=sn(),{id:t}=pg(),r=ls(),[n,s]=k.useState(null),[a,o]=k.useState([]),[i,l]=k.useState("all");if(k.useEffect(()=>{if(!r){e("/login");return}if(!t){e("/empresa/dashboard");return}const u=Fi.find(_=>_.id===t);if(!u){e("/empresa/dashboard");return}s(u);let h=xm.filter(_=>_.jobId===t).map(_=>{const v=lo.find(E=>E.id===_.candidateId);if(!v)return null;const g=Cg(v,u),x=mo.filter(E=>E.userId===v.id),y=x.filter(E=>E.status==="in_progress"||E.status==="enrolled").length,w=x.filter(E=>E.status==="completed").length,b=x.filter(E=>E.status==="completed"&&E.certificateIssued).length,C=x.sort((E,P)=>new Date(P.lastAccessedAt).getTime()-new Date(E.lastAccessedAt).getTime()).slice(0,2).map(E=>({course:co.find(P=>P.id===E.courseId),progress:E})).filter(E=>E.course);return{application:_,candidate:v,matchScore:g.score,coursesInProgress:y,coursesCompleted:w,certificatesEarned:b,recentCourses:C}}).filter(_=>_!==null);i!=="all"&&(h=h.filter(_=>_.application.status===i)),h.sort((_,v)=>v.matchScore-_.matchScore),o(h)},[r,e,t,i]),!r||!n)return null;const d=u=>{switch(u){case"pending":return"bg-warning/10 text-warning border-warning/20";case"viewed":return"bg-primary/10 text-primary border-primary/20";case"interview":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"rejected":return"bg-destructive/10 text-destructive border-destructive/20";case"hired":return"bg-success/10 text-success border-success/20";default:return"bg-muted text-muted-foreground"}},p=u=>({pending:"Pendente",viewed:"Visualizado",interview:"Entrevista",rejected:"Rejeitado",hired:"Contratado"})[u]||u;return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/empresa/dashboard"),className:"mb-2",children:" Voltar ao Dashboard"}),c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:n.title}),c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:[a.length," candidatura(s) recebida(s)"]})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsx(ot,{className:"p-4 mb-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Resumo da Vaga"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx(Tt,{variant:"outline",children:n.category}),c.jsx(Tt,{variant:"outline",children:n.regime}),c.jsxs(Tt,{variant:"outline",children:[c.jsx(Ai,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),n.location]}),n.restrictions.pcdExclusive&&c.jsx(Tt,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:"Exclusiva PCD"}),n.restrictions.womenExclusive&&c.jsx(Tt,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",children:"Exclusiva Mulheres"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>e(`/candidato/vaga/${n.id}`),children:"Ver Detalhes da Vaga"})})]})}),c.jsx(ot,{className:"p-4 mb-6",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Filtrar por Status"}),c.jsxs(oo,{value:i,onValueChange:l,children:[c.jsx(ka,{children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todos os status"}),c.jsx(cr,{value:"pending",children:"Pendentes"}),c.jsx(cr,{value:"viewed",children:"Visualizados"}),c.jsx(cr,{value:"interview",children:"Em entrevista"}),c.jsx(cr,{value:"hired",children:"Contratados"}),c.jsx(cr,{value:"rejected",children:"Rejeitados"})]})]})]})}),a.length>0?c.jsx("div",{className:"space-y-4",children:a.map(({application:u,candidate:m,matchScore:f,coursesInProgress:h,coursesCompleted:_,certificatesEarned:v,recentCourses:g})=>c.jsx(ot,{className:"p-4 hover:shadow-lg transition-all",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg",children:m.name}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Rn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),m.mainArea]}),c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Ai,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),m.location.city]}),m.isPCD&&c.jsx(Tt,{variant:"secondary",className:"text-xs",children:"PCD"})]})]}),c.jsxs(Tt,{className:`${f>=80?"bg-success text-success-foreground":f>=60?"bg-warning text-warning-foreground":"bg-muted text-muted-foreground"}`,children:[c.jsx(Lo,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),f,"% Match"]})]})}),c.jsx(Tt,{className:d(u.status),children:p(u.status)})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4 p-3 bg-muted/50 rounded-lg",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(Js,{className:"h-5 w-5 mx-auto mb-1 text-primary","aria-hidden":"true"}),c.jsx("div",{className:"text-lg font-bold text-primary",children:h}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Em Progresso"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx(Nn,{className:"h-5 w-5 mx-auto mb-1 text-success","aria-hidden":"true"}),c.jsx("div",{className:"text-lg font-bold text-success",children:_}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Concludos"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx(Ka,{className:"h-5 w-5 mx-auto mb-1 text-warning","aria-hidden":"true"}),c.jsx("div",{className:"text-lg font-bold text-warning",children:v}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Certificados"})]})]}),g.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Cs,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("span",{className:"text-sm font-medium",children:"Cursos em Andamento"})]}),g.map(({course:x,progress:y})=>c.jsxs("div",{className:"p-3 bg-background rounded-lg border space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-start gap-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:x.title}),c.jsx(Tt,{variant:"outline",className:"text-xs mt-1",children:x.category})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("div",{className:"text-sm font-bold text-primary",children:[y.progressPercentage,"%"]}),y.status==="completed"?c.jsxs(Tt,{variant:"secondary",className:"text-xs bg-success/10 text-success mt-1",children:[c.jsx(Nn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"Concludo"]}):c.jsxs(Tt,{variant:"secondary",className:"text-xs mt-1",children:[c.jsx(na,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),"Estudando"]})]})]}),c.jsx(Oi,{value:y.progressPercentage,className:"h-2"})]},y.id))]}),m.skills.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Habilidades:"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.skills.slice(0,6).map((x,y)=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:x},y)),m.skills.length>6&&c.jsxs(Tt,{variant:"secondary",className:"text-xs",children:["+",m.skills.length-6]})]})]}),c.jsxs("div",{className:"flex gap-2 pt-3 border-t",children:[c.jsx(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>e(`/candidato/perfil?id=${m.id}`),children:"Ver Perfil Completo"}),c.jsx(ze,{size:"sm",className:"flex-1",onClick:()=>{alert("Funcionalidade de contato em desenvolvimento")},children:"Entrar em Contato"})]})]})},u.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:i==="all"?"Nenhum candidato se candidatou a esta vaga ainda":"Nenhum candidato encontrado com este status"}),i!=="all"&&c.jsx(ze,{variant:"outline",onClick:()=>l("all"),children:"Mostrar Todos"})]})]}),c.jsx(Ds,{role:"company"})]})},rZ=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]),[s,a]=k.useState("all"),[o,i]=k.useState(new Map);if(k.useEffect(()=>{if(!t){e("/login");return}const f=Fi.filter(_=>_.companyId===t.id);n(f);const h=new Map;f.forEach(_=>{const v=xm.filter(g=>g.jobId===_.id).length;h.set(_.id,v)}),i(h)},[t,e]),!t)return null;const l=r.filter(f=>s==="active"?f.active:s==="inactive"?!f.active:!0),d=r.filter(f=>f.active).length,p=r.filter(f=>!f.active).length,u=Array.from(o.values()).reduce((f,h)=>f+h,0),m=f=>new Date(f).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>e("/empresa/dashboard"),className:"mb-2",children:" Voltar ao Dashboard"}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Gerenciar Vagas"}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Gerencie todas as suas oportunidades de emprego"})]}),c.jsxs(ze,{onClick:()=>e("/empresa/vagas/nova"),children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Nova Vaga"]})]})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Rn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:r.length}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Total de Vagas"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(Nn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-success mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-success",children:d}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Ativas"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(mh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:p}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Inativas"})]}),c.jsxs(ot,{className:"p-3 sm:p-4",children:[c.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-xl sm:text-2xl font-bold text-primary",children:u}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Candidaturas"})]})]}),c.jsx(ot,{className:"p-4 mb-6",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Filtrar por Status"}),c.jsxs(oo,{value:s,onValueChange:f=>a(f),children:[c.jsx(ka,{children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todas as vagas"}),c.jsx(cr,{value:"active",children:"Apenas ativas"}),c.jsx(cr,{value:"inactive",children:"Apenas inativas"})]})]})]})}),l.length>0?c.jsx("div",{className:"space-y-4",children:l.map(f=>c.jsx(ot,{className:"p-4 hover:shadow-lg transition-all",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-lg",children:f.title}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:f.category})]}),c.jsx(Tt,{variant:f.active?"default":"secondary",className:f.active?"bg-success/10 text-success border-success/20":"",children:f.active?"Ativa":"Inativa"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Ai,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),f.location]}),c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(Rn,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),f.regime]}),c.jsxs(Tt,{variant:"outline",className:"text-xs",children:[c.jsx(uh,{className:"h-3 w-3 mr-1","aria-hidden":"true"}),m(f.publishedAt)]}),f.restrictions.pcdExclusive&&c.jsx(Tt,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:"Exclusiva PCD"}),f.restrictions.womenExclusive&&c.jsx(Tt,{variant:"secondary",className:"text-xs bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-100",children:"Exclusiva Mulheres"})]})]}),c.jsxs("div",{className:"text-center sm:text-right",children:[c.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-end mb-1",children:[c.jsx(so,{className:"h-4 w-4 text-primary","aria-hidden":"true"}),c.jsx("span",{className:"text-2xl font-bold text-primary",children:o.get(f.id)||0})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"candidatos"})]})]}),c.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:f.description}),c.jsx("div",{className:"pt-2 border-t",children:c.jsxs("p",{className:"text-sm font-medium",children:["R$ ",f.salary.min.toLocaleString("pt-BR")," - R$"," ",f.salary.max.toLocaleString("pt-BR")]})}),c.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[c.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>e(`/candidato/vaga/${f.id}`),children:[c.jsx(N3,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Visualizar"]}),c.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{alert("Funcionalidade de edio em desenvolvimento")},children:[c.jsx(Z0,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Editar"]}),c.jsxs(ze,{size:"sm",className:"flex-1",onClick:()=>e(`/empresa/vaga/${f.id}/candidatos`),children:[c.jsx(so,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Ver Candidatos"]})]})]})},f.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Rn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:s==="all"?"Nenhuma vaga cadastrada":s==="active"?"Nenhuma vaga ativa":"Nenhuma vaga inativa"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:s==="all"?"Comece publicando sua primeira vaga para atrair talentos qualificados":"Altere o filtro para ver outras vagas"}),s==="all"?c.jsxs(ze,{onClick:()=>e("/empresa/vagas/nova"),children:[c.jsx(_i,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Publicar Primeira Vaga"]}):c.jsx(ze,{variant:"outline",onClick:()=>a("all"),children:"Ver Todas as Vagas"})]})]}),c.jsx(Ds,{role:"company"})]})},nZ=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]),[s,a]=k.useState([]),[o,i]=k.useState(""),[l,d]=k.useState("all"),[p,u]=k.useState("all"),[m,f]=k.useState("all");if(k.useEffect(()=>{if(!t){e("/login");return}},[t,e]),k.useEffect(()=>{if(t){const g=mo.filter(x=>x.userId===t.id).map(x=>({course:co.find(w=>w.id===x.courseId),progress:x})).filter(x=>x.course);a(g)}},[t]),k.useEffect(()=>{let v=co.filter(g=>g.active);o&&o.length>=2&&(v=Hb.searchCourses(o,v,{fuzzyMatch:!0,synonyms:!0,minScore:20,maxResults:100}).map(x=>x.item)),l!=="all"&&(v=v.filter(g=>g.category===l)),p!=="all"&&(v=v.filter(g=>g.mode===p)),m!=="all"&&(v=v.filter(g=>g.level===m)),o||v.sort((g,x)=>new Date(x.publishedAt).getTime()-new Date(g.publishedAt).getTime()),n(v)},[o,l,p,m]),!t)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const h=["all",...new Set(co.map(v=>v.category))],_=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"category",children:"Categoria"}),c.jsxs(oo,{value:l,onValueChange:d,children:[c.jsx(ka,{id:"category",children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todas as categorias"}),h.slice(1).map(v=>c.jsx(cr,{value:v,children:v},v))]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"mode",children:"Modalidade"}),c.jsxs(oo,{value:p,onValueChange:u,children:[c.jsx(ka,{id:"mode",children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todas as modalidades"}),c.jsx(cr,{value:"ead",children:"EAD"}),c.jsx(cr,{value:"presencial",children:"Presencial"}),c.jsx(cr,{value:"hibrido",children:"Hbrido"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(kr,{htmlFor:"level",children:"Nvel"}),c.jsxs(oo,{value:m,onValueChange:f,children:[c.jsx(ka,{id:"level",children:c.jsx(io,{})}),c.jsxs(ja,{children:[c.jsx(cr,{value:"all",children:"Todos os nveis"}),c.jsx(cr,{value:"basico",children:"Bsico"}),c.jsx(cr,{value:"intermediario",children:"Intermedirio"}),c.jsx(cr,{value:"avancado",children:"Avanado"})]})]})]}),c.jsx(ze,{variant:"outline",className:"w-full",onClick:()=>{i(""),d("all"),u("all"),f("all")},children:"Limpar Filtros"})]});return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Js,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary","aria-hidden":"true"}),c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Capacitao"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Desenvolva suas habilidades e conquiste novas oportunidades"})]})}),c.jsx("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:c.jsxs(Kb,{defaultValue:"all",className:"w-full",children:[c.jsxs(kg,{className:"grid w-full grid-cols-2 mb-6",children:[c.jsxs(eo,{value:"all",className:"text-xs sm:text-sm",children:[c.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Todos os Cursos"]}),c.jsxs(eo,{value:"my-courses",className:"text-xs sm:text-sm",children:[c.jsx(Js,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),"Meus Cursos (",s.length,")"]})]}),c.jsxs(to,{value:"all",className:"space-y-6",children:[c.jsx("div",{className:"space-y-4","data-aos":"fade-down","data-aos-duration":"800",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(cd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground","aria-hidden":"true"}),c.jsx(dn,{type:"search",placeholder:"Busca inteligente: cursos, habilidades, certificaes...",className:"pl-10 pr-12",value:o,onChange:v=>i(v.target.value),"aria-label":"Buscar cursos com IA"}),o&&c.jsxs(Tt,{variant:"secondary",className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs",children:[c.jsx(dd,{className:"h-2 w-2 mr-1"}),"IA"]})]}),c.jsxs(fB,{children:[c.jsx(hB,{asChild:!0,children:c.jsxs(ze,{variant:"outline",size:"icon",className:"md:hidden",children:[c.jsx(D3,{className:"h-4 w-4","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Abrir filtros"})]})}),c.jsxs(Jb,{children:[c.jsx(e1,{children:c.jsx(t1,{children:"Filtros"})}),c.jsx("div",{className:"mt-6",children:c.jsx(_,{})})]})]})]})}),c.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[c.jsx("aside",{className:"hidden md:block",children:c.jsxs(ot,{className:"p-4 sticky top-4",children:[c.jsx("h2",{className:"font-semibold mb-4",children:"Filtros"}),c.jsx(_,{})]})}),c.jsxs("div",{className:"md:col-span-3 space-y-4",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.length," curso(s) encontrado(s)"]})}),r.length>0?c.jsx("div",{className:"grid sm:grid-cols-2 gap-3 sm:gap-4",children:r.map(v=>c.jsx(Gc,{course:v},v.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(cd,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Nenhum curso encontrado com os filtros selecionados"}),c.jsx(ze,{variant:"outline",onClick:()=>{i(""),d("all"),u("all"),f("all")},children:"Limpar Filtros"})]})]})]})]}),c.jsx(to,{value:"my-courses",children:s.length>0?c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(({course:v,progress:g})=>c.jsx(Gc,{course:v,progress:g,showProgress:!0},v.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Js,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum curso em andamento"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Explore nosso catlogo e comece sua jornada de aprendizado"}),c.jsxs(ze,{onClick:()=>e("/capacitacao"),children:[c.jsx(Cs,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Explorar Cursos"]})]})})]})}),c.jsx(Ds,{role:t.role})]})},sZ=()=>{const{id:e}=pg(),t=sn(),r=ls(),[n,s]=k.useState(null),[a,o]=k.useState(null),[i,l]=k.useState(!1);if(k.useEffect(()=>{if(!r){t("/login");return}const g=co.find(x=>x.id===e);if(g){s(g);const x=mo.find(y=>y.courseId===e&&y.userId===r.id);x&&o(x)}},[e,r,t]),!n)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const d=()=>{qr.success("Inscrio realizada com sucesso!"),l(!1),t("/capacitacao/meus-cursos")},p=()=>{t(`/capacitacao/aprender/${n.id}`)},u=g=>{switch(g){case"ead":return c.jsx($3,{className:"h-4 w-4 sm:h-5 sm:w-5","aria-hidden":"true"});case"presencial":return c.jsx(so,{className:"h-4 w-4 sm:h-5 sm:w-5","aria-hidden":"true"});case"hibrido":return c.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5","aria-hidden":"true"});default:return c.jsx(Cs,{className:"h-4 w-4 sm:h-5 sm:w-5","aria-hidden":"true"})}},m=g=>{switch(g){case"ead":return"EAD - Ensino  Distncia";case"presencial":return"Presencial";case"hibrido":return"Hbrido (EAD + Presencial)";default:return g}},f=g=>{switch(g){case"basico":return"Bsico";case"intermediario":return"Intermedirio";case"avancado":return"Avanado";default:return g}},h=g=>{switch(g){case"basico":return"bg-success/10 text-success border-success/20";case"intermediario":return"bg-warning/10 text-warning border-warning/20";case"avancado":return"bg-destructive/10 text-destructive border-destructive/20";default:return"bg-muted text-muted-foreground"}},_=(g,x)=>x?c.jsx(Nn,{className:"h-4 w-4 text-success","aria-hidden":"true"}):c.jsx(CU,{className:"h-4 w-4 text-muted-foreground","aria-hidden":"true"}),v=g=>{switch(g){case"video":return"Vdeo";case"text":return"Leitura";case"quiz":return"Avaliao";case"document":return"Documento";default:return g}};return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t(-1),"aria-label":"Voltar",className:"flex-shrink-0",children:c.jsx(bd,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t("/candidato/dashboard"),"aria-label":"Ir para o incio",className:"flex-shrink-0",children:c.jsx(am,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}),c.jsx("h1",{className:"text-base sm:text-xl md:text-2xl font-bold truncate",children:"Detalhes do Curso"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[c.jsxs(ot,{className:"overflow-hidden",children:[c.jsxs("div",{className:"relative h-40 sm:h-48 md:h-56 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center",children:[c.jsx(Cs,{className:"h-16 w-16 sm:h-20 sm:w-20 md:h-24 md:w-24 text-primary/40","aria-hidden":"true"}),c.jsx("div",{className:"absolute top-2 sm:top-3 right-2 sm:right-3",children:c.jsx(Tt,{className:h(n.level),children:f(n.level)})})]}),c.jsxs("div",{className:"p-4 sm:p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4 gap-2",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:n.title}),c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-2",children:[c.jsx(Ii,{className:"h-3 w-3 sm:h-4 sm:w-4 flex-shrink-0","aria-hidden":"true"}),c.jsx("span",{className:"text-sm sm:text-base",children:n.instructor})]})]}),c.jsx(ze,{variant:"outline",size:"icon","aria-label":"Compartilhar curso",className:"flex-shrink-0",children:c.jsx(zw,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(na,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Durao"}),c.jsxs("p",{className:"text-xs sm:text-sm font-medium truncate",children:[n.duration," horas"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[u(n.mode),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Modalidade"}),c.jsx("p",{className:"text-xs sm:text-sm font-medium truncate",children:n.mode==="ead"?"EAD":n.mode==="presencial"?"Presencial":"Hbrido"})]})]}),n.mode==="presencial"&&n.location&&c.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[c.jsx(Ai,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Local"}),c.jsx("p",{className:"text-xs sm:text-sm font-medium truncate",children:n.location})]})]}),n.mode==="presencial"&&n.schedule&&c.jsxs("div",{className:"flex items-center gap-2 col-span-2",children:[c.jsx(uh,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0","aria-hidden":"true"}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Horrio"}),c.jsx("p",{className:"text-xs sm:text-sm font-medium truncate",children:n.schedule})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 sm:mb-6",children:[c.jsx(Tt,{variant:"outline",className:"text-xs",children:n.category}),n.tags.map((g,x)=>c.jsx(Tt,{variant:"secondary",className:"text-xs",children:g},x))]}),a&&c.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-primary/5 rounded-lg",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"Seu Progresso"}),c.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[a.progressPercentage,"%"]})]}),c.jsx(Oi,{value:a.progressPercentage,className:"h-2 mb-2"}),c.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:[a.completedLessons.length," de ",n.lessons.length," aulas concludas"]})]}),c.jsx("div",{className:"flex gap-2",children:a?c.jsx(c.Fragment,{children:a.status==="completed"?c.jsx(ze,{className:"flex-1 text-sm sm:text-base",size:"lg",onClick:p,children:"Revisar Curso"}):c.jsxs(ze,{className:"flex-1 text-sm sm:text-base",size:"lg",onClick:p,children:[c.jsx(jU,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),a.status==="enrolled"?"Iniciar Curso":"Continuar Curso"]})}):c.jsx(ze,{className:"flex-1 text-sm sm:text-base",size:"lg",onClick:()=>l(!0),children:"Inscrever-se no Curso"})})]})]}),c.jsxs(ot,{className:"p-4 sm:p-6",children:[c.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Sobre o Curso"}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground leading-relaxed",children:n.description}),c.jsx(Rg,{className:"my-4 sm:my-6"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mb-2",children:[c.jsx("strong",{children:"Modalidade:"})," ",m(n.mode)]}),n.mode!=="ead"&&n.maxStudents&&c.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[c.jsx("strong",{children:"Vagas limitadas:"})," ",n.maxStudents," alunos"]})]})]}),c.jsxs(ot,{className:"p-4 sm:p-6",children:[c.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-4",children:"Contedo do Curso"}),c.jsx("div",{className:"space-y-2",children:n.lessons.map((g,x)=>{const y=(a==null?void 0:a.completedLessons.includes(g.id))||!1;return c.jsxs("div",{className:`flex items-center gap-3 p-3 sm:p-4 rounded-lg border transition-colors ${y?"bg-success/5 border-success/20":"bg-muted/30"}`,children:[c.jsx("div",{className:"flex-shrink-0",children:_(g.type,y)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:["Aula ",x+1]}),c.jsx(Tt,{variant:"outline",className:"text-[10px] sm:text-xs",children:v(g.type)})]}),c.jsx("h4",{className:"text-sm sm:text-base font-medium mb-1 truncate",children:g.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:g.description})]}),c.jsxs("div",{className:"flex-shrink-0 text-xs sm:text-sm text-muted-foreground",children:[g.duration," min"]})]},g.id)})})]})]}),c.jsx(Zb,{open:i,onOpenChange:l,children:c.jsxs(Dg,{className:"max-w-md",children:[c.jsxs(Og,{children:[c.jsx(Lg,{children:"Confirmar Inscrio"}),c.jsxs(pB,{children:["Voc est prestes a se inscrever no curso ",c.jsx("strong",{children:n.title}),"."]})]}),c.jsxs("div",{className:"py-4 space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Instrutor:"})," ",n.instructor]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Durao:"})," ",n.duration," horas"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Modalidade:"})," ",m(n.mode)]}),n.mode!=="ead"&&n.schedule&&c.jsxs("p",{children:[c.jsx("strong",{children:"Horrio:"})," ",n.schedule]})]}),c.jsxs(Fg,{children:[c.jsx(ze,{variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),c.jsx(ze,{onClick:d,children:"Confirmar Inscrio"})]})]})}),c.jsx(Ds,{role:(r==null?void 0:r.role)||"candidate"})]})},aZ=()=>{const{id:e}=pg(),t=sn(),r=ls(),[n,s]=k.useState(null),[a,o]=k.useState(null),[i,l]=k.useState(0),[d,p]=k.useState(!1);if(k.useEffect(()=>{if(!r){t("/login");return}const C=co.find(I=>I.id===e);if(!C){t("/capacitacao");return}s(C);const E=mo.find(I=>I.courseId===e&&I.userId===r.id);if(!E){t(`/capacitacao/curso/${e}`);return}o(E);const P=C.lessons.findIndex(I=>!E.completedLessons.includes(I.id));l(P>=0?P:0)},[e,r,t]),!n||!a)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const u=n.lessons[i],m=a.completedLessons.includes(u.id),f=i===n.lessons.length-1,h=i===0,_=()=>{m||qr.success("Aula concluda!")},v=()=>{f?a.status!=="completed"&&(qr.success("Parabns! Voc concluiu o curso!"),t("/capacitacao/certificados")):(l(i+1),window.scrollTo({top:0,behavior:"smooth"}))},g=()=>{h||(l(i-1),window.scrollTo({top:0,behavior:"smooth"}))},x=C=>{l(C),p(!1),window.scrollTo({top:0,behavior:"smooth"})},y=C=>{switch(C){case"video":return c.jsx(JP,{className:"h-4 w-4","aria-hidden":"true"});case"text":return c.jsx(sm,{className:"h-4 w-4","aria-hidden":"true"});case"quiz":return c.jsx(ZP,{className:"h-4 w-4","aria-hidden":"true"});case"document":return c.jsx(Ru,{className:"h-4 w-4","aria-hidden":"true"});default:return c.jsx(sm,{className:"h-4 w-4","aria-hidden":"true"})}},w=C=>{switch(C){case"video":return"Vdeo";case"text":return"Leitura";case"quiz":return"Avaliao";case"document":return"Documento";default:return C}},b=()=>{switch(u.type){case"video":return c.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center",children:c.jsxs("div",{className:"text-center text-white",children:[c.jsx(JP,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),c.jsx("p",{className:"text-sm opacity-75",children:"Player de vdeo ser carregado aqui"}),c.jsx("p",{className:"text-xs opacity-50 mt-2",children:u.content})]})});case"text":return c.jsx(ot,{className:"p-4 sm:p-6 prose prose-sm sm:prose max-w-none",children:c.jsx("div",{dangerouslySetInnerHTML:{__html:u.content}})});case"quiz":return c.jsx(ot,{className:"p-4 sm:p-6",children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx(ZP,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Avaliao"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Teste seus conhecimentos sobre o contedo estudado"}),c.jsx(ze,{size:"lg",children:"Iniciar Avaliao"})]})});case"document":return c.jsx(ot,{className:"p-4 sm:p-6",children:c.jsxs("div",{className:"text-center py-8",children:[c.jsx(Ru,{className:"h-16 w-16 mx-auto mb-4 text-primary"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Material para Download"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Baixe o material de apoio para acompanhar a aula"}),c.jsxs(ze,{size:"lg",children:[c.jsx(Ru,{className:"h-4 w-4 mr-2"}),"Baixar Material"]})]})});default:return null}};return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsxs("header",{className:"bg-card border-b py-3 px-3 sm:px-4 md:px-6 sticky top-0 z-40",children:[c.jsxs("div",{className:"container mx-auto flex items-center justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t(-1),"aria-label":"Voltar",className:"h-8 w-8 sm:h-9 sm:w-9",children:c.jsx(bd,{className:"h-4 w-4"})}),c.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>t("/candidato/dashboard"),"aria-label":"Ir para o incio",className:"h-8 w-8 sm:h-9 sm:w-9",children:c.jsx(am,{className:"h-4 w-4"})})]}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("h1",{className:"text-sm sm:text-base font-semibold truncate",children:n.title}),c.jsxs("p",{className:"text-xs text-muted-foreground hidden sm:block truncate",children:["Aula ",i+1," de ",n.lessons.length]})]})]}),c.jsx(ze,{variant:"outline",size:"sm",onClick:()=>p(!d),className:"lg:hidden flex-shrink-0",children:d?c.jsx(Ol,{className:"h-4 w-4"}):"Aulas"})]}),c.jsx("div",{className:"container mx-auto mt-3",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Oi,{value:a.progressPercentage,className:"h-2 flex-1"}),c.jsxs("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap",children:[a.progressPercentage,"%"]})]})})]}),c.jsxs("div",{className:"container mx-auto flex",children:[c.jsx("aside",{className:`${d?"fixed inset-y-0 left-0 z-50 w-full sm:w-80":"hidden"} lg:block lg:static lg:w-80 bg-card border-r overflow-y-auto`,style:{maxHeight:"calc(100vh - 80px)"},children:c.jsxs("div",{className:"p-3 sm:p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-sm font-semibold",children:"Contedo do Curso"}),c.jsx(ze,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>p(!1),children:c.jsx(Ol,{className:"h-4 w-4"})})]}),n.lessons.map((C,E)=>{const P=a.completedLessons.includes(C.id),I=E===i;return c.jsx("button",{onClick:()=>x(E),className:`w-full text-left p-3 rounded-lg transition-colors ${I?"bg-primary text-primary-foreground":P?"bg-success/10 hover:bg-success/20":"bg-muted/50 hover:bg-muted"}`,children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("div",{className:"flex-shrink-0 mt-0.5",children:P?c.jsx(Nn,{className:"h-4 w-4 text-success","aria-hidden":"true"}):y(C.type)}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsxs("span",{className:"text-xs opacity-75",children:["Aula ",E+1]}),c.jsx(Tt,{variant:I?"secondary":"outline",className:"text-xs",children:w(C.type)})]}),c.jsx("p",{className:"text-sm font-medium line-clamp-2",children:C.title}),c.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[C.duration," min"]})]})]})},C.id)})]})}),c.jsxs("main",{className:"flex-1 p-3 sm:p-4 md:p-6 space-y-4 sm:space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Tt,{variant:"outline",className:"text-xs",children:w(u.type)}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["Aula ",i+1," de ",n.lessons.length]})]}),c.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-bold mb-2",children:u.title}),c.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:u.description})]}),c.jsx("div",{children:b()}),c.jsx(Rg,{}),c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[c.jsxs(ze,{variant:"outline",onClick:g,disabled:h,className:"order-2 sm:order-1",children:[c.jsx(_U,{className:"h-4 w-4 mr-2"}),"Aula Anterior"]}),!m&&c.jsxs(ze,{variant:"outline",onClick:_,className:"order-1 sm:order-2",children:[c.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Marcar como Concluda"]}),c.jsxs(ze,{onClick:v,className:"order-3",children:[f?"Concluir Curso":"Prxima Aula",!f&&c.jsx(xU,{className:"h-4 w-4 ml-2"})]})]})]})]}),d&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)})]})},oZ=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]),[s,a]=k.useState([]),[o,i]=k.useState([]);if(k.useEffect(()=>{if(!t){e("/login");return}const p=mo.filter(u=>u.userId===t.id).map(u=>({course:co.find(f=>f.id===u.courseId),progress:u})).filter(u=>u.course);n(p),a(p.filter(u=>u.progress.status==="in_progress"||u.progress.status==="enrolled")),i(p.filter(u=>u.progress.status==="completed"))},[t,e]),!t)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const l=({icon:d,title:p,description:u,actionText:m,actionOnClick:f})=>c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(d,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:p}),c.jsx("p",{className:"text-muted-foreground mb-4",children:u}),m&&f&&c.jsxs(ze,{onClick:f,children:[c.jsx(Cs,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),m]})]});return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Js,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary","aria-hidden":"true"}),c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Meus Cursos"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Acompanhe seu progresso e continue aprendendo"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-6","data-aos":"fade-up","data-aos-duration":"800",children:[c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(Cs,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary mb-1 sm:mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Total"})]})}),c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(na,{className:"h-5 w-5 sm:h-6 sm:w-6 text-warning mb-1 sm:mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:s.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Em Andamento"})]})}),c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(Nn,{className:"h-5 w-5 sm:h-6 sm:w-6 text-success mb-1 sm:mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:o.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Concludos"})]})})]}),c.jsxs(Kb,{defaultValue:"all",className:"w-full",children:[c.jsxs(kg,{className:"grid w-full grid-cols-3 mb-6",children:[c.jsxs(eo,{value:"all",className:"text-xs sm:text-sm",children:["Todos (",r.length,")"]}),c.jsxs(eo,{value:"in-progress",className:"text-xs sm:text-sm",children:["Em Andamento (",s.length,")"]}),c.jsxs(eo,{value:"completed",className:"text-xs sm:text-sm",children:["Concludos (",o.length,")"]})]}),c.jsx(to,{value:"all",children:r.length>0?c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:r.map(({course:d,progress:p})=>c.jsx(Gc,{course:d,progress:p,showProgress:!0},d.id))}):c.jsx(l,{icon:Js,title:"Nenhum curso em andamento",description:"Explore nosso catlogo e comece sua jornada de aprendizado",actionText:"Explorar Cursos",actionOnClick:()=>e("/capacitacao")})}),c.jsx(to,{value:"in-progress",children:s.length>0?c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:s.map(({course:d,progress:p})=>c.jsx(Gc,{course:d,progress:p,showProgress:!0},d.id))}):c.jsx(l,{icon:na,title:"Nenhum curso em andamento",description:"Voc no tem cursos em andamento no momento",actionText:"Explorar Cursos",actionOnClick:()=>e("/capacitacao")})}),c.jsx(to,{value:"completed",children:o.length>0?c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:o.map(({course:d,progress:p})=>c.jsx(Gc,{course:d,progress:p,showProgress:!0},d.id))}):c.jsx(l,{icon:Nn,title:"Nenhum curso concludo",description:"Complete seus cursos para receber certificados"})})]})]}),c.jsx(Ds,{role:t.role})]})},iZ=[{id:"cert-001",userId:"c001",courseId:"course-1",courseTitle:"NR-35: Trabalho em Altura - Bsico",issuedAt:"2025-01-20T17:00:00Z",certificateNumber:"PECEM-NR35-2025-001",downloadUrl:"/certificates/pecem-nr35-2025-001.pdf",validUntil:"2027-01-20",hours:8,grade:95},{id:"cert-002",userId:"c002",courseId:"course-3",courseTitle:"Acessibilidade e Incluso no Ambiente Porturio",issuedAt:"2025-01-21T16:00:00Z",certificateNumber:"PECEM-INC-2025-001",downloadUrl:"/certificates/pecem-inc-2025-001.pdf",hours:4,grade:100},{id:"cert-003",userId:"c003",courseId:"course-2",courseTitle:"Operao de Empilhadeira",issuedAt:"2025-01-17T23:00:00Z",certificateNumber:"PECEM-EMP-2025-001",downloadUrl:"/certificates/pecem-emp-2025-001.pdf",validUntil:"2027-01-17",hours:16,grade:88}],lZ=()=>{const e=sn(),t=ls(),[r,n]=k.useState([]);if(k.useEffect(()=>{if(!t){e("/login");return}const o=iZ.filter(i=>i.userId===t.id);n(o)},[t,e]),!t)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Carregando..."});const s=o=>{qr.success(`Baixando certificado ${o.certificateNumber}`)},a=o=>{qr.success("Link copiado para a rea de transferncia!")};return c.jsxs("div",{className:"min-h-screen bg-background pb-20 md:pb-8",children:[c.jsx("header",{className:"bg-card border-b py-3 sm:py-4 px-3 sm:px-4 md:px-6",children:c.jsxs("div",{className:"container mx-auto",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ka,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary","aria-hidden":"true"}),c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:"Meus Certificados"})]}),c.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Seus certificados de concluso de cursos"})]})}),c.jsxs("main",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6","data-aos":"fade-up","data-aos-duration":"800",children:[c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(Ka,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary mb-1 sm:mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.length}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Certificados"})]})}),c.jsx(ot,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(na,{className:"h-5 w-5 sm:h-6 sm:w-6 text-success mb-1 sm:mb-2","aria-hidden":"true"}),c.jsxs("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:[r.reduce((o,i)=>o+i.hours,0),"h"]}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Horas Estudadas"})]})}),c.jsx(ot,{className:"p-3 sm:p-4 col-span-2",children:c.jsxs("div",{className:"flex flex-col items-center text-center",children:[c.jsx(Ka,{className:"h-5 w-5 sm:h-6 sm:w-6 text-warning mb-1 sm:mb-2","aria-hidden":"true"}),c.jsx("div",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:r.length>0?(r.reduce((o,i)=>o+(i.grade||0),0)/r.length).toFixed(1):"0"}),c.jsx("div",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Nota Mdia"})]})})]}),r.length>0?c.jsx("div",{className:"space-y-3 sm:space-y-4",children:r.map(o=>c.jsx(ot,{className:"overflow-hidden","data-aos":"fade-up","data-aos-duration":"800",children:c.jsx("div",{className:"p-4 sm:p-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("div",{className:"flex-shrink-0 w-full sm:w-32 h-32 bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg flex items-center justify-center",children:c.jsx(Ka,{className:"h-12 w-12 sm:h-16 sm:w-16 text-primary","aria-hidden":"true"})}),c.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[c.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:o.courseTitle}),c.jsx(Tt,{variant:"secondary",className:"text-xs",children:"Concludo"})]}),c.jsxs("div",{className:"space-y-1 text-xs sm:text-sm text-muted-foreground",children:[c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(uh,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsxs("span",{children:["Emitido em ",xd(new Date(o.issuedAt),"dd 'de' MMMM 'de' yyyy",{locale:r1})]})]}),c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(na,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsxs("span",{children:["Carga horria: ",o.hours," horas"]})]}),o.grade&&c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(Ka,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsxs("span",{children:["Nota final: ",o.grade]})]}),o.validUntil&&c.jsxs("p",{className:"flex items-center gap-2",children:[c.jsx(uh,{className:"h-3 w-3 sm:h-4 sm:w-4","aria-hidden":"true"}),c.jsxs("span",{children:["Vlido at ",xd(new Date(o.validUntil),"dd/MM/yyyy")]})]})]})]}),c.jsx("div",{className:"pt-2",children:c.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["N do Certificado: ",c.jsx("span",{className:"font-mono font-medium",children:o.certificateNumber})]})}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ze,{size:"sm",onClick:()=>s(o),className:"text-xs sm:text-sm",children:[c.jsx(Ru,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Baixar PDF"]}),c.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>a(),className:"text-xs sm:text-sm",children:[c.jsx(zw,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-2"}),"Compartilhar"]})]})]})]})})},o.id))}):c.jsxs(ot,{className:"p-8 text-center",children:[c.jsx(Ka,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground","aria-hidden":"true"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum certificado ainda"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Complete cursos para receber certificados de concluso"}),c.jsx(ze,{onClick:()=>e("/capacitacao"),children:"Explorar Cursos"})]})]}),c.jsx(Ds,{role:t.role})]})},cZ=new uH,dZ=()=>c.jsx(pH,{client:cZ,children:c.jsx(E6,{attribute:"class",defaultTheme:"light",enableSystem:!0,children:c.jsxs(bo,{children:[c.jsx(b6,{}),c.jsx(n8,{}),c.jsx(vq,{}),c.jsx(dq,{children:c.jsxs(tq,{children:[c.jsx(cn,{path:"/",element:c.jsx(Sq,{})}),c.jsx(cn,{path:"/login",element:c.jsx($q,{})}),c.jsx(cn,{path:"/cadastro",element:c.jsx(k9,{})}),c.jsx(cn,{path:"/sobre",element:c.jsx(j9,{})}),c.jsx(cn,{path:"/processar-logo",element:c.jsx(bQ,{})}),c.jsx(cn,{path:"/candidato/dashboard",element:c.jsx(ZX,{})}),c.jsx(cn,{path:"/candidato/perfil",element:c.jsx(fY,{})}),c.jsx(cn,{path:"/candidato/vagas",element:c.jsx(xY,{})}),c.jsx(cn,{path:"/candidato/vaga/:id",element:c.jsx(YY,{})}),c.jsx(cn,{path:"/candidato/candidaturas",element:c.jsx(ZY,{})}),c.jsx(cn,{path:"/empresa/dashboard",element:c.jsx(JY,{})}),c.jsx(cn,{path:"/empresa/candidatos",element:c.jsx(eZ,{})}),c.jsx(cn,{path:"/empresa/vaga/:id/candidatos",element:c.jsx(tZ,{})}),c.jsx(cn,{path:"/empresa/vagas",element:c.jsx(rZ,{})}),c.jsx(cn,{path:"/capacitacao",element:c.jsx(nZ,{})}),c.jsx(cn,{path:"/capacitacao/curso/:id",element:c.jsx(sZ,{})}),c.jsx(cn,{path:"/capacitacao/aprender/:id",element:c.jsx(aZ,{})}),c.jsx(cn,{path:"/capacitacao/meus-cursos",element:c.jsx(oZ,{})}),c.jsx(cn,{path:"/capacitacao/certificados",element:c.jsx(lZ,{})}),c.jsx(cn,{path:"*",element:c.jsx(A9,{})})]})})]})})});var vB={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(VB,function(){return function(r){function n(a){if(s[a])return s[a].exports;var o=s[a]={exports:{},id:a,loaded:!1};return r[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var s={};return n.m=r,n.c=s,n.p="dist/",n(0)}([function(r,n,s){function a(U){return U&&U.__esModule?U:{default:U}}var o=Object.assign||function(U){for(var q=1;q<arguments.length;q++){var X=arguments[q];for(var Z in X)Object.prototype.hasOwnProperty.call(X,Z)&&(U[Z]=X[Z])}return U},i=s(1),l=(a(i),s(6)),d=a(l),p=s(7),u=a(p),m=s(8),f=a(m),h=s(9),_=a(h),v=s(10),g=a(v),x=s(11),y=a(x),w=s(14),b=a(w),C=[],E=!1,P={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},I=function(){var U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(U&&(E=!0),E)return C=(0,y.default)(C,P),(0,g.default)(C,P.once),C},$=function(){C=(0,b.default)(),I()},z=function(){C.forEach(function(U,q){U.node.removeAttribute("data-aos"),U.node.removeAttribute("data-aos-easing"),U.node.removeAttribute("data-aos-duration"),U.node.removeAttribute("data-aos-delay")})},D=function(U){return U===!0||U==="mobile"&&_.default.mobile()||U==="phone"&&_.default.phone()||U==="tablet"&&_.default.tablet()||typeof U=="function"&&U()===!0},B=function(U){P=o(P,U),C=(0,b.default)();var q=document.all&&!window.atob;return D(P.disable)||q?z():(P.disableMutationObserver||f.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),P.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",P.easing),document.querySelector("body").setAttribute("data-aos-duration",P.duration),document.querySelector("body").setAttribute("data-aos-delay",P.delay),P.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?I(!0):P.startEvent==="load"?window.addEventListener(P.startEvent,function(){I(!0)}):document.addEventListener(P.startEvent,function(){I(!0)}),window.addEventListener("resize",(0,u.default)(I,P.debounceDelay,!0)),window.addEventListener("orientationchange",(0,u.default)(I,P.debounceDelay,!0)),window.addEventListener("scroll",(0,d.default)(function(){(0,g.default)(C,P.once)},P.throttleDelay)),P.disableMutationObserver||f.default.ready("[data-aos]",$),C)};r.exports={init:B,refresh:I,refreshHard:$}},function(r,n){},,,,,function(r,n){(function(s){function a(D,B,U){function q(xe){var be=Q,Ee=ce;return Q=ce=void 0,Me=xe,me=D.apply(Ee,be)}function X(xe){return Me=xe,we=setTimeout(ee,B),te?q(xe):me}function Z(xe){var be=xe-Ne,Ee=xe-Me,ye=B-be;return F?$(ye,ne-Ee):ye}function K(xe){var be=xe-Ne,Ee=xe-Me;return Ne===void 0||be>=B||be<0||F&&Ee>=ne}function ee(){var xe=z();return K(xe)?oe(xe):void(we=setTimeout(ee,Z(xe)))}function oe(xe){return we=void 0,ue&&Q?q(xe):(Q=ce=void 0,me)}function ae(){we!==void 0&&clearTimeout(we),Me=0,Q=Ne=ce=we=void 0}function G(){return we===void 0?me:oe(z())}function R(){var xe=z(),be=K(xe);if(Q=arguments,ce=this,Ne=xe,be){if(we===void 0)return X(Ne);if(F)return we=setTimeout(ee,B),q(Ne)}return we===void 0&&(we=setTimeout(ee,B)),me}var Q,ce,ne,me,we,Ne,Me=0,te=!1,F=!1,ue=!0;if(typeof D!="function")throw new TypeError(m);return B=p(B)||0,i(U)&&(te=!!U.leading,F="maxWait"in U,ne=F?I(p(U.maxWait)||0,B):ne,ue="trailing"in U?!!U.trailing:ue),R.cancel=ae,R.flush=G,R}function o(D,B,U){var q=!0,X=!0;if(typeof D!="function")throw new TypeError(m);return i(U)&&(q="leading"in U?!!U.leading:q,X="trailing"in U?!!U.trailing:X),a(D,B,{leading:q,maxWait:B,trailing:X})}function i(D){var B=typeof D>"u"?"undefined":u(D);return!!D&&(B=="object"||B=="function")}function l(D){return!!D&&(typeof D>"u"?"undefined":u(D))=="object"}function d(D){return(typeof D>"u"?"undefined":u(D))=="symbol"||l(D)&&P.call(D)==h}function p(D){if(typeof D=="number")return D;if(d(D))return f;if(i(D)){var B=typeof D.valueOf=="function"?D.valueOf():D;D=i(B)?B+"":B}if(typeof D!="string")return D===0?D:+D;D=D.replace(_,"");var U=g.test(D);return U||x.test(D)?y(D.slice(2),U?2:8):v.test(D)?f:+D}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},m="Expected a function",f=NaN,h="[object Symbol]",_=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,x=/^0o[0-7]+$/i,y=parseInt,w=(typeof s>"u"?"undefined":u(s))=="object"&&s&&s.Object===Object&&s,b=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,C=w||b||Function("return this")(),E=Object.prototype,P=E.toString,I=Math.max,$=Math.min,z=function(){return C.Date.now()};r.exports=o}).call(n,function(){return this}())},function(r,n){(function(s){function a(z,D,B){function U(ue){var xe=R,be=Q;return R=Q=void 0,Ne=ue,ne=z.apply(be,xe)}function q(ue){return Ne=ue,me=setTimeout(K,D),Me?U(ue):ne}function X(ue){var xe=ue-we,be=ue-Ne,Ee=D-xe;return te?I(Ee,ce-be):Ee}function Z(ue){var xe=ue-we,be=ue-Ne;return we===void 0||xe>=D||xe<0||te&&be>=ce}function K(){var ue=$();return Z(ue)?ee(ue):void(me=setTimeout(K,X(ue)))}function ee(ue){return me=void 0,F&&R?U(ue):(R=Q=void 0,ne)}function oe(){me!==void 0&&clearTimeout(me),Ne=0,R=we=Q=me=void 0}function ae(){return me===void 0?ne:ee($())}function G(){var ue=$(),xe=Z(ue);if(R=arguments,Q=this,we=ue,xe){if(me===void 0)return q(we);if(te)return me=setTimeout(K,D),U(we)}return me===void 0&&(me=setTimeout(K,D)),ne}var R,Q,ce,ne,me,we,Ne=0,Me=!1,te=!1,F=!0;if(typeof z!="function")throw new TypeError(u);return D=d(D)||0,o(B)&&(Me=!!B.leading,te="maxWait"in B,ce=te?P(d(B.maxWait)||0,D):ce,F="trailing"in B?!!B.trailing:F),G.cancel=oe,G.flush=ae,G}function o(z){var D=typeof z>"u"?"undefined":p(z);return!!z&&(D=="object"||D=="function")}function i(z){return!!z&&(typeof z>"u"?"undefined":p(z))=="object"}function l(z){return(typeof z>"u"?"undefined":p(z))=="symbol"||i(z)&&E.call(z)==f}function d(z){if(typeof z=="number")return z;if(l(z))return m;if(o(z)){var D=typeof z.valueOf=="function"?z.valueOf():z;z=o(D)?D+"":D}if(typeof z!="string")return z===0?z:+z;z=z.replace(h,"");var B=v.test(z);return B||g.test(z)?x(z.slice(2),B?2:8):_.test(z)?m:+z}var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},u="Expected a function",m=NaN,f="[object Symbol]",h=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,g=/^0o[0-7]+$/i,x=parseInt,y=(typeof s>"u"?"undefined":p(s))=="object"&&s&&s.Object===Object&&s,w=(typeof self>"u"?"undefined":p(self))=="object"&&self&&self.Object===Object&&self,b=y||w||Function("return this")(),C=Object.prototype,E=C.toString,P=Math.max,I=Math.min,$=function(){return b.Date.now()};r.exports=a}).call(n,function(){return this}())},function(r,n){function s(p){var u=void 0,m=void 0;for(u=0;u<p.length;u+=1)if(m=p[u],m.dataset&&m.dataset.aos||m.children&&s(m.children))return!0;return!1}function a(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function o(){return!!a()}function i(p,u){var m=window.document,f=a(),h=new f(l);d=u,h.observe(m.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function l(p){p&&p.forEach(function(u){var m=Array.prototype.slice.call(u.addedNodes),f=Array.prototype.slice.call(u.removedNodes),h=m.concat(f);if(s(h))return d()})}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){};n.default={isSupported:o,ready:i}},function(r,n){function s(m,f){if(!(m instanceof f))throw new TypeError("Cannot call a class as a function")}function a(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function m(f,h){for(var _=0;_<h.length;_++){var v=h[_];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,h,_){return h&&m(f.prototype,h),_&&m(f,_),f}}(),i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,l=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,d=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,p=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,u=function(){function m(){s(this,m)}return o(m,[{key:"phone",value:function(){var f=a();return!(!i.test(f)&&!l.test(f.substr(0,4)))}},{key:"mobile",value:function(){var f=a();return!(!d.test(f)&&!p.test(f.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),m}();n.default=new u},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(o,i,l){var d=o.node.getAttribute("data-aos-once");i>o.position?o.node.classList.add("aos-animate"):typeof d<"u"&&(d==="false"||!l&&d!=="true")&&o.node.classList.remove("aos-animate")},a=function(o,i){var l=window.pageYOffset,d=window.innerHeight;o.forEach(function(p,u){s(p,d+l,i)})};n.default=a},function(r,n,s){function a(d){return d&&d.__esModule?d:{default:d}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),i=a(o),l=function(d,p){return d.forEach(function(u,m){u.node.classList.add("aos-init"),u.position=(0,i.default)(u.node,p.offset)}),d};n.default=l},function(r,n,s){function a(d){return d&&d.__esModule?d:{default:d}}Object.defineProperty(n,"__esModule",{value:!0});var o=s(13),i=a(o),l=function(d,p){var u=0,m=0,f=window.innerHeight,h={offset:d.getAttribute("data-aos-offset"),anchor:d.getAttribute("data-aos-anchor"),anchorPlacement:d.getAttribute("data-aos-anchor-placement")};switch(h.offset&&!isNaN(h.offset)&&(m=parseInt(h.offset)),h.anchor&&document.querySelectorAll(h.anchor)&&(d=document.querySelectorAll(h.anchor)[0]),u=(0,i.default)(d).top,h.anchorPlacement){case"top-bottom":break;case"center-bottom":u+=d.offsetHeight/2;break;case"bottom-bottom":u+=d.offsetHeight;break;case"top-center":u+=f/2;break;case"bottom-center":u+=f/2+d.offsetHeight;break;case"center-center":u+=f/2+d.offsetHeight/2;break;case"top-top":u+=f;break;case"bottom-top":u+=d.offsetHeight+f;break;case"center-top":u+=d.offsetHeight/2+f}return h.anchorPlacement||h.offset||isNaN(p)||(m=p),u+m};n.default=l},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(a){for(var o=0,i=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)o+=a.offsetLeft-(a.tagName!="BODY"?a.scrollLeft:0),i+=a.offsetTop-(a.tagName!="BODY"?a.scrollTop:0),a=a.offsetParent;return{top:i,left:o}};n.default=s},function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var s=function(a){return a=a||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(a,function(o){return{node:o}})};n.default=s}])})})(vB);var uZ=vB.exports;const mZ=zy(uZ);mZ.init({duration:1200,once:!0,easing:"ease-in-out-cubic",offset:50,disable:window.matchMedia("(prefers-reduced-motion: reduce)").matches});t3(document.getElementById("root")).render(c.jsx(dZ,{}));
